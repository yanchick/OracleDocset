<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2365"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_STREAMS_TABLESPACE_ADM"></a><title>DBMS_STREAMS_TABLESPACE_ADM</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:53Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_streams_msg.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_sync_refresh.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">168/290</span> <!-- End Header -->
<div id="ARPLS551" class="chapter"><a id="CDEHJEHA"></a> <a id="i1006751"></a>
<h1 class="chapter"><span class="secnum">164</span> DBMS_STREAMS_TABLESPACE_ADM</h1>
<p><a id="sthref11729"></a>The <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package, one of a set of Oracle Streams packages, provides administrative interfaces for copying tablespaces between databases and moving tablespaces from one database to another. This package uses transportable tablespaces, Data Pump, the <code dir="ltr">DBMS_FILE_TRANSFER</code> package, and the <code dir="ltr">DBMS_FILE_GROUP</code> package.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CDECJEBH">Using DBMS_STREAMS_TABLESPACE_ADM</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#i1006986">Data Structures</a></p>
</li>
<li>
<p><a href="#i1000746">Summary of DBMS_STREAMS_TABLESPACE_ADM Subprograms</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS159" href="../STRMS/strms_ipro.htm#STRMS159"><span class="italic">Oracle Streams Concepts and Administration</span></a> and <a class="olink STREP" href="../STREP/toc.htm"><span class="italic">Oracle Streams Replication Administrator&#39;s Guide</span></a> for more information about this package and Oracle Streams</div>
<div class="refentry"><a id="CDECJEBH"></a>
<div id="ARPLS68829" class="refsect1">
<h2 class="refsect1">Using DBMS_STREAMS_TABLESPACE_ADM<a id="sthref11730"></a></h2>
<p>This section contains topics which relate to using the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package.</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a href="#BJEDFAGE">Security Model</a></p>
</li>
</ul>
<div id="ARPLS68830" class="refsect2"><a id="i1006970"></a>
<h3 class="refsect2">Overview</h3>
<p>Either a simple tablespace or a self-contained tablespace set must be specified in each procedure in this package.</p>
<p>A <span class="bold">self-contained tablespace</span> has no references from the tablespace pointing outside of the tablespace. For example, if an index in the tablespace is for a table in a different tablespace, then the tablespace is not self-contained. A <span class="bold">simple tablespace</span> is a self-contained tablespace that uses only one datafile.</p>
<p>A simple tablespace must be specified in the following procedures:</p>
<ul>
<li>
<p><a href="#i1000780">ATTACH_SIMPLE_TABLESPACE Procedure</a></p>
</li>
<li>
<p><a href="#i1000996">CLONE_SIMPLE_TABLESPACE Procedure</a></p>
</li>
<li>
<p><a href="#i1000998">DETACH_SIMPLE_TABLESPACE Procedure</a></p>
</li>
<li>
<p><a href="#i1001000">PULL_SIMPLE_TABLESPACE Procedure</a></p>
</li>
</ul>
<p>A <span class="bold">self-contained tablespace set</span> has no references from inside the set of tablespaces pointing outside of the set of tablespaces. For example, if a partitioned table is partially contained in the set of tablespaces, then the set of tablespaces is not self-contained.</p>
<p>A self-contained tablespace set must be specified in the following procedures:</p>
<ul>
<li>
<p><a href="#i1000995">ATTACH_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="#i1000997">CLONE_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="#i1007519">DETACH_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="#i1003360">PULL_TABLESPACES Procedure</a></p>
</li>
</ul>
<p>To determine whether a set of tablespaces is self-contained, use the <code dir="ltr">TRANSPORT_SET_CHECK</code> procedure in the Oracle supplied package <code dir="ltr">DBMS_TTS</code>.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink ADMIN011" href="../ADMIN/tspaces.htm#ADMIN011"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about self-contained tablespaces and tablespace sets</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS73194" class="refsect2"><a id="BJEDFAGE"></a>
<h3 class="refsect2">Security Model</h3>
<p>Security on this package can be controlled in either of the following ways:</p>
<ul>
<li>
<p>Granting <code dir="ltr">EXECUTE</code> on this package to selected users or roles.</p>
</li>
<li>
<p>Granting <code dir="ltr">EXECUTE_CATALOG_ROLE</code> to selected users or roles.</p>
</li>
</ul>
<p>If subprograms in the package are run from within a stored procedure, then the user who runs the subprograms must be granted <code dir="ltr">EXECUTE</code> privilege on the package directly. It cannot be granted through a role.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1006986"></a>
<div id="ARPLS68831" class="refsect1">
<h2 class="refsect1">Data Structures</h2>
<p>The <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package defines <code dir="ltr">RECORD</code> types and <code dir="ltr">TABLE</code> types.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11731"></a>RECORD Types</p>
<ul>
<li>
<p><a href="#i1002242">FILE Record Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11732"></a>TABLE Types</p>
<ul>
<li>
<p><a href="#i1002207">DIRECTORY_OBJECT_SET Table Type</a></p>
</li>
<li>
<p><a href="#i1002243">FILE_SET Table Type</a></p>
</li>
<li>
<p><a href="#CDEGDGCI">TABLESPACE_SET Table Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS555" class="refsect2"><a id="i1002207"></a>
<h3 class="refsect2">DIRECTORY_OBJECT_SET Table Type<a id="sthref11733"></a></h3>
<p>Contains the names of one or more directory objects. Each name must be a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
<div id="ARPLS68832" class="refsect3"><a id="sthref11734"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE DIRECTORY_OBJECT_SET IS TABLE OF VARCHAR2(32) 
  INDEX BY BINARY_INTEGER;
</pre></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68833" class="refsect2"><a id="i1002242"></a>
<h3 class="refsect2">FILE Record Type<a id="sthref11735"></a></h3>
<p>Contains the directory object associated with a directory and the name of the file in the directory.</p>
<div id="ARPLS68834" class="refsect3"><a id="sthref11736"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE FILE IS RECORD(
   directory_object VARCHAR2(32),
   file_name        VARCHAR2(4000));
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS68835" class="refsect3"><a id="sthref11737"></a>
<h4 class="refsect3">Fields</h4>
<div id="ARPLS68836" class="tblformal">
<p class="titleintable"><a id="sthref11738"></a><a id="sthref11739"></a>Table 164-1 FILE Fields</p>
<table class="cellalignment4330" title="FILE Fields" summary="This table describes fields of the Record type FILEand briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Field</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>The name of a directory object. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">file_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>The name of the file in the corresponding directory associated with the directory object</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68837" class="refsect2"><a id="i1002243"></a>
<h3 class="refsect2">FILE_SET Table Type<a id="sthref11740"></a></h3>
<p>Contains one or more files.</p>
<div id="ARPLS68838" class="refsect3"><a id="sthref11741"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE FILE_SET IS TABLE OF FILE 
   INDEX BY BINARY_INTEGER;
</pre></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68839" class="refsect2"><a id="CDEGDGCI"></a>
<h3 class="refsect2">TABLESPACE_SET Table Type<a id="sthref11742"></a></h3>
<p>Contains the names of one or more tablespaces.</p>
<div id="ARPLS68840" class="refsect3"><a id="sthref11743"></a>
<h4 class="refsect3">Syntax</h4>
<pre dir="ltr">TYPE TABLESPACE_SET IS TABLE OF VARCHAR2(32) 
   INDEX BY BINARY_INTEGER;
</pre></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1000746"></a>
<div id="ARPLS556" class="refsect1">
<h2 class="refsect1">Summary of DBMS_STREAMS_TABLESPACE_ADM Subprograms</h2>
<div id="ARPLS68841" class="tblformal">
<p class="titleintable"><a id="sthref11744"></a><a id="sthref11745"></a>Table 164-2 DBMS_STREAMS_TABLESPACE_ADM Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_STREAMS_TABLESPACE_ADM Package Subprograms" summary="This table lists the DBMS_STREAMS_TABLESPACE_ADM subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><a href="#i1000780">ATTACH_SIMPLE_TABLESPACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Uses Data Pump to import a simple tablespace previously exported using the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package or Data Pump export</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t5" headers="r1c1-t5">
<p><a href="#i1000995">ATTACH_TABLESPACES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t5 r1c2-t5">
<p>Uses Data Pump to import a self-contained tablespace set previously exported using the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package, Data Pump export, or the Recovery Manager (RMAN) <code dir="ltr">TRANSPORT</code> <code dir="ltr">TABLESPACE</code> command</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t5" headers="r1c1-t5">
<p><a href="#i1000996">CLONE_SIMPLE_TABLESPACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t5 r1c2-t5">
<p>Clones a simple tablespace. The tablespace can later be attached to a database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t5" headers="r1c1-t5">
<p><a href="#i1000997">CLONE_TABLESPACES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t5 r1c2-t5">
<p>Clones a set of self-contained tablespaces. The tablespaces can later be attached to a database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t5" headers="r1c1-t5">
<p><a href="#i1000998">DETACH_SIMPLE_TABLESPACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t5 r1c2-t5">
<p>Detaches a simple tablespace. The tablespace can later be attached to a database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t5" headers="r1c1-t5">
<p><a href="#i1007519">DETACH_TABLESPACES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r7c1-t5 r1c2-t5">
<p>Detaches a set of self-contained tablespaces. The tablespaces can later be attached to a database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t5" headers="r1c1-t5">
<p><a href="#i1001000">PULL_SIMPLE_TABLESPACE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r8c1-t5 r1c2-t5">
<p>Copies a simple tablespace from a remote database and attaches it to the current database</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t5" headers="r1c1-t5">
<p><a href="#i1003360">PULL_TABLESPACES Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r9c1-t5 r1c2-t5">
<p>Copies a set of self-contained tablespaces from a remote database and attaches the tablespaces to the current database</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
All subprograms commit unless specified otherwise.</div>
<div id="ARPLS855" class="refsect2"><a id="i1000780"></a>
<h3 class="refsect2">ATTACH_SIMPLE_TABLESPACE Procedure<a id="sthref11746"></a></h3>
<p>This procedure uses Data Pump to import a simple tablespace previously exported using the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package, Data Pump export, or the Recovery Manager (RMAN) <code dir="ltr">TRANSPORT</code> <code dir="ltr">TABLESPACE</code> command.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11747"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.ATTACH_SIMPLE_TABLESPACE(
   directory_object      IN  VARCHAR2,
   tablespace_file_name  IN  VARCHAR2,
   converted_file_name   IN  VARCHAR2  DEFAULT NULL,
   datafile_platform     IN  VARCHAR2  DEFAULT NULL,
   tablespace_name       OUT VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11748"></a>Parameters</p>
<div id="ARPLS68842" class="tblformal">
<p class="titleintable"><a id="sthref11749"></a><a id="sthref11750"></a>Table 164-3 ATTACH_SIMPLE_TABLESPACE Procedure Parameters</p>
<table class="cellalignment4330" title="ATTACH_SIMPLE_TABLESPACE Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.ATTACH_SIMPLE_TABLESPACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>The directory that contains the Data Pump dump file and the datafile for the tablespace. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
<p>The name of the Data Pump export dump file must be the same as the data file name for the tablespace, except with a <code dir="ltr">.dmp</code> extension. If the <code dir="ltr">converted_file_name</code> is non-<code dir="ltr">NULL</code>, specify the dump file produced by the export database, not the file name after conversion.</p>
<p>The Data Pump import log file is written to this directory. The name of the log file is the same as the data file name for the tablespace, except with an <code dir="ltr">.alg</code> extension. If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">tablespace_file_name</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>The name of the datafile for the tablespace being imported.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">converted_file_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>If the <code dir="ltr">datafile_platform</code> parameter is non-<code dir="ltr">NULL</code> and is different from the platform of the local import database, then specify a file name for the converted datafile. The datafile is converted to the platform of the local import database and copied to the new file name. The existing datafile is not modified nor deleted.</p>
<p>If non-<code dir="ltr">NULL</code> and the <code dir="ltr">datafile_platform</code> parameter is <code dir="ltr">NULL</code>, then the procedure ignores this parameter.</p>
<p>If non-<code dir="ltr">NULL</code> and the <code dir="ltr">datafile_platform</code> parameter specifies the same platform as the local import database, then the procedure ignores this parameter.</p>
<p>If <code dir="ltr">NULL</code> and the <code dir="ltr">datafile_platform</code> parameter is non-<code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">datafile_platform</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the export database and the current import database.</p>
<p>Specify the platform for the export database if the platform is different for the export database and the import database.</p>
<p>You can determine the platform of a database by querying the <code dir="ltr">PLATFORM_NAME</code> column in the <code dir="ltr">V$DATABASE</code> dynamic performance view. The <code dir="ltr">V$TRANSPORTABLE_PLATFORM</code> dynamic performance view lists all platforms that support cross-platform transportable tablespaces.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>Contains the name of the attached tablespace. The attached tablespace is read-only. Use an <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> statement to make the tablespace read/write if necessary.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11751"></a>Usage Notes</p>
<p>To run this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">IMP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory object that contains the Data Pump export dump file and the datafiles for the tablespaces in the set, specified by the <code dir="ltr">directory_object</code> parameter</p>
</li>
</ul>
<p>Automatic Storage Management (ASM) directories cannot be used with this procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006970">Overview</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS856" class="refsect2"><a id="i1000995"></a>
<h3 class="refsect2">ATTACH_TABLESPACES Procedure<a id="sthref11752"></a><a id="sthref11753"></a></h3>
<p>This procedure uses Data Pump to import a self-contained tablespace set previously exported using the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package, Data Pump export, or the Recovery Manager (RMAN) <code dir="ltr">TRANSPORT</code> <code dir="ltr">TABLESPACE</code> command.</p>
<p>This procedure is overloaded and consists of the following versions:</p>
<ul>
<li>
<p>One version of the procedure uses a Data Pump job name in the <code dir="ltr">datapump_job_name</code> parameter. This job performs the Data Pump import to complete the attach operation. In addition, if the platform at the export database is different than the local database platform, then this procedure optionally can create datafiles for the tablespace set that can be used with the local platform.</p>
</li>
<li>
<p>The other version of the procedure uses a file group that can consist of multiple versions of the tablespace set in a tablespace repository. A tablespace repository is a collection of tablespace sets in a file group repository. When this version of the procedure is run, a Data Pump import is performed. This version of the procedure uses the files in a file group version and can copy the export dump file, export log file, and the datafiles that comprise the tablespace set into the specified directories. The file group and version are specified using the <code dir="ltr">file_group_name</code> and <code dir="ltr">version_name</code> parameters, respectively. This version of the procedure does not require a datafiles platform specification if the platform at the export database is different than the local database platform. Instead, the tablespace set is migrated automatically to the correct platform when it is attached.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11754"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
   datapump_job_name          IN OUT VARCHAR2,
   dump_file                  IN     FILE,
   tablespace_files           IN     FILE_SET,
   converted_files            IN     FILE_SET,
   datafiles_platform         IN     VARCHAR2  DEFAULT NULL,
   log_file                   IN     FILE      DEFAULT NULL,
   tablespace_names           OUT    TABLESPACE_SET);

DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
   file_group_name            IN   VARCHAR2,
   version_name               IN   VARCHAR2  DEFAULT NULL,
   datafiles_directory_object IN   VARCHAR2  DEFAULT NULL,
   logfile_directory_object   IN   VARCHAR2  DEFAULT NULL,
   repository_db_link         IN   VARCHAR2  DEFAULT NULL,
   tablespace_names           OUT  TABLESPACE_SET);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11755"></a>Parameters</p>
<div id="ARPLS68843" class="tblformal">
<p class="titleintable"><a id="sthref11756"></a><a id="sthref11757"></a>Table 164-4 ATTACH_TABLESPACES Procedure Parameters</p>
<table class="cellalignment4330" title="ATTACH_TABLESPACES Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t9">Parameter</th>
<th class="cellalignment4328" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t9" headers="r1c1-t9">
<p><code dir="ltr">data_pump_job_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t9 r1c2-t9">
<p>The Data Pump job name. Specify a Data Pump job name to adhere to naming conventions or to track the job more easily.</p>
<p>If <code dir="ltr">NULL</code>, then the system generates a Data Pump job name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t9" headers="r1c1-t9">
<p><code dir="ltr">dump_file</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t9 r1c2-t9">
<p>The file name of the Data Pump dump file to import.</p>
<p>If <code dir="ltr">NULL</code> or if a file attribute is <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t9" headers="r1c1-t9">
<p><code dir="ltr">tablespace_files</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t9 r1c2-t9">
<p>The file set that contains the datafiles for the tablespace set being imported.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t9" headers="r1c1-t9">
<p><code dir="ltr">converted_files</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t9 r1c2-t9">
<p>If the <code dir="ltr">datafiles_platform</code> parameter is non-<code dir="ltr">NULL</code> and is different from the platform for the local import database, then specify a file set with the names of the converted datafiles. The datafiles are converted to the platform of the local import database and copied to the new file names. In this case, the number of files in the specified file set must match the number of files in the file set specified for the <code dir="ltr">tablespace_files</code> parameter. The existing datafiles are not modified nor deleted.</p>
<p>If non-<code dir="ltr">NULL</code> and the <code dir="ltr">datafiles_platform</code> parameter is <code dir="ltr">NULL</code>, then the procedure ignores this parameter.</p>
<p>If non-<code dir="ltr">NULL</code> and the <code dir="ltr">datafiles_platform</code> parameter specifies the same platform as the local import database, then the procedure ignores this parameter.</p>
<p>If <code dir="ltr">NULL</code> and the <code dir="ltr">datafiles_platform</code> parameter is non-<code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t9" headers="r1c1-t9">
<p><code dir="ltr">datafiles_platform</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t9 r1c2-t9">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the export database and the current import database.</p>
<p>Specify the platform for the export database if the platform is different for the export database and the import database.</p>
<p>You can determine the platform of a database by querying the <code dir="ltr">PLATFORM_NAME</code> column in the <code dir="ltr">V$DATABASE</code> dynamic performance view. The <code dir="ltr">V$TRANSPORTABLE_PLATFORM</code> dynamic performance view lists all platforms that support cross-platform transportable tablespaces.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t9" headers="r1c1-t9">
<p><code dir="ltr">log_file</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t9 r1c2-t9">
<p>Specify the log file name for the Data Pump import.</p>
<p>If <code dir="ltr">NULL</code> or if at least one file parameter is <code dir="ltr">NULL</code>, then the system generates a log file name with the extension <code dir="ltr">.alg</code> and places it in the Data Pump export dump file directory.</p>
<p>If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t9" headers="r1c1-t9">
<p><code dir="ltr">file_group_name</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t9 r1c2-t9">
<p>The name of the file group, specified as <code dir="ltr"><span class="codeinlineitalic">[schema_name.]file_group_name</span></code>. For example, if the schema is <code dir="ltr">hq_dba</code> and the file group name is <code dir="ltr">sales</code>, then specify <code dir="ltr">hq_dba.sales</code>. If the schema is not specified, then the current user is the default.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t9" headers="r1c1-t9">
<p><code dir="ltr">version_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t9 r1c2-t9">
<p>The name of the file group version to attach.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure uses the version with the latest creation time for the file group.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t9" headers="r1c1-t9">
<p><code dir="ltr">datafiles_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t9 r1c2-t9">
<p>The directory object into which the datafiles and Data Pump export dump file are copied. The files are copied from the tablespace repository directories to this directory.</p>
<p>If non-<code dir="ltr">NULL</code>, the attached tablespaces use the files in specified directory. However, the file group version specified in the <code dir="ltr">version_name</code> parameter consists of the files in the original directory, not in the directory specified by this <code dir="ltr">datafiles_directory_object</code> parameter.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure does not copy the datafiles and dump file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t9" headers="r1c1-t9">
<p><code dir="ltr">logfile_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t9 r1c2-t9">
<p>The directory object into which the Data Pump import log file is placed. The system generates a log file name with the extension <code dir="ltr">.alg</code>.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure places the import log file in the same directory as the dump file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t9" headers="r1c1-t9">
<p><code dir="ltr">repository_db_link</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t9 r1c2-t9">
<p>If the file group is in a different database, then specify the name of the database link to the database that contains the file group. The database link must be accessible to the user who runs the procedure.</p>
<p>If this parameter is non-<code dir="ltr">NULL</code>, then meet the following requirements:</p>
<ul>
<li>
<p>Each directory object that contains files in the version being attached must exist on both databases.</p>
</li>
<li>
<p>The corresponding directory objects must have the same names on both databases.</p>
</li>
</ul>
<p>If <code dir="ltr">NULL</code>, then the procedure does not use a database link, and the procedure uses the file group in the local database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t9" headers="r1c1-t9">
<p><code dir="ltr">tablespace_names</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t9 r1c2-t9">
<p>Contains the names of the attached tablespaces. The attached tablespaces are read-only. Use <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> statements to make the tablespaces read/write if necessary.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11758"></a>Usage Notes</p>
<p>The following sections contain usage notes for this procedure:</p>
<ul>
<li>
<p><a href="#CDEIFIEG">User Requirements</a></p>
</li>
<li>
<p><a href="#CDEBBBJF">Procedures Used to Clone or Detach a Tablespace Set</a></p>
</li>
<li>
<p><a href="#CDEFDFIH">When the Attach Database Is Different Than the Clone or Detach Database</a></p>
</li>
<li>
<p><a href="#CDEGHAAJ">Automatic Storage Management Directories</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a class="olink STRMS159" href="../STRMS/strms_ipro.htm#STRMS159"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CDEIFIEG"></a><a id="ARPLS68844"></a>User Requirements</p>
<p>To run either version of this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">IMP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory objects that contain the Data Pump export dump file and the datafiles for the tablespaces in the set, specified by the <code dir="ltr">dump_file</code> and <code dir="ltr">tablespace_files</code> parameters, or by the <code dir="ltr">datafiles_directory_object</code> parameter</p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will hold the Data Pump import log file, specified by the <code dir="ltr">log_file</code> parameter or <code dir="ltr">logfile_directory_object</code> parameter if it is non-<code dir="ltr">NULL</code></p>
</li>
</ul>
<p>If the Data Pump job version of the procedure is run, then the user must have <code dir="ltr">WRITE</code> privilege on the directory objects that will hold the converted datafiles for the tablespaces in the set if platform conversion is necessary. These directory objects are specified by the <code dir="ltr">converted_files</code> parameter if it is non-<code dir="ltr">NULL</code>.</p>
<p>If the file group version of the procedure is run, then the user must have the necessary privileges to manage the file group.</p>
<p class="subhead2"><a id="CDEBBBJF"></a><a id="ARPLS68845"></a>Procedures Used to Clone or Detach a Tablespace Set</p>
<p>After a tablespace set is cloned or detached using the <code dir="ltr">CLONE_TABLESPACES</code> or <code dir="ltr">DETACH_TABLESPACES</code> procedure, respectively, the tablespace set can be attached to a database using the <code dir="ltr">ATTACH_TABLESPACES</code> procedure. If the Data Pump job version of the <code dir="ltr">CLONE_TABLESPACES</code> or <code dir="ltr">DETACH_TABLESPACES</code> procedure was used, then use the Data Pump job version of the <code dir="ltr">ATTACH_TABLESPACES</code> procedure. If the file group version of the <code dir="ltr">CLONE_TABLESPACES</code> or <code dir="ltr">DETACH_TABLESPACES</code> procedure was used, then use the file group version of the <code dir="ltr">ATTACH_TABLESPACES</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1000997">CLONE_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="#i1007519">DETACH_TABLESPACES Procedure</a></p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CDEFDFIH"></a><a id="ARPLS68846"></a>When the Attach Database Is Different Than the Clone or Detach Database</p>
<p>You can attach a tablespace set to a different database than the database from which the tablespace set was cloned or detached. The two databases might or might not share a file system. If the two databases do not share a file system, then you must transfer the dump file and datafiles to the remote system using the <code dir="ltr">DBMS_FILE_TRANSFER</code> package, FTP, or some other method. You can attach the tablespace set in one of the following ways depending on the version of the <code dir="ltr">ATTACH_TABLESPACES</code> procedure you use:</p>
<ul>
<li>
<p>If you use the Data Pump job version of the procedure, then specify the relevant files on the file system. The directory object names can be different in the databases.</p>
</li>
<li>
<p>If you use the file group version of the procedure, then you can use the <code dir="ltr">repository_db_link</code> parameter to specify the database where tablespace repository resides. The directory objects for the files must exist and must match in the databases.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1000997">CLONE_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="#i1007519">DETACH_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="d_filgrp.htm#CEGFGIID">Chapter 68, &#34;DBMS_FILE_GROUP&#34;</a> for more information about file groups</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CDEGHAAJ"></a><a id="ARPLS68847"></a>Automatic Storage Management Directories</p>
<p>Automatic Storage Management (ASM) directories can be specified for the directory objects that store datafiles and export dump files, but ASM directories cannot be specified for directory objects that store log files.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL100" href="../SUTIL/GUID-17FAE261-0972-4220-A2E4-44D479F519D4.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for information about specifying ASM directories for directory objects</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS857" class="refsect2"><a id="i1000996"></a>
<h3 class="refsect2">CLONE_SIMPLE_TABLESPACE Procedure<a id="sthref11759"></a></h3>
<p>This procedure clones a simple tablespace. The specified tablespace must be online.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes the specified tablespace read-only if it is not read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespace and places the dump file in the specified directory</p>
</li>
<li>
<p>Places the datafile for the specified tablespace in the specified directory</p>
</li>
<li>
<p>If this procedure made the tablespace read-only, then makes the tablespace read/write</p>
</li>
</ol>
<p>In addition, this procedure optionally can create a datafile for the tablespace that can be used with a platform that is different than the local database platform.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11760"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.CLONE_SIMPLE_TABLESPACE(
   tablespace_name      IN  VARCHAR2,
   directory_object     IN  VARCHAR2,
   destination_platform IN  VARCHAR2  DEFAULT NULL,
   tablespace_file_name OUT VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11761"></a>Parameters</p>
<div id="ARPLS68848" class="tblformal">
<p class="titleintable"><a id="sthref11762"></a><a id="sthref11763"></a>Table 164-5 CLONE_SIMPLE_TABLESPACE Procedure Parameters</p>
<table class="cellalignment4330" title="CLONE_SIMPLE_TABLESPACE Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.CLONE_SIMPLE_TABLESPACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t14">Parameter</th>
<th class="cellalignment4328" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t14" headers="r1c1-t14">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t14 r1c2-t14">
<p>The tablespace to be cloned.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t14" headers="r1c1-t14">
<p><code dir="ltr">directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t14 r1c2-t14">
<p>The directory where the Data Pump export dump file, the Data Pump export log file, and the datafile for the tablespace are placed. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
<p>The name of the Data Pump export dump file is the same as the data file name for the tablespace, except with a <code dir="ltr">.dmp</code> extension. If a file exists with the same name as the dump file in the directory, then the procedure raises an error.</p>
<p>The name of the log file is the same as the data file name for the tablespace, except with a <code dir="ltr">.clg</code> extension. If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t14" headers="r1c1-t14">
<p><code dir="ltr">destination_platform</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t14 r1c2-t14">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the current export database and the intended import database.</p>
<p>Specify the platform for the intended import database if the platform is different for the export database and the import database.</p>
<p>You can determine the platform of a database by querying the <code dir="ltr">PLATFORM_NAME</code> column in the <code dir="ltr">V$DATABASE</code> dynamic performance view. The <code dir="ltr">V$TRANSPORTABLE_PLATFORM</code> dynamic performance view lists all platforms that support cross-platform transportable tablespaces.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t14" headers="r1c1-t14">
<p><code dir="ltr">tablespace_file_name</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t14 r1c2-t14">
<p>Contains the name of the cloned tablespace datafile. This datafile is placed in the directory specified by the parameter <code dir="ltr">directory_object</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11764"></a>Usage Notes</p>
<p>To run this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> privilege on the directory object for the directory that contains the datafile for the tablespace. The name of this tablespace is specified by the <code dir="ltr">tablespace_name</code> parameter. If a directory object does not exist for this directory, then create the directory object and grant the necessary privileges before you run this procedure.</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export dump file, specified by the <code dir="ltr">directory_object</code> parameter</p>
</li>
<li>
<p>If the file group version of the procedure is run, then the user must have the necessary privileges to manage file group.</p>
</li>
</ul>
<p>After cloning a tablespace using this procedure, you can add the tablespace to a different database using the <code dir="ltr">ATTACH_SIMPLE_TABLESPACE</code> procedure. If the database is a remote database and you want to use the <code dir="ltr">ATTACH_SIMPLE_TABLESPACE</code> procedure, then you can transfer the dump file and datafile to the remote system using the <code dir="ltr">DBMS_FILE_TRANSFER</code> package, FTP, or some other method.</p>
<p>Automatic Storage Management (ASM) directories cannot be used with this procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a href="#i1000780">ATTACH_SIMPLE_TABLESPACE Procedure</a> and <a href="#i1001000">PULL_SIMPLE_TABLESPACE Procedure</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS858" class="refsect2"><a id="i1000997"></a>
<h3 class="refsect2">CLONE_TABLESPACES Procedure<a id="sthref11765"></a><a id="sthref11766"></a></h3>
<p>This procedure clones a set of self-contained tablespaces. All of the tablespaces in the specified tablespace set must be online.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes any read/write tablespace in the specified tablespace set read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespaces in the tablespace set and places the dump file in the specified directory</p>
</li>
<li>
<p>Places the datafiles that comprise the specified tablespace set in the specified directory</p>
</li>
<li>
<p>If this procedure made a tablespace read-only, then makes the tablespace read/write</p>
</li>
</ol>
<p>This procedure is overloaded and consists of the following versions:</p>
<ul>
<li>
<p>One version of the procedure uses a Data Pump job name in the <code dir="ltr">datapump_job_name</code> parameter. This job performs the Data Pump export. This version of the procedure completes the clone operation by placing the export dump file, export log file, and the datafiles that comprise the tablespace set in the specified directories, but the files are not added to a file group version. In addition, this version of the procedure optionally can create datafiles for the tablespace set that can be used with a platform that is different than the local database platform.</p>
</li>
<li>
<p>The other version of the procedure uses a file group that can consist of multiple versions of the tablespace set in a tablespace repository. A tablespace repository is a collection of tablespace sets in a file group repository. When this version of the procedure is run, a Data Pump export is performed, and this version of the procedure completes the clone operation by placing the export dump file, export log file, and the datafiles that comprise the tablespace set in the appropriate file group version. The file group and version are specified using the <code dir="ltr">file_group_name</code> and <code dir="ltr">version_name</code> parameters, respectively. This version of the procedure does not require a destination platform specification if the destination platform is different. Instead, the tablespace set is migrated automatically to the correct platform when it is attached at the destination database using the file group version of the <code dir="ltr">ATTACH_TABLESPACES</code> procedure.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11767"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.CLONE_TABLESPACES(
   datapump_job_name            IN OUT VARCHAR2,
   tablespace_names             IN     TABLESPACE_SET,
   dump_file                    IN     FILE,
   tablespace_directory_objects IN     DIRECTORY_OBJECT_SET,
   destination_platform         IN     VARCHAR2  DEFAULT NULL,
   log_file                     IN     FILE      DEFAULT NULL,
   tablespace_files             OUT    FILE_SET);

DBMS_STREAMS_TABLESPACE_ADM.CLONE_TABLESPACES(
   tablespace_names             IN  TABLESPACE_SET,
   tablespace_directory_object  IN  VARCHAR2  DEFAULT NULL,
   log_file_directory_object    IN  VARCHAR2  DEFAULT NULL,
   file_group_name              IN  VARCHAR2,
   version_name                 IN  VARCHAR2  DEFAULT NULL,
   repository_db_link           IN  VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11768"></a>Parameters</p>
<div id="ARPLS68849" class="tblformal">
<p class="titleintable"><a id="sthref11769"></a><a id="sthref11770"></a>Table 164-6 CLONE_TABLESPACES Procedure Parameters</p>
<table class="cellalignment4330" title="CLONE_TABLESPACES Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.CLONE_TABLESPACES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t16">Parameter</th>
<th class="cellalignment4328" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t16" headers="r1c1-t16">
<p><code dir="ltr">data_pump_job_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t16 r1c2-t16">
<p>The Data Pump job name. Specify a Data Pump job name to adhere to naming conventions or to track the job more easily.</p>
<p>If <code dir="ltr">NULL</code>, then the system generates a Data Pump job name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t16" headers="r1c1-t16">
<p><code dir="ltr">tablespace_names</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t16 r1c2-t16">
<p>The tablespace set to be cloned.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t16" headers="r1c1-t16">
<p><code dir="ltr">dump_file</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t16 r1c2-t16">
<p>The file name of the Data Pump dump file that is exported.</p>
<p>If <code dir="ltr">NULL</code> or if a file attribute is <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
<p>If the specified file exists, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t16" headers="r1c1-t16">
<p><code dir="ltr">tablespace_directory_objects</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t16 r1c2-t16">
<p>The set of directory objects into which the datafiles for the tablespaces are copied. If multiple directory objects are in the set, then the procedure copies a datafile to each directory object in the set in sequence. In this case, if the end of the directory object set is reached, then datafile copying starts again with the first directory object in the set.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure copies datafiles for the tablespace set to the dump file directory.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t16" headers="r1c1-t16">
<p><code dir="ltr">destination_platform</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t16 r1c2-t16">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the current export database and the intended import database.</p>
<p>Specify the platform for the intended import database if the platform is different for the export database and the import database.</p>
<p>You can determine the platform of a database by querying the <code dir="ltr">PLATFORM_NAME</code> column in the <code dir="ltr">V$DATABASE</code> dynamic performance view. The <code dir="ltr">V$TRANSPORTABLE_PLATFORM</code> dynamic performance view lists all platforms that support cross-platform transportable tablespaces.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t16" headers="r1c1-t16">
<p><code dir="ltr">log_file</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t16 r1c2-t16">
<p>Specify the log file name for the Data Pump export.</p>
<p>If <code dir="ltr">NULL</code> or if at least one file parameter is <code dir="ltr">NULL</code>, then the system generates a log file name with the extension <code dir="ltr">.clg</code> and places it in the dump file directory.</p>
<p>If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t16" headers="r1c1-t16">
<p><code dir="ltr">tablespace_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t16 r1c2-t16">
<p>The directory object into which the data files are copied and Data Pump export dump file is placed. The system generates a dump file name with the extension <code dir="ltr">.dmp</code>.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure copies the datafiles to and places the dump file in the default directory object for the version. If the version does not have a default directory object, then the procedure uses the default directory object for the file group.</p>
<p>If <code dir="ltr">NULL</code> and no default directory object exists for the version or file group, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t16" headers="r1c1-t16">
<p><code dir="ltr">log_file_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t16 r1c2-t16">
<p>The directory object into which the Data Pump export log file is placed. The system generates a log file name with the extension <code dir="ltr">.clg</code>.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure uses the directory object specified in <code dir="ltr">tablespace_directory_object</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t16" headers="r1c1-t16">
<p><code dir="ltr">file_group_name</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t16 r1c2-t16">
<p>The name of the file group, specified as <code dir="ltr"><span class="codeinlineitalic">[schema_name.]file_group_name</span></code>. For example, if the schema is <code dir="ltr">hq_dba</code> and the file group name is <code dir="ltr">sales</code>, then specify <code dir="ltr">hq_dba.sales</code>. If the schema is not specified, then the current user is the default.</p>
<p>If the specified file group does not exist, then the procedure creates it.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t16" headers="r1c1-t16">
<p><code dir="ltr">version_name</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t16 r1c2-t16">
<p>The name of the version into which the cloned tablespace set is placed. The specified version name cannot be a positive integer.</p>
<p>If the specified version does not exist, then the procedure creates it.</p>
<p>If the specified version exists, then the procedure adds the tablespace set to the version. Only one Data Pump export dump file can exist in a version.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure creates a new version, and the version number can be used to manage the version.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t16" headers="r1c1-t16">
<p><code dir="ltr">repository_db_link</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t16 r1c2-t16">
<p>If the file group is in a remote database, then specify the name of the database link to the database that contains the file group. The database link must be accessible to the user who runs the procedure.</p>
<p>If this parameter is non-<code dir="ltr">NULL</code>, then the directory object specified in <code dir="ltr">tablespace_directory_object</code> must exist on the local database and on the remote database. If <code dir="ltr">tablespace_directory_object</code> is <code dir="ltr">NULL</code>, then the default directory object must exist on both databases. The directory object must have the same name on each database and must correspond to the same directory on a shared file system.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure does not use a database link, and the procedure uses the file group in the local database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t16" headers="r1c1-t16">
<p><code dir="ltr">tablespace_files</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t16 r1c2-t16">
<p>Contains the datafiles for the cloned tablespace set. These datafiles are placed in the directories specified by the directory objects in the parameter <code dir="ltr">tablespace_directory_objects</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11771"></a>Usage Notes</p>
<p>To run either version of this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> privilege on the directory objects for the directories that contain the datafiles for the tablespace set. The names of these tablespaces are specified by the <code dir="ltr">tablespace_names</code> parameter. If a directory object does not exist for one or more of these directories, then create the directory objects and grant the necessary privileges before you run this procedure.</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export dump file, specified by the <code dir="ltr">dump_file</code> parameter or the <code dir="ltr">tablespace_directory_object</code> parameter</p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory objects that will contain the copied datafiles for the tablespaces in the set, specified by the <code dir="ltr">tablespace_directory_objects</code> parameter if non-<code dir="ltr">NULL</code> or the <code dir="ltr">tablespace_directory_object</code> parameter</p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export log file, specified by the <code dir="ltr">log_file</code> parameter if non-<code dir="ltr">NULL</code> or the <code dir="ltr">log_file_directory_object</code> parameter if non-<code dir="ltr">NULL</code></p>
</li>
</ul>
<p>If the file group version of the procedure is run, then the user must have the necessary privileges to manage the file group.</p>
<p>Automatic Storage Management (ASM) directories can be specified for the directory objects that store datafiles and export dump files, but ASM directories cannot be specified for directory objects that store log files.</p>
<p>After cloning a tablespace set using this procedure, you can attach the tablespaces to a different database using the <code dir="ltr">ATTACH_TABLESPACES</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a href="#i1000995">ATTACH_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="d_filgrp.htm#CEGFGIID">Chapter 68, &#34;DBMS_FILE_GROUP&#34;</a> for more information about file groups</p>
</li>
<li>
<p><a class="olink STRMS159" href="../STRMS/strms_ipro.htm#STRMS159"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS859" class="refsect2"><a id="i1000998"></a>
<h3 class="refsect2">DETACH_SIMPLE_TABLESPACE Procedure<a id="sthref11772"></a></h3>
<p>This procedure detaches a simple tablespace. The specified tablespace must be online.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes the specified tablespace read-only if it is not read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespace and places the dump file in the directory that contains the tablespace datafile</p>
</li>
<li>
<p>Drops the tablespace and its contents from the database</p>
</li>
</ol>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11773"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.DETACH_SIMPLE_TABLESPACE(
   tablespace_name       IN  VARCHAR2,
   directory_object      OUT VARCHAR2,
   tablespace_file_name  OUT VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11774"></a>Parameters</p>
<div id="ARPLS68850" class="tblformal">
<p class="titleintable"><a id="sthref11775"></a><a id="sthref11776"></a>Table 164-7 DETACH_SIMPLE_TABLESPACE Procedure Parameters</p>
<table class="cellalignment4330" title="DETACH_SIMPLE_TABLESPACE Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.DETACH_SIMPLE_TABLESPACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t18">Parameter</th>
<th class="cellalignment4328" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t18" headers="r1c1-t18">
<p><code dir="ltr">data_pump_job_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t18 r1c2-t18">
<p>The Data Pump job name. Specify a Data Pump job name to adhere to naming conventions or to track the job more easily.</p>
<p>If <code dir="ltr">NULL</code>, then the system generates a Data Pump job name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t18" headers="r1c1-t18">
<p><code dir="ltr">directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t18 r1c2-t18">
<p>Contains the directory where the Data Pump export dump file and the Data Pump export log file are placed. The procedure uses the directory of the datafile for the tablespace. Therefore, make sure a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code> exists for this directory.</p>
<p>The name of the Data Pump export dump file is the same as the data file name for the tablespace, except with a <code dir="ltr">.dmp</code> extension. If a file exists with the same name as the dump file in the directory, then the procedure raises an error.</p>
<p>The name of the log file is the same as the data file name for the tablespace, except with a <code dir="ltr">.dlg</code> extension. If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t18" headers="r1c1-t18">
<p><code dir="ltr">tablespace_file_name</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t18 r1c2-t18">
<p>Contains the name of the detached tablespace datafile.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11777"></a>Usage Notes</p>
<p>To run this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">DROP</code> <code dir="ltr">TABLESPACE</code> privilege</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory object for the directory that contains the tablespace datafile. The name of this tablespace is specified by the <code dir="ltr">tablespace_name</code> parameter. If a directory object does not exist for this directory, then create the directory object and grant the necessary privileges before you run this procedure. This directory also will contain the Data Pump export dump file generated by this procedure.</p>
</li>
</ul>
<p>After detaching a tablespace using this procedure, you can add the tablespace to a different database using the <code dir="ltr">ATTACH_SIMPLE_TABLESPACE</code> procedure. If the database is a remote database and you want to use the <code dir="ltr">ATTACH_SIMPLE_TABLESPACE</code> procedure, then you can transfer the dump file and datafile to the remote system using the <code dir="ltr">DBMS_FILE_TRANSFER</code> package, FTP, or some other method. You can use the two <code dir="ltr">OUT</code> parameters in this procedure to accomplish the attach or pull operation.</p>
<p>Automatic Storage Management (ASM) directories cannot be used with this procedure.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use the <code dir="ltr">DETACH_SIMPLE_TABLESPACE</code> procedure on a tablespace if the tablespace is using the Oracle-managed files feature. If you do, then the datafile for the tablespace is dropped automatically when the tablespace is dropped.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a href="#i1000780">ATTACH_SIMPLE_TABLESPACE Procedure</a> and <a href="#i1001000">PULL_SIMPLE_TABLESPACE Procedure</a></p>
</li>
<li>
<p><a class="olink ADMIN003" href="../ADMIN/omf.htm#ADMIN003"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about the Oracle-managed files feature</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS860" class="refsect2"><a id="i1007519"></a>
<h3 class="refsect2">DETACH_TABLESPACES Procedure<a id="sthref11778"></a><a id="sthref11779"></a></h3>
<p>This procedure detaches a set of self-contained tablespaces. All of the tablespaces in the specified tablespace set must be online and any table partitions must not span tablespaces in the tablespace set.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes any read/write tablespace in the specified tablespace set read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespace set and places the dump file in the specified directory</p>
</li>
<li>
<p>Drops the tablespaces in the specified tablespace set and their contents from the database</p>
</li>
</ol>
<p>This procedure does not move or copy the datafiles that comprise the specified tablespace set.</p>
<p>This procedure is overloaded and consists of the following versions:</p>
<ul>
<li>
<p>One version of the procedure uses a Data Pump job name in the <code dir="ltr">datapump_job_name</code> parameter. This job performs the Data Pump export. This version of the procedure completes the detach operation by placing the export dump file and export log file in the specified directories, but the files are not added to a file group version.</p>
</li>
<li>
<p>The other version of the procedure uses a file group that can consist of multiple versions of the tablespace set in a tablespace repository. A tablespace repository is a collection of tablespace sets in a file group repository. When this version of the procedure is run, a Data Pump export is performed, and this version of the procedure completes the detach operation by placing the export dump file and export log file in the appropriate file group version. The datafiles that comprise the tablespace set are not moved or copied, but they are referenced in the version that is detached. The file group and version are specified using the <code dir="ltr">file_group_name</code> and <code dir="ltr">version_name</code> parameters, respectively. Also, if the destination platform is different, then the tablespace set is migrated automatically to the correct platform when it is attached at the destination database using the file group version of the <code dir="ltr">ATTACH_TABLESPACES</code> procedure.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use the <code dir="ltr">DETACH_TABLESPACES</code> procedure if any of the tablespaces in the tablespace set are using the Oracle-managed files feature. If you do, then the datafiles for these tablespaces are dropped automatically when the tablespaces are dropped.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11780"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.DETACH_TABLESPACES(
   datapump_job_name         IN OUT VARCHAR2,
   tablespace_names          IN     TABLESPACE_SET,
   dump_file                 IN     FILE,
   log_file                  IN     FILE  DEFAULT NULL,
   tablespace_files          OUT    FILE_SET);

DBMS_STREAMS_TABLESPACE_ADM.DETACH_TABLESPACES(
   tablespace_names          IN TABLESPACE_SET,
   export_directory_object   IN VARCHAR2  DEFAULT NULL,
   log_file_directory_object IN VARCHAR2  DEFAULT NULL,
   file_group_name           IN VARCHAR2,
   version_name              IN VARCHAR2  DEFAULT NULL,
   repository_db_link        IN VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11781"></a>Parameters</p>
<div id="ARPLS68851" class="tblformal">
<p class="titleintable"><a id="sthref11782"></a><a id="sthref11783"></a>Table 164-8 DETACH_TABLESPACES Procedure Parameters</p>
<table class="cellalignment4330" title="DETACH_TABLESPACES Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.DETACH_TABLESPACES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t22">Parameter</th>
<th class="cellalignment4328" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t22" headers="r1c1-t22">
<p><code dir="ltr">data_pump_job_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t22 r1c2-t22">
<p>The Data Pump job name. Specify a Data Pump job name to adhere to naming conventions or to track the job more easily.</p>
<p>If <code dir="ltr">NULL</code>, then the system generates a Data Pump job name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t22" headers="r1c1-t22">
<p><code dir="ltr">tablespace_names</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t22 r1c2-t22">
<p>The tablespace set to be detached.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t22" headers="r1c1-t22">
<p><code dir="ltr">dump_file</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t22 r1c2-t22">
<p>The file name of the Data Pump dump file that is exported.</p>
<p>If <code dir="ltr">NULL</code> or if a file attribute is <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
<p>If the specified file exists, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t22" headers="r1c1-t22">
<p><code dir="ltr">log_file</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t22 r1c2-t22">
<p>Specify the log file name for the Data Pump export.</p>
<p>If <code dir="ltr">NULL</code> or if at least one file parameter is <code dir="ltr">NULL</code>, then the system generates a log file name with the extension <code dir="ltr">.dlg</code> and places it in the dump file directory.</p>
<p>If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t22" headers="r1c1-t22">
<p><code dir="ltr">tablespace_files</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t22 r1c2-t22">
<p>Contains the names of the datafiles for the detached tablespace set.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t22" headers="r1c1-t22">
<p><code dir="ltr">export_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t22 r1c2-t22">
<p>The directory object into which the Data Pump export dump file is placed. The system generates a dump file name with the extension <code dir="ltr">.dmp</code>.</p>
<p>If <code dir="ltr">NULL</code>, then procedure places the dump file in the default directory object for the version. If the version does not have a default directory object, then the procedure uses the default directory object for the file group.</p>
<p>If <code dir="ltr">NULL</code> and no default directory object exists for the version or file group, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t22" headers="r1c1-t22">
<p><code dir="ltr">log_file_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t22 r1c2-t22">
<p>The directory object into which the Data Pump export log file is placed. The system generates a log file name with the extension <code dir="ltr">.dlg</code>.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure places the export log file in the same directory as the export dump file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t22" headers="r1c1-t22">
<p><code dir="ltr">file_group_name</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t22 r1c2-t22">
<p>The name of the file group, specified as <code dir="ltr"><span class="codeinlineitalic">[schema_name.]file_group_name</span></code>. For example, if the schema is <code dir="ltr">hq_dba</code> and the file group name is <code dir="ltr">sales</code>, then specify <code dir="ltr">hq_dba.sales</code>. If the schema is not specified, then the current user is the default.</p>
<p>If the specified file group does not exist, then the procedure creates it.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t22" headers="r1c1-t22">
<p><code dir="ltr">version_name</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t22 r1c2-t22">
<p>The name of the version into which the detached tablespace set is placed. The specified version name cannot be a positive integer.</p>
<p>If the specified version does not exist, then the procedure creates it.</p>
<p>If the specified version exists, then procedure adds the tablespace set to the version. Only one Data Pump export dump file can exist in a version.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure creates a new version, and the version number can be used to manage the version.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t22" headers="r1c1-t22">
<p><code dir="ltr">repository_db_link</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t22 r1c2-t22">
<p>If the file group is in a remote database, then specify the name of the database link to the database that contains the file group. The database link must be accessible to the user who runs the procedure.</p>
<p>If this parameter is non-<code dir="ltr">NULL</code>, then the directory object specified in <code dir="ltr">export_directory_object</code> must exist on the local database and on the remote database. If <code dir="ltr">export_directory_object</code> is <code dir="ltr">NULL</code>, then the default directory object must exist on both databases. The directory object must have the same name on each database and must correspond to the same directory on a shared file system.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure does not use a database link, and the procedure uses the file group in the local database.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11784"></a>Usage Notes</p>
<p>To run this either version of this procedure, a user must meet the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">DROP</code> <code dir="ltr">TABLESPACE</code> privilege</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> privilege on the directory objects for the directories that contain the datafiles for the tablespace set. The names of these tablespaces are specified by the <code dir="ltr">tablespace_names</code> parameter. If a directory object does not exist for one or more of these directories, then create the directory objects and grant the necessary privileges before you run this procedure.</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export dump file, specified by the <code dir="ltr">dump_file</code> parameter or the <code dir="ltr">export_directory_object</code> parameter</p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export the log file, specified by the <code dir="ltr">log_file</code> parameter if non-<code dir="ltr">NULL</code> or by the <code dir="ltr">log_file_directory_object</code> parameter if non-<code dir="ltr">NULL</code></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<p>If the file group version of the procedure is run, then the user must have the necessary privileges to manage the file group.</p>
<p>Automatic Storage Management (ASM) directories can be specified for the directory objects that store datafiles and export dump files, but ASM directories cannot be specified for directory objects that store log files.</p>
<p>After detaching a tablespace set using this procedure, you can attach the tablespaces to a different database using the <code dir="ltr">ATTACH_TABLESPACES</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1006970">Overview</a></p>
</li>
<li>
<p><a href="#i1000995">ATTACH_TABLESPACES Procedure</a></p>
</li>
<li>
<p><a href="d_filgrp.htm#CEGFGIID">Chapter 68, &#34;DBMS_FILE_GROUP&#34;</a> for more information about file groups</p>
</li>
<li>
<p><a class="olink STRMS159" href="../STRMS/strms_ipro.htm#STRMS159"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
<li>
<p><a class="olink ADMIN003" href="../ADMIN/omf.htm#ADMIN003"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for more information about the Oracle-managed files feature</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS861" class="refsect2"><a id="i1001000"></a>
<h3 class="refsect2">PULL_SIMPLE_TABLESPACE Procedure<a id="sthref11785"></a></h3>
<p>This procedure copies a simple tablespace from a remote database and attaches it to the current database. The specified tablespace at the remote database must be online.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes the specified tablespace read-only at the remote database if it is not read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespace</p>
</li>
<li>
<p>Uses a database link and the <code dir="ltr">DBMS_FILE_TRANSFER</code> package to transfer the datafile for the tablespace and the log file for the Data Pump export to the current database</p>
</li>
<li>
<p>Places the datafile for the specified tablespace and the log file for the Data Pump export in the specified directory at the local database</p>
</li>
<li>
<p>If this procedure made the tablespace read-only, then makes the tablespace read/write</p>
</li>
<li>
<p>Uses Data Pump to import the metadata for the tablespace in the local database</p>
</li>
</ol>
<p>In addition, this procedure optionally can create a datafile for the tablespace that can be used with the local platform, if the platform at the remote database is different than the local database platform.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11786"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.PULL_SIMPLE_TABLESPACE(
   tablespace_name          IN VARCHAR2,
   database_link            IN VARCHAR2,
   directory_object         IN VARCHAR2  DEFAULT NULL,
   conversion_extension     IN VARCHAR2  DEFAULT NULL,
   convert_directory_object IN VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11787"></a>Parameters</p>
<div id="ARPLS68852" class="tblformal">
<p class="titleintable"><a id="sthref11788"></a><a id="sthref11789"></a>Table 164-9 PULL_SIMPLE_TABLESPACE Procedure Parameters</p>
<table class="cellalignment4330" title="PULL_SIMPLE_TABLESPACE Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.PULL_SIMPLE_TABLESPACE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t24">Parameter</th>
<th class="cellalignment4328" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t24" headers="r1c1-t24">
<p><code dir="ltr">tablespace_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t24 r1c2-t24">
<p>The tablespace to be pulled.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t24" headers="r1c1-t24">
<p><code dir="ltr">database_link</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t24 r1c2-t24">
<p>The name of the database link to the database that contains the tablespace to pull. The database link must be accessible to the user who runs the procedure.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t24" headers="r1c1-t24">
<p><code dir="ltr">directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t24 r1c2-t24">
<p>The directory object to which the datafile for the tablespace is copied on the local database. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
<p>The Data Pump import log file is written to this directory. The name of the log file is the same as the data file name for the tablespace, except with a <code dir="ltr">.plg</code> extension. If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t24" headers="r1c1-t24">
<p><code dir="ltr">conversion_extension</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t24 r1c2-t24">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the remote export database and the current import database.</p>
<p>If the platform is different for the export database and the import database, then specify an extension for the tablespace datafile that is different than the extension for the tablespace datafile at the remote database. In this case, the procedure transfers the datafile to the import database and converts it to be compatible with the current import database platform automatically. After conversion is complete, the original datafile is deleted at the import database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t24" headers="r1c1-t24">
<p><code dir="ltr">convert_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t24 r1c2-t24">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the remote export database and the current import database.</p>
<p>If the platform is different for the export database and the import database, then specify a directory object in the local export database. The procedure uses the directory object for platform conversion before it transfers the files to the remote database. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11790"></a>Usage Notes</p>
<p>To run this procedure, a user must meet the following requirements on the remote database:</p>
<ul>
<li>
<p>Have the <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> privilege on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> privilege on the directory object for the directory that contains the datafile for the tablespace. The name of this tablespace is specified by the <code dir="ltr">tablespace_name</code> parameter. If a directory object does not exist for this directory, then create the directory object and grant the necessary privileges before you run this procedure.</p>
</li>
</ul>
<p>To run this procedure, a user must meet the following requirements on the local database:</p>
<ul>
<li>
<p>Have the roles <code dir="ltr">IMP_FULL_DATABASE</code> and <code dir="ltr">EXECUTE_CATALOG_ROLE</code></p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export the log file, specified by the <code dir="ltr">log_file</code> parameter if non-<code dir="ltr">NULL</code></p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will hold the datafile for the tablespace, specified by the <code dir="ltr">directory_object</code> parameter</p>
</li>
</ul>
<p>Automatic Storage Management (ASM) directories cannot be used with this procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006970">Overview</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS862" class="refsect2"><a id="i1003360"></a>
<h3 class="refsect2">PULL_TABLESPACES Procedure<a id="sthref11791"></a></h3>
<p>This procedure copies a set of self-contained tablespaces from a remote database and attaches the tablespaces to the current database. All of the tablespaces in the specified tablespace set at the remote database must be online.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ol>
<li>
<p>Makes any read/write tablespace in the specified tablespace set at the remote database read-only</p>
</li>
<li>
<p>Uses Data Pump to export the metadata for the tablespaces in the tablespace set</p>
</li>
<li>
<p>Uses a database link and the <code dir="ltr">DBMS_FILE_TRANSFER</code> package to transfer the datafiles for the tablespace set and the log file for the Data Pump export to the current database</p>
</li>
<li>
<p>Places the datafiles that comprise the specified tablespace set in the specified directories at the local database</p>
</li>
<li>
<p>Places the log file for the Data Pump export in the specified directory at the local database</p>
</li>
<li>
<p>If this procedure made a tablespace read-only, then makes the tablespace read/write</p>
</li>
<li>
<p>Uses Data Pump to import the metadata for the tablespaces in the tablespace set at the local database</p>
</li>
</ol>
<p>In addition, this procedure optionally can create datafiles for the tablespace set that can be used with the local platform, if the platform at the remote database is different than the local database platform.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11792"></a>Syntax</p>
<pre dir="ltr">DBMS_STREAMS_TABLESPACE_ADM.PULL_TABLESPACES(
   datapump_job_name            IN OUT VARCHAR2,
   database_link                IN     VARCHAR2,
   tablespace_names             IN     TABLESPACE_SET,
   tablespace_directory_objects IN     DIRECTORY_OBJECT_SET,
   log_file                     IN     FILE,
   conversion_extension         IN     VARCHAR2  DEFAULT NULL,
   convert_directory_object     IN     VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11793"></a>Parameters</p>
<div id="ARPLS68853" class="tblformal">
<p class="titleintable"><a id="sthref11794"></a><a id="sthref11795"></a>Table 164-10 PULL_TABLESPACES Procedure Parameters</p>
<table class="cellalignment4330" title="PULL_TABLESPACES Procedure Parameters" summary="This table describes the Parameters of DBMS_STREAMS_TABLESPACE_ADM.PULL_TABLESPACES subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t26">Parameter</th>
<th class="cellalignment4328" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t26" headers="r1c1-t26">
<p><code dir="ltr">data_pump_job_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t26 r1c2-t26">
<p>The Data Pump job name. Specify a Data Pump job name to adhere to naming conventions or to track the job more easily.</p>
<p>If <code dir="ltr">NULL</code>, then the system generates a Data Pump job name.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t26" headers="r1c1-t26">
<p><code dir="ltr">database_link</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t26 r1c2-t26">
<p>The name of the database link to the database that contains the tablespace set to pull. The database link must be accessible to the user who runs the procedure.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t26" headers="r1c1-t26">
<p><code dir="ltr">tablespace_names</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t26 r1c2-t26">
<p>The tablespace set to be pulled.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t26" headers="r1c1-t26">
<p><code dir="ltr">tablespace_directory_objects</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t26 r1c2-t26">
<p>The set of directory objects to which the datafiles for the tablespaces are copied. If multiple directory objects are in the set, then the procedure copies a datafile to each directory object in the set in sequence. In this case, if the end of the directory object set is reached, then datafile copying starts again with the first directory object in the set.</p>
<p>If <code dir="ltr">NULL</code>, then the procedure raises an error.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t26" headers="r1c1-t26">
<p><code dir="ltr">log_file</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t26 r1c2-t26">
<p>Specify the log file name for the Data Pump export.</p>
<p>If <code dir="ltr">NULL</code> or if at least one file parameter is <code dir="ltr">NULL</code>, then the system generates a log file name with the extension <code dir="ltr">.plg</code> and places it in one of the data file directories.</p>
<p>If a file exists with the same name as the log file in the directory, then the procedure overwrites the file.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t26" headers="r1c1-t26">
<p><code dir="ltr">conversion_extension</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t26 r1c2-t26">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the remote export database and the current import database.</p>
<p>If the platform is different for the export database and the import database, then specify an extension for the tablespace datafiles that is different than the extension for the tablespace datafiles at the remote database. In this case, the procedure transfers the datafiles to the import database and converts them to be compatible with the current import database platform automatically. After conversion is complete, the original datafiles are deleted at the import database.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t26" headers="r1c1-t26">
<p><code dir="ltr">convert_directory_object</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t26 r1c2-t26">
<p>Specify <code dir="ltr">NULL</code> if the platform is the same for the remote export database and the current import database.</p>
<p>If the platform is different for the export database and the import database, then specify a directory object in the local export database. The procedure uses the directory object for platform conversion before it transfers the files to the remote database. You must specify the name of a directory object created using the SQL statement <code dir="ltr">CREATE</code> <code dir="ltr">DIRECTORY</code>.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11796"></a>Usage Notes</p>
<p>To run this procedure, a user must meet the following requirements on the remote database:</p>
<ul>
<li>
<p>Have the <code dir="ltr">EXP_FULL_DATABASE</code> role</p>
</li>
<li>
<p>Have <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_STREAMS_TABLESPACE_ADM</code> package</p>
</li>
<li>
<p>Have access to at least one data dictionary view that contains information about the tablespaces. These views include <code dir="ltr">DBA_TABLESPACES</code> and <code dir="ltr">USER_TABLESPACES</code>.</p>
</li>
<li>
<p>Have <code dir="ltr">MANAGE</code> <code dir="ltr">TABLESPACE</code> or <code dir="ltr">ALTER</code> <code dir="ltr">TABLESPACE</code> privilege on a tablespace if the tablespace must be made read-only</p>
</li>
<li>
<p>Have <code dir="ltr">READ</code> privilege on the directory objects for the directories that contain the datafiles for the tablespace set. The names of these tablespaces are specified by the <code dir="ltr">tablespace_names</code> parameter. If a directory object does not exist for one or more of these directories, then create the directory objects and grant the necessary privileges before you run this procedure.</p>
</li>
</ul>
<p>To run this procedure, a user must meet the following requirements on the local database:</p>
<ul>
<li>
<p>Have the roles <code dir="ltr">IMP_FULL_DATABASE</code> and <code dir="ltr">EXECUTE_CATALOG_ROLE</code></p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory object that will contain the Data Pump export the log file, specified by the <code dir="ltr">log_file</code> parameter if non-<code dir="ltr">NULL</code></p>
</li>
<li>
<p>Have <code dir="ltr">WRITE</code> privilege on the directory objects that will hold the datafiles for the tablespaces in the set, specified by the <code dir="ltr">tablespace_directory_objects</code> parameter</p>
</li>
</ul>
<p>Automatic Storage Management (ASM) directories can be specified for the directory objects that store datafiles and export dump files, but ASM directories cannot be specified for directory objects that store log files.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006970">Overview</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_streams_msg.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_sync_refresh.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>