<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2339"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DBMS_RULE"></a><title>DBMS_RULE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1086"/>
<meta name="dcterms.created" content="2016-09-02T5:36:30Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"/>
<meta name="dcterms.identifier" content="E41829-07"/>
<meta name="dcterms.isVersionOf" content="ARPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="d_rowid.htm" title="Previous" type="text/html"/>
<link rel="Next" href="d_rule_a.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41829-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">142/290</span> <!-- End Header -->
<div id="ARPLS303" class="chapter"><a id="CHDHAHII"></a>
<h1 class="chapter"><span class="secnum">138</span> DBMS_RULE</h1>
<p><a id="sthref8091"></a><a id="sthref8092"></a>The <code dir="ltr">DBMS_RULE</code> package contains subprograms that enable the evaluation of a rule set for a specified event.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDJCIEE">Using DBMS_RULE</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#i996763">Summary of DBMS_RULE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDJCIEE"></a>
<div id="ARPLS67784" class="refsect1">
<h2 class="refsect1">Using DBMS_RULE<a id="sthref8093"></a></h2>
<p>This section contains topics which relate to using the <code dir="ltr">DBMS_RULE</code> package.</p>
<ul>
<li>
<p><a href="#BIBIEJCC">Overview</a></p>
</li>
<li>
<p><a href="#i999307">Security Model</a></p>
</li>
</ul>
<div id="ARPLS73181" class="refsect2"><a id="BIBIEJCC"></a>
<h3 class="refsect2">Overview</h3>
<p>This package contains subprograms that enable the evaluation of a rule set for a specified event.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 283, &#34;Rule TYPEs&#34;</a> for more information about the types used with the <code dir="ltr">DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="d_rule_a.htm#CDEDGHHD">Chapter 139, &#34;DBMS_RULE_ADM&#34;</a> and <a class="olink STRMS005" href="../STRMS/strms_adrules.htm#STRMS005"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about this package and rules</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS67785" class="refsect2"><a id="i999307"></a>
<h3 class="refsect2">Security Model</h3>
<p><code dir="ltr">PUBLIC</code> is granted <code dir="ltr">EXECUTE</code> privilege on this package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG40048" href="../DBSEG/authorization.htm#DBSEG40048"><span class="italic">Oracle Database Security Guide</span></a> for more information about user group <code dir="ltr">PUBLIC</code></div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i996763"></a>
<div id="ARPLS530" class="refsect1">
<h2 class="refsect1">Summary of DBMS_RULE Subprograms</h2>
<div id="ARPLS67786" class="tblformal">
<p class="titleintable"><a id="sthref8094"></a><a id="sthref8095"></a>Table 138-1 DBMS_RULE Package Subprograms</p>
<table class="cellalignment4330" title="DBMS_RULE Package Subprograms" summary="This table lists the DBMS_RULE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t4">Subprogram</th>
<th class="cellalignment4328" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r2c1-t4 r1c2-t4">
<p>Closes an open iterator</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#CHDBDCDA">EVALUATE Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r3c1-t4 r1c2-t4">
<p>Evaluates the rules in the specified rule set that use the evaluation context specified</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#BIBDHHGJ">EVALUATE_EXPRESSION Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r4c1-t4 r1c2-t4">
<p>Evaluates an expression under the logged in user in a session</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#i998761">GET_NEXT_HIT Function</a></p>
</td>
<td class="cellalignment4329" headers="r5c1-t4 r1c2-t4">
<p>Returns the next rule that evaluated to <code dir="ltr">TRUE</code> from a true rules iterator, or returns the next rule that evaluated to <code dir="ltr">MAYBE</code> from a maybe rules iterator; returns <code dir="ltr">NULL</code> if there are no more rules that evaluated to <code dir="ltr">TRUE</code> or <code dir="ltr">MAYBE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#CIACDEFE">IS_FAST Procedure</a></p>
</td>
<td class="cellalignment4329" headers="r6c1-t4 r1c2-t4">
<p>Returns <code dir="ltr">TRUE</code> if the expression can be evaluated fast. An expression can be evaluated fast if the engine does not need to run any internal SQL and does not need to go to PL/SQL layer in case there are any PL/SQL functions referred.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<div id="ARPLS517" class="refsect2"><a id="i998673"></a>
<h3 class="refsect2">CLOSE_ITERATOR Procedure<a id="sthref8096"></a><a id="sthref8097"></a></h3>
<p>This procedure closes an open iterator.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8098"></a>Syntax</p>
<pre dir="ltr">DBMS_RULE.CLOSE_ITERATOR(
   iterator  IN  BINARY_INTEGER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8099"></a>Parameter</p>
<div id="ARPLS67787" class="tblformal">
<p class="titleintable"><a id="sthref8100"></a><a id="sthref8101"></a>Table 138-2 CLOSE_ITERATOR Procedure Parameter</p>
<table class="cellalignment4330" title="CLOSE_ITERATOR Procedure Parameter" summary="This table describes Parameters used by the DBMS_RULE.CLOSE_ITERATOR subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t5">Parameter</th>
<th class="cellalignment4328" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">iterator</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t5 r1c2-t5">
<p>Iterator to be closed</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8102"></a>Usage Notes</p>
<p>This procedure requires an open iterator that was returned by an earlier call to <code dir="ltr">DBMS_RULE.EVALUATE</code> in the same session. The user who runs this procedure does not require any privileges on the rule set being evaluated.</p>
<p>Closing an iterator frees resources, such as memory, associated with the iterator. Therefore, Oracle recommends that you close an iterator when it is no longer needed.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a href="#CHDBDCDA">EVALUATE Procedure</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS558" class="refsect2"><a id="CHDBDCDA"></a>
<h3 class="refsect2">EVALUATE Procedure<a id="sthref8103"></a><a id="sthref8104"></a></h3>
<p>This procedure evaluates the rules in the specified rule set that use the evaluation context specified for a specified event.</p>
<p>This procedure is overloaded. The <code dir="ltr">true_rules</code> and <code dir="ltr">maybe_rules</code> parameters are mutually exclusive with the <code dir="ltr">true_rules_iterator</code> and <code dir="ltr">maybe_rules_iterator</code> parameters. In addition, the procedure with the <code dir="ltr">true_rules</code> and <code dir="ltr">maybe_rules</code> parameters includes the <code dir="ltr">stop_on_first_hit</code> parameter, but the other procedure does not.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8105"></a>Syntax</p>
<pre dir="ltr">DBMS_RULE.EVALUATE(
   rule_set_name          IN     VARCHAR2,
   evaluation_context     IN     VARCHAR2,
   event_context          IN     SYS.RE$NV_LIST               DEFAULT NULL,
   table_values           IN     SYS.RE$TABLE_VALUE_LIST      DEFAULT NULL,
   column_values          IN     SYS.RE$COLUMN_VALUE_LIST     DEFAULT NULL,
   variable_values        IN     SYS.RE$VARIABLE_VALUE_LIST   DEFAULT NULL,
   attribute_values       IN     SYS.RE$ATTRIBUTE_VALUE_LIST  DEFAULT NULL,
   result_cache           IN     BOOLEAN                      DEFAULT FALSE,
   stop_on_first_hit      IN     BOOLEAN                      DEFAULT FALSE,
   simple_rules_only      IN     BOOLEAN                      DEFAULT FALSE,
   true_rules             OUT    SYS.RE$RULE_HIT_LIST,
   maybe_rules            OUT    SYS.RE$RULE_HIT_LIST);

DBMS_RULE.EVALUATE(
   rule_set_name          IN     VARCHAR2,
   evaluation_context     IN     VARCHAR2,
   event_context          IN     SYS.RE$NV_LIST               DEFAULT NULL,
   table_values           IN     SYS.RE$TABLE_VALUE_LIST      DEFAULT NULL,
   column_values          IN     SYS.RE$COLUMN_VALUE_LIST     DEFAULT NULL,
   variable_values        IN     SYS.RE$VARIABLE_VALUE_LIST   DEFAULT NULL,
   attribute_values       IN     SYS.RE$ATTRIBUTE_VALUE_LIST  DEFAULT NULL,
   simple_rules_only      IN     BOOLEAN                      DEFAULT FALSE,
   true_rules_iterator    OUT    BINARY_INTEGER,
   maybe_rules_iterator   OUT    BINARY_INTEGER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8106"></a>Parameters</p>
<div id="ARPLS67788" class="tblformal">
<p class="titleintable"><a id="sthref8107"></a><a id="sthref8108"></a>Table 138-3 EVALUATE Procedure Parameters</p>
<table class="cellalignment4330" title="EVALUATE Procedure Parameters" summary="This table describes Parameters used by the DBMS_RULE.EVALUATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t7">Parameter</th>
<th class="cellalignment4328" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">rule_set_name</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t7 r1c2-t7">
<p>Name of the rule set in the form <code dir="ltr">[</code><code dir="ltr"><span class="codeinlineitalic">schema_name</span></code><code dir="ltr">.]</code><code dir="ltr"><span class="codeinlineitalic">rule_set_name</span></code>. For example, to evaluate all of the rules in a rule set named <code dir="ltr">hr_rules</code> in the <code dir="ltr">hr</code> schema, enter <code dir="ltr">hr.hr_rules</code> for this parameter. If the schema is not specified, then the schema of the current user is used.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">evaluation_context</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t7 r1c2-t7">
<p>An evaluation context name in the form <code dir="ltr">[</code><code dir="ltr"><span class="codeinlineitalic">schema_name</span></code><code dir="ltr">.]</code><code dir="ltr"><span class="codeinlineitalic">evaluation_context_name</span></code>. If the schema is not specified, then the name of the current user is used.</p>
<p>Only rules that use the specified evaluation context are evaluated.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">event_context</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t7 r1c2-t7">
<p>A list of name-value pairs that identify events that cause evaluation</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">table_values</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t7 r1c2-t7">
<p>Contains the data for table rows using the table aliases specified when the evaluation context was created. Each table alias in the list must be unique.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t7" headers="r1c1-t7">
<p><code dir="ltr">column_values</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t7 r1c2-t7">
<p>Contains the partial data for table rows. It must not contain column values for tables, whose values are already specified in <code dir="ltr">table_values</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t7" headers="r1c1-t7">
<p><code dir="ltr">variable_values</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t7 r1c2-t7">
<p>A list containing the data for variables.</p>
<p>The only way for an explicit variable value to be known is to specify its value in this list.</p>
<p>If an implicit variable value is not specified in the list, then the function used to obtain the value of the implicit variable is invoked. If an implicit variable value is specified in the list, then this value is used and the function is not invoked.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t7" headers="r1c1-t7">
<p><code dir="ltr">attribute_values</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t7 r1c2-t7">
<p>Contains the partial data for variables. It must not contain attribute values for variables whose values are already specified in <code dir="ltr">variable_values</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t7" headers="r1c1-t7">
<p><code dir="ltr">stop_on_first_hit</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t7 r1c2-t7">
<p>If <code dir="ltr">TRUE</code>, then the rules engine stops evaluation as soon as it finds a <code dir="ltr">TRUE</code> rule.</p>
<p>If <code dir="ltr">TRUE</code> and there are no <code dir="ltr">TRUE</code> rules, then the rules engine stops evaluation as soon as it finds a rule that may evaluate to <code dir="ltr">TRUE</code> given more data.</p>
<p>If <code dir="ltr">FALSE</code>, then the rules engine continues to evaluate rules even after it finds a <code dir="ltr">TRUE</code> rule.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t7" headers="r1c1-t7">
<p><code dir="ltr">simple_rules_only</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t7 r1c2-t7">
<p>If <code dir="ltr">TRUE</code>, then only those rules that are simple enough to be evaluated fast (without issuing SQL) are considered for evaluation.</p>
<p>If <code dir="ltr">FALSE</code>, then evaluates all rules.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r11c1-t7" headers="r1c1-t7">
<p><code dir="ltr">true_rules</code></p>
</td>
<td class="cellalignment4329" headers="r11c1-t7 r1c2-t7">
<p>Receives the output of the <code dir="ltr">EVALUATE</code> procedure into a varray of <code dir="ltr">RE$RULE_HIT_LIST</code> type.</p>
<p>If no rules evaluate to <code dir="ltr">TRUE</code>, then <code dir="ltr">true_rules</code> is empty.</p>
<p>If at least one rule evaluates to <code dir="ltr">TRUE</code> and <code dir="ltr">stop_on_first_hit</code> is <code dir="ltr">TRUE</code>, then <code dir="ltr">true_rules</code> contains one rule that evaluates to <code dir="ltr">TRUE</code>.</p>
<p>If <code dir="ltr">stop_on_first_hit</code> is <code dir="ltr">FALSE</code>, then <code dir="ltr">true_rules</code> contains all rules that evaluate to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r12c1-t7" headers="r1c1-t7">
<p><code dir="ltr">maybe_rules</code></p>
</td>
<td class="cellalignment4329" headers="r12c1-t7 r1c2-t7">
<p>If all rules can be evaluated completely, without requiring any additional data, then <code dir="ltr">maybe_rules</code> is empty.</p>
<p>If <code dir="ltr">stop_on_first_hit</code> is <code dir="ltr">TRUE</code>, then if there is at least one rule that may evaluate to <code dir="ltr">TRUE</code> given more data, and no rules evaluate to <code dir="ltr">TRUE</code>, then <code dir="ltr">maybe_rules</code> contains one rule that may evaluate to <code dir="ltr">TRUE</code>.</p>
<p>If <code dir="ltr">stop_on_first_hit</code> is <code dir="ltr">FALSE</code>, then <code dir="ltr">maybe_rules</code> contains all rules that may evaluate to <code dir="ltr">TRUE</code> given more data.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r13c1-t7" headers="r1c1-t7">
<p><code dir="ltr">true_rules_iterator</code></p>
</td>
<td class="cellalignment4329" headers="r13c1-t7 r1c2-t7">
<p>Contains the iterator for accessing rules that are <code dir="ltr">TRUE</code></p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r14c1-t7" headers="r1c1-t7">
<p><code dir="ltr">maybe_rules_iterator</code></p>
</td>
<td class="cellalignment4329" headers="r14c1-t7 r1c2-t7">
<p>Contains the iterator for accessing rules that may be <code dir="ltr">TRUE</code> given additional data or the ability to issue SQL</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r15c1-t7" headers="r1c1-t7">
<p><code dir="ltr">result_cache</code></p>
</td>
<td class="cellalignment4329" headers="r15c1-t7 r1c2-t7">
<p>If <code dir="ltr">TRUE</code>, Result Cache will be created. If evalate procedure is called with either <code dir="ltr">true_rules_iterator</code> or <code dir="ltr">maybe_rules_iterator</code>, then <code dir="ltr">result_cache</code> is not enabled.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8109"></a>Usage Notes</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Rules in the rule set that use an evaluation context different from the one specified are not considered for evaluation.</div>
<p>The rules in the rule set are evaluated using the data specified for <code dir="ltr">table_values</code>, <code dir="ltr">column_values</code>, <code dir="ltr">variable_values</code>, and <code dir="ltr">attribute_values</code>. These values must refer to tables and variables in the specified evaluation context. Otherwise, an error is raised.</p>
<p>The caller may specify, using <code dir="ltr">stop_on_first_hit</code>, if evaluation must stop as soon as the first <code dir="ltr">TRUE</code> rule or the first <code dir="ltr">MAYBE</code> rule (if there are no <code dir="ltr">TRUE</code> rules) is found.</p>
<p>The caller may also specify, using <code dir="ltr">simple_rules_only</code>, if only rules that are simple enough to be evaluated fast (which means without SQL) should be considered for evaluation. This makes evaluation faster, but causes rules that cannot be evaluated without SQL to be returned as <code dir="ltr">MAYBE</code> rules.</p>
<p>Partial evaluation is supported. The <code dir="ltr">EVALUATE</code> procedure can be called with data for only some of the tables, columns, variables, or attributes. In such a case, rules that cannot be evaluated because of a lack of data are returned as <code dir="ltr">MAYBE</code> rules, unless they can be determined to be <code dir="ltr">TRUE</code> or <code dir="ltr">FALSE</code> based on the values of one or more simple expressions within the rule. For example, given a value of <code dir="ltr">1</code> for attribute <code dir="ltr">&#34;a.b&#34;</code> of variable <code dir="ltr">&#34;x&#34;</code>, a rule with the following rule condition can be returned as <code dir="ltr">TRUE</code>, without a value for table <code dir="ltr">&#34;tab&#34;</code>:</p>
<pre dir="ltr">(:x.a.b = 1) or (tab.c &gt; 10)
</pre>
<p>The results of an evaluation are the following:</p>
<ul>
<li>
<p><code dir="ltr">TRUE</code> rules, which is the list of rules that evaluate to <code dir="ltr">TRUE</code> based on the given data. These rules are returned either in the <code dir="ltr">OUT</code> parameter <code dir="ltr">true_rules</code>, which returns all of the rules that evaluate to <code dir="ltr">TRUE</code>, or in the <code dir="ltr">OUT</code> parameter <code dir="ltr">true_rules_iterator</code>, which returns each rule that evaluates to <code dir="ltr">TRUE</code> one at a time.</p>
</li>
<li>
<p><code dir="ltr">MAYBE</code> rules, which is the list of rules that could not be evaluated for one of the following reasons:</p>
<ul>
<li>
<p>The rule refers to data that was unavailable. For example, a variable attribute <code dir="ltr">&#34;x.a.b&#34;</code> is specified, but no value is specified for the variable <code dir="ltr">&#34;x&#34;</code>, the attribute <code dir="ltr">&#34;a&#34;</code>, or the attribute <code dir="ltr">&#34;a.b&#34;</code>.</p>
</li>
<li>
<p>The rule is not simple enough to be evaluated fast (without SQL) and <code dir="ltr">simple_rules_only</code> is specified as <code dir="ltr">TRUE</code>, or partial data is available.</p>
</li>
</ul>
<p>Maybe rules are returned either in the <code dir="ltr">OUT</code> parameter <code dir="ltr">maybe_rules</code>, which returns all of the rules that evaluate to <code dir="ltr">MAYBE</code>, or in the <code dir="ltr">OUT</code> parameter <code dir="ltr">maybe_rules_iterator</code>, which returns each rule that evaluates to <code dir="ltr">MAYBE</code> one at a time.</p>
</li>
</ul>
<p>The caller may specify whether the procedure returns all of the rules that evaluate to <code dir="ltr">TRUE</code> and <code dir="ltr">MAYBE</code> for the event or an iterator for rules that evaluate to <code dir="ltr">TRUE</code> and <code dir="ltr">MAYBE</code>. A true rules iterator enables the client to fetch each rule that evaluates to <code dir="ltr">TRUE</code> one at a time, and a maybe rules iterator enables the client to fetch each rule that evaluates to <code dir="ltr">MAYBE</code> one at a time.</p>
<p>If you use an iterator, then you use the <code dir="ltr">GET_NEXT_HIT</code> function in the <code dir="ltr">DBMS_RULE</code> package to retrieve the next rule that evaluates to <code dir="ltr">TRUE</code> or <code dir="ltr">MAYBE</code> from an iterator. Oracle recommends that you close an iterator if it is no longer needed to free resources, such as memory, used by the iterator. An iterator can be closed in the following ways:</p>
<ul>
<li>
<p>The <code dir="ltr">CLOSE_ITERATOR</code> procedure in the <code dir="ltr">DBMS_RULE</code> package is run with the iterator specified.</p>
</li>
<li>
<p>The iterator returns <code dir="ltr">NULL</code> because no more rules evaluate to <code dir="ltr">TRUE</code> or <code dir="ltr">MAYBE</code>.</p>
</li>
<li>
<p>The session in which the iterator is running ends.</p>
</li>
</ul>
<p>To run the <code dir="ltr">DBMS_RULE.EVALUATE</code> procedure, a user must meet at least one of the following requirements:</p>
<ul>
<li>
<p>Have <code dir="ltr">EXECUTE_ON_RULE_SET</code> privilege on the rule set</p>
</li>
<li>
<p>Have <code dir="ltr">EXECUTE</code>_<code dir="ltr">ANY</code>_<code dir="ltr">RULE</code>_<code dir="ltr">SET</code> system privilege</p>
</li>
<li>
<p>Be the rule set owner</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The rules engine does not invoke any actions. An action context can be returned with each returned rule, but the client of the rules engine must invoke any necessary actions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 283, &#34;Rule TYPEs&#34;</a> for more information about the types used with the <code dir="ltr">DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="#i998761">GET_NEXT_HIT Function</a></p>
</li>
<li>
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74412" class="refsect2"><a id="BIBDHHGJ"></a>
<h3 class="refsect2">EVALUATE_EXPRESSION Procedure</h3>
<p>This procedure allows user to evaluate an expression under the logged in user in a session.</p>
<p>Any re-execute of the same expression with same table alias and variable type will result in reusing the same compiled context. With fixed compile cache size, its possible of aging....</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8110"></a>Syntax</p>
<pre dir="ltr">DBMS_RULE.EVALUATE_EXPRESSION(
   rule_expression         IN         VARCHAR2,
   table_aliases           IN         SYS.RE$TABLE_ALIAS_LIST:= NULL,
   variable_types          IN         SYS.RE$VARIABLE_TYPE_LIST:= NULL,
   table_values            IN         SYS.RE$TABLE_VALUE_LIST:= NULL,
   column_values           IN         SYS.RE$COLUMN_VALUE_LIST:=NULL,
   variable_values         IN         SYS.RE$VARIABLE_VALUE_LIST:=NULL,
   attribute_values        IN         SYS.RE$ATTRIBUTE_VALUE_LIST:=NULL,
   cache                   IN         BOOLEAN DEFAULT FALSE,
   result_val              OUT        BOOLEAN);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8111"></a>Parameters</p>
<div id="ARPLS74413" class="tblformal">
<p class="titleintable"><a id="sthref8112"></a><a id="sthref8113"></a>Table 138-4 EVALUATE_EXPRESSION Procedure Parameters</p>
<table class="cellalignment4330" title="EVALUATE_EXPRESSION Procedure Parameters" summary="This table describes Parameters used by the DBMS_RULE.EVALUATE_EXPRESSION subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t11">Parameter</th>
<th class="cellalignment4328" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t11" headers="r1c1-t11">
<p><code dir="ltr">rule_expression</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t11 r1c2-t11">
<p>Contains an expression string.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t11" headers="r1c1-t11">
<p><code dir="ltr">table_alias</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t11 r1c2-t11">
<p>Contains alias of tables referred in the expression string.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t11" headers="r1c1-t11">
<p><code dir="ltr">variable_types</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t11 r1c2-t11">
<p>Contains type definitions of variables used in expression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t11" headers="r1c1-t11">
<p><code dir="ltr">table_values</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t11 r1c2-t11">
<p>Contains <code dir="ltr">ROWID</code> of table row for expression evaluation.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r6c1-t11" headers="r1c1-t11">
<p><code dir="ltr">column_values</code></p>
</td>
<td class="cellalignment4329" headers="r6c1-t11 r1c2-t11">
<p>Contains values of columns referred in the expression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r7c1-t11" headers="r1c1-t11">
<p><code dir="ltr">variable_values</code></p>
</td>
<td class="cellalignment4329" headers="r7c1-t11 r1c2-t11">
<p>Contains values of variables referred in the expression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r8c1-t11" headers="r1c1-t11">
<p><code dir="ltr">attribute_values</code></p>
</td>
<td class="cellalignment4329" headers="r8c1-t11 r1c2-t11">
<p>Contains values of attributes referred in the expression.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r9c1-t11" headers="r1c1-t11">
<p><code dir="ltr">cache</code></p>
</td>
<td class="cellalignment4329" headers="r9c1-t11 r1c2-t11">
<p>If <code dir="ltr">TRUE</code>, Result Cache will be created.</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r10c1-t11" headers="r1c1-t11">
<p><code dir="ltr">result_val</code></p>
</td>
<td class="cellalignment4329" headers="r10c1-t11 r1c2-t11">
<p>Result of the evaluation.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS518" class="refsect2"><a id="i998761"></a>
<h3 class="refsect2">GET_NEXT_HIT Function<a id="sthref8114"></a><a id="sthref8115"></a></h3>
<p>This function returns the next rule that evaluated to <code dir="ltr">TRUE</code> from a true rules iterator, or returns the next rule that evaluated to <code dir="ltr">MAYBE</code> from a maybe rules iterator. The function returns <code dir="ltr">NULL</code> if there are no more rules that evaluated to <code dir="ltr">TRUE</code> or <code dir="ltr">MAYBE</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8116"></a>Syntax</p>
<pre dir="ltr">DBMS_RULE.GET_NEXT_HIT(
   iterator  IN  BINARY_INTEGER)
 RETURN SYS.RE$RULE_HIT;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8117"></a>Parameter</p>
<div id="ARPLS67789" class="tblformal">
<p class="titleintable"><a id="sthref8118"></a><a id="sthref8119"></a>Table 138-5 GET_NEXT_HIT Function Parameter</p>
<table class="cellalignment4330" title="GET_NEXT_HIT Function Parameter" summary="This table describes Parameters used by the DBMS_RULE.GET_NEXT_HIT subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t12">Parameter</th>
<th class="cellalignment4328" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">iterator</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t12 r1c2-t12">
<p>The iterator from which the rule that evaluated to <code dir="ltr">TRUE</code> or <code dir="ltr">MAYBE</code> is retrieved</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8120"></a>Usage Notes</p>
<p>This procedure requires an open iterator that was returned by an earlier call to <code dir="ltr">DBMS_RULE.EVALUATE</code> in the same session. The user who runs this procedure does not require any privileges on the rule set being evaluated.</p>
<p>When an iterator returns <code dir="ltr">NULL</code>, it is closed automatically. If an open iterator is no longer needed, then use the <code dir="ltr">CLOSE_ITERATOR</code> procedure in the <code dir="ltr">DBMS_RULE</code> package to close it.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This function raises an error if the rule set being evaluated was modified after the call to the <code dir="ltr">DBMS_RULE.EVALUATE</code> procedure that returned the iterator. Modifications to a rule set include added rules to the rule set, changing existing rules in the rule set, dropping rules from the rule set, and dropping the rule set.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 283, &#34;Rule TYPEs&#34;</a> for more information about the types used with the <code dir="ltr">DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="#CHDBDCDA">EVALUATE Procedure</a></p>
</li>
<li>
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS74613" class="refsect2"><a id="CIACDEFE"></a>
<h3 class="refsect2">IS_FAST Procedure<a id="sthref8121"></a><a id="sthref8122"></a></h3>
<p>Given an expression, of either rule or Independent Expression, this procedure will return <code dir="ltr">TRUE</code> if the expression can be evaluated as fast. An expression can be evaluated as fast if the engine does not need to run any internal SQL and does not need to go to PL/SQL layer in case there are any PL/SQL functions referred.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8123"></a>Syntax</p>
<pre dir="ltr">DBMS_RULE.IS_FAST(
   expression            IN       VARCHAR2,
   table_aliases         IN       SYS.RE$TABLE_ALIAS_LIST:= NULL,
   variable_types        IN       SYS.RE$VARIABLE_TYPE_LIST:= NULL,
   result_val            OUT      BOOLEAN);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8124"></a>Parameter</p>
<div id="ARPLS74614" class="tblformal">
<p class="titleintable"><a id="sthref8125"></a><a id="sthref8126"></a>Table 138-6 IS_FAST Procedure Parameter</p>
<table class="cellalignment4330" title="IS_FAST Procedure Parameter" summary="This table describes Parameters used by the DBMS_RULE.IS_FAST subprogram." dir="ltr">
<thead>
<tr class="cellalignment4321">
<th class="cellalignment4328" id="r1c1-t15">Parameter</th>
<th class="cellalignment4328" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r2c1-t15" headers="r1c1-t15">
<p><code dir="ltr">expression</code></p>
</td>
<td class="cellalignment4329" headers="r2c1-t15 r1c2-t15">
<p>Expression to check</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r3c1-t15" headers="r1c1-t15">
<p><code dir="ltr">table_aliases</code></p>
</td>
<td class="cellalignment4329" headers="r3c1-t15 r1c2-t15">
<p>Alias of tables referred in the above expression string</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r4c1-t15" headers="r1c1-t15">
<p><code dir="ltr">variable_types</code></p>
</td>
<td class="cellalignment4329" headers="r4c1-t15 r1c2-t15">
<p>Type definitions of variables used in expression</p>
</td>
</tr>
<tr class="cellalignment4321">
<td class="cellalignment4329" id="r5c1-t15" headers="r1c1-t15">
<p><code dir="ltr">result_val</code></p>
</td>
<td class="cellalignment4329" headers="r5c1-t15 r1c2-t15">
<p>If the expression can be evaluated as fast</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4320">
<tr>
<td class="cellalignment4329">
<table class="cellalignment4325">
<tr>
<td class="cellalignment4324"><a href="d_rowid.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4324"><a href="d_rule_a.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4332">
<table class="cellalignment4323">
<tr>
<td class="cellalignment4324"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4324"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4324"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4324"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4324"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4324"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>