<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-62"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/High%20Availability"></a><title>High Availability</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1080"/>
<meta name="dcterms.created" content="2016-05-05T16:23:33Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Development Guide"/>
<meta name="dcterms.identifier" content="E41452-07"/>
<meta name="dcterms.isVersionOf" content="ADFNS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="adfns_secur.htm" title="Previous" type="text/html"/>
<link rel="Next" href="adfns_adv_plsql.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41452-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/38</span> <!-- End Header -->
<div id="ADFNS915" class="chapter"><a id="BABJFIDG"></a>
<h1 class="chapter"><span class="secnum">4</span> High Availability</h1>
<p>This chapter explains how to design high availability into the database and database applications.</p>
<p class="subhead2"><a id="ADFNS916"></a>Topics:</p>
<ul>
<li>
<p><a href="#BABFAAAJ">Failover and Query Replay</a></p>
</li>
<li>
<p><a href="#BABCJAJA">Fast Application Notification (FAN) and Fast Connection Failover (FCF)</a></p>
</li>
<li>
<p><a href="#BABHFEAG">Application Continuity and Transaction Guard</a></p>
</li>
<li>
<p><a href="#BABJHEJE">Service and Load Management for Database Clouds</a></p>
</li>
</ul>
<a id="BABFAAAJ"></a>
<div id="ADFNS917" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> Failover and Query Replay</h2>
<p>This topic describes the following topics:</p>
<ul>
<li>
<p><a href="#BABCHAEI">Transparent Application Failover (TAF)</a></p>
</li>
<li>
<p><a href="#BABBJHJC">Application Continuity</a></p>
</li>
</ul>
<a id="BABCHAEI"></a>
<div id="ADFNS919" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.1.1</span> Transparent Application Failover (TAF)</h3>
<p>This section describes what Transparent Application Failover (TAF) is, how to configure TAF, and using TAF callbacks to notify the application of events as they are generated.</p>
<p class="subhead2"><a id="ADFNS533"></a>Topics:</p>
<ul>
<li>
<p><a href="#BABCEDHA">About Transparent Application Failover</a></p>
</li>
<li>
<p><a href="#BABCGIHG">Configuring Transparent Application Failover</a></p>
</li>
<li>
<p><a href="#BABBEIFC">Using Transparent Application Failover Callbacks</a></p>
</li>
</ul>
<a id="BABCEDHA"></a>
<div id="ADFNS534" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.1.1.1</span> About Transparent Application Failover</h4>
<p>Transparent Application Failover (TAF) is a client-side feature of OCI, OCCI, Java Database Connectivity (JDBC) OCI driver, and ODP.NET designed to minimize disruptions to end-user applications that occur when database connectivity fails because of instance or network failure. TAF can be implemented on a variety of system configurations including Oracle Real Application Clusters (Oracle RAC), Oracle Data Guard physical standby databases, and on a single instance system after it restarts (for example, when repairs are made).</p>
<p>TAF enables client applications to automatically (transparently) reconnect to a preconfigured secondary instance, creating a fresh connection, but identical to the connection that was established on the first original instance. That is, the connection properties are the same as that of the earlier connection, regardless of how the connection was lost. In this case, the active transactions roll back. Also, all statements that an application attempts to use after a failure attempt also failover.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LNOCI16679" href="../LNOCI/oci09adv.htm#LNOCI16679"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information about OCI TAF</p>
</li>
<li>
<p><a class="olink LNCPP20011" href="../LNCPP/performance.htm#LNCPP20011"><span class="italic">Oracle C++ Call Interface Programmer&#39;s Guide</span></a> for more information about OCCI TAF</p>
</li>
<li>
<p><a class="olink JJDBC27000" href="../JJDBC/ocitaf.htm#JJDBC27000"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about JDBC TAF</p>
</li>
<li>
<p><a class="olink ODPNT" href="../ODPNT/toc.htm"><span class="italic">Oracle Data Provider for .NET Developer&#39;s Guide for Microsoft Windows</span></a> for more information about ODP.NET TAF</p>
</li>
<li>
<p><a class="olink NETRF279" href="../NETRF/tnsnames.htm#NETRF279"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about client-side configuration of TAF (Connect Data Section)</p>
</li>
<li>
<p><a class="olink ARPLS092" href="../ARPLS/d_serv.htm#ARPLS092"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the server-side configuration of TAF (<code dir="ltr">DBMS_SERVICE</code>)</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABCGIHG"></a>
<div id="ADFNS535" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.1.1.2</span> Configuring Transparent Application Failover</h4>
<p>TAF can be configured on both the client side and server side with the server side taking precedence if both client and server sides are configured. On the client side, you configure TAF by including the <code dir="ltr">FAILOVER_MODE</code> parameter in the <code dir="ltr">CONNECT_DATA</code> portion of a connect descriptor. On the server side, you configure TAF by modifying the target service with the <code dir="ltr">DBMS_SERVICE.MODIFY_SERVICE</code> packaged procedure.</p>
<p>See the references in <a href="#BABCEDHA">Section 4.1.1.1</a> for more configuration information.</p>
</div>
<!-- class="sect3" -->
<a id="BABBEIFC"></a>
<div id="ADFNS536" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.1.1.3</span> Using Transparent Application Failover Callbacks</h4>
<p>TAF callbacks are callbacks that are registered in case of failover and called during failover to notify the application of events as they are generated. They are called several times while reestablishing the user&#39;s session.</p>
<p>As the application developer you may want to inform the user that failover is in progress because there is a slight delay as failover proceeds. The first call to the callback carries out that function. Also, when failover is successful and the connection is reestablished, you may want to inform the user that failover has happened and then you may want to replay <code dir="ltr">ALTER SESSION</code> commands because these commands are not automatically replayed on the second instance. A subsequent call to the callback performs that function. Also, if failover is unsuccessful, then you want to inform the application that failover cannot occur. A third call to the callback performs this function as well.</p>
<p>Using TAF callbacks makes possible:</p>
<ul>
<li>
<p>Notifying users of the status of failover throughout the failover process; when failover is underway, when failover is successful, and when failover is unsuccessful</p>
</li>
<li>
<p>Replaying of <code dir="ltr">ALTER SESSION</code> commands when that is needed</p>
</li>
<li>
<p>Reauthenticating a user handle besides the primary handle for each time a session begins on the new connection. Because each user handle represents a server-side session, the client may want to replay <code dir="ltr">ALTER SESSION</code> commands for that session.</p>
</li>
</ul>
<p>See the references in <a href="#BABCGIHG">Section 4.1.1.2</a> for specific callback registration information for each interface; such as, the structure and parameters of the callback for each interface, and for failover callback examples.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABBJHJC"></a>
<div id="ADFNS920" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.1.2</span> Application Continuity</h3>
<p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), Oracle Database supports Application Continuity for Java. This feature supports the concept of commit outcome and recovery of active requests allowing JDBC-based applications in high availability (HA) infrastructures to avoid application errors from system failures by providing an immediate implicit recovery and resubmission of all active requests as soon as failover occurs and connectivity is restored to database services. See <a href="#BABHFEAG">Section 4.3, &#34;Application Continuity and Transaction Guard,&#34;</a> for more information.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="adfns_app_continuity.htm#BABDJGDI">Chapter 26, &#34;Ensuring Application Continuity,&#34;</a> for more information about Application Continuity</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCJAJA"></a>
<div id="ADFNS923" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.2</span> Fast Application Notification (FAN) and Fast Connection Failover (FCF)</h2>
<p>This section describes what Fast Application Notification (FAN) and Fast Connection Failover (FCF) are and how applications can respond to FAN events in a high availability environment and use FCF to relocate connections after a failover.</p>
<p class="subhead2"><a id="ADFNS537"></a>Topics:</p>
<ul>
<li>
<p><a href="#BABDBJDI">About Fast Application Notification (FAN)</a></p>
</li>
<li>
<p><a href="#BABEGBBA">About Fast Connection Failover (FCF)</a></p>
</li>
</ul>
<a id="BABDBJDI"></a>
<div id="ADFNS538" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.1</span> About Fast Application Notification (FAN)</h3>
<p>An important component of high availability is a notification mechanism called Fast Application Notification (FAN). FAN notifies other processes about configuration and service level information that includes service status changes, such as UP or DOWN events. Applications can respond to FAN events and take immediate action. FAN UP and DOWN events can apply to instances, services, and nodes.</p>
<p>FAN provides the ability to immediately terminate an active transaction when an instance or server fails. FAN integrated Oracle clients receive the events and respond. Applications can respond either by propagating the error to the user or by resubmitting the transactions and masking the error from the application user. When a DOWN event occurs, FAN integrated clients immediately clean up connections to the terminated database. When an UP event occurs, the FAN integrated clients create new connections to the new primary database instance.</p>
<p>Oracle has integrated FAN with many of the common Oracle client drivers. Therefore, the easiest way to use FAN is to use an integrated Oracle client. You can use the Oracle Connection Manager (CMAN) session pools, OCI, Universal Connection Pool for Java, JDBC <code dir="ltr">simplefan</code> API, and ODP.NET connection pools. The overall goal is to enable applications to consistently obtain connections to the available primary database at anytime.</p>
<p>FAN events are published using Oracle Notification Service and Oracle Streams Advanced Queuing. The publication mechanisms are automatically configured as part of an Oracle RAC installation. Here, an Oracle RAC installation means any installation of Oracle Clusterware with Oracle RAC, Oracle RAC One Node, Oracle Data Guard (fast-start-failover), or Oracle Data Guard single instance with Oracle Clusterware). Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), ONS is the primary notification mechanism for a new client (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) and a new server (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)), while the AQ HA notification feature is deprecated and maintained only for backward compatibility when there is an old client (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) or old server (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)).</p>
<p>Applications can use FAN programmatically by using the JDBC and Oracle RAC FAN application programming interface (API) or by using callbacks with OCI to subscribe to FAN events and to execute event handling actions upon the receipt of an event.</p>
<p>When you use JDBC or Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1) OCI or ODP.Net clients, you must create an Oracle Notification Services (ONS) network that is running on the server. When you use Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span> OCI or ODP.NET clients, you must enable Oracle Advanced Queuing (AQ) HA notifications for your services.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD7128" href="../RACAD/GUID-EB0E1525-D3B3-469C-BE22-A569C76864A6.htm#RACAD7128"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about FAN</p>
</li>
<li>
<p><a class="olink ADMIN13312" href="../ADMIN/restart.htm#ADMIN13312"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about enabling FAN events in an Oracle Restart environment</p>
</li>
<li>
<p><a class="olink LNOCI09100" href="../LNOCI/oci09adv.htm#LNOCI09100"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information about receiving runtime connection load balancing advisory FAN events to balance application session requests in an Oracle RAC environment with Oracle Clusterware set up and enabled</p>
</li>
<li>
<p><a class="olink LNCPP20028" href="../LNCPP/performance.htm#LNCPP20028"><span class="italic">Oracle C++ Call Interface Programmer&#39;s Guide</span></a> for more information about runtime load balancing of the stateless connection pool by use of service metrics distributed by the Oracle RAC load-balancing advisory</p>
</li>
<li>
<p><a class="olink JJDBC26000" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=JJDBC26000"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about fast connection failover</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABEGBBA"></a>
<div id="ADFNS539" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.2</span> About Fast Connection Failover (FCF)</h3>
<p>In a configuration with a standby database, after you have added Oracle Notification Services (ONS) to your Oracle Restart configurations and enabled Oracle Advanced Queuing (AQ) HA notifications for your services, you can enable clients for Fast Connection Failover (FCF). The clients then receive FAN events and can relocate connections to the current primary database after an Oracle Data Guard failover. Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), ONS is the primary notification mechanism for a new client (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) and a new server (Oracle Database 12<span class="italic">c</span> Release 1 (12.1)), while the AQ HA notification feature is deprecated and maintained only for backward compatibility when there is an old client (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)) or old server (pre-Oracle Database 12<span class="italic">c</span> Release 1 (12.1)).</p>
<p>For databases with no standby database configured, you can still configure the client FAN events. When there is an outage (planned or unplanned), you can configure the client to retry the connection to the database. Because Oracle Restart restarts the failed database, the client can reconnect when the database restarts.</p>
<p>You must enable FAN events to provide FAN integrated clients support for FCF in an Oracle Data Guard or standalone environment with no standby database.</p>
<p>FCF offers a driver-independent way for your Java Database Connectivity (JDBC) application to take advantage of the connection failover facilities offered by Oracle Database. FCF is integrated with implicit connection cache and Oracle RAC to provide high availability event notification.</p>
<p>OCI clients can enable FCF by registering to receive notifications about Oracle Restart high availability FAN events and respond when events occur. This improves the session failover response time in OCI and removes terminated connections from connection and session pools. This feature works on OCI applications, including those that use Transparent Application Failover (TAF), connection pools, or session pools.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LNCPP20028" href="../LNCPP/performance.htm#LNCPP20028"><span class="italic">Oracle C++ Call Interface Programmer&#39;s Guide</span></a> for more information about runtime load balancing of the stateless connection pool by use of service metrics distributed by the Oracle RAC load-balancing advisory</p>
</li>
<li>
<p><a class="olink JJDBC26000" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=JJDBC26000"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about fast connection failover</p>
</li>
<li>
<p><a class="olink JJUAR" href="../JJUAR/toc.htm"><span class="italic">Oracle Universal Connection Pool for JDBC Java API Reference</span></a></p>
</li>
<li>
<p><a class="olink ADMIN13194" href="../ADMIN/restart.htm#ADMIN13194"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about enabling FCF for JDBC clients</p>
</li>
<li>
<p><a class="olink ADMIN13195" href="../ADMIN/restart.htm#ADMIN13195"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about enabling FCF for OCI clients</p>
</li>
<li>
<p><a class="olink ADMIN13196" href="../ADMIN/restart.htm#ADMIN13196"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about enabling FCF for ODP.NET clients</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHFEAG"></a>
<div id="ADFNS924" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.3</span> Application Continuity and Transaction Guard</h2>
<p>In Oracle Database 10<span class="italic">g</span> Release 2 (10.2) HA framework, JDBC clients, OCI clients, and ODP.NET clients support fast application notification (FAN) messages. FAN is designed to quickly notify an application of outages at the node, database, instance, service, and public network levels. After being notified of the failure, an application can reestablish the failed connection on a surviving instance. However, for releases before Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1) there was no ability to reliably determine the outcome of the failed transaction and the ability to recover the active transaction after database connectivity had been restored.</p>
<p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the DBA can configure server-side settings for the database services used by the applications to support two new features Application Continuity for Java and Transaction Guard. See <a href="adfns_app_continuity.htm#BGBGJJDA">Section 26.2.2.1, &#34;When Is Application Continuity Transparent?,&#34;</a> for information about when Application Continuity for Java is transparent (performed automatically) and when it is not transparent and what infrastructure changes may be needed when it is not transparent.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="adfns_app_continuity.htm#BABDJGDI">Chapter 26, &#34;Ensuring Application Continuity&#34;</a> and <a href="adfns_trans_idemp_guard.htm#BABFBHEH">Chapter 25, &#34;Using Transaction Guard&#34;</a> for more information about Application Continuity for Java and Transaction Guard</p>
</li>
<li>
<p><a class="olink LNOCI80660" href="../LNOCI/oci09adv.htm#LNOCI80660"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information about OCI and Transaction Guard</p>
</li>
<li>
<p><a class="olink JJDBC27000" href="../JJDBC/ocitaf.htm#JJDBC27000"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about JDBC, Transaction Guard, and Application Continuity for Java</p>
</li>
</ul>
</div>
<div id="ADFNS316" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref128"></a>
<h3 class="sect2"><span class="secnum">4.3.1</span> Transaction Guard</h3>
<p>Transaction Guard is a protocol and developer API supported for JDBC Type 4 (Oracle Thin), OCI, OCCI, and ODP.Net drivers.</p>
<p>Transaction Guard introduces the concept of <span class="italic">at-most-once transaction semantics</span>, also referred to as transaction idempotence. When an application opens a connection to the database using this service, the logical transaction ID (LTXID) is generated at authentication and stored in the session handle at the database and a copy at the client driver. This is a globally unique ID that identifies the database transaction from the application perspective. Applications use the Transaction Guard APIs to obtain a known outcome following a recoverable error.</p>
<p>When there is an outage, an application using Transaction Guard can retrieve the LTXID from the previous failed session&#39;s handle and use it to determine the outcome of the transaction that was active prior to the session failure. If the LTXID is determined to be <code dir="ltr">UNCOMMITTED</code>, then the application can return the <code dir="ltr">UNCOMMITTED</code> outcome to the user to decide what action to take, or optionally, the application can replay an uncommitted transaction. If the LTXID is determined to be <code dir="ltr">COMMITTED</code>, then the transaction is committed and the application can return this outcome to the end user and might be able to take a new connection and continue. Transaction Guard also reports whether the last user call not only <code dir="ltr">COMMITTED</code>, but also whether it completed changing needed nontransactional states - see <code dir="ltr">USER_CALL_COMPLETED</code>. See <a href="adfns_trans_idemp_guard.htm#BABFBHEH">Chapter 25</a> for more information about Transaction Guard.</p>
</div>
<!-- class="sect2" -->
<div id="ADFNS317" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref129"></a>
<h3 class="sect2"><span class="secnum">4.3.2</span> Application Continuity for Java</h3>
<p>Application Continuity for Java masks planned or unplanned outages (that cause database session unavailability) by attempting to rebuild the database session transactional and nontransactional states, so the outage appears to the user as no more than a delayed execution.</p>
<p>Application Continuity for Java works with the Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1) server to determine if the database session can be replayed.</p>
<p>When a recoverable error occurs that makes the database session unavailable, an error message is sent back to the application. A driver receives the FAN message (down or interrupt), aborts the dead session, initiates reconnect and reauthenticates, checks out a new session and uses the LTXID of the dead session to determine the last outcome of the session at the outage. If an optional callback has been registered, the JDBC replay driver initializes the connection using this callback to restore initial nontransactional session state (NTSS), then continues replaying the request.</p>
<p>Application Continuity prepares replay by using Transaction Guard to determine the outcome of the last operation submitted by the session that received the error. If the submission committed and completed, the new session returns this result to the application and continues with the nontransactional state established if the <code dir="ltr">SESSION_STATE_CONSISTENCY</code> mode is <code dir="ltr">STATIC</code>, or exits if the <code dir="ltr">SESSION_STATE_CONSISTENCY</code> mode is <code dir="ltr">DYNAMIC</code>. <code dir="ltr">DYNAMIC</code> session state consistency is appropriate for most applications.</p>
<p>If the last submission has replay enabled, the replay driver prepares to replay the submission and replays the saved statements for the request. When replaying, preserved mutable data are restored if permission has been granted. Validation is performed at the server to ensure that the client-visible results are identical to the original submission. When replay is complete, the application proceeds with its application logic returning to runtime mode as if all that occurred was a delay in execution similar to that which happens under load.</p>
<p>In some cases, replay cannot restore the data that the client potentially made decisions upon. The replay then returns the original error to the application and appears like a delayed error.</p>
<p>Application Continuity supports recovering any outage that is due to database unavailability against a copy of a database with the same DBID (forward in time) or within an Active Data Guard farm. This may be Oracle RAC One, Oracle Real Application Clusters, Data Guard, or Active Data Guard.</p>
<p>See <a href="adfns_app_continuity.htm#BGBGJJDA">Section 26.2.2.1, &#34;When Is Application Continuity Transparent?,&#34;</a> for information about when Application Continuity for Java is transparent (performed automatically) and when it is not transparent and what infrastructure changes may be needed when it is not transparent. See <a href="adfns_app_continuity.htm#BABIJCEE">Section 26.3, &#34;Potential Side Effects of Application Continuity,&#34;</a> for some replay side effects that you may need to mitigate. See <a href="adfns_app_continuity.htm#BABJHJIA">Section 26.4, &#34;Restrictions and Other Considerations for Application Continuity,&#34;</a> for replay restrictions.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJHEJE"></a>
<div id="ADFNS925" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.4</span> Service and Load Management for Database Clouds</h2>
<p>This section describes the service and load management framework. It also explains how OCI based applications in a service and load management framework environment utilize fast application notification (FAN) messages to respond to outages at the node, database, instance, service, and public network levels. After being notified of the outage, an application can reestablish the failed connection on a surviving instance in this framework.</p>
<p class="subhead2"><a id="ADFNS540"></a>Topics:</p>
<ul>
<li>
<p><a href="#BABEJEGG">About Service and Load Management for Database Clouds</a></p>
</li>
</ul>
<a id="BABEJEGG"></a>
<div id="ADFNS541" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.1</span> About Service and Load Management for Database Clouds</h3>
<p>The database cloud is a self-contained system of databases integrated by the service and load management framework that ensures high performance, availability and optimal utilization of resources. This framework provides effective balancing of processing workload across distributed databases that maintain multiple synchronized replicas both locally and in geographically disparate regional data centers. Replicas may be instances in an Oracle RAC environment, or single instances interconnected using Oracle Data Guard, Oracle Golden Gate, or any combination that supports replication technology. Thus, the service and load management framework provides dynamic load balancing, failover, and centralized service management for these replicated databases.</p>
<p>A global service is a database service provided by multiple databases synchronized through some form of data replication that satisfies quality of service requirements for the service. This allows a client request for a service to be forwarded to any database that provides that service.</p>
<p>A database pool within a database cloud consists of all databases that provide the same global service that belong to the same administrative domain. The database cloud is partitioned into multiple database pools to simplify service management and to provide higher levels of security by allowing each pool to be administered by a different administrator.</p>
<p>A global service manager (GSM) is a software component that provides service-level load balancing and centralized management of services within the database cloud. Load balancing is done at connection and runtime. Other capabilities provided by GSM include creation, configuration, starting, stopping, and relocation of services and maintaining global service properties such as cardinality and region locality. A region is a logical boundary known as a data center that contains database clients and servers that are considered close enough to each other so as to reduce network latency to levels required by applications accessing these data centers.</p>
<p>The GSM can run on a separate host, or can be colocated with a database instance. Every region must have at least one GSM instance running. For high availability, Oracle recommends that you deploy multiple GSM instances in a region. A GSM instance belongs to only one particular region; however, it manages global services in all database pools associated with this region.</p>
<p>From an application developer&#39;s perspective, a client program connects to a regional global service manager (GSM) and requests a connection to a global service. The client need not specify which database or instance it requires. GSM forwards the client&#39;s request to the optimal instance within a database pool in the database cloud that offers the service.</p>
<p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the DBA can configure client-side connect strings for database services in a Global Data Services (GDS) framework using an Oracle Net string.</p>
<p>Introduced in Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the logical transaction ID (LTXID) is initially generated at authentication and stored in the session handle and used to identify a database transaction from the application perspective. The logical transaction ID is globally unique and identifies the transaction within a highly available (HA) infrastructure.</p>
<p>Using the HA Framework, a client application (JDBC, OCI, and ODP.NET) supports fast application notification (FAN) messages. FAN is designed to quickly notify an application of outages at the node, database, instance, service, and public network levels. After being notified of the outage, an application can reestablish the failed connection on a surviving instance.</p>
<p>Beginning with Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.1), the DBA can configure server-side settings for the database services used by the applications to support Application Continuity for Java and Transaction Guard.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT89330" href="../CNCPT/dist_pro.htm#CNCPT89330"><span class="italic">Oracle Database Concepts</span></a> for an overview of global service management and description of the physical and logical components of the service and load management framework</p>
</li>
<li>
<p><a class="olink GSMUG107" href="../GSMUG/intro.htm#GSMUG107"><span class="italic">Oracle Database Global Data Services Concepts and Administration Guide</span></a> for more information about global service management in a database cloud</p>
</li>
<li>
<p><a class="olink GSMUG650" href="../GSMUG/globser.htm#GSMUG650"><span class="italic">Oracle Database Global Data Services Concepts and Administration Guide</span></a> for more information about configuring database clients for connectivity to the Global Data Services (GDS) framework.</p>
</li>
<li>
<p><a href="adfns_trans_idemp_guard.htm#BABFBHEH">Chapter 25, &#34;Using Transaction Guard&#34;</a> and <a href="adfns_app_continuity.htm#BABDJGDI">Chapter 26, &#34;Ensuring Application Continuity,&#34;</a> for more information about Transaction Guard and Application Continuity</p>
</li>
<li>
<p><a class="olink LNOCI72990" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=LNOCI72990"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information about OCI, Application Continuity, and Transaction Guard</p>
</li>
<li>
<p><a class="olink JJDBC27000" href="../JJDBC/ocitaf.htm#JJDBC27000"><span class="italic">Oracle Database JDBC Developer&#39;s Guide</span></a> for more information about JDBC, Application Continuity, and Transaction Guard</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment286">
<tr>
<td class="cellalignment295">
<table class="cellalignment291">
<tr>
<td class="cellalignment290"><a href="adfns_secur.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment290"><a href="adfns_adv_plsql.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment298">
<table class="cellalignment289">
<tr>
<td class="cellalignment290"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment290"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment290"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment290"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment290"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment290"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>