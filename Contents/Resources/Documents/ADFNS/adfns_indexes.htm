<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-72"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Using%20Indexes%20in%20Database%20Applications"></a><title>Using Indexes in Database Applications</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1080"/>
<meta name="dcterms.created" content="2016-05-05T16:23:34Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Development Guide"/>
<meta name="dcterms.identifier" content="E41452-07"/>
<meta name="dcterms.isVersionOf" content="ADFNS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="adfns_regexp.htm" title="Previous" type="text/html"/>
<link rel="Next" href="adfns_constraints.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41452-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/38</span> <!-- End Header -->
<div id="ADFNS005" class="chapter"><a id="g1012606"></a>
<h1 class="chapter"><span class="secnum">9</span> Using Indexes in Database Applications</h1>
<p><a id="sthref484"></a><span class="bold">Indexes</span> are optional structures, associated with tables and clusters, which allow SQL queries to execute more quickly. Just as the index in this guide helps you locate information faster than if there were no index, an Oracle Database index provides a faster access path to table data. You can use indexes without rewriting any queries. Your results are the same, but you see them more quickly.</p>
<p>This chapter supplements this information:</p>
<ul>
<li>
<p>The explanation of indexes and index-organized tables in <a class="olink CNCPT721" href="../CNCPT/indexiot.htm#CNCPT721"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p>The information about managing indexes in <a class="olink ADMIN016" href="../ADMIN/indexes.htm#ADMIN016"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a></p>
</li>
<li>
<p>The explanation of how indexes and clusters can enhance or degrade performance in <a class="olink TGSQL850" href="../TGSQL/tgsql_indc.htm#TGSQL850"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</li>
</ul>
<p class="subhead2"><a id="ADFNS1019"></a>Topics:</p>
<ul>
<li>
<p><a href="#i1007888">Guidelines for Managing Indexes</a></p>
</li>
<li>
<p><a href="#i1006330">Managing Indexes</a></p>
</li>
<li>
<p><a href="#i1008243">When to Use Domain Indexes</a></p>
</li>
<li>
<p><a href="#i1006366">When to Use Function-Based Indexes</a></p>
</li>
</ul>
<a id="i1007888"></a>
<div id="ADFNS00502" class="sect1">
<h2 class="sect1"><span class="secnum">9.1</span> Guidelines for Managing Indexes</h2>
<p>Here is a summary of the guidelines for managing indexes. For details, see <a class="olink ADMIN11710" href="../ADMIN/indexes.htm#ADMIN11710"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a>:</p>
<ul>
<li>
<p>Create indexes after inserting table data</p>
</li>
<li>
<p>Index the correct tables and columns</p>
</li>
<li>
<p>Order index columns for performance</p>
</li>
<li>
<p>Limit the number of indexes for each table</p>
</li>
<li>
<p>Drop indexes that are no longer needed</p>
</li>
<li>
<p>Understand deferred segment creation</p>
</li>
<li>
<p>Estimate index size and set storage parameters</p>
</li>
<li>
<p>Specify the tablespace for each index</p>
</li>
<li>
<p>Consider parallelizing index creation</p>
</li>
<li>
<p>Consider creating indexes with <code dir="ltr">NOLOGGING</code></p>
</li>
<li>
<p>Understand when to use unusable or invisible indexes</p>
</li>
<li>
<p>Consider costs and benefits of coalescing or rebuilding indexes</p>
</li>
<li>
<p>Consider cost before disabling or dropping constraints</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1006330"></a>
<div id="ADFNS00503" class="sect1">
<h2 class="sect1"><span class="secnum">9.2</span> Managing Indexes</h2>
<p><a class="olink ADMIN016" href="../ADMIN/indexes.htm#ADMIN016"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> has this information about managing indexes:</p>
<ul>
<li>
<p><a class="olink ADMIN11722" href="../ADMIN/indexes.htm#ADMIN11722">Creating indexes</a></p>
</li>
<li>
<p><a class="olink ADMIN11732" href="../ADMIN/indexes.htm#ADMIN11732">Altering indexes</a></p>
</li>
<li>
<p><a class="olink ADMIN11736" href="../ADMIN/indexes.htm#ADMIN11736">Monitoring space use of indexes</a></p>
</li>
<li>
<p><a class="olink ADMIN11737" href="../ADMIN/indexes.htm#ADMIN11737">Dropping indexes</a></p>
</li>
<li>
<p><a class="olink ADMIN11738" href="../ADMIN/indexes.htm#ADMIN11738">Data dictionary views that display information about indexes</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="adfns_constraints.htm#BEIDDADF">Section 10.3, &#34;Creating Indexes for Use with Constraints&#34;</a></div>
</div>
<!-- class="sect1" -->
<a id="i1008243"></a>
<div id="ADFNS00504" class="sect1">
<h2 class="sect1"><span class="secnum">9.3</span> When to Use Domain Indexes</h2>
<p>A <a id="sthref485"></a><a id="sthref486"></a><span class="bold">domain index</span> (also called an <a id="sthref487"></a><span class="bold">application domain index</span>) is a customized index specific to an application that was implemented using a data cartridge (for example, a search engine or geographic information system). For information about domain indexes, see <a class="olink CNCPT607" href="../CNCPT/indexiot.htm#CNCPT607"><span class="italic">Oracle Database Concepts</span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADDCI270" href="../ADDCI/ext_idx_frmwork.htm#ADDCI270"><span class="italic">Oracle Database Data Cartridge Developer&#39;s Guide</span></a> for conceptual background to help you decide when to build domain indexes</div>
</div>
<!-- class="sect1" -->
<a id="i1006366"></a>
<div id="ADFNS00505" class="sect1">
<h2 class="sect1"><span class="secnum">9.4</span> When to Use Function-Based Indexes</h2>
<p>A <a id="sthref488"></a><span class="bold">function-based index</span> computes the value of an expression that involves one or more columns and stores it in the index. The index expression can be an arithmetic expression or an expression that contains a SQL function, PL/SQL function, package function, or C callout. Function-based indexes also support linguistic sorts based on collation keys, efficient linguistic collation of SQL statements, and case-insensitive sorts.</p>
<p>A function-based index improves the performance of queries that use the index expression (especially if the expression is computationally intensive). However:</p>
<ul>
<li>
<p>The database must also evaluate the index expression to process statements that do not use it.</p>
</li>
<li>
<p>Function-based indexes on columns that are frequently modified are expensive for the database to maintain.</p>
</li>
</ul>
<p>The <a id="sthref489"></a><a id="sthref490"></a>optimizer can use function-based indexes only for cost-based optimization, while it can use indexes on columns for both cost-based and rule-based optimization.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>A function-based index cannot contain the value <a id="sthref491"></a><code dir="ltr">NULL</code>. Therefore, either ensure that no column involved in the index expression can contain <code dir="ltr">NULL</code> or use the <code dir="ltr">NVL</code> function in the index expression to substitute another value for <code dir="ltr">NULL</code>. (For information about <code dir="ltr">NVL</code>, see <a class="olink SQLRF00684" href="../SQLRF/functions131.htm#SQLRF00684"><span class="italic">Oracle Database SQL Language Reference</span></a>.)</p>
</li>
<li>
<p>Oracle Database treats descending indexes as if they were function-based indexes (for more information, see <a class="olink SQLRF53994" href="../SQLRF/statements_5013.htm#SQLRF53994"><span class="italic">Oracle Database SQL Language Reference</span></a>).</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="ADFNS1021"></a>Topics:</p>
<ul>
<li>
<p><a href="#i1006409">Advantages of Function-Based Indexes</a></p>
</li>
<li>
<p><a href="#i1006463">Disadvantages of Function-Based Indexes</a></p>
</li>
<li>
<p><a href="#g1012345">Examples of Function-Based Indexes</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT1161" href="../CNCPT/indexiot.htm#CNCPT1161"><span class="italic">Oracle Database Concepts</span></a> for additional conceptual information about function-based indexes</p>
</li>
<li>
<p><a class="olink ADMIN11730" href="../ADMIN/indexes.htm#ADMIN11730"><span class="italic">Oracle Database Administrator&#39;s Guide</span></a> for information about creating function-based indexes</p>
</li>
<li>
<p><a class="olink NLSPG294" href="../NLSPG/ch5lingsort.htm#NLSPG294"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information about function-based linguistic indexes</p>
</li>
<li>
<p><a class="olink CNCPT1163" href="../CNCPT/indexiot.htm#CNCPT1163"><span class="italic">Oracle Database Concepts</span></a> for more information about how the optimizer uses function-based indexes</p>
</li>
<li>
<p><a class="olink TGSQL864" href="../TGSQL/tgsql_indc.htm#TGSQL864"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for information about using function-based indexes for performance</p>
</li>
</ul>
</div>
<a id="i1006409"></a>
<div id="ADFNS254" class="sect2">
<h3 class="sect2"><span class="secnum">9.4.1</span> Advantages of Function-Based Indexes</h3>
<p>A function-based index has these advantages:</p>
<ul>
<li>
<p>A function-based index increases the number of situations where the database can perform an index range scan (described in <a class="olink CNCPT88840" href="../CNCPT/indexiot.htm#CNCPT88840"><span class="italic">Oracle Database Concepts</span></a>) instead of a full index scan (described in <a class="olink CNCPT88838" href="../CNCPT/indexiot.htm#CNCPT88838"><span class="italic">Oracle Database Concepts</span></a>).</p>
<p>An index range scan typically has a fast response time when the <code dir="ltr">WHERE</code> clause selects fewer than 15% of the rows of a large table. The <a id="sthref492"></a><a id="sthref493"></a>optimizer can more accurately estimate how many rows an expression selects if the expression is materialized in a function-based index.</p>
<p>Oracle Database represents the index expression as a virtual column, on which the <code dir="ltr">ANALYZE</code> statement (described in <a class="olink SQLRF01105" href="../SQLRF/statements_4005.htm#SQLRF01105"><span class="italic">Oracle Database SQL Language Reference</span></a>) can build a histogram.</p>
</li>
<li>
<p>A function-based index precomputes and stores the value of an expression.</p>
<p>Queries can get the value of the expression from the index instead of computing it. The more queries that need the value, and the more computationally intensive the index expression, the more the index improves application performance. (See <a href="#CIHEDEBD">Example 9-1</a>.)</p>
</li>
<li>
<p>You can create a function-based index on an object column or <code dir="ltr">REF</code> column.</p>
<p>The index expression can be the invocation of a method that returns an object type. For more information, see <a class="olink ADOBJ7478" href="../ADOBJ/adobjdes.htm#ADOBJ7478"><span class="italic">Oracle Database Object-Relational Developer&#39;s Guide</span></a>. (See <a href="#CIHEGHEF">Example 9-2</a> and the example in <a class="olink SQLRF54048" href="../SQLRF/statements_5013.htm#SQLRF54048"><span class="italic">Oracle Database SQL Language Reference</span></a>.)</p>
</li>
<li>
<p>A function-based index lets you perform more powerful sorts.</p>
<p>The index expression can invoke the SQL functions <code dir="ltr">UPPER</code> and <code dir="ltr">LOWER</code> for case-insensitive sorts (as in <a href="#CIHFBBEB">Example 9-3</a>) and the SQL function <code dir="ltr">NLSSORT</code> for linguistic-based sorts (as in <a href="#CIHCADHA">Example 9-4</a>).</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1006463"></a>
<div id="ADFNS257" class="sect2">
<h3 class="sect2"><span class="secnum">9.4.2</span> Disadvantages of Function-Based Indexes</h3>
<p>A function-based index has these disadvantages:</p>
<ul>
<li>
<p>The optimizer can use a function-based index only for cost-based optimization, not for rule-based optimization.</p>
<p>The cost-based optimizer uses statistics stored in the dictionary. To gather statistics for a function-based index, invoke either <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">GATHER_TABLE_STATS</code> (described in <a class="olink ARPLS68582" href="../ARPLS/d_stats.htm#ARPLS68582"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>) or <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">GATHER_SCHEMA_STATS</code> (described in <a class="olink ARPLS68577" href="../ARPLS/d_stats.htm#ARPLS68577"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>).</p>
</li>
<li>
<p>The database does not use a function-based index until you analyze the index itself and the table on which it is defined.</p>
<p>To analyze the index and the table on which the index is defined, invoke either <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">GATHER_TABLE_STATS</code> or <code dir="ltr">DBMS_STATS</code>.<code dir="ltr">GATHER_SCHEMA_STATS</code>.</p>
</li>
<li>
<p>The database does not use function-based indexes when doing <code dir="ltr">OR</code> expansion.</p>
</li>
<li>
<p>You must ensure that any schema-level or package-level PL/SQL function that the index expression invokes is <a id="sthref494"></a><a id="sthref495"></a>deterministic (that is, that the function always return the same result for the same input).</p>
<p>You must declare the function as <code dir="ltr">DETERMINISTIC</code>, but because Oracle Database does not check this assertion, you must ensure that the function really is deterministic.</p>
<p>If you change the semantics of a <code dir="ltr">DETERMINISTIC</code> function and recompile it, then you must manually rebuild any dependent function-based indexes and materialized views. Otherwise, they report results for the prior version of the function.</p>
</li>
<li>
<p>If the index expression is a function invocation, then the function return type cannot be constrained.</p>
<p>Because you cannot constrain the function return type with <code dir="ltr">NOT</code> <code dir="ltr">NULL</code>, you must ensure that the query that uses the index cannot fetch <code dir="ltr">NULL</code> values. Otherwise, the database performs a full table scan.</p>
</li>
<li>
<p>The index expression cannot invoke an aggregate function (described in <a class="olink SQLRF20035" href="../SQLRF/functions003.htm#SQLRF20035"><span class="italic">Oracle Database SQL Language Reference</span></a>).</p>
</li>
<li>
<p>A bitmapped function-based index cannot be a descending index (see <a class="olink SQLRF53995" href="../SQLRF/statements_5013.htm#SQLRF53995"><span class="italic">Oracle Database SQL Language Reference</span></a>).</p>
</li>
<li>
<p>The data type of the index expression cannot be <code dir="ltr">VARCHAR2</code>, <code dir="ltr">RAW</code>, <code dir="ltr">LONGRAW</code>, or a PL/SQL data type of unknown length.</p>
<p>That is, you cannot index an expression of unknown length. However, you can index a known-length substring of that expression. For example:</p>
<pre dir="ltr">CREATE OR REPLACE FUNCTION initials (
  name  IN VARCHAR2
) <span class="bold">RETURN VARCHAR2</span>
  DETERMINISTIC
IS
BEGIN
  RETURN(&#39;A. J.&#39;);
END;
/

/* Invoke SUBSTR both when creating index and when referencing
   function in queries. */
 
CREATE INDEX func_substr_index ON
EMPLOYEES(<span class="bold">SUBSTR(initials(FIRST_NAME),1,10)</span>);
 
SELECT <span class="bold">SUBSTR(initials(FIRST_NAME),1,10)</span> FROM EMPLOYEES;
</pre></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a class="olink SQLRF53993" href="../SQLRF/statements_5013.htm#SQLRF53993"><span class="italic">Oracle Database SQL Language Reference</span></a> for notes on function-based indexes</p>
</li>
<li>
<p><a class="olink SQLRF01212" href="../SQLRF/statements_5013.htm#SQLRF01212"><span class="italic">Oracle Database SQL Language Reference</span></a> for restrictions on function-based indexes</p>
</li>
<li>
<p><a class="olink LNPLS01370" href="../LNPLS/create_function.htm#LNPLS01370"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about the <code dir="ltr">CREATE</code> <code dir="ltr">FUNCTION</code> statement, including restrictions</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="g1012345"></a>
<div id="ADFNS258" class="sect2">
<h3 class="sect2"><span class="secnum">9.4.3</span> Examples of Function-Based Indexes</h3>
<p class="subhead2"><a id="ADFNS1022"></a><a id="sthref496"></a>Examples:</p>
<ul>
<li>
<p><a href="#CIHEDEBD">Example 9-1, &#34;Function-Based Index for Precomputing Arithmetic Expression&#34;</a></p>
</li>
<li>
<p><a href="#CIHEGHEF">Example 9-2, &#34;Function-Based Indexes on Object Column&#34;</a></p>
</li>
<li>
<p><a href="#CIHFBBEB">Example 9-3, &#34;Function-Based Index for Faster Case-Insensitive Searches&#34;</a></p>
</li>
<li>
<p><a href="#CIHCADHA">Example 9-4, &#34;Function-Based Index for Language-Dependent Sorting&#34;</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a href="#CIHEDEBD">Example 9-1</a> and <a href="#CIHEGHEF">Example 9-2</a> use composite indexes (indexes on multiple table columns), described in <a class="olink CNCPT88833" href="../CNCPT/indexiot.htm#CNCPT88833"><span class="italic">Oracle Database Concepts</span></a>.</div>
<p><a href="#CIHEDEBD">Example 9-1</a> creates a table with columns <code dir="ltr">a</code>, <code dir="ltr">b</code>, and <code dir="ltr">c</code>; creates an index on the table, and then queries the table. The index is a composite index on three columns: a virtual column that represents the expression <code dir="ltr">a+b*(c-1)</code>, column <code dir="ltr">a</code>, and column <code dir="ltr">b</code>. The query uses the indexed expression in its <code dir="ltr">WHERE</code> clause; therefore, it can use an index range scan instead of a full index scan.</p>
<div id="ADFNS260" class="example">
<p class="titleinexample"><a id="CIHEDEBD"></a>Example 9-1 Function-Based Index for Precomputing Arithmetic Expression</p>
<p>Create table on which to create index:</p>
<pre dir="ltr">DROP TABLE Fbi_tab;
CREATE TABLE Fbi_tab (
  a INTEGER, 
  b INTEGER, 
  c INTEGER
);
</pre>
<p>Create index:</p>
<pre dir="ltr">CREATE INDEX Idx ON Fbi_tab (a+b*(c-1), a, b);
</pre>
<p>This query can use an index range scan instead of a full index scan:</p>
<pre dir="ltr">SELECT a FROM Fbi_tab WHERE <span class="bold">a+b*(c-1)</span> &lt; 100;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CNCPT88839" href="../CNCPT/indexiot.htm#CNCPT88839"><span class="italic">Oracle Database Concepts</span></a> for information about fast full index scans</div>
<p>In <a href="#CIHEGHEF">Example 9-2</a>, assume that the object type <code dir="ltr">Reg_obj</code> has been defined, and that it stores information about a city. The example creates a table whose first column has type <code dir="ltr">Reg_obj</code>, a deterministic function with a parameter of type <code dir="ltr">Reg_obj</code>, and two function-based indexes that invoke the function. The first query uses the first index to quickly find cities further than 1000 miles from the equator. The second query uses the second index (which is composite) to quickly find cities where the temperature delta is less than 20 and the maximum temperature is greater than 75. (The table is not populated for the example, so the queries return no rows.)</p>
<div id="ADFNS99862" class="example">
<p class="titleinexample"><a id="CIHEGHEF"></a>Example 9-2 Function-Based Indexes on Object Column</p>
<p>Create table with object column:</p>
<pre dir="ltr">DROP TABLE Weatherdata_tab;
CREATE TABLE Weatherdata_tab (
  <span class="bold">Reg_obj</span> INTEGER,
  Maxtemp INTEGER,
  Mintemp INTEGER
);
 
</pre>
<p>Create deterministic function with parameter of type <code dir="ltr">Reg_obj</code>:</p>
<pre dir="ltr">CREATE OR REPLACE FUNCTION Distance_from_equator (
  <span class="bold">Reg_obj</span> IN INTEGER
) RETURN INTEGER
  <span class="bold">DETERMINISTIC</span>
IS
BEGIN
  RETURN(3000);
END;
/
 
</pre>
<p>Create first function-based index:</p>
<pre dir="ltr">CREATE INDEX Distance_index
ON Weatherdata_tab (<span class="bold">Distance_from_equator (Reg_obj)</span>);
 
</pre>
<p>Use index expression in query:</p>
<pre dir="ltr"><span class="bold">SELECT * FROM Weatherdata_tab</span>
<span class="bold">WHERE (Distance_from_equator (Reg_Obj)) &gt; &#39;1000&#39;;</span>
 
</pre>
<p>Result:</p>
<pre dir="ltr">no rows selected
 
</pre>
<p>Create second function-based (and composite) index:</p>
<pre dir="ltr">CREATE INDEX Compare_index
ON Weatherdata_tab (<span class="bold">(Maxtemp - Mintemp) DESC, Maxtemp</span>);
 
</pre>
<p>Use index expression and indexed column in query:</p>
<pre dir="ltr">SELECT * FROM Weatherdata_tab
WHERE (<span class="bold">(Maxtemp - Mintemp)</span> &lt; &#39;20&#39; AND <span class="bold">Maxtemp</span> &gt; &#39;75&#39;);
 
</pre>
<p>Result:</p>
<pre dir="ltr">no rows selected
</pre></div>
<!-- class="example" -->
<p><a href="#CIHFBBEB">Example 9-3</a> creates an index that allows faster case-insensitive searches in the <code dir="ltr">EMPLOYEES</code> table and then uses the index expression in a query.</p>
<div id="ADFNS259" class="example">
<p class="titleinexample"><a id="CIHFBBEB"></a>Example 9-3 Function-Based Index for Faster Case-Insensitive Searches</p>
<p>Create index:</p>
<pre dir="ltr">CREATE INDEX emp_lastname ON EMPLOYEES (<span class="bold">UPPER(LAST_NAME)</span>);
</pre>
<p>Use index expression in query:</p>
<pre dir="ltr">SELECT first_name, last_name
FROM EMPLOYEES
WHERE <span class="bold">UPPER(LAST_NAME)</span> LIKE &#39;J%S_N&#39;;
</pre>
<p>Result:</p>
<pre dir="ltr">FIRST_NAME           LAST_NAME
-------------------- -------------------------
Charles              Johnson
 
1 row selected.
</pre></div>
<!-- class="example" -->
<p><a href="#CIHCADHA">Example 9-4</a> creates a table with one column, <code dir="ltr">NAME</code>, and a function-based index to sort that column using the collation sequence <code dir="ltr">GERMAN</code>, and then selects all columns of the table, ordering them by <code dir="ltr">NAME</code>. Because the query can use the index, the query is faster. (Assume that the query is run in a German session, where <code dir="ltr">NLS_SORT</code> is <code dir="ltr">GERMAN</code> and <code dir="ltr">NLS_COMP</code> is <code dir="ltr">ANSI</code>. Otherwise, the query would have to specify the values of these Globalization Support parameters.)</p>
<div id="ADFNS261" class="example">
<p class="titleinexample"><a id="CIHCADHA"></a>Example 9-4 Function-Based Index for Language-Dependent Sorting</p>
<p>Create table on which to create index:</p>
<pre dir="ltr">DROP TABLE nls_tab;
CREATE TABLE nls_tab (<span class="bold">NAME</span> VARCHAR2(80));
</pre>
<p>Create index:</p>
<pre dir="ltr">CREATE INDEX nls_index
  ON nls_tab (<span class="bold">NLSSORT(NAME, &#39;NLS_SORT = GERMAN&#39;)</span>);
</pre>
<p>Select all table columns, ordered by <code dir="ltr">NAME</code>:</p>
<pre dir="ltr">SELECT * FROM nls_tab
WHERE NAME IS NOT NULL
<span class="bold">ORDER BY NAME</span>;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment286">
<tr>
<td class="cellalignment295">
<table class="cellalignment291">
<tr>
<td class="cellalignment290"><a href="adfns_regexp.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment290"><a href="adfns_constraints.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment298">
<table class="cellalignment289">
<tr>
<td class="cellalignment290"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment290"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment290"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment290"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment290"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment290"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>