<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-113966"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Access%20Control%20for%20PL%2FSQL%20Programs"></a><title>Access Control for PL/SQL Programs</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 704"/>
<meta name="dcterms.created" content="2014-10-01T13:43:51Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database PL/SQL Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E21639-07"/>
<meta name="dcterms.isVersionOf" content="TTPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="plsqlenv.htm" title="Previous" type="text/html"/>
<link rel="Next" href="package.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21639-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/14</span> <!-- End Header --><a id="BABIDFDB"></a><a id="TTPLS265"></a>
<h1 class="chapter"><span class="secnum">7</span> Acces<a id="sthref293"></a>s Control for PL/SQL Programs</h1>
<p>TimesTen has features to control database access with object-level resolution for database objects such as tables, views, materialized views, indexes, sequences, functions, procedures, and packages, for example. You can refer to <a class="olink TTOPR236" href="../TTOPR/accesscontrol.htm#TTOPR236">&#34;Managing Access Control&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for introductory information about TimesTen access control features.</p>
<p>This chapter introduces access control as it relates to PL/SQL users.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Access control is enabled when you install TimesTen. You cannot disable it.</div>
<p>Topics in this chapter include the following:</p>
<ul>
<li>
<p><a href="#BABBHBJH">Access control for PL/SQL operations</a></p>
</li>
<li>
<p><a href="#BABJFCDF">Access control for SQL operations</a></p>
</li>
<li>
<p><a href="#BABDDCHC">Definer&#39;s rights and invoker&#39;s rights</a></p>
</li>
<li>
<p><a href="#BABIADBH">Additional access control considerations</a></p>
</li>
</ul>
<a id="BABBHBJH"></a><a id="TTPLS266"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Ac<a id="sthref294"></a><a id="sthref295"></a><a id="sthref296"></a><a id="sthref297"></a><a id="sthref298"></a>cess co<a id="sthref299"></a><a id="sthref300"></a><a id="sthref301"></a>ntrol for PL/SQL operations</h2>
<p>This section covers the following topics:</p>
<ul>
<li>
<p><a href="#BABJGFDE">Required privileges for PL/SQL statements and operations</a></p>
</li>
<li>
<p><a href="#BABJAFJI">Granting and revoking privileges</a></p>
</li>
<li>
<p><a href="#BABEABGA">Invalidated objects</a></p>
</li>
</ul>
<a id="BABJGFDE"></a><a id="TTPLS267"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Required privileges for PL/SQL statements and operations</h3>
<p>For PL/SQL users, access control affects the ability to create, alter, drop, or execute PL/SQL procedures and functions, including packages and their member procedures and functions.</p>
<p>You need the <code>CREATE PROCEDURE</code> privilege to create a procedure, function, package definition, or package body if it is being created in your own schema, or <code>CREATE ANY PROCEDURE</code> if it is being created in any schema other than your own. To alter or drop a procedure, function, package definition, or package body, you must be the owner or have the <code>ALTER ANY PROCEDURE</code> privilege or <code>DROP ANY PROCEDURE</code> privilege, respectively.</p>
<p>To execute a procedure or function, you must be the owner, have the <code>EXECUTE</code> privilege for the procedure or function (or for the package to which it belongs, if applicable), or have the <code>EXECUTE ANY PROCEDURE</code> privilege. This is all summarized in <a href="#BABJFBBJ">Table 7-1</a>.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLS268"></a><a id="sthref302"></a><a id="BABJFBBJ"></a>Table 7-1 Privileges for using PL/SQL procedures and functions</p>
<table class="cellalignment6349" title="Privileges for using PL/SQL procedures and functions" summary="Summarizes privileges required to use PL/SQL procedures, functions, and packages." dir="ltr">
<thead>
<tr class="cellalignment6338">
<th class="cellalignment6350" id="r1c1-t3">Action</th>
<th class="cellalignment6350" id="r1c2-t3">SQL statement or operation</th>
<th class="cellalignment6350" id="r1c3-t3">Required Privilege</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r2c1-t3" headers="r1c1-t3">
<p>Create a procedure, function, package definition, or package body.</p>
</td>
<td class="cellalignment6344" headers="r2c1-t3 r1c2-t3">
<p><code>CREATE [OR REPLACE] PROCEDURE</code></p>
<p><code>CREATE [OR REPLACE] FUNCTION</code></p>
<p><code>CREATE [OR REPLACE] PACKAGE</code></p>
<p><code>CREATE [OR REPLACE] PACKAGE BODY</code></p>
</td>
<td class="cellalignment6344" headers="r2c1-t3 r1c3-t3">
<p><code>CREATE PROCEDURE</code> in user&#39;s schema</p>
<p>Or:</p>
<p><code>CREATE ANY PROCEDURE</code> in any other schema</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r3c1-t3" headers="r1c1-t3">
<p>Alter a procedure, function, or package.</p>
</td>
<td class="cellalignment6344" headers="r3c1-t3 r1c2-t3">
<p><code>ALTER PROCEDURE</code></p>
<p><code>ALTER FUNCTION</code></p>
<p><code>ALTER PACKAGE</code></p>
</td>
<td class="cellalignment6344" headers="r3c1-t3 r1c3-t3">
<p>Ownership of the procedure, function, or package</p>
<p>Or:</p>
<p><code>ALTER ANY PROCEDURE</code></p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r4c1-t3" headers="r1c1-t3">
<p>Drop a procedure, function, package definition, or package body.</p>
</td>
<td class="cellalignment6344" headers="r4c1-t3 r1c2-t3">
<p><code>DROP PROCEDURE</code></p>
<p><code>DROP FUNCTION</code></p>
<p><code>DROP PACKAGE</code></p>
<p><code>DROP PACKAGE BODY</code></p>
</td>
<td class="cellalignment6344" headers="r4c1-t3 r1c3-t3">
<p>Ownership of the procedure, function, or package</p>
<p>Or:</p>
<p><code>DROP ANY PROCEDURE</code></p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r5c1-t3" headers="r1c1-t3">
<p>Execute a procedure or function.</p>
</td>
<td class="cellalignment6344" headers="r5c1-t3 r1c2-t3">
<p>Invoke the procedure or function.</p>
</td>
<td class="cellalignment6344" headers="r5c1-t3 r1c3-t3">
<p>Ownership of the procedure or function, or of the package to which it belongs (if applicable)</p>
<p>Or:</p>
<p><code>EXECUTE</code> for the procedure or function, or for the package to which it belongs (if applicable)</p>
<p>Or:</p>
<p><code>EXECUTE ANY PROCEDURE</code></p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r6c1-t3" headers="r1c1-t3">
<p>Create a private synonym for a procedure, function, or package.</p>
</td>
<td class="cellalignment6344" headers="r6c1-t3 r1c2-t3">
<p><code>CREATE [OR REPLACE] SYNONYM</code></p>
</td>
<td class="cellalignment6344" headers="r6c1-t3 r1c3-t3">
<p><code>CREATE SYNONYM</code> in user&#39;s schema</p>
<p>Or:</p>
<p><code>CREATE ANY SYNONYM</code> in any other schema</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r7c1-t3" headers="r1c1-t3">
<p>Create a public synonym for a procedure, function, or package.</p>
</td>
<td class="cellalignment6344" headers="r7c1-t3 r1c2-t3">
<p><code>CREATE [OR REPLACE] PUBLIC SYNONYM</code></p>
</td>
<td class="cellalignment6344" headers="r7c1-t3 r1c3-t3">
<p><code>CREATE PUBLIC SYNONYM</code></p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r8c1-t3" headers="r1c1-t3">
<p>Use a synonym to execute a procedure or function.</p>
</td>
<td class="cellalignment6344" headers="r8c1-t3 r1c2-t3">
<p>Invoke the procedure or function through its synonym.</p>
</td>
<td class="cellalignment6344" headers="r8c1-t3 r1c3-t3">
<p>Privilege to execute the underlying procedure or function</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r9c1-t3" headers="r1c1-t3">
<p>Drop a private synonym for a procedure, function, or package.</p>
</td>
<td class="cellalignment6344" headers="r9c1-t3 r1c2-t3">
<p><code>DROP SYNONYM</code></p>
</td>
<td class="cellalignment6344" headers="r9c1-t3 r1c3-t3">
<p>Ownership of the synonym</p>
<p>Or:</p>
<p><code>DROP ANY SYNONYM</code></p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r10c1-t3" headers="r1c1-t3">
<p>Drop a public synonym for a procedure, function, or package.</p>
</td>
<td class="cellalignment6344" headers="r10c1-t3 r1c2-t3">
<p><code>DROP PUBLIC SYNONYM</code></p>
</td>
<td class="cellalignment6344" headers="r10c1-t3 r1c3-t3">
<p><code>DROP PUBLIC SYNONYM</code></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<p>See <a class="olink TTSQL277" href="../TTSQL/state.htm#TTSQL277">&#34;SQL Statements&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span> for the syntax and required privileges of SQL statements discussed in this section.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>A user who has been granted privilege to execute a procedure (or function) can execute the procedure even if he or she has no privilege on other procedures that the procedure calls. For example, consider a stored procedure <code>user2.proc1</code> that executes procedure <code>user2.proc2</code>. If <code>user1</code> is granted privilege to execute <code>proc1</code> but is not granted privilege to execute <code>proc2</code>, he could not run <code>proc2</code> directly but could still run <code>proc1</code>.</p>
</li>
<li>
<p>Pri<a id="sthref303"></a>vilege to execute a procedure or function allows implicit compilation of the procedure or function if it is invalid or not compiled at the time of execution.</p>
</li>
<li>
<p>When <code>CREATE OR REPLACE</code> results in an object (such as a procedure, function, package, or synonym) being replaced, there is no effect on privileges that any users had previously been granted on that object. This is as opposed to when there is an explicit <code>DROP</code> and then <code>CREATE</code> to re-create an object, in which case all privileges on the object are revoked.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABJAFJI"></a><a id="TTPLS269"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Gra<a id="sthref304"></a><a id="sthref305"></a><a id="sthref306"></a><a id="sthref307"></a>nting and revoking privileges</h3>
<p>Use the SQL statement <code>GRANT</code> to grant a privilege. Use <code>REVOKE</code> to revoke one.</p>
<p>The following example grants <code>EXECUTE</code> privilege to <code>user2</code> for a procedure and a package that <code>user1</code> owns:</p>
<pre>Command&gt; grant execute on user1.myproc to user2;
Command&gt; grant execute on user1.mypkg to user2;
</pre>
<p>This example revokes the privileges:</p>
<pre>Command&gt; revoke execute on user1.myproc from user2;
Command&gt; revoke execute on user1.mypkg from user2;
</pre>
<div class="example">
<p class="titleinexample"><a id="TTPLS270"></a><a id="sthref308"></a>Example 7-1 Granting of required privileges</p>
<p>This example shows a series of attempted operations by a user, <code>user1</code>, as follows:</p>
<ol>
<li>
<p>The user attempts each operation before having the necessary privilege. The resulting error is shown.</p>
</li>
<li>
<p>The instance administrator grants the necessary privilege.</p>
</li>
<li>
<p>The user successfully performs the operation.</p>
</li>
</ol>
<p>The <code>ttIsql</code> utility is used by <code>user1</code> to perform (or attempt) the operations and by the instance administrator to grant privileges.</p>
<p><span class="bold">USER1:</span></p>
<p>Initially the user does not have permission to create a procedure. That must be granted even in his or her own schema.</p>
<pre>Command&gt; create procedure testproc is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user1.testproc called&#39;);
       &gt; end;
       &gt; /
15100: User USER1 lacks privilege CREATE PROCEDURE
The command failed.
</pre>
<p><span class="bold">Instance administrator:</span></p>
<pre>Command&gt; grant create procedure to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<p>Once <code>user1</code> can create a procedure in his own schema, he can execute it because he owns it.</p>
<pre>Command&gt; create procedure testproc is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user1.testproc called&#39;);
       &gt; end;
       &gt; /
 
Procedure created.
 
Command&gt; begin
       &gt; testproc();
       &gt; end;
       &gt; /
user1.testproc called
 
PL/SQL procedure successfully completed.
 
</pre>
<p>The user cannot yet create a procedure in another schema, though.</p>
<pre>Command&gt; create procedure user2.testproc is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user2.testproc called&#39;);
       &gt; end;
       &gt; /
15100: User USER1 lacks privilege CREATE ANY PROCEDURE
The command failed.
</pre>
<p><span class="bold">Instance administrator:</span></p>
<pre>Command&gt; grant create any procedure to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<p>Now <code>user1</code> can create a procedure in another schema, but he cannot execute it yet because he does not own it or have privilege.</p>
<pre>Command&gt; create procedure user2.testproc is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user2.testproc called&#39;);
       &gt; end;
       &gt; /
 
Procedure created.

Command&gt; begin
       &gt; user2.testproc();
       &gt; end;
       &gt; /
 8503: ORA-06550: line 2, column 7:
PLS-00904: insufficient privilege to access object USER2.TESTPROC
 8503: ORA-06550: line 2, column 1:
PL/SQL: Statement ignored
The command failed.
</pre>
<p><span class="bold">Instance administrator:</span></p>
<pre>Command&gt; grant execute any procedure to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<p>Now <code>user1</code> can execute a procedure in another schema.</p>
<pre>Command&gt; begin
       &gt; user2.testproc();
       &gt; end;
       &gt; /
user2.testproc called
 
PL/SQL procedure successfully completed.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABEABGA"></a><a id="TTPLS271"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Invalidated objects</h3>
<p>When a privilege on an object is revoked from a user, all of that user&#39;s PL/SQL objects that refer to that object are temporarily invalidated. Once the privilege has been restored, a user can explicitly recompile and revalidate an object by executing <code>ALTER PROCEDURE</code>, <code>ALTER FUNCTION</code>, or <code>ALTER PACKAGE</code>, as applicable, on the object. Alternatively, each object is recompiled and revalidated automatically the next time it is executed.</p>
<p>For example, if <code>user1</code> has a procedure <code>user1.proc0</code> that calls <code>user2.proc1</code>, <code>proc0</code> becomes invalid if <code>EXECUTE</code> privilege for <code>proc1</code> is revoked from <code>user1</code>.</p>
<p>Use the following to see if any of your objects are invalid:</p>
<pre>select * from user_objects where status=&#39;INVALID&#39;;
</pre>
<p>See <a class="olink TTSQL277" href="../TTSQL/state.htm#TTSQL277">&#34;SQL Statements&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span> for information about the <code>ALTER</code> statements.</p>
<div class="example">
<p class="titleinexample"><a id="TTPLS272"></a><a id="sthref309"></a>Example 7-2 Invalidated object</p>
<p>This example shows a sequence that results in an invalidated object, in this case a PL/SQL procedure, as follows:</p>
<ol>
<li>
<p>A user is granted <code>CREATE ANY PROCEDURE</code> privilege, creates a procedure in another user&#39;s schema, then creates a procedure in his own schema that calls the procedure in the other user&#39;s schema.</p>
</li>
<li>
<p>The user is granted <code>EXECUTE</code> privilege to execute the procedure in the other user&#39;s schema.</p>
</li>
<li>
<p>The user executes the procedure in his schema that calls the procedure in the other user&#39;s schema.</p>
</li>
<li>
<p><code>EXECUTE</code> privilege for the procedure in the other user&#39;s schema is revoked from the user, invalidating the user&#39;s own procedure.</p>
</li>
<li>
<p><code>EXECUTE</code> privilege for the procedure in the other user&#39;s schema is granted to the user again. When he executes his own procedure, it is implicitly recompiled and revalidated.</p>
</li>
</ol>
<p><span class="bold">Instance administrator:</span></p>
<pre>Command&gt; grant create any procedure to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<pre>Command&gt; create procedure user2.proc1 is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user2.proc1 is called&#39;);
       &gt; end;
       &gt; /
 
Procedure created.
 
Command&gt; create procedure user1.proc0 is
       &gt; begin
       &gt; dbms_output.put_line(&#39;user1.proc0 is called&#39;);
       &gt; user2.proc1;
       &gt; end;
       &gt; /
 
Procedure created.
 
</pre>
<p><span class="bold">Instance administrator:</span></p>
<pre>Command&gt; grant execute on user2.proc1 to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<pre>Command&gt; begin
       &gt; user1.proc0;
       &gt; end;
       &gt; /
user1.proc0 is called
user2.proc1 is called
 
PL/SQL procedure successfully completed.
 
</pre>
<p>And to confirm <code>user1</code> has no invalid objects:</p>
<pre>Command&gt; select * from user_objects where status=&#39;INVALID&#39;;
0 rows found.
</pre>
<p><span class="bold">Instance administrator:</span></p>
<p>Now revoke the <code>EXECUTE</code> privilege from <code>user1</code>.</p>
<pre>Command&gt; revoke execute on user2.proc1 from user1;
</pre>
<p><span class="bold">USER1:</span></p>
<p>Immediately, <code>user1.proc0</code> becomes invalid because <code>user1</code> no longer has privilege to execute <code>user2.proc1</code>.</p>
<pre>Command&gt; select * from user_objects where status=&#39;INVALID&#39;;
&lt; <span class="bold">PROC0</span>, &lt;NULL&gt;, 273, &lt;NULL&gt;, PROCEDURE, 2009-06-04 14:51:34, 2009-06-04 14:58:23,
2009-06-04:14:58:23, <span class="bold">INVALID</span>, N, N, N, 1, &lt;NULL&gt; &gt;
1 row found.
</pre>
<p>So <code>user1</code> can no longer execute the procedure.</p>
<pre>Command&gt; begin
       &gt; user1.proc0;
       &gt; end;
       &gt; /
 8503: ORA-06550: line 2, column 7:
PLS-00905: object USER1.PROC0 is invalid
 8503: ORA-06550: line 2, column 1:
PL/SQL: Statement ignored
The command failed.
</pre>
<p><span class="bold">Instance administrator:</span></p>
<p>Again grant <code>EXECUTE</code> privilege on <code>user2.proc1</code> to <code>user1</code>.</p>
<pre>Command&gt; grant execute on user2.proc1 to user1;
</pre>
<p><span class="bold">USER1:</span></p>
<p>The procedure <code>user1.proc0</code> is still invalid until it is either explicitly or implicitly recompiled. It is implicitly recompiled when it is executed, as shown here. Or <code>ALTER PROCEDURE</code> could be used to explicitly recompile it.</p>
<pre>Command&gt; select * from user_objects where status=&#39;INVALID&#39;;
&lt; <span class="bold">PROC0</span>, &lt;NULL&gt;, 273, &lt;NULL&gt;, PROCEDURE, 2009-06-04 14:51:34, 2009-06-04 16:13:00,
2009-06-04:16:13:00, <span class="bold">INVALID</span>, N, N, N, 1, &lt;NULL&gt; &gt;
1 row found.
Command&gt; begin
       &gt; user1.proc0;
       &gt; end;
       &gt; /
user1.proc0 is called
user2.proc1 is called
 
PL/SQL procedure successfully completed.
 
Command&gt; select * from user_objects where status=&#39;INVALID&#39;;
0 rows found.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJFCDF"></a><a id="TTPLS273"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Ac<a id="sthref310"></a>cess control for SQL operations</h2>
<p>For any query or SQL DML statement executed in an anonymous block, or any SQL DDL statement executed in an <code>EXECUTE IMMEDIATE</code> statement, including all such operations discussed in this document or used in any example, it is assumed that the user has appropriate privilege to execute the statement and access the desired objects. SQL executed in a PL/SQL anonymous block requires the same privilege as when executed directly. For example, to insert rows of data into a table you own, no privilege is required. If you want to insert rows of data into a table you do not own, you must be granted <code>INSERT</code> privilege on that table or granted <code>INSERT ANY TABLE</code>.</p>
<p>Refer to <a class="olink TTSQL277" href="../TTSQL/state.htm#TTSQL277">&#34;SQL Statements&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span> for details SQL statements and their required privileges.</p>
</div>
<!-- class="sect1" -->
<a id="BABDDCHC"></a><a id="TTPLS274"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">De<a id="sthref311"></a><a id="sthref312"></a><a id="sthref313"></a>finer&#39;s rights and invoker&#39;s rights</h2>
<p>When a PL/SQL procedure or function is defined, the optional <code>AUTHID</code> clause of the <code>CREATE FUNCTION</code> or <code>CREATE PROCEDURE</code> statement specifies whether the function or procedure executes with <span class="italic">definer&#39;s rights</span> (<code>AUTHID DEFINER</code>, the default) or <span class="italic">invoker&#39;s rights</span> (<code>AUTHID CURRENT_USER</code>). Similarly, for procedures or functions in a package, the <code>AUTHID</code> clause of the <code>CREATE PACKAGE</code> statement specifies whether each member function or procedure of the package executes with definer&#39;s rights or invoker&#39;s rights. The <code>AUTHID</code> clause is shown in the syntax documentation for these statements, under <a class="olink TTSQL277" href="../TTSQL/state.htm#TTSQL277">&#34;SQL Statements&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span>.</p>
<p>The <code>AUTHID</code> setting affects the name resolution and privilege checking of SQL statements that a procedure or function issues at runtime. With definer&#39;s rights, SQL name resolution and privilege checking operate as though the owner of the procedure or function (the definer, in whose schema it resides) is running it. With invoker&#39;s rights, SQL name resolution and privilege checking simply operate as though the current user (the invoker) is running it.</p>
<p>Invoker&#39;s rights would be useful in a scenario where you might want to grant broad privileges for a body of code, but would want that code to affect only each user&#39;s own objects in his or her own schema.</p>
<p>Definer&#39;s rights would be useful in a situation where you want all users to have access to the same centralized tables or other SQL objects, but only for the specific and limited actions that are executed by the procedure. The users would not have access to the SQL objects otherwise.</p>
<p>See <a href="sqlexamples.htm#CHDHFJEE">&#34;Examples using the AUTHID clause&#34;</a> for examples using definer&#39;s and invoker&#39;s rights.</p>
<p>Refer to <a class="olink LNPLS00809" href="../LNPLS/subprograms.htm#LNPLS00809">&#34;Invoker&#39;s Rights and Definer&#39;s Rights (AUTHID Property)&#34;</a> in <span class="italic">Oracle Database PL/SQL Language Reference</span> for additional information.</p>
</div>
<!-- class="sect1" -->
<a id="BABIADBH"></a><a id="TTPLS275"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Additional access control considerations</h2>
<p>This section covers the following:</p>
<ul>
<li>
<p><a href="#BABFCJCJ">Access control for connections and connection attributes</a></p>
</li>
<li>
<p><a href="#BABHHCBE">Access control for system views and supplied packages</a></p>
</li>
<li>
<p><a href="#BABIDAID">Access control for built-in procedures relating to PL/SQL</a></p>
</li>
</ul>
<a id="BABFCJCJ"></a><a id="TTPLS276"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Ac<a id="sthref314"></a>cess control for connections and connection attributes</h3>
<p>Note the following when connecting to the database:</p>
<ul>
<li>
<p>Privilege to connect to a database must be explicitly granted to every user, other than the instance administrator, through the <code>CREATE SESSION</code> privilege. This is a system privilege so must be granted to the user either by the instance administrator or by a user with <code>ADMIN</code> privilege. This can be accomplished either directly or through the <code>PUBLIC</code> role. Refer to <a class="olink TTOPR236" href="../TTOPR/accesscontrol.htm#TTOPR236">&#34;Managing Access Control&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> for additional information and examples.</p>
</li>
<li>
<p>Required privileges for PL/SQL connection attributes are included in <a href="plsqlenv.htm#CHDFIDDF">&#34;PL/SQL connection attributes&#34;</a>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABHHCBE"></a><a id="TTPLS277"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Ac<a id="sthref315"></a><a id="sthref316"></a>cess control for system views and supplied packages</h3>
<p>Note the following regarding access to system views and PL/SQL supplied packages.</p>
<ul>
<li>
<p><code>SELECT</code> and <code>EXECUTE</code> privileges on various system tables, system views, PL/SQL functions, PL/SQL procedures, and PL/SQL packages are granted by default to all users through the <code>PUBLIC</code> role, of which all users are a member. This role is documented in <a class="olink TTSQL338" href="../TTSQL/privileges.htm#TTSQL338">&#34;Privileges&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database SQL Reference</span>. Use the following command to see the list of these public database objects and the associated privileges:</p>
<pre>SELECT table_name, privilege FROM sys.all_tab_privs 
WHERE grantee=&#39;PUBLIC&#39;;
</pre>
<p>All users have <code>SELECT</code> privilege for the <code>ALL_*</code> and <code>USER_*</code> system views.</p>
</li>
<li>
<p><code>EXECUTE ANY PROCEDURE</code> does not apply to supplied packages; however, most are accessible through the <code>PUBLIC</code> role. Access control for PL/SQL packages provided with TimesTen is noted at the beginning of <a href="package.htm#CDECFEID">Chapter 8, &#34;TimesTen Supplied PL/SQL Packages.&#34;</a></p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABIDAID"></a><a id="TTPLS278"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Ac<a id="sthref317"></a><a id="sthref318"></a><a id="sthref319"></a><a id="sthref320"></a>cess control for built-in procedures relating to PL/SQL</h3>
<p>The <code>ttPLSQLMemoryStats</code> built-in procedure, which returns statistics about library cache performance and activity, can be called by any user. This procedure is documented under <a class="olink TTREF279" href="../TTREF/proced.htm#TTREF279">&#34;ttPLSQLMemoryStats&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Reference</span>. Also see <a href="plsqlenv.htm#CACJEFJG">Example 6-3</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6337">
<tr>
<td class="cellalignment6344">
<table class="cellalignment6348">
<tr>
<td class="cellalignment6341"><a href="plsqlenv.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6341"><a href="package.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6346">
<table class="cellalignment6347">
<tr>
<td class="cellalignment6341"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6341"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6341"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6341"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6341"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6341"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>