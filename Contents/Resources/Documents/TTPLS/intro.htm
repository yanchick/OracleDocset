<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-113972"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Introduction%20to%20PL%2FSQL%20in%20the%20TimesTen%20Database"></a><title>Introduction to PL/SQL in the TimesTen Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 704"/>
<meta name="dcterms.created" content="2014-10-01T13:43:51Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database PL/SQL Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E21639-07"/>
<meta name="dcterms.isVersionOf" content="TTPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="whatsnew.htm" title="Previous" type="text/html"/>
<link rel="Next" href="overview.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21639-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">5/14</span> <!-- End Header --><a id="BHCJEFJJ"></a><a id="TTPLS110"></a>
<h1 class="chapter"><span class="secnum">1</span> Introduction to PL/SQL in the TimesTen Database</h1>
<p>TimesTen supports PL/SQL (Procedural Language Extension to SQL), a programming language that enables you to integrate procedural constructs with SQL in your database. TimesTen 11<span class="italic">g</span> Release 2 (11.2.2) implements the PL/SQL language from Oracle Database release 11.2.0.2. As such, most PL/SQL features present in that release of Oracle Database are also present in TimesTen, operating in essentially the same way. (Refer to <a href="plsqldiffs.htm#CIHCHABJ">Chapter 9, &#34;TimesTen PL/SQL Support: Reference Summary&#34;</a> for differences.)</p>
<p>This chapter provides a brief introduction to TimesTen PL/SQL, covering the following topics:</p>
<ul>
<li>
<p><a href="#BHCBHBCD">Features of PL/SQL in TimesTen</a></p>
</li>
<li>
<p><a href="#BHCGJJDF">TimesTen PL/SQL components and operations</a></p>
</li>
<li>
<p><a href="#BHCBADHI">Audiences for this document</a></p>
</li>
<li>
<p><a href="#BHCCEGBE">About the TimesTen PL/SQL demos</a></p>
</li>
</ul>
<a id="BHCBHBCD"></a><a id="TTPLS111"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Fea<a id="sthref6"></a><a id="sthref7"></a>tures of PL/SQL in TimesTen</h2>
<p>PL/SQL support in TimesTen enables you to do the following:</p>
<ul>
<li>
<p>Take full advantage of the PL/SQL programming language.</p>
</li>
<li>
<p>Execute PL/SQL from your client applications that use these APIs:</p>
<ul>
<li>
<p>ODBC</p>
</li>
<li>
<p>JDBC</p>
</li>
<li>
<p>Oracle Call Interface (OCI)</p>
</li>
<li>
<p>Oracle Pro*C/C++</p>
</li>
<li>
<p>Oracle Data Provider for .NET (ODP.NET)</p>
</li>
<li>
<p>TTClasses (TimesTen C++ library)</p>
</li>
</ul>
</li>
<li>
<p>Execute TimesTen SQL from PL/SQL.</p>
</li>
<li>
<p>Create, alter, or drop standalone procedures, functions, packages and package bodies.</p>
</li>
<li>
<p>Use PL/SQL packages to extend your database functionality and to provide PL/SQL access to SQL features.</p>
</li>
<li>
<p>Handle exceptions and errors in your PL/SQL applications.</p>
</li>
<li>
<p>Set connection attributes in your database to customize your PL/SQL environment.</p>
</li>
<li>
<p>Alter session parameters so you can manage your PL/SQL environment.</p>
</li>
<li>
<p>Display PL/SQL metadata in your database by using PL/SQL system views.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BHCGJJDF"></a><a id="TTPLS357"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Tim<a id="sthref8"></a><a id="sthref9"></a><a id="sthref10"></a>esTen PL/SQL components and operations</h2>
<p>This section provides an overview of PL/SQL operations in TimesTen, including discussion of how an application interacts with PL/SQL and how PL/SQL components interact with other components of TimesTen. The following topics are covered:</p>
<ul>
<li>
<p><a href="#BHCGHEEC">Application interaction with TimesTen and PL/SQL</a></p>
</li>
<li>
<p><a href="#BHCGJFCD">PL/SQL in TimesTen versus PL/SQL in Oracle Database</a></p>
</li>
</ul>
<a id="BHCGHEEC"></a><a id="TTPLS358"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Application interaction with TimesTen and PL/SQL</h3>
<p><a href="#BHCGCAJC">Figure 1-1</a> shows the PL/SQL components and their interactions with each other and with other TimesTen components during PL/SQL operations.</p>
<div class="figure">
<p class="titleinfigure"><a id="BHCGCAJC"></a><a id="TTPLS359"></a>Figure 1-1 TimesTen PL/SQL components</p>
<img width="389" height="248" src="img/plsqlarch.gif" alt="Description of Figure 1-1 follows"/><br/>
<a id="sthref11" href="img_text/plsqlarch.htm">Description of &#34;Figure 1-1 TimesTen PL/SQL components&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>An application uses the API of its choice&mdash;ODBC, JDBC, OCI, Pro*C, ODP.NET, or TTClasses&mdash;to send requests to the database. ODBC is the TimesTen native API, so each of the other APIs ultimately calls the ODBC layer.</p>
<p>The ODBC driver calls the TimesTen SQL parser to examine each incoming request and determine whether it is SQL or PL/SQL. The request is then passed to the appropriate subsystem within TimesTen. PL/SQL source and SQL statements are compiled, optimized and executed by the PL/SQL subsystem and SQL subsystem, respectively.</p>
<p>The PL/SQL compiler is responsible for generating executable code from PL/SQL source, while the SQL compiler does the same for SQL statements. Each compiler generates intermediate code that can then be executed by the appropriate PL/SQL or SQL execution engine. This executable code, along with metadata about the PL/SQL blocks, is then stored in tables in the database.</p>
<p>When PL/SQL blocks are executed, the PL/SQL execution engine is invoked. As PL/SQL blocks in turn invoke SQL, the PL/SQL execution engine calls the TimesTen SQL compiler and the TimesTen SQL execution engine to handle SQL execution.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The introduction of PL/SQL into TimesTen has little impact on applications that do not use it. If applications execute SQL directly, then requests are passed from the TimesTen ODBC driver to the TimesTen SQL compiler and execution engine in the same way as in previous releases.</div>
</div>
<!-- class="sect2" -->
<a id="BHCGJFCD"></a><a id="TTPLS360"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">PL/SQL in TimesTen versus PL/SQL in Oracle Database</h3>
<p>PL/SQL processing in TimesTen is largely identical to its processing in Oracle Database. The PL/SQL compiler and execution engine that are included with TimesTen originated in Oracle Database, and the relationship between PL/SQL components and the SQL compiler and execution engine is comparable. The tables used to store PL/SQL units are the same in TimesTen and Oracle Database, as are the views that are available to query information about stored PL/SQL units.</p>
<p>Beyond these basic similarities, however, are some potentially significant differences. These are detailed in the following subsections:</p>
<ul>
<li>
<p><a href="#BHCHEFID">SQL statements in PL/SQL blocks</a></p>
</li>
<li>
<p><a href="#BHCHGCHH">Execution of PL/SQL from SQL</a></p>
</li>
</ul>
<a id="BHCHEFID"></a><a id="TTPLS361"></a>
<div class="sect3">
<h4 class="sect3">S<a id="sthref12"></a>QL statements in PL/SQL blocks</h4>
<p>In TimesTen, as in Oracle Database, PL/SQL blocks may include SQL statements. Consider the anonymous block in the following example:</p>
<pre>Command&gt; create table tab2 (x number, last_name VARCHAR2 (25) INLINE NOT NULL);
Command&gt; declare
       &gt;    x number;
       &gt; begin
       &gt;    select salary into x from employees where last_name = &#39;Whalen&#39;;
       &gt;    insert into tab2 values(x, &#39;Whalen&#39;);
       &gt; end;
       &gt; /

PL/SQL procedure successfully completed.
</pre>
<p>The PL/SQL compiler in TimesTen calls a copy of the Oracle Database SQL parser to analyze and validate the syntax of such SQL statements. This Oracle Database parser is included in TimesTen for this purpose. As part of this processing, PL/SQL may rewrite parts of the SQL statements (for example, by removing <code>INTO</code> clauses or replacing PL/SQL variables with binds). This processing is identical in TimesTen and in Oracle Database. The rewritten SQL statements are then included in the executable code for the PL/SQL block. When the PL/SQL block is executed, these SQL statements are compiled and executed by the TimesTen SQL subsystem.</p>
<p>In Oracle Database, the same SQL parser is used by the PL/SQL compiler and the SQL compiler. In TimesTen, however, different SQL parsers are used. TimesTen PL/SQL uses the Oracle Database SQL parser, while TimesTen SQL uses the native TimesTen SQL parser. This difference is typically, but not always, transparent to the end user. In particular, be aware of the following:</p>
<ul>
<li>
<p>SQL statements in TimesTen PL/SQL programs must obey Oracle Database SQL syntax. While TimesTen SQL is generally a subset of Oracle Database SQL, there are some expressions that are permissible in TimesTen SQL but not in Oracle Database SQL. Such TimesTen-specific SQL operations cannot be used within PL/SQL <span class="italic">except</span> by using dynamic SQL through <code>EXECUTE IMMEDIATE</code> statements or the <code>DBMS_SQL</code> package. See <a href="overview.htm#CEGEIGCA">&#34;Dynamic SQL in PL/SQL (EXECUTE IMMEDIATE statement)&#34;</a>.</p>
</li>
<li>
<p>SQL statements that would be permissible in Oracle Database are accepted by the PL/SQL compiler as valid even if they cannot be executed by TimesTen. If SQL features are used that TimesTen does not support, compilation of a PL/SQL block may be successful, but a runtime error would occur when the PL/SQL block is executed.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BHCHGCHH"></a><a id="TTPLS362"></a>
<div class="sect3">
<h4 class="sect3">E<a id="sthref13"></a>xecution of PL/SQL from SQL</h4>
<p>In Oracle Database, PL/SQL blocks can invoke SQL statements, and SQL statements can in turn invoke PL/SQL functions. For example, a stored procedure can invoke an <code>UPDATE</code> statement that employs a user-written PL/SQL function in its <code>WHERE</code> clause.</p>
<p>In TimesTen, a SQL statement cannot invoke a PL/SQL function.</p>
<p>In addition, TimesTen does not support triggers. (See <a class="olink TTCDV246" href="../TTCDV/xla_event.htm#TTCDV246">&#34;XLA and TimesTen Event Management&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database C Developer&#39;s Guide</span> for information about XLA, a high-performance, asynchronous TimesTen alternative to triggers.)</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BHCBADHI"></a><a id="TTPLS114"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Aud<a id="sthref14"></a>iences for this document</h2>
<p>There are two primary developer audiences for this document:</p>
<ul>
<li>
<p>Developers experienced with Oracle Database and Oracle Database PL/SQL who want to learn how to use PL/SQL in TimesTen: These readers want to learn the differences between PL/SQL in Oracle Database and PL/SQL in TimesTen.</p>
</li>
<li>
<p>Developers experienced with TimesTen who are not familiar with PL/SQL: These readers need general information about PL/SQL.</p>
</li>
</ul>
<p>The following subsections note areas of particular interest in this document for each audience.</p>
<a id="TTPLS115"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref15"></a>
<h3 class="sect2">Developers experienced with Oracle Database and Oracle Database PL/SQL</h3>
<p>Developers experienced with Oracle Database PL/SQL can bypass much of this document, which covers many general concepts of PL/SQL. Likely areas of interest, particularly differences in PL/SQL functionality between Oracle Database and TimesTen, include the following. Note that TimesTen-specific considerations are discussed at the end of <a href="overview.htm#CEGFFDGE">Chapter 2</a>, <a href="dtypesfunc.htm#CIJEDIJB">Chapter 3</a>, and <a href="exceptions.htm#CIHCAFJI">Chapter 4</a> and throughout <a href="plsqldiffs.htm#CIHCHABJ">Chapter 9</a>.</p>
<ul>
<li>
<p><a href="overview.htm#CEGJHBFA">&#34;How to execute PL/SQL procedures and functions&#34;</a>: This includes a comparison between how you can execute them in TimesTen and in Oracle Database.</p>
</li>
<li>
<p><a href="overview.htm#CEGFEIHJ">&#34;Differences in TimesTen: transaction behavior&#34;</a>: This discusses cursor behavior when a transaction ends in TimesTen.</p>
</li>
<li>
<p><a href="dtypesfunc.htm#CIJJFEAD">&#34;Differences in TimesTen: data type considerations&#34;</a>: This includes TimesTen-specific conversions, and types that TimesTen does not support.</p>
</li>
<li>
<p><a href="exceptions.htm#BABFIBAB">&#34;Differences in TimesTen: exception handing and error behavior&#34;</a>: This describes differences in error support, handling, and reporting.</p>
</li>
<li>
<p><a href="plsqlenv.htm#CCACDHEJ">Chapter 6, &#34;PL/SQL Installation and Environment&#34;</a>: This includes discussion of TimesTen connection attributes.</p>
</li>
<li>
<p><a href="package.htm#CDECFEID">Chapter 8, &#34;TimesTen Supplied PL/SQL Packages&#34;</a>: This documents the subset of Oracle Database PL/SQL packages that TimesTen supports.</p>
</li>
<li>
<p><a href="plsqldiffs.htm#CIHCHABJ">Chapter 9, &#34;TimesTen PL/SQL Support: Reference Summary&#34;</a>: This reference chapter provides a detailed treatment of differences between TimesTen PL/SQL and Oracle Database PL/SQL.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="TTPLS116"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref16"></a>
<h3 class="sect2">Developers experienced with TimesTen</h3>
<p>Most of this document is geared toward readers without prior PL/SQL experience, especially prior TimesTen users who are not familiar with PL/SQL, and nearly the entire document should be useful. In particular, <a href="overview.htm#CEGFFDGE">Chapter 2, &#34;Programming Features in PL/SQL in TimesTen,&#34;</a> will help these readers get started and <a href="sqlexamples.htm#CIHGFECI">Chapter 5, &#34;Examples Using TimesTen SQL in PL/SQL,&#34;</a> includes some additional examples.</p>
<p><a href="plsqldiffs.htm#CIHCHABJ">Chapter 9, &#34;TimesTen PL/SQL Support: Reference Summary,&#34;</a> is geared toward differences between TimesTen PL/SQL and Oracle Database PL/SQL and may be of less interest.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BHCCEGBE"></a><a id="TTPLS117"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Ab<a id="sthref17"></a><a id="sthref18"></a>out the TimesTen PL/SQL demos</h2>
<p>After you have configured your environment, you can confirm that everything is set up correctly by compiling and running the TimesTen Quick Start demo applications. Refer to the Quick Start welcome page at <code><span class="codeinlineitalic">install_dir</span></code><code>/quickstart.html</code>, especially the links under SAMPLE PROGRAMS, for information about the following:</p>
<ul>
<li>
<p>Demo schema and setup: The <code>build_sampledb</code> script (<code>.sh</code> on UNIX or <code>.bat</code> on Windows) creates a sample database and demo schema. You must use this before you start using the demos.</p>
</li>
<li>
<p>Demo environment and setup: The <code>ttquickstartenv</code> script (<code>.sh</code> or <code>.csh</code> on UNIX or <code>.bat</code> on Windows), a superset of the <code>ttenv</code> script generally used for TimesTen setup, sets up the demo environment. You must use this each time you enter a session where you want to compile or run any of the demos.</p>
</li>
<li>
<p>Demos and setup: TimesTen provides demos for PL/SQL in a subdirectory under the <code>quickstart/sample_code</code> directory. For instructions on running the demos, see the README file in the subdirectory.</p>
</li>
<li>
<p>What the demos do: A synopsis of each demo is provided when you click <span class="bold">PL/SQL</span> under SAMPLE PROGRAMS.</p>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6337">
<tr>
<td class="cellalignment6344">
<table class="cellalignment6348">
<tr>
<td class="cellalignment6341"><a href="whatsnew.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6341"><a href="overview.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6346">
<table class="cellalignment6347">
<tr>
<td class="cellalignment6341"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6341"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6341"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6341"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6341"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6341"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>