<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-113968"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Errors%20and%20Exception%20Handling"></a><title>Errors and Exception Handling</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 704"/>
<meta name="dcterms.created" content="2014-10-01T13:43:51Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="TimesTen In-Memory Database PL/SQL Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E21639-07"/>
<meta name="dcterms.isVersionOf" content="TTPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="dtypesfunc.htm" title="Previous" type="text/html"/>
<link rel="Next" href="sqlexamples.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E21639-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/14</span> <!-- End Header --><a id="CIHCAFJI"></a><a id="TTPLS191"></a>
<h1 class="chapter"><span class="secnum">4</span> Errors and Exception Handling</h1>
<p>This chapter describes the flexible error trapping and error handling you can use in your PL/SQL programs.</p>
<p>For more information on error-handling and exceptions in PL/SQL, see <a class="olink LNPLS007" href="../LNPLS/errors.htm#LNPLS007">&#34;PL/SQL Error Handling&#34;</a> in <span class="italic">Oracle Database PL/SQL Language Reference</span>.</p>
<p>See the end of this chapter for TimesTen-specific considerations.</p>
<p>The following topics are covered:</p>
<ul>
<li>
<p><a href="#CIHCHBIC">Understanding exceptions</a></p>
</li>
<li>
<p><a href="#BABFCJFD">Trapping exceptions</a></p>
</li>
<li>
<p><a href="#BABEFAHA">Showing errors in ttIsql</a></p>
</li>
<li>
<p><a href="#BABFIBAB">Differences in TimesTen: exception handing and error behavior</a></p>
</li>
</ul>
<a id="CIHCHBIC"></a><a id="TTPLS192"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Under<a id="sthref169"></a>standing exceptions</h2>
<p>This section provides an overview of exceptions in PL/SQL programming, covering the following topics:</p>
<ul>
<li>
<p><a href="#BABHCGHA">About exceptions</a></p>
</li>
<li>
<p><a href="#CIHHDEFG">Exception types</a></p>
</li>
</ul>
<a id="BABHCGHA"></a><a id="TTPLS193"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About exceptions</h3>
<p>An exception is a PL/SQL error that is raised during program execution, either implicitly by TimesTen or explicitly by your program. Handle an exception by trapping it with a handler or propagating it to the calling environment.</p>
<p>For example, if your <code>SELECT</code> statement returns multiple rows, TimesTen returns an error (exception) at runtime. As the following example shows, you would see TimesTen error 8507, then the associated <code>ORA</code> error message. (<code>ORA</code> messages, originally defined for Oracle Database, are similarly implemented by TimesTen.)</p>
<pre>Command&gt; DECLARE
       &gt;  v_lname VARCHAR2 (15);
       &gt; BEGIN
       &gt;  SELECT last_name INTO v_lname
       &gt;  FROM employees
       &gt;  WHERE first_name = &#39;John&#39;;
       &gt;   DBMS_OUTPUT.PUT_LINE (&#39;Last name is :&#39; || v_lname);
       &gt;  END;
       &gt;  /

 8507: ORA-01422: exact fetch returns more than requested number of rows
 8507: ORA-06512: at line 4
The command failed.
</pre>
<p>You can handle such exceptions in your PL/SQL block so that your program completes successfully. For example:</p>
<pre>Command&gt; DECLARE
       &gt;  v_lname VARCHAR2 (15);
       &gt; BEGIN
       &gt;  SELECT last_name INTO v_lname
       &gt;  FROM employees
       &gt;  WHERE first_name = &#39;John&#39;;
       &gt;   DBMS_OUTPUT.PUT_LINE (&#39;Last name is :&#39; || v_lname);
       &gt; EXCEPTION
       &gt;   WHEN TOO_MANY_ROWS THEN
       &gt;   DBMS_OUTPUT.PUT_LINE (&#39; Your SELECT statement retrieved multiple
       &gt;   rows. Consider using a cursor.&#39;);
       &gt; END;
       &gt; /
 Your SELECT statement retrieved multiple rows. Consider using a cursor.
 
PL/SQL procedure successfully completed.
</pre></div>
<!-- class="sect2" -->
<a id="CIHHDEFG"></a><a id="TTPLS194"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Exc<a id="sthref170"></a>eption types</h3>
<p>There are three types of exceptions:</p>
<ul>
<li>
<p>Predefined exceptions are error conditions that are defined by PL/SQL.</p>
</li>
<li>
<p>Non-predefined exceptions include any standard TimesTen errors.</p>
</li>
<li>
<p>User-defined exceptions are exceptions specific to your application.</p>
</li>
</ul>
<p>In TimesTen, these three types of exceptions are used in the same way as in Oracle Database.</p>
<div class="inftblhruleinformal">
<table class="cellalignment6349" title="Exception types" summary="This table shows the three types of exceptions in PL/SQL." dir="ltr">
<thead>
<tr class="cellalignment6338">
<th class="cellalignment6350" id="r1c1-t2">Exception</th>
<th class="cellalignment6350" id="r1c2-t2">Description</th>
<th class="cellalignment6350" id="r1c3-t2">How to handle</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r2c1-t2" headers="r1c1-t2">Predefined TimesTen error</td>
<td class="cellalignment6344" headers="r2c1-t2 r1c2-t2">One of approximately 20 errors that occur most often in PL/SQL code</td>
<td class="cellalignment6344" headers="r2c1-t2 r1c3-t2">You are not required to declare these exceptions. They are predefined by TimesTen. TimesTen implicitly raises the error.</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r3c1-t2" headers="r1c1-t2">Non-predefined TimesTen error</td>
<td class="cellalignment6344" headers="r3c1-t2 r1c2-t2">Any other standard TimesTen error</td>
<td class="cellalignment6344" headers="r3c1-t2 r1c3-t2">These must be declared in the declarative section of your application. TimesTen implicitly raises the error and you can use an exception handler to catch the error.</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r4c1-t2" headers="r1c1-t2">User-defined error</td>
<td class="cellalignment6344" headers="r4c1-t2 r1c2-t2">Error defined and raised by the application</td>
<td class="cellalignment6344" headers="r4c1-t2 r1c3-t2">These must be declared in the declarative section. The developer raises the exception explicitly.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFCJFD"></a><a id="TTPLS195"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Trapping exceptions</h2>
<p>This section describes how to trap predefined TimesTen errors or user-defined errors.</p>
<a id="CIHGACCI"></a><a id="TTPLS196"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Trap<a id="sthref171"></a><a id="sthref172"></a><a id="sthref173"></a>ping predefined TimesTen errors</h3>
<p>Trap a predefined TimesTen error by referencing its predefined name in your exception-handling routine. PL/SQL declares predefined exceptions in the <code>STANDARD</code> package.</p>
<p><a href="#CIHFIGFE">Table 4-1</a> lists predefined exceptions supported by TimesTen, the associated <code>ORA</code> error numbers and <code>SQLCODE</code> values, and descriptions of the exceptions.</p>
<p>Also see <a href="#BABHJCEF">&#34;Unsupported predefined errors&#34;</a>.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLS197"></a><a id="sthref174"></a><a id="CIHFIGFE"></a>Table 4-1 Predefined exceptions</p>
<table class="cellalignment6349" title="Predefined exceptions" summary="This table shows the lists of supported predefined exceptions." dir="ltr">
<thead>
<tr class="cellalignment6338">
<th class="cellalignment6350" id="r1c1-t3">Exception name</th>
<th class="cellalignment6350" id="r1c2-t3">Oracle Database error number</th>
<th class="cellalignment6350" id="r1c3-t3">SQLCODE</th>
<th class="cellalignment6350" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r2c1-t3" headers="r1c1-t3">
<p><code>ACCESS_INTO_NULL</code></p>
</td>
<td class="cellalignment6344" headers="r2c1-t3 r1c2-t3">
<p><code>ORA-06530</code></p>
</td>
<td class="cellalignment6344" headers="r2c1-t3 r1c3-t3">
<p>-6530</p>
</td>
<td class="cellalignment6344" headers="r2c1-t3 r1c4-t3">
<p>Program attempted to assign values to the attributes of an uninitialized object.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r3c1-t3" headers="r1c1-t3">
<p><code>CASE_NOT_FOUND</code></p>
</td>
<td class="cellalignment6344" headers="r3c1-t3 r1c2-t3">
<p><code>ORA-06592</code></p>
</td>
<td class="cellalignment6344" headers="r3c1-t3 r1c3-t3">
<p>-6592</p>
</td>
<td class="cellalignment6344" headers="r3c1-t3 r1c4-t3">
<p>None of the choices in the <code>WHEN</code> clauses of a <code>CASE</code> statement were selected and there is no <code>ELSE</code> clause.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r4c1-t3" headers="r1c1-t3">
<p><code>COLLECTION_IS_NULL</code></p>
</td>
<td class="cellalignment6344" headers="r4c1-t3 r1c2-t3">
<p><code>ORA-06531</code></p>
</td>
<td class="cellalignment6344" headers="r4c1-t3 r1c3-t3">
<p>-6531</p>
</td>
<td class="cellalignment6344" headers="r4c1-t3 r1c4-t3">
<p>Program attempted to apply collection methods other than EXISTS to an uninitialized nested table or varray, or program attempted to assign values to the elements of an uninitialized nested table or varray.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r5c1-t3" headers="r1c1-t3">
<p><code>CURSOR_ALREADY_OPENED</code></p>
</td>
<td class="cellalignment6344" headers="r5c1-t3 r1c2-t3">
<p><code>ORA-06511</code></p>
</td>
<td class="cellalignment6344" headers="r5c1-t3 r1c3-t3">
<p>-6511</p>
</td>
<td class="cellalignment6344" headers="r5c1-t3 r1c4-t3">
<p>Program attempted to open an already opened cursor.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r6c1-t3" headers="r1c1-t3">
<p><code>DUP_VAL_ON_INDEX</code></p>
</td>
<td class="cellalignment6344" headers="r6c1-t3 r1c2-t3">
<p><code>ORA-00001</code></p>
</td>
<td class="cellalignment6344" headers="r6c1-t3 r1c3-t3">
<p>-1</p>
</td>
<td class="cellalignment6344" headers="r6c1-t3 r1c4-t3">
<p>Program attempted to insert duplicate values in a column that is constrained by a unique index.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r7c1-t3" headers="r1c1-t3">
<p><code>INVALID_CURSOR</code></p>
</td>
<td class="cellalignment6344" headers="r7c1-t3 r1c2-t3">
<p><code>ORA-01001</code></p>
</td>
<td class="cellalignment6344" headers="r7c1-t3 r1c3-t3">
<p>-1001</p>
</td>
<td class="cellalignment6344" headers="r7c1-t3 r1c4-t3">
<p>There is an illegal cursor operation.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r8c1-t3" headers="r1c1-t3">
<p><code>INVALID_NUMBER</code></p>
</td>
<td class="cellalignment6344" headers="r8c1-t3 r1c2-t3">
<p><code>ORA-01722</code></p>
</td>
<td class="cellalignment6344" headers="r8c1-t3 r1c3-t3">
<p>-1722</p>
</td>
<td class="cellalignment6344" headers="r8c1-t3 r1c4-t3">
<p>Conversion of character string to number failed.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r9c1-t3" headers="r1c1-t3">
<p><code>NO_DATA_FOUND</code></p>
</td>
<td class="cellalignment6344" headers="r9c1-t3 r1c2-t3">
<p><code>ORA-01403</code></p>
</td>
<td class="cellalignment6344" headers="r9c1-t3 r1c3-t3">
<p>+100</p>
</td>
<td class="cellalignment6344" headers="r9c1-t3 r1c4-t3">
<p>Single row <code>SELECT</code> returned no rows or your program referenced a deleted element in a nested table or an uninitialized element in an associative array (index-by table).</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r10c1-t3" headers="r1c1-t3">
<p><code>PROGRAM_ERROR</code></p>
</td>
<td class="cellalignment6344" headers="r10c1-t3 r1c2-t3">
<p><code>ORA-06501</code></p>
</td>
<td class="cellalignment6344" headers="r10c1-t3 r1c3-t3">
<p>-6501</p>
</td>
<td class="cellalignment6344" headers="r10c1-t3 r1c4-t3">
<p>PL/SQL has an internal problem.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r11c1-t3" headers="r1c1-t3">
<p><code>ROWTYPE_MISMATCH</code></p>
</td>
<td class="cellalignment6344" headers="r11c1-t3 r1c2-t3">
<p><code>ORA-06504</code></p>
</td>
<td class="cellalignment6344" headers="r11c1-t3 r1c3-t3">
<p>-6504</p>
</td>
<td class="cellalignment6344" headers="r11c1-t3 r1c4-t3">
<p>Host cursor variable and PL/SQL cursor variable involved in an assignment statement have incompatible return types.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r12c1-t3" headers="r1c1-t3">
<p><code>STORAGE_ERROR</code></p>
</td>
<td class="cellalignment6344" headers="r12c1-t3 r1c2-t3">
<p><code>ORA-06500</code></p>
</td>
<td class="cellalignment6344" headers="r12c1-t3 r1c3-t3">
<p>-6500</p>
</td>
<td class="cellalignment6344" headers="r12c1-t3 r1c4-t3">
<p>PL/SQL ran out of memory or memory was corrupted.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r13c1-t3" headers="r1c1-t3">
<p><code>SUBSCRIPT_BEYOND_COUNT</code></p>
</td>
<td class="cellalignment6344" headers="r13c1-t3 r1c2-t3">
<p><code>ORA-06533</code></p>
</td>
<td class="cellalignment6344" headers="r13c1-t3 r1c3-t3">
<p>-6533</p>
</td>
<td class="cellalignment6344" headers="r13c1-t3 r1c4-t3">
<p>A program referenced a nested table or varray using an index number larger than the number of elements in the collection.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r14c1-t3" headers="r1c1-t3">
<p><code>SUBSCRIPT_OUTSIDE_LIMIT</code></p>
</td>
<td class="cellalignment6344" headers="r14c1-t3 r1c2-t3">
<p><code>ORA-06532</code></p>
</td>
<td class="cellalignment6344" headers="r14c1-t3 r1c3-t3">
<p>-6532</p>
</td>
<td class="cellalignment6344" headers="r14c1-t3 r1c4-t3">
<p>A program referenced a nested table or varray element using an index number that is outside the legal range (for example, -1).</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r15c1-t3" headers="r1c1-t3">
<p><code>SYS_INVALID_ROWID</code></p>
</td>
<td class="cellalignment6344" headers="r15c1-t3 r1c2-t3">
<p><code>ORA-01410</code></p>
</td>
<td class="cellalignment6344" headers="r15c1-t3 r1c3-t3">
<p>-1410</p>
</td>
<td class="cellalignment6344" headers="r15c1-t3 r1c4-t3">
<p>The conversion of a character string into a universal rowid failed because the character string does not represent a <code>ROWID</code> value.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r16c1-t3" headers="r1c1-t3">
<p><code>TOO_MANY_ROWS</code></p>
</td>
<td class="cellalignment6344" headers="r16c1-t3 r1c2-t3">
<p><code>ORA-01422</code></p>
</td>
<td class="cellalignment6344" headers="r16c1-t3 r1c3-t3">
<p>-1422</p>
</td>
<td class="cellalignment6344" headers="r16c1-t3 r1c4-t3">
<p>Single row <code>SELECT</code> returned multiple rows.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r17c1-t3" headers="r1c1-t3">
<p><code>VALUE_ERROR</code></p>
</td>
<td class="cellalignment6344" headers="r17c1-t3 r1c2-t3">
<p><code>ORA-06502</code></p>
</td>
<td class="cellalignment6344" headers="r17c1-t3 r1c3-t3">
<p>-6502</p>
</td>
<td class="cellalignment6344" headers="r17c1-t3 r1c4-t3">
<p>An arithmetic, conversion, truncation, or size constraint error occurred.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r18c1-t3" headers="r1c1-t3">
<p><code>ZERO_DIVIDE</code></p>
</td>
<td class="cellalignment6344" headers="r18c1-t3 r1c2-t3">
<p><code>ORA-01476</code></p>
</td>
<td class="cellalignment6344" headers="r18c1-t3 r1c3-t3">
<p>-1476</p>
</td>
<td class="cellalignment6344" headers="r18c1-t3 r1c4-t3">
<p>A program attempted to divide a number by zero.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" -->
<div class="example">
<p class="titleinexample"><a id="TTPLS198"></a><a id="sthref175"></a>Example 4-1 Using the ZERO_DIVIDE predefined exception</p>
<p>In this example, a PL/SQL program attempts to divide by 0. The <code>ZERO_DIVIDE</code> predefined exception is used to trap the error in an exception-handling routine.</p>
<pre>Command&gt; DECLARE v_invalid PLS_INTEGER;
       &gt; BEGIN
       &gt;   v_invalid := 100/0;
       &gt; EXCEPTION
       &gt; WHEN ZERO_DIVIDE THEN
       &gt;   DBMS_OUTPUT.PUT_LINE (&#39;Attempt to divide by 0&#39;);
       &gt; END;
       &gt; /
Attempt to divide by 0
 
PL/SQL procedure successfully completed.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHJCBFJ"></a><a id="TTPLS199"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Trap<a id="sthref176"></a><a id="sthref177"></a>ping user-defined exceptions</h3>
<p>You can define your own exceptions in PL/SQL in TimesTen, and you can raise user-defined exceptions explicitly with either the PL/SQL <code>RAISE</code> statement or the <code>RAISE_APPLICATION_ERROR</code> procedure.</p>
<a id="BABCGAGE"></a><a id="TTPLS200"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Usi<a id="sthref178"></a><a id="sthref179"></a>ng the RAISE statement</h4>
<p>The <code>RAISE</code> statement stops normal execution of a PL/SQL block or subprogram and transfers control to an exception handler. <code>RAISE</code> statements can raise predefined exceptions, or user-defined exceptions whose names you decide.</p>
<div class="example">
<p class="titleinexample"><a id="BABGABAG"></a><a id="TTPLS201"></a>Example 4-2 Using RA<a id="sthref180"></a><a id="sthref181"></a><a id="sthref182"></a><a id="sthref183"></a>ISE statement to trap user-defined exception</p>
<p>In this example, the department number 500 does not exist, so no rows are updated in the <code>departments</code> table. The <code>RAISE</code> statement is used to explicitly raise an exception and display an error message, returned by the <code>SQLERRM</code> built-in function, and an error code, returned by the <code>SQLCODE</code> built-in function. Use the <code>RAISE</code> statement by itself within an exception handler to raise the same exception again and propagate it back to the calling environment.</p>
<pre>Command&gt; DECLARE
       &gt;   v_deptno NUMBER := 500;
       &gt;   v_name VARCHAR2 (20) := &#39;Testing&#39;;
       &gt;   e_invalid_dept EXCEPTION;
       &gt;  BEGIN
       &gt;   UPDATE departments
       &gt;   SET department_name = v_name
       &gt;   WHERE department_id = v_deptno;
       &gt;  IF SQL%NOTFOUND THEN
       &gt;     RAISE e_invalid_dept;
       &gt;  END IF;
       &gt;  ROLLBACK;
       &gt;  EXCEPTION
       &gt;    WHEN e_invalid_dept THEN
       &gt;    DBMS_OUTPUT.PUT_LINE (&#39;No such department&#39;);
       &gt;    DBMS_OUTPUT.PUT_LINE (SQLERRM);
       &gt;    DBMS_OUTPUT.PUT_LINE (SQLCODE);
       &gt; END;
       &gt; /
No such department
User-Defined Exception
1
 
PL/SQL procedure successfully completed.
 
The command succeeded.
</pre></div>
<!-- class="example" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Given the same error condition in TimesTen and Oracle Database, <code>SQLCODE</code> returns the same error code, but <code>SQLERRM</code> does not necessarily return the same error message. This is also noted in <a href="#BABDJACG">&#34;TimesTen error messages and SQL codes&#34;</a>.</div>
</div>
<!-- class="sect3" -->
<a id="TTPLS202"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref184"></a>
<h4 class="sect3">Us<a id="sthref185"></a><a id="sthref186"></a>ing the RAISE_APPLICATION_ERROR procedure</h4>
<p>Use the <code>RAISE_APPLICATION_ERROR</code> procedure in the executable section or exception section (or both) of your PL/SQL program. TimesTen reports errors to your application so you can avoid returning unhandled exceptions.</p>
<p>Use an error number between -20,000 and -20,999. Specify a character string up to 2,048 bytes for your message.</p>
<div class="example">
<p class="titleinexample"><a id="TTPLS203"></a><a id="sthref187"></a>Example 4-3 Using the RAISE_APPLICATION_ERROR procedure</p>
<p>This example attempts to delete from the <code>employees</code> table where <code>last_name=Patterson</code>. The <code>RAISE_APPLICATION_ERROR</code> procedure raises the error, using error number -20201.</p>
<pre>Command&gt; DECLARE
       &gt;   v_last_name employees.last_name%TYPE := &#39;Patterson&#39;;
       &gt; BEGIN
       &gt; DELETE FROM employees WHERE last_name = v_last_name;
       &gt; IF SQL%NOTFOUND THEN
       &gt;   RAISE_APPLICATION_ERROR (-20201, v_last_name || &#39; does not exist&#39;);
       &gt; END IF;
       &gt; END;
       &gt; /
 8507: ORA-20201: Patterson does not exist
 8507: ORA-06512: at line 6
The command failed.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEFAHA"></a><a id="TTPLS350"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Sho<a id="sthref188"></a><a id="sthref189"></a><a id="sthref190"></a>wing errors in ttIsql</h2>
<p>You can use the <code>show errors</code> command in <code>ttIsql</code> to see details about errors you encounter in executing anonymous blocks or compiling packages, procedures, or functions. This is shown in <a href="#BABJHBJH">Example 4-4</a>.</p>
<div class="example">
<p class="titleinexample"><a id="BABJHBJH"></a><a id="TTPLS351"></a>Example 4-4 ttIsql show errors command</p>
<p>Again consider <a href="overview.htm#CEGGCJFC">Example 2-17</a>. Assume the same package specification shown there, which declares the procedures and functions <code>hire_employee</code>, <code>remove_employee</code>, and <code>num_above_salary</code>. But instead of the body definition shown there, consider the following, which defines <code>hire_employee</code> and <code>num_above_salary</code> but not <code>remove_employee</code>:</p>
<pre>CREATE OR REPLACE PACKAGE BODY emp_actions AS
-- Code for procedure hire_employee:
  PROCEDURE hire_employee (employee_id NUMBER,
    last_name VARCHAR2,
    first_name VARCHAR2,
    email VARCHAR2,
    phone_number VARCHAR2,
    hire_date DATE,
    job_id VARCHAR2,
    salary NUMBER,
    commission_pct NUMBER,
    manager_id NUMBER,
    department_id NUMBER) IS
  BEGIN
    INSERT INTO employees VALUES (employee_id,
      last_name,
      first_name,
      email,
      phone_number,
      hire_date,
      job_id,
      salary,
      commission_pct,
      manager_id,
      department_id);
  END hire_employee;
-- Code for function num_above_salary:
  FUNCTION num_above_salary (emp_id NUMBER) RETURN NUMBER IS
    emp_sal NUMBER(8,2);
    num_count NUMBER;
  BEGIN
    SELECT salary INTO emp_sal FROM employees
    WHERE employee_id = emp_id;
    SELECT COUNT(*) INTO num_count FROM employees
    WHERE salary &gt; emp_sal;
    RETURN num_count;
  END num_above_salary;
END emp_actions;
/
</pre>
<p>Attempting this body definition after the original package specification results in the following:</p>
<pre>Warning: Package body created with compilation errors.
</pre>
<p>To get more information, run <code>ttIsql</code> and use the command <code>show errors</code>. In this example, <code>show errors</code> provides the following:</p>
<pre>Command&gt; show errors;
Errors for PACKAGE BODY EMP_ACTIONS:
 
LINE/COL ERROR
-------- -----------------------------------------------------------------
13/13    PLS-00323: subprogram or cursor &#39;REMOVE_EMPLOYEE&#39; is declared in a 
package specification and must be defined in the package body
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="BABFIBAB"></a><a id="TTPLS204"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Dif<a id="sthref191"></a>ferences in TimesTen: exception handing and error behavior</h2>
<p>You should be aware of some error-related behaviors that differ between TimesTen PL/SQL and Oracle Database PL/SQL:</p>
<ul>
<li>
<p><a href="#BABEJCDF">TimesTen PL/SQL transaction and rollback behavior for unhandled exceptions</a></p>
</li>
<li>
<p><a href="#BABDJACG">TimesTen error messages and SQL codes</a></p>
</li>
<li>
<p><a href="#BABEADEF">Warnings not visible in PL/SQL</a></p>
</li>
<li>
<p><a href="#BABHJCEF">Unsupported predefined errors</a></p>
</li>
<li>
<p><a href="#BABFFDCA">Possibility of runtime errors after clean compile (use of Oracle Database SQL parser)</a></p>
</li>
<li>
<p><a href="#BABGDIGD">Use of TimesTen expressions at runtime</a></p>
</li>
</ul>
<a id="BABEJCDF"></a><a id="TTPLS205"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">TimesTen PL/SQL tran<a id="sthref192"></a><a id="sthref193"></a>saction and rollback behavior for unhandled exceptions</h3>
<p>TimesTen PL/SQL differs from Oracle Database PL/SQL in a scenario where an application executes PL/SQL in the middle of a transaction, and an unhandled exception occurs during execution of the PL/SQL. Oracle Database rolls back to the beginning of the anonymous block. TimesTen does not roll back.</p>
<p>An application should always handle any exception that results from execution of a PL/SQL block, as in the following example, run with autocommit disabled:</p>
<pre>create table mytable (num int not null primary key);
set serveroutput on
 
insert into mytable values(1);
begin
 insert into mytable values(2);
 insert into mytable values(1);
exception
 when dup_val_on_index then
  dbms_output.put_line(&#39;oops:&#39; || sqlerrm);
  rollback;
end;

select * from mytable;
 
commit;
</pre>
<p>The second <code>INSERT</code> fails because values must be unique, so an exception occurs and the program performs a rollback. Running this in TimesTen results in the following.</p>
<pre>oops:TT0907: Unique constraint (MYTABLE) violated at Rowid &lt;BMUFVUAAABQAAAADjq&gt;
 
select * from mytable;
0 rows found.
</pre>
<p>The result is equivalent in Oracle Database, with the <code>SELECT</code> results showing no rows.</p>
<p>Now consider a TimesTen example where the exception is not handled, again run with autocommit disabled:</p>
<pre>create table mytable (num int not null primary key);
set serveroutput on
 
insert into mytable values(1);
begin
 insert into mytable values(2);
 insert into mytable values(1);
end;

select * from mytable;
 
commit;
</pre>
<p>In TimesTen, the <code>SELECT</code> query indicates execution of the first two inserts:</p>
<pre>  907: Unique constraint (MYTABLE) violated at Rowid &lt;BMUFVUAAABQAAAADjq&gt;
 8507: ORA-06512: at line 3
The command failed.
 
select * from mytable;
&lt; 1 &gt;
&lt; 2 &gt;
2 rows found.
</pre>
<p>If you execute this in Oracle Database, there is a rollback to the beginning of the PL/SQL block, so the results of the <code>SELECT</code> indicate execution of only the first insert:</p>
<pre>ORA-00001: unique constraint (SYSTEM.SYS_C004423) violated
ORA-06512: at line 3
 
       NUM
----------
         1
</pre>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>If there <span class="italic">is</span> an unhandled exception in a PL/SQL block, TimesTen leaves the transaction open only to allow the application to assess its state and determine appropriate action.</p>
</li>
<li>
<p>An application in TimesTen should not execute a PL/SQL block while there are uncommitted changes in the current transaction, unless those changes together with the PL/SQL operations really do constitute a single logical unit of work and the application is able to determine appropriate action. Such action, for example, might consist of a rollback to the beginning of the transaction.</p>
</li>
<li>
<p>If autocommit is enabled and an unhandled exception occurs in TimesTen, the entire transaction is rolled back.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABDJACG"></a><a id="TTPLS206"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">TimesTen er<a id="sthref194"></a><a id="sthref195"></a><a id="sthref196"></a><a id="sthref197"></a><a id="sthref198"></a>ror messages and SQL codes</h3>
<p>Given the same error condition, TimesTen does not guarantee that the error message returned by TimesTen is the same as the message returned by Oracle Database, although the SQL code is the same. Therefore, the information returned by the <code>SQLERRM</code> function may be different, but that returned by the <code>SQLCODE</code> function is the same.</p>
<p>For further information:</p>
<ul>
<li>
<p><a href="#BABGABAG">Example 4-2</a> uses <code>SQLERRM</code> and <code>SQLCODE</code>.</p>
</li>
<li>
<p>Refer to <a class="olink TTERR110" href="../TTERR/error.htm#TTERR110">&#34;Warnings and Errors&#34;</a> in <span class="italic">Oracle TimesTen In-Memory Database Error Messages and SNMP Traps</span> for information about specific TimesTen error messages.</p>
</li>
<li>
<p>Refer to <a class="olink LNPLS01350" href="../LNPLS/sqlerrm_function.htm#LNPLS01350">&#34;SQLERRM Function&#34;</a> and <a class="olink LNPLS01349" href="../LNPLS/sqlcode_function.htm#LNPLS01349">&#34;SQLCODE Function&#34;</a> in <span class="italic">Oracle Database PL/SQL Language Reference</span> for general information.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABEADEF"></a><a id="TTPLS207"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">W<a id="sthref199"></a><a id="sthref200"></a>arnings not visible in PL/SQL</h3>
<p>Oracle Database does not have the concept of runtime warnings, so Oracle Database PL/SQL does not support warnings.</p>
<p>TimesTen does have the concept of warnings, but because the TimesTen PL/SQL implementation is based on the Oracle Database PL/SQL implementation, TimesTen PL/SQL does not support warnings.</p>
<p>As a result, in TimesTen you could execute a SQL statement and see a resulting warning, but if you execute the same statement through PL/SQL you would not see the warning.</p>
</div>
<!-- class="sect2" -->
<a id="BABHJCEF"></a><a id="TTPLS208"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Unsup<a id="sthref201"></a>ported predefined errors</h3>
<p><a href="#CIHGACCI">&#34;Trapping predefined TimesTen errors&#34;</a> lists predefined exceptions supported by TimesTen, the associated <code>ORA</code> error numbers and <code>SQLCODE</code> values, and descriptions of the exceptions.</p>
<p><a href="#BABDEJEJ">Table 4-2</a> notes predefined exceptions that are <span class="italic">not</span> supported by TimesTen.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="TTPLS209"></a><a id="sthref202"></a><a id="BABDEJEJ"></a>Table 4-2 Predefined exceptions not supported by TimesTen</p>
<table class="cellalignment6349" title="Predefined exceptions not supported by TimesTen" summary="This table shows the lists of unsupported predefined exceptions." dir="ltr">
<thead>
<tr class="cellalignment6338">
<th class="cellalignment6350" id="r1c1-t6">Exception name</th>
<th class="cellalignment6350" id="r1c2-t6">Oracle Database error number</th>
<th class="cellalignment6350" id="r1c3-t6">SQLCODE</th>
<th class="cellalignment6350" id="r1c4-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r2c1-t6" headers="r1c1-t6">
<p><code>LOGIN_DENIED</code></p>
</td>
<td class="cellalignment6344" headers="r2c1-t6 r1c2-t6">
<p><code>ORA-01017</code></p>
</td>
<td class="cellalignment6344" headers="r2c1-t6 r1c3-t6">
<p>-1017</p>
</td>
<td class="cellalignment6344" headers="r2c1-t6 r1c4-t6">
<p>User name or password is invalid.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r3c1-t6" headers="r1c1-t6">
<p><code>NOT_LOGGED_ON</code></p>
</td>
<td class="cellalignment6344" headers="r3c1-t6 r1c2-t6">
<p><code>ORA-01012</code></p>
</td>
<td class="cellalignment6344" headers="r3c1-t6 r1c3-t6">
<p>-1012</p>
</td>
<td class="cellalignment6344" headers="r3c1-t6 r1c4-t6">
<p>Program issued a database call without being connected to the database.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r4c1-t6" headers="r1c1-t6">
<p><code>SELF_IS_NULL</code></p>
</td>
<td class="cellalignment6344" headers="r4c1-t6 r1c2-t6">
<p><code>ORA-30625</code></p>
</td>
<td class="cellalignment6344" headers="r4c1-t6 r1c3-t6">
<p>-30625</p>
</td>
<td class="cellalignment6344" headers="r4c1-t6 r1c4-t6">
<p>Program attempted to invoke a <code>MEMBER</code> method, but the object was not initialized.</p>
</td>
</tr>
<tr class="cellalignment6338">
<td class="cellalignment6344" id="r5c1-t6" headers="r1c1-t6">
<p><code>TIMEOUT_ON_RESOURCE</code></p>
</td>
<td class="cellalignment6344" headers="r5c1-t6 r1c2-t6">
<p><code>ORA-00051</code></p>
</td>
<td class="cellalignment6344" headers="r5c1-t6 r1c3-t6">
<p>-51</p>
</td>
<td class="cellalignment6344" headers="r5c1-t6 r1c4-t6">
<p>Timeout occurred while the database was waiting for a resource.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect2" -->
<a id="BABFFDCA"></a><a id="TTPLS210"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Possibility of runtime errors after clean compile (use of Oracle Database SQL parser)</h3>
<p>The TimesTen PL/SQL implementation uses the Oracle Database SQL parser in compiling PL/SQL programs. (This is discussed in <a href="intro.htm#BHCGJFCD">&#34;PL/SQL in TimesTen versus PL/SQL in Oracle Database&#34;</a>.) As a result, if your program uses Oracle Database syntax or built-in procedures that are not supported by TimesTen, the issue is not discovered during compilation. A runtime error occurs during program execution, however.</p>
</div>
<!-- class="sect2" -->
<a id="BABGDIGD"></a><a id="TTPLS352"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Use of TimesTen expressions at runtime</h3>
<p>TimesTen SQL includes several constructs that are not present in Oracle Database SQL. The PL/SQL language does not include these constructs. To use TimesTen-specific SQL from PL/SQL, execute the SQL statements using the <code>EXECUTE IMMEDIATE</code> statement. This avoids compilation errors.</p>
<p>For lists of TimesTen-specific SQL and expressions, see <a class="olink TTCAC346" href="../TTCAC/oracle_tt.htm#TTCAC346">&#34;Compatibility Between TimesTen and Oracle Databases&#34;</a> in <span class="italic">Oracle TimesTen Application-Tier Database Cache User&#39;s Guide</span>.</p>
<p>For more information about <code>EXECUTE IMMEDIATE</code>, refer to <a href="overview.htm#CEGEIGCA">&#34;Dynamic SQL in PL/SQL (EXECUTE IMMEDIATE statement)&#34;</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment6337">
<tr>
<td class="cellalignment6344">
<table class="cellalignment6348">
<tr>
<td class="cellalignment6341"><a href="dtypesfunc.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment6341"><a href="sqlexamples.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment6346">
<table class="cellalignment6347">
<tr>
<td class="cellalignment6341"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment6341"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment6341"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment6341"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment6341"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment6341"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>