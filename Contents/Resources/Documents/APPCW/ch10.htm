<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-2103"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Gateway%20Configuration%20Using%20TCP%2FIP%20Communication%20Protocol"></a><title>Gateway Configuration Using TCP/IP Communication Protocol</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090"/>
<meta name="dcterms.created" content="2017-06-08T13:41:27Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide"/>
<meta name="dcterms.identifier" content="E17928-03"/>
<meta name="dcterms.isVersionOf" content="APPCW"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch9.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch11.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17928-03.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/21</span> <!-- End Header -->
<div id="APPCW215" class="chapter"><a id="g1023426"></a> <a id="i1008888"></a>
<h1 class="chapter"><span class="secnum">9</span> Gateway Configuration Using TCP/IP Communication Protocol</h1>
<p>This chapter outlines the steps needed to configure the Oracle database for a gateway using TCP/IP for IMS Connect on your Microsoft Windows platform. It also provides the steps necessary to verify installation and configuration of the gateway and OLTP components. It contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDJHGBI">Before You Begin</a></p>
</li>
<li>
<p><a href="#i1011054">Preparing to Configure a Gateway Installation/Upgrade</a></p>
</li>
<li>
<p><a href="#i1014581">Configuring the Oracle Database : First Time Installation</a></p>
</li>
<li>
<p><a href="#CHDJHCEC">Upgrading or Migrating the Oracle Database from Previous Gateways</a></p>
</li>
<li>
<p><a href="#i1009515">Optional Configuration Steps to Permit Multiple Users</a></p>
</li>
<li>
<p><a href="#i1008858">Configuring TCP/IP for the Gateway</a></p>
</li>
<li>
<p><a href="#i1007858">Configuring the Gateway</a></p>
</li>
<li>
<p><a href="#i1010100">Loading the PGA_TCP_IMSC Table</a></p>
</li>
<li>
<p><a href="#i1007506">Verifying the Gateway Installation and OLTP Configuration</a></p>
</li>
<li>
<p><a href="#i1007359">Performing Postinstallation Procedures</a></p>
</li>
</ul>
<p><a id="sthref714"></a><a id="sthref715"></a>Configuring the Oracle Database Gateway for APPC using TCP/IP support for IMS Connect involves working with the following components:</p>
<ul>
<li>
<p>the Oracle database</p>
</li>
<li>
<p>your Windows system</p>
</li>
<li>
<p>your network</p>
</li>
<li>
<p>the OLTP</p>
</li>
</ul>
<a id="CHDJHGBI"></a>
<div id="APPCW216" class="sect1">
<h2 class="sect1">Before You Begin</h2>
<p>This chapter requires you to input parameters unique to your system in order to properly configure the gateway and TCP/IP communications interface.</p>
<p>Refer to <a href="ape.htm#g635941">Appendix D, &#34;Configuration Worksheet&#34;</a> for a worksheet listing the installation parameters you will need to know before you can complete the configuration process. Ask your network administrator to provide you with these unique parameter names before you begin.</p>
</div>
<!-- class="sect1" -->
<a id="i1011054"></a>
<div id="APPCW217" class="sect1">
<h2 class="sect1">Preparing to Configure a Gateway Installation/Upgrade <a id="sthref716"></a><a id="sthref717"></a></h2>
<p>There are three ways to establish the gateway-Oracle database relationship when you are installing or upgrading/migrating the gateway:</p>
<ul>
<li>
<p><a href="#i1011353">When the Oracle Database and the gateway are installed in the same ORACLE_HOME on the same machine</a>;</p>
</li>
<li>
<p><a href="#i1011368">When the Oracle Database and the gateway are installed on separate machine</a>; or</p>
</li>
<li>
<p><a href="#i1011275">When the Oracle Database and the gateway are on the same machine but in different directories</a></p>
</li>
</ul>
<p><a id="sthref718"></a><a id="sthref719"></a><a id="sthref720"></a>Depending on the location of your gateway and your Oracle database , you may need to transfer some of the gateway administrative files to the location where the Oracle database is installed.</p>
<p>Follow the instructions suitable to your combination of the gateway-Oracle database locations listed below.</p>
<p class="subhead1"><a id="i1011353"></a><a id="APPCW321"></a>When the Oracle Database and the gateway are installed in the same ORACLE_HOME on the same machine</p>
<p>You do not need to transfer files. Proceed to <a href="#i1014581">&#34;Configuring the Oracle Database : First Time Installation&#34;</a>.</p>
<p class="subhead1"><a id="i1011368"></a><a id="APPCW322"></a>When the Oracle Database and the gateway are installed on separate machine</p>
<ol>
<li>
<p>Locate the gateway administrative files in the gateway <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. All files in this directory that have the suffix <code dir="ltr">.sql</code>, <code dir="ltr">.pkh</code>, and <code dir="ltr">.pkb</code> must be copied into a similarly-named directory in the Oracle database &#39;s Oracle home directory.</p>
</li>
<li>
<p>Now locate the gateway demo files and subdirectories in the gateway <code dir="ltr">%ORACLE_HOME%\dg4appc\demo</code> directory. Copy the <code dir="ltr">pgavsn.sql</code> and <code dir="ltr">pgaecho.sql</code> files into a similarly named directory in the Oracle database .</p>
</li>
<li>
<p>Copy the <code dir="ltr"><a id="sthref721"></a>pgaims.sql</code> file from the gateway Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory to your Oracle database &#39;s Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory.</p>
</li>
<li>
<p>Optional Steps: If you want to run <code dir="ltr">IVTNV</code> and <code dir="ltr">IVTNO</code>, then you will need to copy the <code dir="ltr"><a id="sthref722"></a><a id="sthref723"></a><a id="sthref724"></a><a id="sthref725"></a><a id="sthref726"></a>ivtno.ctl</code>, <code dir="ltr">ivtnod.sql</code>, <code dir="ltr">ivtnv.ctl</code>, and <code dir="ltr">ivtnvd.sql</code> files into the Oracle database &#39;s Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory as well. Make sure to generate the required TIPs and transfer them as well.</p>
</li>
</ol>
<p class="subhead1"><a id="i1011275"></a><a id="APPCW323"></a>When the Oracle Database and the gateway are on the same machine but in different directories</p>
<p>You must change your gateway&#39;s Oracle home to the Oracle database &#39;s Oracle home directory.</p>
<ol>
<li>
<p>For example, if your gateway&#39;s Oracle home is set as follows:</p>
<pre dir="ltr">C:\&gt; echo %ORACLE_HOME%
C:\oracle\pga\12.1
</pre>
<p>and your server&#39;s Oracle home is located in the &#39;<code dir="ltr">\oracle\pga\12.1&#39;</code> directory, then you need to do the following:</p>
<pre dir="ltr">C:\&gt; SET ORACLE_HOME=C:\oracle\pga\12.1
</pre></li>
<li>
<p>Now, create the directories with the following commands:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%
C:\&gt; mkdir dg4appc
C:\&gt; mkdir dg4appc\admin
C:\&gt; mkdir dg4appc\demo
C:\&gt; mkdir dg4appc\demo\IMS
</pre></li>
<li>
<p>Use whatever file transfer mechanism is available on your system to copy all the <code dir="ltr">.sql</code>, <code dir="ltr">.pkh</code>, and <code dir="ltr">.pkb</code> files from the gateway&#39;s Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory to the Oracle database &#39;s Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory.</p>
</li>
<li>
<p>You may also transfer the demo files from the gateway directory to the Oracle database directory. Copy the pgavsn.sql and <code dir="ltr">pgaecho.sql</code> files <code dir="ltr">and</code> directory recursively from the gateway Oracle home&#39;s <code dir="ltr">%ORACLE_HOME%\dg4appc\demo</code> directory to the Oracle database &#39;s <code dir="ltr">%ORACLE_HOME%\dg4appc\demo</code> directory.</p>
</li>
<li>
<p>You may also copy the <a id="sthref727"></a><code dir="ltr">pgaims.sql</code> file from the gateway Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory to the Oracle database Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory.</p>
<p>Optional Steps: If you want to run <code dir="ltr">IVTNV</code> and <code dir="ltr">IVTNO</code>, then you will need to copy the <code dir="ltr"><a id="sthref728"></a><a id="sthref729"></a><a id="sthref730"></a><a id="sthref731"></a><a id="sthref732"></a>ivtno.ctl</code>, <code dir="ltr">ivtnod.sql</code>, <code dir="ltr">ivtnv.ctl</code>, and <code dir="ltr">ivtnvd.sql</code> files into the Oracle database &#39;s Oracle home <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS</code> directory as well. Make sure to generate the required TIPs and transfer them as well.</p>
</li>
</ol>
<p>Proceed to <a href="#i1014581">&#34;Configuring the Oracle Database : First Time Installation&#34;</a>. Following those steps, you may want to perform the <a href="#i1009515">Optional Configuration Steps to Permit Multiple Users</a>,.</p>
</div>
<!-- class="sect1" -->
<a id="i1014581"></a>
<div id="APPCW218" class="sect1">
<h2 class="sect1">Configuring the Oracle Database : First Time Installation</h2>
<p>Follow these steps to configure the <a id="sthref733"></a>Oracle database after installing the Oracle Database Gateway for APPC.</p>
<ol>
<li>
<p>Ensure that the <a id="sthref734"></a><a id="sthref735"></a><a id="sthref736"></a><code dir="ltr">UTL_RAW</code> PL/SQL package has been installed on the Oracle database . <a id="sthref737"></a><a id="sthref738"></a>All PGAU-generated TIP specifications use <code dir="ltr">UTL_RAW</code>, which provides routines for manipulating raw data.</p>
<ol>
<li>
<p>Use <a id="sthref739"></a>SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>From SQL*Plus, enter the following command:</p>
<pre dir="ltr">SQL&gt; DESCRIBE UTL_RAW
</pre>
<p>The <code dir="ltr">DESCR<a id="sthref740"></a>IBE</code> statement produces output on the screen. If you browse through the output, then you should see some functions, including a compare function. If you do not see this output, then continue the <code dir="ltr">UTL_RAW</code> installation by performing Step&nbsp;<a href="#i1009553">d</a>.</p>
<p>If the <a id="sthref741"></a><a id="sthref742"></a><code dir="ltr">DESCRIBE</code> statement indicates success, then your Oracle database has <a id="sthref743"></a><code dir="ltr">UTL_RAW</code> installed and you can proceed to Step&nbsp;<a href="#i1009086">2</a>.</p>
</li>
<li>
<p>Use SQL*Plus to connect to the Oracle database as <code dir="ltr">SYS</code>.</p>
</li>
<li id="i1009553">
<p>From SQL*Plus, run the <a id="sthref744"></a><a id="sthref745"></a>utlraw.sql and <a id="sthref746"></a><a id="sthref747"></a><code dir="ltr">prvtrawb.plb</code> scripts in the Oracle database <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code> directory, in the following order:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @utlraw.sql
SQL&gt; @prvtrawb.sql
</pre></li>
</ol>
</li>
<li id="i1009086">
<p>Ensure that the <code dir="ltr"><a id="sthref748"></a><a id="sthref749"></a>DBMS_OUTPUT</code> standard PL/SQL <a id="sthref750"></a><a id="sthref751"></a><a id="sthref752"></a>package is enabled on your <a id="sthref753"></a>Oracle database . The sample programs and installation verification programs on the distribution media use this standard package.</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">SQL&gt; DESCRIBE DBMS_OUTPUT
</pre>
<p>The <a id="sthref754"></a><a id="sthref755"></a><code dir="ltr">DESCRIBE</code> statement produces output on your screen. If you browse through that output, then you should see some functions, including a <a id="sthref756"></a><a id="sthref757"></a>put_line function.</p>
<p>If you do not see this output, then you must create the <code dir="ltr">DBMS_OUTPUT</code> package. Refer to the <a class="olink ARPLS" href="../ARPLS/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">DBMS_OUTPUT</code> package. After successful installation of the <code dir="ltr">DBMS_OUTPUT</code> package, issue the <code dir="ltr">DESCRIBE</code> statement.</p>
<p>If the <code dir="ltr">DESCRIBE</code> statement indicates success, then your Oracle database has <code dir="ltr">DBMS_OUTPUT</code> created, and you can proceed to Step&nbsp;3.</p>
</li>
</ol>
</li>
<li>
<p>Install the <a id="sthref758"></a><a id="sthref759"></a><code dir="ltr">UTL_PG</code> PL/SQL package. All <a id="sthref760"></a><a id="sthref761"></a>PGAU-generated TIP specifications use <code dir="ltr">UTL_PG</code>, which provides routines for performing numeric conversions to and from raw data.</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <a id="sthref762"></a><a id="sthref763"></a><code dir="ltr">utlpg.sql</code> and <code dir="ltr"><a id="sthref764"></a><a id="sthref765"></a>prvtpgb.plb</code> scripts in the Oracle database &#39;s <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code> directory, in the following order:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @utlpg.sql
SQL&gt; @prvtpgb.plb
</pre></li>
</ol>
</li>
<li>
<p>I<a id="sthref766"></a>nstall the Heterogeneous Services (HS) catalogs.</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">SQL&gt; DESCRIBE HS_FDS_CLASS
</pre>
<p>The <code dir="ltr">DESCRIBE</code> statement produces output on the screen. If the <code dir="ltr">DESCRIBE</code> statement indicates success, then Heterogeneous Services catalogs have been created on your Oracle database and you can proceed to Step&nbsp;<a href="#i1008586">5</a>.</p>
<p>If the <code dir="ltr">DESCRIBE</code> statement does not indicate success, then you must create Heterogeneous Services catalogs and you must perform Step&nbsp;<a href="#i1011512">c</a> below:</p>
</li>
<li id="i1011512">
<p>If it is necessary to create the Heterogeneous Services catalog, then enter the following command:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @caths.sql
</pre></li>
</ol>
</li>
<li id="i1008586">
<p><a id="sthref767"></a><a id="sthref768"></a>Create a public database link to access the Oracle Database Gateway for APPC:<a id="sthref769"></a></p>
<p>Use <a id="sthref770"></a>SQL*Plus to connect to the <a id="sthref771"></a>Oracle database as user <code dir="ltr">SYSTEM</code>. You can use the following SQL*Plus<a id="sthref772"></a> sample whether the Oracle database and the gateway are on the same system or on different systems. In the following sample, <code dir="ltr">pgasrv</code> is the <code dir="ltr"><span class="codeinlineitalic">tns_name_entry</span></code> that will be assigned to the gateway when you modify the <code dir="ltr"><a id="sthref773"></a><a id="sthref774"></a>tnsnames.ora</code> file later in this chapter.</p>
<pre dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK PGA USING <span class="italic">&#39;PGASRV&#39;</span>
</pre></li>
<li>
<p>Create the gateway administrator user <a id="sthref775"></a><code dir="ltr">PGAADMIN</code> and install the <a id="sthref776"></a>PG DD.</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYSTEM</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr">pgacr8au.sql</code> <a id="sthref777"></a><a id="sthref778"></a>script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script creates the <code dir="ltr">PGAADMIN</code> user&nbsp;ID.</p>
<p>The initial password defined for <a id="sthref779"></a><code dir="ltr">PGAADMIN</code> is <code dir="ltr">PGAADMIN</code>. Use the <a id="sthref780"></a><a id="sthref781"></a><code dir="ltr">ALTER USER</code> command to change the password. For further information about password issues, refer to the <a class="olink SQLRF" href="../SQLRF/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a>.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgacr8au.sql
</pre></li>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr">pgddcr8.sql</code> <a id="sthref782"></a><a id="sthref783"></a><a id="sthref784"></a>script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script installs the PG&nbsp;DD.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgddcr8.sql
</pre></li>
<li>
<p>From SQL*Plus, connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p><a id="sthref785"></a>Grant execution privileges on <a id="sthref786"></a><code dir="ltr">DBMS_PIPE</code> to <code dir="ltr">PGAADMIN</code>:<a id="sthref787"></a></p>
<pre dir="ltr">SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO PGAADMIN
</pre></li>
</ol>
</li>
<li>
<p>Ensure that the <a id="sthref788"></a><code dir="ltr">pg4tcpmap</code> package has been installed on your Oracle database . Follow Steps&nbsp;a through&nbsp;c to test for proper installation of <code dir="ltr">pg4tcpmap</code>.</p>
<p>Refer to <a href="apb.htm#i632026">&#34;Output for the pg4tcpmap Tool&#34;</a> in <a href="apb.htm#g635076">Appendix B</a> for a sample of the output from the <code dir="ltr">pg4tcpmap</code> tool, and refer to Chapter 6 of the <a class="olink APPUG600" href="../APPUG/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a> for details about the commands needed to run the tool.</p>
<ol>
<li>
<p>Use <a id="sthref789"></a>SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYSTEM</code>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">SQL&gt; select table_name, owner
from dba_tables
where table_name = &#39;PGA_TCP_IMSC&#39;, 
and owner = &#39;PGAADMIN&#39;;
SQL&gt; column owner format a 10
SQL&gt; column index_name format a 18
SQL&gt; column table_name format a 14
SQL&gt; select owner, index_name, table_name, uniqueness
from dba_indexes
where index_name = &#39;PGA_TCP_IMSC_IND&#39;;
</pre>
<p>Both <code dir="ltr">SELECT</code> statements must produce one row each. Following is the result for the first select statement:</p>
<pre dir="ltr">TABLE_NAME                        OWNER
------------------------------  ------------------------------
PGA_TCP_IMSC                      PGAADMIN
</pre>
<p>Following is the result of the second select statement:</p>
<pre dir="ltr">OWNER          INDEX_NAME           TABLE_NAME      UNIQUENESS
----------     ------------------   --------------  ---------
PGAADMIN       PGA_TCP_IMSC_IND     PGA_TCP_IMSC    UNIQUE
</pre>
<p>If the select statements produce the preceeding output on the screen, then you can skip Step C. If the select statement produces no output or more than one row, then the result is not the same as the output described above, and it is necessary for you to perform Step <a href="#BABIHCJJ">c</a>.</p>
</li>
<li id="BABIHCJJ">
<p>From SQL*Plus, run the <a id="sthref790"></a><code dir="ltr">pgaimsc.sql</code> script in the Oracle database &#39;s <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgaimsc.sql
</pre></li>
</ol>
</li>
<li>
<p>Install the <a id="sthref791"></a><a id="sthref792"></a>TIP trace access PL/SQL routines. These routines require that the <a id="sthref793"></a><code dir="ltr">DBMS_PIPES</code> standard PL/SQL package is installed and that <a id="sthref794"></a><code dir="ltr">PGAADMIN</code> has execute privileges on it. For more information about <code dir="ltr">DBMS_PIPES</code>, refer to the <a class="olink ARPLS" href="../ARPLS/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the <a id="sthref795"></a>Oracle database as user <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <a id="sthref796"></a><code dir="ltr">pgatiptr.sql</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script creates<a id="sthref797"></a> PL/SQL routines that can be called to read and purge trace information created by PGAU-generated <a id="sthref798"></a>TIP specifications. It also creates public synonyms for these routines. The script prompts you for the necessary user&nbsp;IDs and passwords.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgatiptr.sql
</pre></li>
</ol>
</li>
<li>
<p>Install the <code dir="ltr">GPGLOCAL</code> package. This package is required for compilation and execution of all PGAU-generated <a id="sthref799"></a>TIP specifications. <a id="sthref800"></a><a id="sthref801"></a><a id="sthref802"></a>TIP developers should be granted execute privileges on <a id="sthref803"></a><code dir="ltr">GPGLOCAL</code> (refer to <a href="#i1009515">&#34;Optional Configuration Steps to Permit Multiple Users&#34;</a>).</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <a id="sthref804"></a><code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr"><a id="sthref805"></a><a id="sthref806"></a>gpglocal.pkh</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script compiles the <a id="sthref807"></a><a id="sthref808"></a><code dir="ltr">GPGLOCAL</code> package specification.<a id="sthref809"></a><a id="sthref810"></a></p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @gpglocal.pkh
</pre></li>
<li>
<p>From SQL*Plus, run the <code dir="ltr"><a id="sthref811"></a><a id="sthref812"></a>gpglocal.pkb</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script compiles the <code dir="ltr">GPGLOCAL</code> package body.<a id="sthref813"></a><a id="sthref814"></a></p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @gpglocal.pkb
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<span class="bold">Recompile TIPs when changing communication protocol from SNA to TCP/IP</span>:
<p>If you have existing TIPs that were generated previously on a gateway using the SNA protocol and you want to use the new TCP/IP feature, then the TIPs will have to be regenerated by PGAU with mandatory <code dir="ltr">NLS_LANGUAGE</code> and Side Profile Settings. Specify the suitable ASCII character set in the <code dir="ltr">DEFINE</code> <code dir="ltr">TRANSACTION</code> command.</p>
<p>This is due to the fact that the gateway assumes that the appropriate user exit in IMS Connect is being used, which would translate between the suitable ASCII and EBCDIC character sets.</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDJHCEC"></a>
<div id="APPCW219" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Upgrading or Migrating the Oracle Database from Previous Gateways</h2>
<p>Follow these instructions only if you have a previous version of the Oracle Database Gateway for APPC installed on your system and need to configure it for 12<span class="italic">c</span> Release 1 (12.1) of the gateway.</p>
<ol>
<li>
<p>Upgrade your Oracle Database Gateway for APPC to current version levels as follows:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>Install the <code dir="ltr">UTL_RAW</code> package body. From SQL*Plus, run the <code dir="ltr">prvtrawb.plb</code> script from the <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code> directory. This script upgrades the <code dir="ltr">UTL_RAW</code> package body.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @prvtrawb.plb
</pre></li>
<li>
<p>Install the <code dir="ltr">UTL_PG</code> package body. From SQL*Plus, run the <code dir="ltr">prvtpgb.plb</code> script from the <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code> directory. This script upgrades the <code dir="ltr">UTL_PG</code> package body.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @prvtpgb.plb
</pre></li>
</ol>
<p>The <code dir="ltr">prvtrawb.plb</code> and <code dir="ltr">prvtpgb.plb</code> scripts should complete successfully. If they fail because specifications do not exist or were invalidated, then consider reinstalling the package specifications as directed in <a href="#CHDJCBGE">If You Must Reinstall Package Specifications</a>.</p>
</li>
</ol>
<a id="CHDJCBGE"></a>
<div id="APPCW220" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">If You Must Reinstall Package Specifications</h3>
<p>If the <code dir="ltr">UTL_RAW</code> or <code dir="ltr">UTL_PG</code> package has been invalidated or removed, then the <code dir="ltr">prvtrawb.plb</code> and <code dir="ltr">prvtpgb.plb</code> scripts may not complete successfully, then, you might have to reinstall the package specifications.</p>
<p>If you do reinstall the package specifications, then any dependent objects (such as existing user TIPs and client applications) are invalidated and will subsequently need to be recompiled. The impact of this is a one-time performance delay while recompilation of the TIPs and dependent client applications proceeds.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before proceeding with reinstallation of the package scripts, make sure that you are in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory</div>
<p>TIPs were split into separate specification and body files in release 3.3 to avoid cascaded recompilations in later releases.</p>
<ul>
<li>
<p>Step 1: Run the following scripts before proceeding with the PGAU upgrade:</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYS</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr">utlraw.sql</code> and <code dir="ltr">utlpg.sql</code> scripts in the Oracle database <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code> directory, in the following order, to upgrade their respective package specifications:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\rdbms\admin
SQL&gt; @utlraw.sql
SQL&gt; @utlpg.sql
</pre></li>
</ol>
</li>
<li>
<p>Step 2: Repeat installation of <code dir="ltr">UTL_RAW</code> and <code dir="ltr">UTL_PG</code> package body</p>
</li>
</ul>
<p>After the scripts have run, repeat Steps 1a and 1b in <a href="#CHDJHCEC">Upgrading or Migrating the Oracle Database from Previous Gateways</a> and then, proceed to <a href="#CHDIECBB">Upgrading PGAU from Previous Gateway Releases</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
TIPs and dependent client applications must be recompiled after reinstallation of the package specifications. Refer to <a class="olink APPUG" href="../APPUG/toc.htm"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a> for more information about compiling TIPs</div>
</div>
<!-- class="sect2" -->
<a id="CHDIECBB"></a>
<div id="APPCW221" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Upgrading PGAU from Previous Gateway Releases</h3>
<p>Upgrade the PG DD as follows before execution the new PGAU:</p>
<ol>
<li>
<p>If necessary, then use SQL*Plus to connect to the Oracle database as user <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr">pgddupgr.sql</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script upgrades the PG DD.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgddupgr.sql
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1009515"></a>
<div id="APPCW222" class="sect1">
<h2 class="sect1">Optional Configuration Steps<a id="sthref815"></a><a id="sthref816"></a><a id="sthref817"></a> to Permit Multiple Users</h2>
<p>The following configuration steps are optional. Perform these steps if you want to allow users other than <a id="sthref818"></a><code dir="ltr">PGAADMIN</code> to perform <a id="sthref819"></a>PG DD operations using PGAU.</p>
<ol>
<li>
<p>Create <a id="sthref820"></a><a id="sthref821"></a>public synonyms for the PG DD to allow other users to access the tables:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">SYSTEM</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr"><a id="sthref822"></a><a id="sthref823"></a>pgddcr8s.sql</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script creates public synonyms for the PG DD.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgddcr8.sql
</pre></li>
</ol>
</li>
<li>
<p>Create roles for accessing the PG DD, performing definitions of transactions, and generating <a id="sthref824"></a>TIP specifications. The <code dir="ltr">PGAADMIN</code> user can grant these roles to other users as necessary.</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code dir="ltr"><a id="sthref825"></a><a id="sthref826"></a>pgddcr8r.sql</code> script in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. This script creates two roles, <code dir="ltr">PGDDDEF</code> and <code dir="ltr">PGDDGEN</code>. The <a id="sthref827"></a><a id="sthref828"></a><code dir="ltr">PGDDDEF</code> role provides <code dir="ltr">SELECT</code>, <code dir="ltr">INSERT</code>, <code dir="ltr">UPDATE</code>, and <code dir="ltr">DELETE</code> privileges against some of the <a id="sthref829"></a>PG DD tables, and select privileges against others, and allows execution of the <code dir="ltr">PGAU</code> <code dir="ltr">DEFINE</code>, <code dir="ltr">GENERATE</code>, <code dir="ltr">REDEFINE</code>, <code dir="ltr">REPORT</code>, and <code dir="ltr">UNDEFINE</code> statements. The <a id="sthref830"></a><a id="sthref831"></a><code dir="ltr">PGDDGEN</code> role provides select privileges against the PG DD tables, and allows execution of the <code dir="ltr">PGAU</code> <code dir="ltr">GENERATE</code> and <code dir="ltr">REPORT</code> statements only.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgddcr8r.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="sthref832"></a><a id="sthref833"></a><a id="sthref834"></a><a id="sthref835"></a>Grant access to PGA required packages.</p>
<p><a id="sthref836"></a><a id="sthref837"></a>TIP developers require access to the following PL/SQL packages, which are shipped with the <a id="sthref838"></a>Oracle database :</p>
<ul>
<li>
<p><a id="sthref839"></a><code dir="ltr">DBMS_PIPE</code> in the <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code><a id="sthref840"></a> directory</p>
</li>
<li>
<p><a id="sthref841"></a><code dir="ltr">UTL_RAW</code> in the <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code><a id="sthref842"></a> directory</p>
</li>
<li>
<p><a id="sthref843"></a><code dir="ltr">UTL_PG</code> in the <code dir="ltr">%ORACLE_HOME%\rdbms\admin</code><a id="sthref844"></a><a id="sthref845"></a> directory</p>
</li>
</ul>
<p>Explicit grants to execute these packages must be made to TIP developers.</p>
<p>These grants can be private, as in the following example:</p>
<pre dir="ltr">C:\&gt; sqlplus SYS\<span class="italic">pw@database_specification_string</span> 
SQL&gt; GRANT EXECUTE ON UTL_RAW TO <span class="italic">tip_developer</span>; 
SQL&gt; GRANT EXECUTE ON UTL_PG TO <span class="italic">tip_developer</span>; 
SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO <span class="italic">tip_developer;</span> 
SQL&gt; CONNECT PGAADMIN\<span class="italic">pw@database_specification_string</span> 
SQL&gt; GRANT EXECUTE ON PGAADMIN.PURGE_TRACE TO <span class="italic">tip_developer</span>; 
SQL&gt; GRANT EXECUTE ON PGAADMIN.READ_TRACE TO <span class="italic">tip_developer</span>; 
SQL&gt; GRANT EXECUTE ON PGAADMIN.GPGLOCAL TO <span class="italic">tip_developer;</span> 
SQL&gt; exit
</pre>
<p>Alternatively, these grants can be public, as in the following example:</p>
<pre dir="ltr">C:\&gt; sqlplus SYS\pw@<span class="italic">database_specification_string</span> 
SQL&gt; GRANT EXECUTE ON UTL_RAW TO PUBLIC;
SQL&gt; GRANT EXECUTE ON UTL_PG TO PUBLIC;
SQL&gt; GRANT EXECUTE ON DBMS_PIPE to PUBLIC;
SQL&gt; CONNECT PGAADMIN\<span class="italic">pw@database_specification_string</span> 
SQL&gt; GRANT EXECUTE ON PGAADMIN.PURGE_TRACE TO PUBLIC;
SQL&gt; GRANT EXECUTE ON PGAADMIN.READ_TRACE TO PUBLIC;
SQL&gt; GRANT EXECUTE ON PGAADMIN.GPGLOCAL TO PUBLIC;
SQL&gt; EXIT
</pre>
<p>You can use either private or public grants. Both are sufficient for using PGA. Public grants are easier and can be performed now. If you use private grants, then they must be issued each time a new TIP developer user&nbsp;ID is created.<a id="sthref846"></a><a id="sthref847"></a></p>
<p>SQL scripts for performing these grants are provided in the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. The<a id="sthref848"></a><a id="sthref849"></a> <a id="sthref850"></a><a id="sthref851"></a><code dir="ltr">pgddapub.sql</code> script performs these grants for public access to the packages. The <a id="sthref852"></a><a id="sthref853"></a><a id="sthref854"></a><a id="sthref855"></a><code dir="ltr">pgddadev.sql</code> script performs the grants for private access to the packages by a single TIP developer. If you are going to use private grants, then you must run the <code dir="ltr">pgddadev.sql</code> script once for each TIP developer&#39;s user&nbsp;ID:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to the Oracle database as user <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the suitable script (<code dir="ltr">pgddapub.sql</code> or <code dir="ltr">pgddadev.sql</code>) from the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. The script performs the necessary grants as described earlier. You are prompted for the required user&nbsp;IDs, passwords, and database specification strings. If you are using private grants, then repeat this step for each user&nbsp;ID requiring access to the packages.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\admin
SQL&gt; @pgddapub.sql
</pre>
<p>or</p>
<pre dir="ltr">SQL&gt; @pgddadev.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="sthref856"></a><a id="sthref857"></a>If you are upgrading from a previous release of the gateway when the communication protocol was SNA, to the current gateway using TCP/IP, and if you want to upgrade your existing <a id="sthref858"></a><a id="sthref859"></a><a id="sthref860"></a>TIPs with new function and maintenance, then regenerate existing T<a id="sthref861"></a>IP specifications using the <a id="sthref862"></a>PGAU <code dir="ltr">GENERATE</code> statement.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <a id="sthref863"></a>Procedural Gateway Administrative Utility (PGAU) has been enhanced to automatically upgrade existing PG DD entries <a id="sthref864"></a><a id="sthref865"></a>with a new attribute when a <a id="sthref866"></a>PGAU <code dir="ltr">GENERATE</code> command is executed. To support this enhancement, add a new privilege to the <a id="sthref867"></a><code dir="ltr">PGDDGEN</code> role. To do this, as the <code dir="ltr">PGAADMIN</code> user, use SQL*Plus to connect to the Oracle database where the PG&nbsp;DD is stored. Then, issue the following SQL command:
<pre dir="ltr">SQL&gt; GRANT INSERT ON PGA_DATA_VALUES TO PGDDGEN
</pre></div>
<ol>
<li>
<p>Call PGAU in the directory path where the PGAU control files are generated and where TIPs are stored:</p>
<pre dir="ltr">C:\&gt; pgau
PGAU&gt; CONNECT PGAADMIN\pgaadmin@<span class="italic">database_specification_string</span> 
PGAU&gt; GENERATE <span class="italic">tranname</span> 
PGAU&gt; EXIT
</pre></li>
</ol>
<p>For more information about the <code dir="ltr">GENERATE</code> command, refer to the <a class="olink APPUG944" href="../APPUG/admin_util.htm#APPUG944">PGAU GENERATE</a> section in Chapter 2 of the <a class="olink APPUG200" href="../APPUG/admin_util.htm#APPUG200"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a>.</p>
<p>Note that it is not necessary to define the PG DD entries again.</p>
</li>
<li>
<p>Call SQL*Plus in the same directory path where the newly-generated TIP specifications are stored.</p>
<pre dir="ltr">C:\&gt; sqlplus <span class="italic">tip_owner\pw@database_specification_string</span> 
SQL&gt; @<span class="italic">tipname.</span>pkh 
SQL&gt; @<span class="italic">tipname</span>.pkb
SQL&gt; exit
</pre>
<p><a id="sthref868"></a><a id="sthref869"></a><a id="sthref870"></a>PGAU <code dir="ltr">GENERATE</code> produces the TIP in two output files, a specification and a body. You must compile both, first the specification and then the body.</p>
<p>For more information about the <code dir="ltr">GENERATE</code> command, refer to the <a class="olink APPUG944" href="../APPUG/admin_util.htm#APPUG944">PGAU GENERATE</a> command section in Chapter 2 of the <a class="olink APPUG200" href="../APPUG/admin_util.htm#APPUG200"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1008858"></a>
<div id="APPCW223" class="sect1">
<h2 class="sect1"><a id="sthref871"></a><a id="sthref872"></a>Configuring <a id="sthref873"></a>TCP/IP for the Gateway</h2>
<p>You must now configure the TCP/IP for IMS Connect communication package profiles for TCP/IP connections.</p>
<p>Configure the profiles to define the TCP/IP conversations with the <a id="sthref874"></a>OLTP.</p>
<p>When you have finished configuring your communications package, return to the following section, <a href="#i1007858">Configuring the Gateway</a>.</p>
</div>
<!-- class="sect1" -->
<a id="i1007858"></a>
<div id="APPCW224" class="sect1">
<h2 class="sect1">Configuring the Gateway</h2>
<p>To configure the gateway, follow the instructions given subsequently:</p>
<ol>
<li>
<p>Tailor the gateway parameters.</p>
<p>There are a number of parameters specific to the Oracle Database Gateway for APPC when it is using TCP/IP for IMS Connect. These are supplied in the gateway parameter file, <code dir="ltr">init<span class="italic">sid</span>.ora</code>, which is in the <a id="sthref875"></a><code dir="ltr">%ORACLE_HOME%\dg4appc\admin</code> directory. A sample gateway parameter <a id="sthref876"></a><a id="sthref877"></a><a id="sthref878"></a>file, <a id="sthref879"></a><a id="sthref880"></a><code dir="ltr">initPGA.ora</code>, is provided in this subdirectory.<a id="sthref881"></a><a id="sthref882"></a><a id="sthref883"></a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In the <a id="sthref884"></a><a id="sthref885"></a><code dir="ltr">init<span class="italic">sid</span>.ora</code> file, substitute your gateway SID name for &#34;<code dir="ltr"><span class="codeinlineitalic">sid</span></code> &#34; in this file name.
<p>The init<span class="italic">sid</span>.ora file contains both APPC and TCP/IP parameters, separated by a description. You must modify the <code dir="ltr">init<span class="italic">sid</span>.ora</code> file by deleting the APPC parameters. Refer to <a href="apb.htm#g635076">Appendix B, &#34;Gateway Initialization Parameters for TCP/IP Communication Protocol&#34;</a> for the valid TCP/IP parameters.</p>
</div>
<p>The parameters fall into two categories:</p>
<ul>
<li>
<p>gateway initialization <a id="sthref886"></a><a id="sthref887"></a>parameters</p>
<p>These parameters control the general operation of the gateway in the Oracle environment.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
Before performing the following step, refer to <a href="apb.htm#g635076">Appendix B, &#34;Gateway Initialization Parameters for TCP/IP Communication Protocol&#34;</a> for information about tailoring gateway initialization and PGA parameters. Pay special attention to the information about using the <a id="sthref888"></a><code dir="ltr">PGA_CAPABILITY</code> parameter.</div>
</li>
<li>
<p>PGA <a id="sthref889"></a><a id="sthref890"></a><a id="sthref891"></a>parameters</p>
<p>PGA parameters control the TCP/IP interface portion of the gateway. Use the <a id="sthref892"></a><a id="sthref893"></a><code dir="ltr">SET</code> gateway initialization parameter to specify PGA parameters. Oracle recommends that you group all <code dir="ltr">SET</code> commands<a id="sthref894"></a><a id="sthref895"></a> for PGA parameters at the end of the init<span class="italic">sid</span>.ora file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Misspelled parameters are ignored<a id="sthref896"></a>. However, if the <code dir="ltr">%ORACLE_HOME%\dg4appc\admin\initsid.ora</code> file is missing, then all calls to the gateway fail and return a <code dir="ltr">PGA-20928</code> error.</div>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1010100"></a>
<div id="APPCW225" class="sect1">
<h2 class="sect1">Loading the <a id="sthref897"></a><a id="sthref898"></a>PGA_TCP_IMSC Table</h2>
<p>Gateway users who wish to employ the TCP/IP protocol do so by using the <code dir="ltr">pg4tcpmap</code> tool.</p>
<p>The <a id="sthref899"></a><code dir="ltr">pg4tcpmap</code> tool resides on the gateway. Its function is to map the side profile name to TCP/IP and IMS Connect attributes. You must run this tool before executing the PL/SQL gateway statements (such as <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS\pgaims.sql</code>).</p>
<p>In <a id="sthref900"></a>PGAINIT TIP, for example, the user must specify a side profile name. The SNA protocol recognizes and uses the parameter. In this release of the gateway, the <code dir="ltr">pg4tcpmap</code> tool uses the original PGAINIT TIP format to map the relevant SNA parameters to TCP/IP. The <code dir="ltr">pg4tcpmap</code> tool inserts the values of these parameters into a table called <a id="sthref901"></a><a id="sthref902"></a><code dir="ltr">PGA_TCP_IMSC</code>.</p>
<p>Before executing <code dir="ltr">pg4tcpmap</code>, you must specify the <code dir="ltr">ORACLE_HOME</code>, Oracle SID and modify <code dir="ltr">init<span class="italic">sid</span>.ora</code>. Refer to <a href="apb.htm#g635076">Appendix B, &#34;Gateway Initialization Parameters for TCP/IP Communication Protocol&#34;</a> in this guide and Chapter 6 in the <a class="olink APPUG600" href="../APPUG/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a> for complete information about the <code dir="ltr">pg4tcpmap</code> commands.</p>
<p>Chapter 6 of the <a class="olink APPUG600" href="../APPUG/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a> contains a list of <a id="sthref903"></a><code dir="ltr">pg4tcpmap</code> commands and instructions for using them, as well as an example of the table. Refer to &#34;Troubleshooting&#34; in the <a class="olink APPUG800" href="../APPUG/pro_det.htm#APPUG800"><span class="italic">Oracle Database Gateway for APPC User&#39;s Guide</span></a> for information about the trace file for the executed <code dir="ltr">pg4tcpmap</code> tool.</p>
<p>To operate this tool, execute the following command:</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\bin
C:\&gt; pg4tcpmap
</pre>
<p>Refer to <a href="apb.htm#i632026">&#34;Output for the pg4tcpmap Tool&#34;</a> for a sample of the <code dir="ltr">pg4tcpmap</code> output.</p>
</div>
<!-- class="sect1" -->
<a id="i1007506"></a>
<div id="APPCW226" class="sect1">
<h2 class="sect1">Verifying the Gateway Installation and OLTP Configuration</h2>
<p>To verify the gateway installation and the OLTP configuration, perform the following procedures after installing the gateway.<a id="sthref904"></a><a id="sthref905"></a></p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
If your <a id="sthref906"></a>database link name is not &#34;PGA,&#34; modify the demonstration <code dir="ltr">.sql</code> files to give them the particular database link name that you created in Step <a href="#i1008586">5</a> of <a href="#i1014581">&#34;Configuring the Oracle Database : First Time Installation&#34;</a>. You must modify the following .sql files:
<ul>
<li>
<p><code dir="ltr"><a id="sthref907"></a><a id="sthref908"></a>pgavsn.sql</code></p>
</li>
<li>
<p><a id="sthref909"></a><a id="sthref910"></a><code dir="ltr">pgaecho.sql</code></p>
</li>
<li>
<p><a id="sthref911"></a><a id="sthref912"></a><code dir="ltr">pgaims.sql</code></p>
</li>
</ul>
</div>
<div id="APPCW227" class="sect2"><a id="sthref913"></a>
<h3 class="sect2">Verifying the Gateway Installation<a id="sthref914"></a><a id="sthref915"></a><a id="sthref916"></a></h3>
<p>To verify the gateway software installation using the <a id="sthref917"></a><a id="sthref918"></a>database link PGA previously created, perform the following steps:</p>
<ol>
<li>
<p>Using SQL*Plus, connect to your <a id="sthref919"></a>Oracle database as user <a id="sthref920"></a><code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>Run <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\<a id="sthref921"></a>pgavsn.sql</code>.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\demo
SQL&gt; @pgavsn.sql
</pre>
<p>The server version number banner appears at your terminal. You will receive the following output:</p>
<pre dir="ltr">Oracle Database Gateway for APPC (extension TCP/IP for IMS connect).
Version
11.2.0.0.2 Thu Jun 11 14:52:36 2009
 
Copyright (c) Oracle Corporation 1979,
2009.  All rights reserved.
 
 
PL/SQL procedure successfully completed.
</pre></li>
<li>
<p>Run <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\<a id="sthref922"></a>pgaecho.sql</code>.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\demo
SQL&gt; @pgaecho.sql
</pre>
<p>You will receive the following output:</p>
<pre dir="ltr">==&gt; Congratulations, your installation was successful. &lt;==
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<div id="APPCW228" class="sect2"><a id="sthref923"></a>
<h3 class="sect2">Verifying the OLTP Configuration <a id="sthref924"></a><a id="sthref925"></a><a id="sthref926"></a><a id="sthref927"></a></h3>
<p>Use the following procedure to verify the OLTP configuration.</p>
<div class="infobox-note">
<p class="notep1">Attention:</p>
If you have not completed the file transfers detailed in <a href="#i1011054">&#34;Preparing to Configure a Gateway Installation/Upgrade&#34;</a>,then complete them now, before proceeding to the next step.</div>
<div id="APPCW229" class="sect3"><a id="sthref928"></a>
<h4 class="sect3">IMS/TM Verification<a id="sthref929"></a><a id="sthref930"></a><a id="sthref931"></a></h4>
<p>Perform the following steps to verify the IMS/TM configuration. Be certain that you have installed and configured the IMS Connect and that it is up and running before you begin this procedure. Refer to the IBM <span class="italic">IMS Connect Guide and Reference</span> for information about how to perform the installation and configuration tasks.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref932"></a><a id="sthref933"></a><a id="sthref934"></a>TIPs must be recompiled when changing the communication protocol to TCP/IP.
<p>TCP/IP only: <a id="sthref935"></a><a id="sthref936"></a>If you have existing TIPs that were generated previously on a gateway using the SNA protocol and you want to use the new TCP/IP feature, then the TIPs will have to be regenerated by PGAU with mandatory <code dir="ltr">NLS_LANGUAGE</code> and Side Profile Settings. Specify the suitable ASCII character set in the <code dir="ltr">DEFINE TRANSACTION</code> command.</p>
<p>This is because the gateway assumes that the appropriate user exit in IMS Connect is being used, which would translate between the suitable ASCII and EBCDIC character sets.</p>
</div>
<ol>
<li>
<p>To verify that the <a id="sthref937"></a><code dir="ltr">FLIP</code> transaction is installed correctly, log on to your IMS/TM system and enter the following transaction (replacing <code dir="ltr">FLIP</code> with the transaction ID you chose for <code dir="ltr">FLIP</code> when you configured the IMS/TM system for the gateway):</p>
<pre dir="ltr">FLIP THIS MESSAGE
</pre>
<p>The following output appears on your terminal:</p>
<pre dir="ltr">EGASSEM SIHT PILF
</pre>
<div class="infobox-note">
<p class="notep1">Attention:</p>
If you have not completed the file transfers detailed in <a href="#i1011054">Preparing to Configure a Gateway Installation/Upgrade</a> <a href="#i1011054">&#34;Preparing to Configure a Gateway Installation/Upgrade&#34;</a>, then complete them now, before proceeding to the next step.</div>
</li>
<li>
<p>From your Windows platform, modify the <code dir="ltr">pgaims.sql</code> <a id="sthref938"></a><a id="sthref939"></a>file, which resides at <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS\pgaims.sql.</code> Customize the following three items used for accessing the gateway and the IMS/TM system, as described in the comments at the beginning of the file:</p>
<ul>
<li>
<p>the IMS/TM transaction ID</p>
</li>
<li>
<p>the side profile name</p>
</li>
<li>
<p>the logmode entry name</p>
</li>
</ul>
</li>
<li>
<p>Ensure that the <a id="sthref940"></a>TCP/IP communication protocol on your system has been started.</p>
</li>
<li>
<p>Using SQL*Plus, connect to your <a id="sthref941"></a>Oracle database from <code dir="ltr">PGAADMIN</code>.</p>
</li>
<li>
<p>Run <a id="sthref942"></a><a id="sthref943"></a><code dir="ltr">pgaims.sql</code>.</p>
<pre dir="ltr">C:\&gt; cd %ORACLE_HOME%\dg4appc\demo\IMS
SQL&gt; @pgaims.sql
</pre>
<p>The following message appears:</p>
</li>
</ol>
<pre dir="ltr">==&gt; Congratulations, your gateway is communicating with IMS/TM &lt;==
</pre>
<p>Your IMS/TM installation verification is now complete.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007359"></a>
<div id="APPCW230" class="sect1">
<h2 class="sect1">Performing Postinstallation Procedures<a id="sthref944"></a><a id="sthref945"></a><a id="sthref946"></a></h2>
<p>The following are optional steps that you can perform as necessary. Installation of the sample applications for the OLTP is recommended to help you to fully understand how the gateway works and how it interfaces with the OLTP.</p>
<div id="APPCW231" class="sect2"><a id="sthref947"></a>
<h3 class="sect2">Installing Sample Applications<a id="sthref948"></a><a id="sthref949"></a><a id="sthref950"></a><a id="sthref951"></a></h3>
<p>Your Oracle Database Gateway for APPC featuring TCP/IP for IMS Connect contains sample PL/SQL procedures and OLTP transaction programs that demonstrate the gateway&#39;s capabilities.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you are calling a gateway that is using TCP/IP as the communication protocol, and you are using EBCDIC as the language in the control files, you must change the language from EBCDIC to ASCII. Some examples of control files that may be in EBCDIC language are <code dir="ltr">ivtno.ctl</code> and <code dir="ltr">ivtnv.ctl</code>.
<p>For more information, refer to the <code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS\ivtno.ctl</code> and</p>
<p><code dir="ltr">%ORACLE_HOME%\dg4appc\demo\IMS\ivtnv.ctl</code> files.</p>
</div>
<p>Samples are provided for IMS/TM:</p>
<ul>
<li>
<p>IMS inquiry using <code dir="ltr">IVTNO</code> and <code dir="ltr">IVTNV</code> sample transactions</p>
</li>
</ul>
<p>Additional samples are added to the distribution media in later releases of the product. Wherever possible, the sample applications use the sample databases provided with the database products.</p>
<p>For this release, full documentation on installing and using the sample applications is available in the <code dir="ltr">README.doc <a id="sthref952"></a><a id="sthref953"></a></code>files in the following directory:</p>
<p><code dir="ltr">%ORACLE_HOME%\pg4appc\demo\IMS\sample_IMS_applications.txt</code></p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment839">
<tr>
<td class="cellalignment848">
<table class="cellalignment844">
<tr>
<td class="cellalignment843"><a href="ch9.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment843"><a href="ch11.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment850">
<table class="cellalignment842">
<tr>
<td class="cellalignment843"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment843"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment843"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment843"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment843"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment843"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>