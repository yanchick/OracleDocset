<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-78555"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Character%20Set%20Migration"></a><title>Character Set Migration</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="Oracle Data Pump and character set conversion, LCSSCAN command, examples, LCSSCAN, supported languages and character sets, LCSCCAN, error messages"/>
<meta name="dcterms.created" content="2017-01-18T01:25:48Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Globalization Support Guide"/>
<meta name="dcterms.identifier" content="E41669-12"/>
<meta name="dcterms.isVersionOf" content="NLSPG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="ch10oci.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch12custlocale.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41669-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-53A6A5B1-6F79-44AE-9205-C32D9BA6B69A"></a> <span id="PAGE" style="display:none;">15/20</span> <!-- End Header -->
<a id="NLSPG011"></a>
<h1 id="NLSPG-GUID-53A6A5B1-6F79-44AE-9205-C32D9BA6B69A" class="sect1"><span class="enumeration_chapter">11</span> Character Set Migration</h1>
<div>
<p>This chapter discusses character set conversion and character set migration. This chapter includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch11charsetmig.htm#GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635">Overview of Character Set Migration</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8">Changing the Database Character Set of an Existing Database</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13">Repairing Database Character Set Metadata</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-56D71786-F68F-496F-97B2-E3412B93E13E">The Language and Character Set File Scanner</a></p>
</li>
</ul>
</div>
<a id="NLSPG460"></a>
<div class="props_rev_3"><a id="GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635"></a>
<h2 id="NLSPG-GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635" class="sect2">Overview of Character Set Migration</h2>
<div>
<p><a id="d80115e166" class="indexterm-anchor"></a><a id="d80115e170" class="indexterm-anchor"></a><a id="d80115e172" class="indexterm-anchor"></a><a id="d80115e176" class="indexterm-anchor"></a>Choosing the appropriate character set for your database is an important decision. When you choose the database character set, consider the following factors:</p>
<ul style="list-style-type: disc;">
<li>
<p>The type of data you need to store</p>
</li>
<li>
<p>The languages that the database needs to accommodate now and in the future</p>
</li>
<li>
<p>The different size requirements of each character set and the corresponding performance implications</p>
</li>
</ul>
<p>Oracle recommends choosing Unicode for its universality and compatibility with contemporary and future technologies and language requirements. The character set defined in the Unicode Standard supports all contemporary written languages with significant use and a few historical scripts. It also supports various symbols, for example, those used in technical, scientific, and musical notations. It is the native or recommended character set of many technologies, such as Java, Windows, HTML, or XML. There is no other character set that is so universal. In addition, Unicode adoption is increasing rapidly with great support from within the industry.</p>
<p>Oracle&#39;s implementation of Unicode, AL32UTF8, offers encoding of ASCII characters in 1 byte, characters from European, and Middle East languages in 2 bytes, characters from South and East Asian languages in 3 bytes. Therefore, storage requirements of Unicode are usually higher than storage requirements of a legacy character set for the same language.</p>
<p>A related topic is choosing a new character set for an existing database. Changing the database character set for an existing database is called <span class="bold">character set migration</span>. In this case, too, Oracle recommends migrating to Unicode for its universality and compatibility. When you migrate from one database character set to another, you should also plan to minimize data loss from the following sources:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch11charsetmig.htm#GUID-8F973339-3D66-4C6D-A045-249A81007092">Data Truncation</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A">Character Set Conversion Issues</a></p>
<div class="infoboxnotealso" id="GUID-3C4B1468-73E2-4A78-BF03-3FA624F1A635__GUID-192B41A7-1702-4B01-8093-1D8222436065">
<p class="notep1">See Also:</p>
<p><a href="ch2charset.htm#GUID-BF26E01D-AB92-48FC-855A-69A5B3AF9A92">Choosing a Character Set</a></p>
</div>
</li>
</ul>
</div>
<a id="NLSPG857"></a><a id="NLSPG461"></a>
<div class="props_rev_3"><a id="GUID-8F973339-3D66-4C6D-A045-249A81007092"></a>
<h3 id="NLSPG-GUID-8F973339-3D66-4C6D-A045-249A81007092" class="sect3">Data Truncation</h3>
<div>
<p>When <a id="d80115e291" class="indexterm-anchor"></a>the database is created using byte semantics, the sizes of the <code>CHAR</code> and <code>VARCHAR2</code> data types are specified in bytes, not characters. For example, the specification <code>CHAR(20)</code> in a table definition allows 20 bytes for storing character data. When the database character set uses a single-byte character encoding scheme, no data loss occurs when characters are stored because the number of characters is equivalent to the number of bytes. If the database character set uses a multibyte character set, then the number of bytes no longer equals the number of characters because a character can consist of one or more bytes.</p>
<p>During migration to a new character set, it is important to verify the column widths of existing <code>CHAR</code> and <code>VARCHAR2</code> columns because they may need to be extended to support an encoding that requires multibyte storage. Truncation of data can occur if conversion causes expansion of data.</p>
<p>The following table shows an example of <a id="d80115e313" class="indexterm-anchor"></a><a id="d80115e317" class="indexterm-anchor"></a>data expansion when single-byte characters become multibyte characters through conversion.</p>
<div class="tblformal" id="GUID-8F973339-3D66-4C6D-A045-249A81007092__G1007573">
<p class="titleintable">Table 11-1 Single-Byte and Multibyte Encoding</p>
<table class="cellalignment2377" title="Single-Byte and Multibyte Encoding " summary="This table shows examples of data expansion when single-byte characters become multibyte characters through conversion.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2406" id="d80115e333">Character</th>
<th class="cellalignment2406" id="d80115e336">WE8MSWIN 1252 Encoding</th>
<th class="cellalignment2406" id="d80115e339">AL32UTF8 Encoding</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d80115e344" headers="d80115e333">
<p>&auml;</p>
</td>
<td class="cellalignment2368" headers="d80115e344 d80115e336">
<p>E4</p>
</td>
<td class="cellalignment2368" headers="d80115e344 d80115e339">
<p>C3 A4</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d80115e354" headers="d80115e333">
<p>&ouml;</p>
</td>
<td class="cellalignment2368" headers="d80115e354 d80115e336">
<p>F6</p>
</td>
<td class="cellalignment2368" headers="d80115e354 d80115e339">
<p>C3 B6</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d80115e364" headers="d80115e333">
<p>&copy;</p>
</td>
<td class="cellalignment2368" headers="d80115e364 d80115e336">
<p>A9</p>
</td>
<td class="cellalignment2368" headers="d80115e364 d80115e339">
<p>C2 A9</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d80115e374" headers="d80115e333">
<p>&euro;</p>
</td>
<td class="cellalignment2368" headers="d80115e374 d80115e336">
<p>80</p>
</td>
<td class="cellalignment2368" headers="d80115e374 d80115e339">
<p>E2 82 AC</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The first column of the preceding table shows selected characters. The second column shows the hexadecimal representation of the characters in the WE8MSWIN1252 character set. The third column shows the hexadecimal representation of each character in the AL32UTF8 character set. Each pair of letters and numbers represents one byte. For example, <code>&auml;</code> (<code>a</code> with an umlaut) is a single-byte character (<code>E4</code>) in WE8MSWIN1252, but it becomes a two-byte character (<code>C3 A4</code>) in AL32UTF8. Also, the encoding for the euro symbol expands from one byte (<code>80</code>) to three bytes (<code>E2 82 AC</code>).</p>
<p>If the data in the new character set requires storage that is greater than the supported byte size of the data types, then you must change your schema. You may need to use <code>CLOB</code> columns.</p>
<div class="infoboxnotealso" id="GUID-8F973339-3D66-4C6D-A045-249A81007092__GUID-EA0269D4-ABA3-4813-8000-7391A2EAB568">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="ch2charset.htm#GUID-B3C74175-7F77-49A6-9CC9-1F6F70F3A69D">Length Semantics</a>&#34;</span></p>
</div>
</div>
<a id="NLSPG462"></a>
<div class="props_rev_3"><a id="GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D"></a>
<h4 id="NLSPG-GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D" class="sect4">Additional Problems Caused by Data Truncation</h4>
<div>
<p><a id="d80115e488" class="indexterm-anchor"></a><a id="d80115e492" class="indexterm-anchor"></a>Data truncation can cause the following problems:</p>
<ul style="list-style-type: disc;">
<li>
<p>In the database data dictionary, schema object names cannot exceed 30 bytes in length. You must rename schema objects if their names exceed 30 bytes in the new database character set. For example, one Thai character in the Thai national character set requires 1 byte. In AL32UTF8, it requires 3 bytes. If you have defined a table whose name is 11 Thai characters, then the table name must be shortened to 10 or fewer Thai characters when you change the database character set to AL32UTF8.</p>
</li>
<li>
<p>If existing Oracle usernames <a id="d80115e504" class="indexterm-anchor"></a><a id="d80115e508" class="indexterm-anchor"></a>or passwords are created based on characters that change in size in the new character set, then users will have trouble logging in because of authentication failures after the migration to a new character set. This occurs because the encrypted usernames and passwords stored in the data dictionary may not be updated during migration to a new character set. For example, if the current database character set is WE8MSWIN1252 and the new database character set is AL32UTF8, then the length of the username <code>sc&ouml;tt</code> (<code>o</code> with an umlaut) changes from 5 bytes to 6 bytes. In AL32UTF8, <code>sc&ouml;tt</code> can no longer log in because of the difference in the username. Oracle recommends that usernames and passwords be based on ASCII characters. If they are not, then you must reset the affected usernames and passwords after migrating to a new character set.</p>
</li>
<li>
<p>When <code>CHAR</code> data contains characters that expand after migration to a new character set, <a id="d80115e528" class="indexterm-anchor"></a><a id="d80115e532" class="indexterm-anchor"></a>space padding is not removed during database export by default. This means that these rows will be rejected upon import into the database with the new character set. The workaround is to set the <a id="d80115e537" class="indexterm-anchor"></a><a id="d80115e539" class="indexterm-anchor"></a><code>BLANK_TRIMMING</code> initialization parameter to <code>TRUE</code> before importing the <code>CHAR</code> data.</p>
<div class="infoboxnotealso" id="GUID-452FF3A9-816A-4CC5-9E27-A68E86817E6D__GUID-8BC52DBC-E71F-4BF1-A398-061B3431A0AE">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN10011" target="_blank" href="../REFRN/GUID-9867835F-8AB6-4678-BE3F-9E4E27939BA9.htm#REFRN10011"><span class="italic">Oracle Database Reference</span></a> for more information about the <code>BLANK_TRIMMING</code> initialization parameter</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG463"></a>
<div class="props_rev_3"><a id="GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A"></a>
<h3 id="NLSPG-GUID-0925F089-FFE5-457A-975B-4D004B8EFF2A" class="sect3">Character Set Conversion Issues</h3>
<div>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch11charsetmig.htm#GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7">Replacement Characters that Result from Using the Export and Import Utilities</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574">Invalid Data That Results from Setting the Client&#39;s NLS_LANG Parameter Incorrectly</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD">Conversion from Single-byte to Multibyte Character Set and Oracle Data Pump</a></p>
</li>
</ul>
</div>
<a id="NLSPG858"></a><a id="NLSPG464"></a>
<div class="props_rev_3"><a id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7"></a>
<h4 id="NLSPG-GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7" class="sect4">Replacement Characters that Result from Using the Export and Import Utilities</h4>
<div>
<p><a id="d80115e727" class="indexterm-anchor"></a><a id="d80115e731" class="indexterm-anchor"></a>The Export and Import utilities can convert character sets from the original database character set to the new database character set. However, character set conversions can sometimes cause data loss or data corruption. For example, if you are migrating from character set A to character set B, then the destination character set B should be a superset of character set A. The destination character set, B, is a <span class="bold">superset</span> if it contains all the characters defined in character set A. Characters that are not available in character set B are converted to replacement characters, which are often specified as <code>?</code> or <code>&iquest;</code> or as a character that is related to the unavailable character. For example, <code>&auml;</code> (<code>a</code> with an umlaut) can be replaced by <code>a</code>. Replacement characters are defined by the target character set.</p>
<div class="infobox-note" id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7__GUID-699D135A-1412-42CF-B502-2AEE1A490FD7">
<p class="notep1">Note:</p>
<p>There is an exception to the requirement that the destination character set B should be a superset of character set A. If your data contains no characters that are in character set A but are not in character set B, then the destination character set does not need to be a superset of character set A to avoid data loss or data corruption.</p>
</div>
<p>The following figure shows an example of a character set conversion in which the copyright and euro symbols are converted to <code>?</code> and <code>&auml;</code> is converted to <code>a</code>.</p>
<div class="figure" id="GUID-6ECEAE2B-CB7B-4CA4-8124-F639089F31A7__I1006012">
<p class="titleinfigure">Figure 11-1 Replacement Characters in Character Set Conversion</p>
<img width="324" height="209" src="img/GUID-6873BC12-25A2-4170-96F9-1E15BAE1754B-default.gif" alt="Description of Figure 11-1 follows" title="Description of Figure 11-1 follows"/><br/>
<a href="img_text/GUID-6873BC12-25A2-4170-96F9-1E15BAE1754B-print.htm">Description of &#34;Figure 11-1 Replacement Characters in Character Set Conversion&#34;</a></div>
<!-- class="figure" -->
<p>To reduce the risk of losing data, choose a destination character set with a similar character repertoire. Migrating to Unicode may be the best option, because AL32UTF8 contains characters from most legacy character sets.</p>
</div>
</div>
<a id="NLSPG859"></a><a id="NLSPG860"></a><a id="NLSPG465"></a>
<div class="props_rev_3"><a id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574"></a>
<h4 id="NLSPG-GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574" class="sect4">Invalid Data That Results from Setting the Client&#39;s NLS_LANG Parameter Incorrectly</h4>
<div>
<p>Another character set migration scenario that can cause the loss of data is migrating a database that contains invalid data. Invalid data usually occurs in a database because the <code>NLS_LANG</code> parameter is not set properly on the client. The <code>NLS_LANG</code> value should reflect the client operating system code page. For example, in an English Windows environment, the code page is WE8MSWIN1252. When the <code>NLS_LANG</code> parameter is set properly, the database can automatically convert incoming data from the client operating system. When the <code>NLS_LANG</code> parameter is not set properly, then the data coming into the database is not converted properly. For example, suppose that the database character set is AL32UTF8, the client is an English Windows operating system, and the <code>NLS_LANG</code> setting on the client is AL32UTF8. Data coming into the database is encoded in WE8MSWIN1252 and is not converted to AL32UTF8 data because the <code>NLS_LANG</code> setting on the client matches the database character set. Thus Oracle assumes that no conversion is necessary, and invalid data is entered into the database.</p>
<p><a id="d80115e872" class="indexterm-anchor"></a><a id="d80115e874" class="indexterm-anchor"></a>This can lead to two possible data inconsistency problems. One problem occurs when a database contains data from a character set that is different from the database character set but the same code points exist in both character sets. For example, if the database character set is WE8ISO8859P1 and the <code>NLS_LANG</code> setting of the Chinese Windows NT client is SIMPLIFIED CHINESE_CHINA.WE8ISO8859P1, then all multibyte Chinese data (from the ZHS16GBK character set) is stored as multiples of single-byte WE8ISO8859P1 data. This means that Oracle treats these characters as single-byte WE8ISO8859P1 characters. Hence all SQL string manipulation functions such as SUBSTR or LENGTH are based on bytes rather than characters. All bytes constituting ZHS16GBK data are legal WE8ISO8859P1 codes. If such a database is migrated to another character set such as AL32UTF8, then character codes are converted as if they were in WE8ISO8859P1. This way, each of the two bytes of a ZHS16GBK character are converted separately, yielding meaningless values in AL32UTF8. The following figure shows an example of this incorrect character set replacement.</p>
<div class="figure" id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574__I1006027">
<p class="titleinfigure">Figure 11-2 Incorrect Character Set Replacement</p>
<img width="436" height="194" src="img/GUID-7421D316-0E43-4ADE-8276-E510F69D167D-default.gif" alt="Description of Figure 11-2 follows" title="Description of Figure 11-2 follows"/><br/>
<a href="img_text/GUID-7421D316-0E43-4ADE-8276-E510F69D167D-print.htm">Description of &#34;Figure 11-2 Incorrect Character Set Replacement&#34;</a></div>
<!-- class="figure" -->
<p>The second possible problem is having data from mixed character sets inside the database. For example, if the data character set is WE8MSWIN1252, and two separate Windows clients using German and Greek are both using WE8MSWIN1252 as the <code>NLS_LANG</code> character set, then the database contains a mixture of German and Greek<a id="d80115e892" class="indexterm-anchor"></a><a id="d80115e896" class="indexterm-anchor"></a> characters. The following figure shows how different clients can use different character sets in the same database.</p>
<div class="figure" id="GUID-A12A0D7B-17C1-4025-89CE-C6AF8E518574__I1006038">
<p class="titleinfigure">Figure 11-3 Mixed Character Sets</p>
<img width="389" height="364" src="img/GUID-01F6336C-27E6-4246-8B0A-1F5DC8D8C29D-default.gif" alt="Description of Figure 11-3 follows" title="Description of Figure 11-3 follows"/><br/>
<a href="img_text/GUID-01F6336C-27E6-4246-8B0A-1F5DC8D8C29D-print.htm">Description of &#34;Figure 11-3 Mixed Character Sets&#34;</a></div>
<!-- class="figure" -->
<p>For database character set migration to be successful, both of these cases require manual intervention because Oracle Database cannot determine the character sets of the data being stored. Incorrect data conversion can lead to data corruption, so perform a full backup of the database before attempting to migrate the data to a new character set. Refer to the topic <span class="q">&#34;<a href="ch11charsetmig.htm#GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8">Changing the Database Character Set of an Existing Database</a>&#34;</span> for more information about using the Database Migration Assistant for Unicode (DMU) software for handling invalid character data during character set migration to Unicode.</p>
</div>
</div>
<a id="NLSPG466"></a>
<div class="props_rev_3"><a id="GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD"></a>
<h4 id="NLSPG-GUID-CD0F5CA4-F2CE-4970-A4D9-427B23050DDD" class="sect4">Conversion from Single-byte to Multibyte Character Set and Oracle Data Pump</h4>
<div>
<p>If Oracle Data Pump is being used, and if a character set migration from single-byte to multibyte is performed, then the <a id="d80115e992" class="indexterm-anchor"></a>Data Pump PL/SQL packages must be reloaded.</p>
</div>
</div>
</div>
</div>
<a id="NLSPG467"></a>
<div class="props_rev_3"><a id="GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8"></a>
<h2 id="NLSPG-GUID-68664144-771B-4AD2-B015-8EBC91D8EEA8" class="sect2">Changing the Database Character Set of an Existing Database</h2>
<div>
<p><a id="d80115e1068" class="indexterm-anchor"></a><a id="d80115e1072" class="indexterm-anchor"></a><a id="d80115e1076" class="indexterm-anchor"></a>Database character set migration is an intricate process that typically involves three stages: data scanning, data cleansing, and data conversion.</p>
<p>Before you change the database character set, you must identify possible database character set conversion problems and truncation of data. This step is called data scanning. Data scanning identifies the amount of effort required to migrate data into the new character encoding scheme before changing the database character set. Some examples of what may be found during a data scan are the number of schema objects where the column widths need to be expanded and the extent of the data that does not exist in the target character repertoire. This information helps to determine the best approach for converting the database character set.</p>
<p>After the potential data issues are identified, they need to be cleansed properly to ensure the data integrity can be preserved during the data conversion. The data cleansing step could require significant time and effort depending on the scale and complexity of the data issues found. It may take multiple iterations of data scanning and cleansing in order to correctly address all of the data exceptions.</p>
<p>The data conversion is the process by which the character data is converted from the source character set into the target character set representation. Incorrect data conversion can lead to data corruption, so perform a full backup of the database before attempting to migrate the data to a new character set.</p>
<p>There are two approaches for migrating the database ch<a id="d80115e1089" class="indexterm-anchor"></a><a id="d80115e1093" class="indexterm-anchor"></a>aracter set:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch11charsetmig.htm#GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8">Migrating Character Data Using the Database Migration Assistant for Unicode</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-75E21F87-13EA-4319-8448-73B2A1CB564B">Migrating Character Data Using a Full Export and Import</a></p>
</li>
</ul>
</div>
<a id="NLSPG979"></a>
<div class="props_rev_3"><a id="GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8"></a>
<h3 id="NLSPG-GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8" class="sect3">Migrating Character Data Using the Database Migration Assistant for Unicode</h3>
<div>
<p>The Database Migration Assistant for Unicode (DMU) offers <a id="d80115e1183" class="indexterm-anchor"></a><a id="d80115e1187" class="indexterm-anchor"></a>an intuitive and user-friendly GUI that helps you streamline the migration process to Unicode through an interface that minimizes the manual workload and ensures that the migration tasks are carried out correctly and efficiently.</p>
<p>Some advantages of the DMU are that it does the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Guides you through the workflow</p>
<p>An important advantage of the DMU is that it offers a logical workflow to guide you through the entire process of migrating character sets.</p>
</li>
<li>
<p>Offers suggestions for handling certain problems</p>
<p>The DMU can help you when you run into certain problems, such as errors or failures during the scanning or cleansing of the data.</p>
</li>
<li>
<p>Supports selective conversion of data</p>
<p>The DMU enables you to convert only the data that must be converted, at the table, column, and row level.</p>
</li>
<li>
<p>Offers progress monitoring</p>
<p>The DMU provides a GUI to visualize how the steps are progressing.</p>
</li>
<li>
<p>Offers interactive visualization features</p>
<p>The DMU enables you to analyze data and see the results in the GUI in an interactive way. It also enables you to see the data itself in the GUI and cleanse it interactively from identified migration issues.</p>
</li>
<li>
<p>Provides the only supported tool for inline conversion</p>
<p>With the DMU, Oracle Database supports inline conversion of database contents. This offers performance and security advantage over other existing conversion methods.</p>
</li>
<li>
<p>Allows cleansing actions to be scheduled for later execution during the conversion step</p>
<p>Postponing of cleansing actions, such as data type migration, ensures that the production database and applications are not affected until the actual migration downtime window.</p>
</li>
</ul>
<p>This release of the Database Migration Assistant for Unicode has a few restrictions with respect to what databases it can convert. In particular, it does not convert databases with certain types of convertible data in the data dictionary. The export/import migration methods could be used to overcome these limitations.</p>
<p>In the current database release, the DMU is installed under the <code>$ORACLE_HOME/dmu</code> directory.</p>
<div class="infoboxnotealso" id="GUID-DEE399F7-315A-48F5-B1BE-CF4E44E3C2E8__GUID-4070BBE6-B2E0-4C36-98FD-42995EB89D8A">
<p class="notep1">See Also:</p>
<p><a class="olink DUMAG113" target="_blank" href="../DUMAG/ch1overview.htm#DUMAG113"><span class="italic">Oracle Database Migration Assistant for Unicode Guide</span></a></p>
</div>
</div>
</div>
<a id="NLSPG468"></a>
<div class="props_rev_3"><a id="GUID-75E21F87-13EA-4319-8448-73B2A1CB564B"></a>
<h3 id="NLSPG-GUID-75E21F87-13EA-4319-8448-73B2A1CB564B" class="sect3">Migrating Character Data Using a Full Export and Import</h3>
<div>
<p>A full export and import can also be used to convert the database to a new character set. It may be more time-consuming and resource-intensive as a separate target instance must be set up. If you plan to migrate your data to a non-Unicode character set, which Oracle strongly discourages, you can use the DMU to look for invalid character representation issues in the database and use export and import for the data conversion. Note that the DMU will not correctly identify data expansion issues (column and data type limit violations) if the migration is not to Unicode. It will also not identify characters that exist in the source database character set but do not exist in the non-Unicode target character set.</p>
<div class="infoboxnotealso" id="GUID-75E21F87-13EA-4319-8448-73B2A1CB564B__GUID-76975F25-7A71-4C19-8C5B-B950460D989F">
<p class="notep1">See Also:</p>
<p><a class="olink SUTIL2775" target="_blank" href="../SUTIL/GUID-FBDDB88B-4018-4E38-B601-210D16A59081.htm#SUTIL2775"><span class="italic">Oracle Database Utilities</span></a> for more information about the Export and Import utilities</p>
</div>
</div>
</div>
</div>
<a id="NLSPG980"></a>
<div class="props_rev_3"><a id="GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13"></a>
<h2 id="NLSPG-GUID-5F2F37FD-D4B4-4E30-A81F-B52C6BF0DA13" class="sect2">Repairing Database Character Set Metadata</h2>
<div>
<div class="section">
<p>If your database has been in what is commonly called a pass-through configuration, where the client cha<a id="d80115e1398" class="indexterm-anchor"></a>racter set is defined (usually through the <code>NLS_LANG</code> client setting) to be equal to the database character set, the character data in your database could be stored in a different character set from the declared database character set. In this scenario, the recommended solution is to migrate your database to Unicode by using the DMU assumed database character set feature to indicate the actual character set for the data. In case migrating to Unicode is not immediately feasible due to business or technical constraints, it would be desirable to at least correct the database character set declaration to match with the database contents.</p>
<p>With Database Migration Assistant for Unicode Release 1.2, you can repair the database character set metadata in such cases using the <code>CSREPAIR</code> script. The <code>CSREPAIR</code> script works in conjunction with the DMU client and accesses the DMU repository. It can be used to change the database character set declaration to the real character set of the data only after the DMU has performed a full database scan by setting the Assumed Database Character Set property to the target character set and no invalid representation issues have been reported, which verifies that all existing data in the database is defined according to the assumed database character set. Note that <code>CSREPAIR</code> only changes the database character set declaration in the data dictionary metadata and does not convert any database data.</p>
<p>You can find the <code>CSREPAIR</code> script under the <code>admin</code> subdirectory of the DMU installation. The requirements when using the <code>CSREPAIR</code> script are:</p>
</div>
<!-- class="section" -->
<ol>
<li><span>You must first perform a successful full database scan in the DMU with the Assumed Database Character Set property set to the real character set of the data. In this case, the assumed database character set must be different from the current database character set or else nothing will be done. The <code>CSREPAIR</code> script will not proceed if the DMU reports the existence of invalid data. It will, however, proceed if changeless or convertible data is present from the scan.</span></li>
<li><span>The target character set in the assumed database character set must be a binary superset of US7ASCII.</span></li>
<li><span>Only repairing from single-byte to single-byte character sets or multi-byte to multi-byte character sets is allowed as no conversion of <code>CLOB</code> data will be attempted.</span></li>
<li><span>If you set the assumed character set at the column level, then the value must be the same as the assumed database character set. Otherwise, <code>CSREPAIR</code> will not run.</span></li>
<li><span>You must have the <code>SYSDBA</code> privilege to run <code>CSREPAIR</code>.</span></li>
</ol>
</div>
<a id="NLSPG981"></a>
<div class="props_rev_3"><a id="GUID-43495C8E-FD91-4F9E-BA85-27BB696533F9"></a>
<h3 id="NLSPG-GUID-43495C8E-FD91-4F9E-BA85-27BB696533F9" class="sect3">Example: Using CSREPAIR</h3>
<div>
<div class="section">
<p>A typical example is storing WE8MSWIN1252 data in a WE8ISO8859P1 database via the pass-through configuration. To correct the database character set from WE8ISO8859P1 to WE8MSWIN1252, perform the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Set up the DMU and connect to the target WE8ISO8859P1 database.</span></li>
<li class="stepexpand"><span>Open the Database Properties tab in the DMU.</span></li>
<li class="stepexpand"><span>Set the Assumed Database Character Set property to WE8MSWIN1252.</span></li>
<li class="stepexpand"><span>Use the DMU to perform a full database scan.</span></li>
<li class="stepexpand"><span>Open the Database Scan Report and verify there is no data reported under the Invalid Representation category.</span></li>
<li class="stepexpand"><span>Exit from the DMU client.</span></li>
<li class="stepexpand"><span>Start the SQL*Plus utility and connect as a user with the <code>SYSDBA</code> privilege.</span></li>
<li class="stepexpand"><span>Run the <code>CSREPAIR</code> script:</span>
<div>
<p><code>SQL&gt; @@CSREPAIR.PLB</code></p>
<p>Upon completion, you should get the message:</p>
<p>The database character set has been successfully changed to WE8MSWIN1252. You must restart the database now.</p>
</div>
</li>
<li class="stepexpand"><span>Shut down and restart the database.</span></li>
</ol>
</div>
</div>
</div>
<a id="NLSPG982"></a>
<div class="props_rev_3"><a id="GUID-56D71786-F68F-496F-97B2-E3412B93E13E"></a>
<h2 id="NLSPG-GUID-56D71786-F68F-496F-97B2-E3412B93E13E" class="sect2">The Language and Character Set File Scanner</h2>
<div>
<p>The Language and <a id="d80115e1648" class="indexterm-anchor"></a><a id="d80115e1650" class="indexterm-anchor"></a><a id="d80115e1652" class="indexterm-anchor"></a>Character Set File Scanner (<code>LCSSCAN</code>) is a high-performance, statistically based utility for determining the language and character set for unknown file text. It can automatically identify a wide variety of language and character set pairs. With each text, the language and character set detection engine sets up a series of probabilities, each probability corresponding to a language and character set pair. The most statistically probable pair identifies the dominant language and character set.</p>
<p>The purity of the text affects the accuracy of the language and character set detection. The ideal case is literary text of one single language with no spelling or grammatical errors. These types of text may require 100 characters of data or more and can return results with a very high factor of confidence. On the other hand, some technical documents can require longer segments before they are recognized. Documents that contain a mix of languages or character sets or text such as addresses, phone numbers, or programming language code may yield poor results. For example, if a document has both French and German embedded, then the accuracy of guessing either language successfully is statistically reduced. Both plain text and HTML files are accepted. If the format is known, you should set the <code>FORMAT</code> parameter to improve accuracy.</p>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch11charsetmig.htm#GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26">Syntax of the LCSSCAN Command</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148">Examples: Using the LCSSCAN Command</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D">Getting Command-Line Help for the Language and Character Set File Scanner</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-99DA1573-0D35-44AD-B178-0AD9724975AD">Supported Languages and Character Sets</a></p>
</li>
<li>
<p><a href="ch11charsetmig.htm#GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477">LCSSCAN Error Messages</a></p>
</li>
</ul>
</div>
<a id="NLSPG984"></a><a id="NLSPG985"></a><a id="NLSPG986"></a><a id="NLSPG987"></a><a id="NLSPG988"></a><a id="NLSPG983"></a>
<div class="props_rev_3"><a id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26"></a>
<h3 id="NLSPG-GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26" class="sect3">Syntax of the LCSSCAN Command</h3>
<div>
<div class="section">
<p>Start the Language and Character Set File Scanner with the <code>LCSSCAN</code> command. Its syntax is as follows:</p>
<pre dir="ltr">LCSSCAN  [RESULTS=<span class="italic">number</span>] [FORMAT=<span class="italic">file_type</span>] [BEGIN=<span class="italic">number</span>] [END=<span class="italic">number</span>] FILE=<span class="italic">file_name</span>
</pre>
<p>The parameters are described in the rest of this section.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">RESULTS</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The <a id="d80115e1800" class="indexterm-anchor"></a><code>RESULTS</code> parameter is optional.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-18AACD93-8345-4E44-BAB5-56B1E6C8B3AA">
<table class="cellalignment2377" summary="This table describes the properties of the RESULTS parameter.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2457" id="d80115e1815">Property</th>
<th class="cellalignment2458" id="d80115e1818">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1823" headers="d80115e1815">
<p><span class="bold">Default value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1823 d80115e1818">
<p><code>1</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1832" headers="d80115e1815">
<p><span class="bold">Minimum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1832 d80115e1818">
<p><code>1</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1841" headers="d80115e1815">
<p><span class="bold">Maximum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1841 d80115e1818">
<p><code>3</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1850" headers="d80115e1815">
<p><span class="bold">Purpose</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1850 d80115e1818">
<p>The number of language and character set pairs that are returned. They are listed in order of probability. The comparative weight of the first choice cannot be quantified. The recommended value for this parameter is the default value of <code>1</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">FORMAT</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The <code>FORMAT</code> parameter is optional.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-A5F25753-0E82-43EE-A788-EE5BA6AACD2F">
<table class="cellalignment2377" summary="This table describes the properties of the FORMAT parameter.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2432" id="d80115e1877">Property</th>
<th class="cellalignment2461" id="d80115e1880">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2435" id="d80115e1885" headers="d80115e1877">
<p><span class="bold">Default Value</span></p>
</td>
<td class="cellalignment2462" headers="d80115e1885 d80115e1880">
<p><code>text</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2435" id="d80115e1894" headers="d80115e1877">
<p><span class="bold">Purpose</span></p>
</td>
<td class="cellalignment2462" headers="d80115e1894 d80115e1880">
<p>This parameter identifies the type of file to be scanned. The possible values are <code>html</code>, <code>text</code>, and <code>auto</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">BEGIN</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The <a id="d80115e1916" class="indexterm-anchor"></a><code>BEGIN</code> parameter is optional.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-46324B91-6DC2-4B8C-9F49-E3E56B108FF8">
<table class="cellalignment2377" summary="This table describes the properties of the BEGIN parameter.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2457" id="d80115e1931">Property</th>
<th class="cellalignment2458" id="d80115e1934">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1939" headers="d80115e1931">
<p><span class="bold">Default value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1939 d80115e1934">
<p><code>1</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1948" headers="d80115e1931">
<p><span class="bold">Minimum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1948 d80115e1934">
<p><code>1</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1957" headers="d80115e1931">
<p><span class="bold">Maximum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1957 d80115e1934">
<p>Number of bytes in file</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e1965" headers="d80115e1931">
<p><span class="bold">Purpose</span></p>
</td>
<td class="cellalignment2460" headers="d80115e1965 d80115e1934">
<p>The byte of the input file where <code>LCSSCAN</code> begins the scanning process. The default value is the first byte of the input file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">END</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The<a id="d80115e1982" class="indexterm-anchor"></a> <code>END</code> parameter is optional.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-FB91296D-9E65-4B75-82DB-FB96D58D342B">
<table class="cellalignment2377" summary="This table describes the properties of the END parameter.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2457" id="d80115e1998">Property</th>
<th class="cellalignment2458" id="d80115e2001">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2006" headers="d80115e1998">
<p><span class="bold">Default value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2006 d80115e2001">
<p>End of file</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2014" headers="d80115e1998">
<p><span class="bold">Minimum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2014 d80115e2001">
<p><code>3</code></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2023" headers="d80115e1998">
<p><span class="bold">Maximum value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2023 d80115e2001">
<p>Number of bytes in file</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2031" headers="d80115e1998">
<p><span class="bold">Purpose</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2031 d80115e2001">
<p>The last byte of the input file that <code>LCSSCAN</code> scans. The default value is the last byte of the input file.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p class="subhead3">FILE</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The<a id="d80115e2047" class="indexterm-anchor"></a> <code>FILE</code> parameter is required.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-989EAEDA-E366-48B3-999B-F0B49EEC7B26__GUID-12D00DEF-164E-4E04-97C8-D11BAEE6A400">
<table class="cellalignment2377" summary="This table describes the properties of the FILE parameter.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2457" id="d80115e2063">Property</th>
<th class="cellalignment2458" id="d80115e2066">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2071" headers="d80115e2063">
<p><span class="bold">Default value</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2071 d80115e2066">
<p>None</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2459" id="d80115e2079" headers="d80115e2063">
<p><span class="bold">Purpose</span></p>
</td>
<td class="cellalignment2460" headers="d80115e2079 d80115e2066">
<p>Specifies the name of a text file to be scanned</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="NLSPG990"></a><a id="NLSPG991"></a><a id="NLSPG992"></a><a id="NLSPG993"></a><a id="NLSPG994"></a><a id="NLSPG989"></a>
<div class="props_rev_3"><a id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148"></a>
<h3 id="NLSPG-GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148" class="sect3">Examples: Using the LCSSCAN Command</h3>
<div>
<div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-B8B16A3C-061B-4754-BF29-971D842638A7">
<p class="titleinexample">Example 11-1 Specifying Only the File Name in the LCSSCAN Command</p>
<pre dir="ltr">LCSSCAN FILE=example.txt
</pre>
<p>In this example, the entire <code>example.txt</code> file is scanned because the <code>BEGIN</code> and <code>END</code> parameters have not been specified. One language and character set pair will be returned because the <code>RESULTS</code> parameter has not been specified.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-8D6AAC29-D29F-4116-9B0D-B1CC0FD37C29">
<p class="titleinexample">Example 11-2 Specifying the Format as HTML</p>
<pre dir="ltr">LCSSCAN FILE=example.html FORMAT=html
</pre>
<p>In this example, the entire <code>example.html</code> file is scanned because the <code>BEGIN</code> and <code>END</code> parameters have not been specified. The scan will strip HTML tags before the scan, thus results are more accurate. One language and character set pair will be returned because the <code>RESULTS</code> parameter has not been specified.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-EBB00532-958E-4073-B759-BB6B496149C2">
<p class="titleinexample">Example 11-3 Specifying the RESULTS and BEGIN Parameters for LCSSCAN</p>
<pre dir="ltr">LCSSCAN RESULTS=2 BEGIN=50 FILE=example.txt
</pre>
<p>The scanning process starts at the 50th byte of the file and continues to the end of the file. Two language and character set pairs will be returned.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-F11759EE-70F6-4057-BB2B-0E9041260942">
<p class="titleinexample">Example 11-4 Specifying the RESULTS and END Parameters for LCSSCAN</p>
<pre dir="ltr">LCSSCAN RESULTS=3 END=100 FILE=example.txt
</pre>
<p>The scanning process starts at the beginning of the file and ends at the 100th byte of the file. Three language and character set pairs will be returned.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-DEEAE2C6-DD53-4E52-8EE0-1518B4B7A148__GUID-5BEAA436-DEB6-4938-BE9F-3FBAEC187232">
<p class="titleinexample">Example 11-5 Specifying the BEGIN and END Parameters for LCSSCAN</p>
<pre dir="ltr">LCSSCAN BEGIN=50 END=100 FILE=example.txt
</pre>
<p>The scanning process starts at the 50th byte and ends at the 100th byte of the file. One language and character set pair will be returned because the <code>RESULTS</code> parameter has not been specified.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="NLSPG995"></a>
<div class="props_rev_3"><a id="GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D"></a>
<h3 id="NLSPG-GUID-D4DD9AE0-5096-4946-B198-EC12BBB7209D" class="sect3">Getting Command-Line Help for the Language and Character Set File Scanner</h3>
<div>
<div class="section">
<p>To <a id="d80115e2308" class="indexterm-anchor"></a><a id="d80115e2312" class="indexterm-anchor"></a>obtain a summary of the Language and Character Set File Scanner parameters, enter the following command:</p>
<pre dir="ltr">LCSSCAN HELP=y
</pre>
<p>The resulting output shows a summary of the Language and Character Set Scanner parameters.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="NLSPG996"></a>
<div class="props_rev_3"><a id="GUID-99DA1573-0D35-44AD-B178-0AD9724975AD"></a>
<h3 id="NLSPG-GUID-99DA1573-0D35-44AD-B178-0AD9724975AD" class="sect3">Supported Languages and Character Sets</h3>
<div>
<p>The Language and Character Set File Scanner supports several character sets for each language.</p>
<p>When the binary values for a language match two or more encodings that have a subset/superset relationship, the subset character set is returned. For example, if the language is German and all characters are 7-bit, then US7ASCII is returned instead of WE8MSWIN1252, WE8ISO8859P15, or WE8ISO8859P1.</p>
<p>When the character set is determined to be UTF-8, the Oracle character set UTF8 is returned by default unless 4-byte characters (supplementary characters) are detected within the text. If 4-byte characters are detected, then the character set is reported as AL32UTF8.</p>
<div class="infoboxnotealso" id="GUID-99DA1573-0D35-44AD-B178-0AD9724975AD__GUID-07CE4340-B53E-4CED-9242-E9283C84C728">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="applocaledata.htm#GUID-20E0601E-18D9-474C-868D-1DA9A29A1D26">Language and Character Set Detection Support</a>&#34;</span> for a list of supported languages and character sets</p>
</div>
</div>
</div>
<a id="NLSPG997"></a>
<div class="props_rev_3"><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477"></a>
<h3 id="NLSPG-GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477" class="sect3">LCSSCAN Error Messages</h3>
<div>
<div class="section">
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78547"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5FBE744A-E01D-405B-9BC9-0399829AB494"><!-- --></a>LCD-00001 An unknown error occured.</dt>
<dd>
<p><span class="keyword">Cause:</span> An error occurred accessing an internal structure.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Report this error to Oracle Support.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78548"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5A49DEC6-5B92-4711-A6BD-CCF9C41A31A5"><!-- --></a>LCD-00002 NLS data could not be loaded.</dt>
<dd>
<p><span class="keyword">Cause:</span> An error occurred accessing <code>$ORACLE_HOME/nls/data</code>.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Check to make sure <code>$ORACLE_HOME/nls/data</code> exists and is accessible. If not found check <code>$ORA_NLS10</code> directory.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78549"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-5ABA23BA-4B83-498A-A891-2C07B2D6092F"><!-- --></a>LCD-00003 An error occurred while reading the profile file.</dt>
<dd>
<p><span class="keyword">Cause:</span> An error occurred accessing <code>$ORACLE_HOME/nls/data</code>.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Check to make sure <code>$ORACLE_HOME/nls/data</code> exists and is accessible. If not found check <code>$ORA_NLS10</code> directory.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78550"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-46D1EC26-AFC5-4675-9591-2338DA307FF2"><!-- --></a>LCD-00004 The beginning or ending offset has been set incorrectly.</dt>
<dd>
<p><span class="keyword">Cause:</span> The beginning and ending offsets must be an integer greater than 0.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Change the offset to a positive number.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78551"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-BA7783EB-8B2B-491A-96DD-46D2781A7940"><!-- --></a>LCD-00005 The ending offset has been set incorrectly.</dt>
<dd>
<p><span class="keyword">Cause:</span> The ending offset must be greater than the beginning offset.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Change the ending offset to be greater than the beginning offset.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78552"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-2E497639-1AE4-460D-B342-56576309D442"><!-- --></a>LCD-00006 An error occurred when opening the input file.</dt>
<dd>
<p><span class="keyword">Cause:</span> The file was not found or could not be opened.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Check the name of the file specified. Make sure the full file name is specified and that the file is not in use.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78553"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-8A75F87F-94B5-43DD-96F0-00B32D98CC28"><!-- --></a>LCD-00007 The beginning offset has been set incorrectly.</dt>
<dd>
<p><span class="keyword">Cause:</span> The beginning offset must be less than the number of bytes in the file.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Check the size of the file and specify a smaller beginning offset.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-78554"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-02258EFA-4F3A-4550-AE9A-EA3EF1F76477__GUID-9C47FBF1-99AD-4BDC-BFA8-112053484B9A"><!-- --></a>LCD-00008 No result was returned.</dt>
<dd>
<p><span class="keyword">Cause:</span> Not enough text was inputted to produce a result.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> A larger sample of text needs to be inputted to produce a reliable result.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2367">
<tr>
<td class="cellalignment2374">
<table class="cellalignment2372">
<tr>
<td class="cellalignment2371"><a href="ch10oci.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2371"><a href="ch12custlocale.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2376">
<table class="cellalignment2370">
<tr>
<td class="cellalignment2371"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2371"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2371"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2371"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2371"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2371"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>