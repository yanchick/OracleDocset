<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-78560"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Datetime%20Data%20Types%20and%20Time%20Zone%20Support"></a><title>Datetime Data Types and Time Zone Support</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="datetime data types, data types, datetime, interval data types, interval, TIMESTAMP data types, choosing, TIMESTAMP WITH LOCAL TIME ZONE data type, when to use, TIMESTAMP WITH TIME ZONE data type, TIMESTAMP data type"/>
<meta name="dcterms.created" content="2017-01-18T01:25:48Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Globalization Support Guide"/>
<meta name="dcterms.identifier" content="E41669-12"/>
<meta name="dcterms.isVersionOf" content="NLSPG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="ch3globenv.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch5lingsort.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41669-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-7A1BA319-767A-43CC-A579-4DAC7063B243"></a> <span id="PAGE" style="display:none;">8/20</span> <!-- End Header -->
<a id="NLSPG004"></a>
<h1 id="NLSPG-GUID-7A1BA319-767A-43CC-A579-4DAC7063B243" class="sect1"><span class="enumeration_chapter">4</span> Datetime Data Types and Time Zone Support</h1>
<div>
<p>This chapter includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-C2FD0A7D-974F-4C62-8210-1C356243E222">Overview of Datetime and Interval Data Types and Time Zone Support</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-789689BF-5682-4577-8ADE-8105C652CBB7">Datetime and Interval Data Types</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-B6CAA1E5-2A82-42B2-889C-F3F5AFBD53AF">Datetime and Interval Arithmetic and Comparisons</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-429C290A-C201-4272-A369-FF8F4F8E54F7">Datetime SQL Functions</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-ABF6392E-EBCA-484B-88F1-E69BA3E1721C">Datetime and Time Zone Parameters and Environment Variables</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF">Choosing a Time Zone File</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A">Upgrading the Time Zone File and Timestamp with Time Zone Data</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-1A80594A-6D9D-4088-8240-F7CA18300E76">Clients and Servers Operating with Different Versions of Time Zone Files</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-2AF15A96-CD19-4074-8DE6-17BAD0D7DF37">Setting the Database Time Zone</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-578B5988-31E2-4D0F-ACEA-95C827F6012B">Setting the Session Time Zone</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-D8C7A7EB-A507-42A2-9B10-5301E822A7F2">Converting Time Zones With the AT TIME ZONE Clause</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC">Support for Daylight Saving Time</a></p>
</li>
</ul>
</div>
<a id="NLSPG236"></a>
<div class="props_rev_3"><a id="GUID-C2FD0A7D-974F-4C62-8210-1C356243E222"></a>
<h2 id="NLSPG-GUID-C2FD0A7D-974F-4C62-8210-1C356243E222" class="sect2">Overview of Datetime and Interval Data Types and Time Zone Support</h2>
<div>
<p>Businesses conduct transactions across different time zones. Oracle Database datetime and interval data types and time zone support make it possible to store consistent information about the time of events and transactions.</p>
<div class="infobox-note" id="GUID-C2FD0A7D-974F-4C62-8210-1C356243E222__GUID-2E2B21C9-6472-4209-AA60-E9B42F2AAEEE">
<p class="notep1">Note:</p>
<p>This chapter describes Oracle Database datetime and interval data types. It does not attempt to describe ANSI data types or other kinds of data types unless noted.</p>
</div>
</div>
</div>
<a id="NLSPG237"></a>
<div class="props_rev_3"><a id="GUID-789689BF-5682-4577-8ADE-8105C652CBB7"></a>
<h2 id="NLSPG-GUID-789689BF-5682-4577-8ADE-8105C652CBB7" class="sect2">Datetime and Interval Data Types</h2>
<div>
<p>The <span class="bold">datetime data types</span> are <code>DATE</code>, <code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE,</code> and <code>TIMESTAMP WITH LOCAL TIME ZONE</code>. Values of datetime data types are sometimes called <span class="bold">datetimes</span>.</p>
<p>The <span class="bold">interval data types</span> are <code>INTERVAL YEAR TO MONTH</code> and <code>INTERVAL DAY TO SECOND</code>. Values of interval data types are sometimes called <span class="bold">intervals</span>.</p>
<p>Both datetimes and intervals are made up of fields. The values of these fields determine the value of the data type. The fields that apply to all Oracle Database datetime and interval data types are:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>YEAR</code></p>
</li>
<li>
<p><code>MONTH</code></p>
</li>
<li>
<p><code>DAY</code></p>
</li>
<li>
<p><code>HOUR</code></p>
</li>
<li>
<p><code>MINUTE</code></p>
</li>
<li>
<p><code>SECOND</code></p>
</li>
</ul>
<p><code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> also includes these fields:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>TIMEZONE_HOUR</code></p>
</li>
<li>
<p><code>TIMEZONE_MINUTE</code></p>
</li>
<li>
<p><code>TIMEZONE_REGION</code></p>
</li>
<li>
<p><code>TIMEZONE_ABBR</code></p>
</li>
</ul>
<p><code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> does not store time zone information internally, but you can see local time zone information in SQL output if the <code>TZH:TZM</code> or <code>TZR</code> <code>TZD</code> format elements are specified.</p>
<p>The following sections describe the datetime data types and interval data types in more detail:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-3A1B7AC6-2EDB-4DDC-9C9D-223D4C72AC74">Datetime Data Types</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-773BD5B5-D6AD-4AF6-B38B-EBD1459C8445">Interval Data Types</a></p>
<div class="infoboxnotealso" id="GUID-789689BF-5682-4577-8ADE-8105C652CBB7__GUID-D527B5CF-4861-4906-AAAF-A5F5A1B376C1">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00200" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00200"><span class="italic">Oracle Database SQL Language Reference</span></a> for the valid values of the datetime and interval fields</p>
</li>
<li>
<p><a class="olink SQLRF51076" target="_blank" href="../SQLRF/sql_elements004.htm#SQLRF51076"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about format elements</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<a id="NLSPG238"></a>
<div class="props_rev_3"><a id="GUID-3A1B7AC6-2EDB-4DDC-9C9D-223D4C72AC74"></a>
<h3 id="NLSPG-GUID-3A1B7AC6-2EDB-4DDC-9C9D-223D4C72AC74" class="sect3">Datetime Data Types</h3>
<div>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-4D95F6B2-8F28-458A-820D-6C05F848CA23">DATE Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-CD2954CE-45E2-4938-A599-CCB96879510F">TIMESTAMP Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-5BC5D2C1-6506-49BE-8177-F743A46FDC09">TIMESTAMP WITH TIME ZONE Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-3F1C388E-C651-43D5-ADBC-1A49E5C2CA05">TIMESTAMP WITH LOCAL TIME ZONE Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF">Inserting Values into Datetime Data Types</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-2DFBD56C-5832-4AE8-831E-7EF1EFB7F0BB">Choosing a TIMESTAMP Data Type</a></p>
</li>
</ul>
</div>
<a id="NLSPG239"></a>
<div class="props_rev_3"><a id="GUID-4D95F6B2-8F28-458A-820D-6C05F848CA23"></a>
<h4 id="NLSPG-GUID-4D95F6B2-8F28-458A-820D-6C05F848CA23" class="sect4">DATE Data Type</h4>
<div>
<p>The <code>DATE</code> data type stores date and time information. Although date and time information can be represented in both character and number data types, the <code>DATE</code> data type has special associated properties. For each <code>DATE</code> value, Oracle Database stores the following information: century, year, month, date, hour, minute, and second.</p>
<p>You can specify a date value by:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specifying the date value as a literal</p>
</li>
<li>
<p>Converting a character or numeric value to a date value with the <code>TO_DATE</code> function</p>
</li>
</ul>
<p>A date can be specified as an ANSI date literal or as an Oracle Database date value.</p>
<p>An ANSI date literal contains no time portion and must be specified in exactly the following format:</p>
<pre dir="ltr">DATE &#39;YYYY-MM-DD&#39;
</pre>
<p>The following is an example of an ANSI date literal:</p>
<pre dir="ltr">DATE &#39;1998-12-25&#39;
</pre>
<p>Alternatively, you can specify an Oracle Database date value as shown in the following example:</p>
<pre dir="ltr">TO_DATE(&#39;1998-DEC-25 17:30&#39;,&#39;YYYY-MON-DD HH24:MI&#39;,&#39;NLS_DATE_LANGUAGE=AMERICAN&#39;)
</pre>
<p>The default date format for an Oracle Database date value is derived from the <code>NLS_DATE_FORMAT</code> and <code>NLS_DATE_LANGUAGE</code> initialization parameters. The date format in the example includes a two-digit number for the day of the month, an abbreviation of the month name, the four digits of the year, and a 24-hour time designation. The specification for <code>NLS_DATE_LANGUAGE</code> is included because &#39;<code>DEC&#39;</code> is not a valid value for <code>MON</code> in all locales.</p>
<p>Oracle Database automatically converts character values that are in the default date format into date values when they are used in date expressions.</p>
<p>If you specify a date value without a time component, then the default time is midnight. If you specify a date value without a date, then the default date is the first day of the current month.</p>
<p>Oracle Database <code>DATE</code> columns always contain fields for both date and time. If your queries use a date format without a time portion, then you must ensure that the time fields in the <code>DATE</code> column are set to midnight. You can use the <code>TRUNC</code> (date) SQL function to ensure that the time fields are set to midnight, or you can make the query a test of greater than or less than (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, or <code>&gt;)</code> instead of equality or inequality (<code>=</code> or <code>!=)</code>. Otherwise, Oracle Database may not return the query results you expect.</p>
<div class="infoboxnotealso" id="GUID-4D95F6B2-8F28-458A-820D-6C05F848CA23__GUID-17C56F16-AF55-4E42-92D1-081E6026F686">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00202" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00202"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>DATE</code> data type</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-0887A83E-06E1-469A-AA8A-A9A50B8B7B57">NLS_DATE_FORMAT</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-52E080BC-83F9-43A3-B58C-D5F45CBE10C2">NLS_DATE_LANGUAGE</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF00210" target="_blank" href="../SQLRF/sql_elements004.htm#SQLRF00210"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about literals, format elements such as <code>MM</code>, and the <code>TO_DATE</code> function</p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG240"></a>
<div class="props_rev_3"><a id="GUID-CD2954CE-45E2-4938-A599-CCB96879510F"></a>
<h4 id="NLSPG-GUID-CD2954CE-45E2-4938-A599-CCB96879510F" class="sect4">TIMESTAMP Data Type</h4>
<div>
<p>The <code>TIMESTAMP</code> data type is an extension of the <code>DATE</code> data type. It stores year, month, day, hour, minute, and second values. It also stores fractional seconds, which are not stored by the <code>DATE</code> data type.</p>
<p>Specify the <code>TIMESTAMP</code> data type as follows:</p>
<pre dir="ltr">TIMESTAMP [(<span class="italic">fractional_seconds_precision)</span>]
</pre>
<p><span class="italic"><code>fractional_seconds_precision</code></span> is optional and specifies the number of digits in the fractional part of the <code>SECOND</code> datetime field. It can be a number in the range 0 to 9. The default is 6.</p>
<p>For example, <code>&#39;26-JUN-02 09:39:16.78&#39;</code> shows 16.78 seconds. The fractional seconds precision is 2 because there are 2 digits in &#39;<code>78</code>&#39;.</p>
<p>You can specify the <code>TIMESTAMP</code> literal in a format like the following:</p>
<pre dir="ltr">TIMESTAMP &#39;YYYY-MM-DD HH24:MI:SS.FF&#39;
</pre>
<p>Using the example format, specify <code>TIMESTAMP</code> as a literal as follows:</p>
<pre dir="ltr">TIMESTAMP &#39;1997-01-31 09:26:50.12&#39;
</pre>
<p>The value of <code>NLS_TIMESTAMP_FORMAT</code> initialization parameter determines the timestamp format when a character string is converted to the <code>TIMESTAMP</code> data type. <code>NLS_DATE_LANGUAGE</code> determines the language used for character data such as <code>MON</code>.</p>
<div class="infoboxnotealso" id="GUID-CD2954CE-45E2-4938-A599-CCB96879510F__GUID-4753FB29-60C1-455D-9794-B0C131C95CB4">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00203" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00203"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>TIMESTAMP</code> data type</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-0BB80533-A202-4D1A-95BC-0CFA2192DCD2">NLS_TIMESTAMP_FORMAT</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-52E080BC-83F9-43A3-B58C-D5F45CBE10C2">NLS_DATE_LANGUAGE</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG241"></a>
<div class="props_rev_3"><a id="GUID-5BC5D2C1-6506-49BE-8177-F743A46FDC09"></a>
<h4 id="NLSPG-GUID-5BC5D2C1-6506-49BE-8177-F743A46FDC09" class="sect4">TIMESTAMP WITH TIME ZONE Data Type</h4>
<div>
<p><code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> is a variant of <code>TIMESTAMP</code> that includes a time zone region name or time zone offset in its value. The time zone offset is the difference (in hours and minutes) between local time and UTC<a id="d33472e999" class="indexterm-anchor"></a><a id="d33472e1002" class="indexterm-anchor"></a><a id="d33472e1004" class="indexterm-anchor"></a> (Coordinated Universal Time, formerly Greenwich Mean Time). Specify the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type as follows:</p>
<pre dir="ltr">TIMESTAMP [(<span class="italic">fractional_seconds_precision</span>)] WITH TIME ZONE
</pre>
<p><span class="italic"><code>fractional_seconds_precision</code></span> is optional and specifies the number of digits in the fractional part of the <code>SECOND</code> datetime field.</p>
<p>You can specify <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> as a literal as follows:</p>
<pre dir="ltr">TIMESTAMP &#39;1997-01-31 09:26:56.66 +02:00&#39;
</pre>
<p>Two <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> values are considered identical if they represent the same instant in UTC, regardless of the <code>TIME</code> <code>ZONE</code> offsets stored in the data. For example, the following expressions have the same value:</p>
<pre dir="ltr">TIMESTAMP &#39;1999-01-15 8:00:00 -8:00&#39;
TIMESTAMP &#39;1999-01-15 11:00:00 -5:00&#39;
</pre>
<p>You can replace the UTC offset with the <code>TZR</code> (time zone region) format element. The following expression specifies <code>America/Los_Angeles</code> for the time zone region:</p>
<pre dir="ltr">TIMESTAMP &#39;1999-01-15 8:00:00 America/Los_Angeles&#39;
</pre>
<p>To eliminate the ambiguity of boundary cases when the time switches from Standard Time to Daylight Saving Time, use both the <code>TZR</code> format element and the corresponding <code>TZD</code> format element. The <code>TZD</code> format element is an abbreviation of the time zone region with Daylight Saving Time information included. Examples are <code>PST</code> for U. S. Pacific Standard Time and <code>PDT</code> for U. S. Pacific Daylight Time. The following specification ensures that a Daylight Saving Time value is returned:</p>
<pre dir="ltr">TIMESTAMP &#39;1999-10-29 01:30:00 America/Los_Angeles PDT&#39;
</pre>
<p>If you do not add the <code>TZD</code> format element, and the datetime value is ambiguous, then Oracle Database returns an error if you have the <code>ERROR_ON_OVERLAP_TIME</code> session parameter set to <code>TRUE</code>. If <code>ERROR_ON_OVERLAP_TIME</code> is set to <code>FALSE</code> (the default value), then Oracle Database interprets the ambiguous datetime as Standard Time.</p>
<p>The default date format for the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type is determined by the value of the <code>NLS_TIMESTAMP_TZ_FORMAT</code> initialization parameter.</p>
<div class="infoboxnotealso" id="GUID-5BC5D2C1-6506-49BE-8177-F743A46FDC09__GUID-4CE0DDFC-8276-4695-8CB2-CFC6BF252BD3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00204" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00204"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-CD2954CE-45E2-4938-A599-CCB96879510F">TIMESTAMP Data Type</a>&#34;</span> for more information about fractional seconds precision</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC">Support for Daylight Saving Time</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-A00DF2B2-2A01-4517-B8DA-D595788F16B5">NLS_TIMESTAMP_TZ_FORMAT</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF00210" target="_blank" href="../SQLRF/sql_elements004.htm#SQLRF00210"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about format elements</p>
</li>
<li>
<p><a class="olink SQLRF53052" target="_blank" href="../SQLRF/statements_2015.htm#SQLRF53052"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about setting the <code>ERROR_ON_OVERLAP_TIME</code> session parameter</p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG242"></a>
<div class="props_rev_3"><a id="GUID-3F1C388E-C651-43D5-ADBC-1A49E5C2CA05"></a>
<h4 id="NLSPG-GUID-3F1C388E-C651-43D5-ADBC-1A49E5C2CA05" class="sect4">TIMESTAMP WITH LOCAL TIME ZONE Data Type</h4>
<div>
<p><code>TIMESTAMP WITH LOCAL TIME ZONE</code> is another variant of <code>TIMESTAMP</code>. It differs from <code>TIMESTAMP WITH TIME ZONE</code> as follows: data stored in the database is normalized to the database time zone, and the time zone offset is not stored as part of the column data. When users retrieve the data, Oracle Database returns it in the users&#39; local session time zone. The time zone offset is the difference (in hours and minutes) between local time and UTC<a id="d33472e1275" class="indexterm-anchor"></a><a id="d33472e1277" class="indexterm-anchor"></a><a id="d33472e1279" class="indexterm-anchor"></a> (Coordinated Universal Time, formerly Greenwich Mean Time).</p>
<p>Specify the <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type as follows:</p>
<pre dir="ltr">TIMESTAMP [(<span class="italic">fractional_seconds_precision</span>)] WITH LOCAL TIME ZONE
</pre>
<p><span class="italic"><code>fractional_seconds_precision</code></span> is optional and specifies the number of digits in the fractional part of the <code>SECOND</code> datetime field.</p>
<p>There is no literal for <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code>, but <code>TIMESTAMP</code> literals and <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literals can be inserted into a <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> column.</p>
<p>The default date format for <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> is determined by the value of the <code>NLS_TIMESTAMP_FORMAT</code> initialization parameter.</p>
<div class="infoboxnotealso" id="GUID-3F1C388E-C651-43D5-ADBC-1A49E5C2CA05__GUID-449C8B96-9BEB-45BA-9BFA-5B688F36FAFF">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00205" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00205"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-CD2954CE-45E2-4938-A599-CCB96879510F">TIMESTAMP Data Type</a>&#34;</span> for more information about fractional seconds precision</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-0BB80533-A202-4D1A-95BC-0CFA2192DCD2">NLS_TIMESTAMP_FORMAT</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG751"></a><a id="NLSPG752"></a><a id="NLSPG753"></a><a id="NLSPG754"></a><a id="NLSPG243"></a>
<div class="props_rev_3"><a id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF"></a>
<h4 id="NLSPG-GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF" class="sect4">Inserting Values into Datetime Data Types</h4>
<div>
<div class="section">
<p>You can insert <a id="d33472e1475" class="indexterm-anchor"></a><a id="d33472e1479" class="indexterm-anchor"></a>values into a datetime column in the following ways:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Insert a character string whose format is based on the appropriate NLS format value</p>
</li>
<li>
<p>Insert a literal</p>
</li>
<li>
<p>Insert a literal for which implicit conversion is performed</p>
</li>
<li>
<p>Use the <code>TO_TIMESTAMP</code>, <code>TO_TIMESTAMP_TZ</code>, or <code>TO_DATE</code> SQL function</p>
</li>
</ul>
<p>The following examples show how to insert data into datetime data types.</p>
<div class="infoboxnotealso" id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF__GUID-EADF521B-F536-4277-A574-028E676BC616">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-429C290A-C201-4272-A369-FF8F4F8E54F7">Datetime SQL Functions</a>&#34;</span> for more information about the <code>TO_TIMESTAMP</code> or <code>TO_TIMESTAMP_TZ</code> SQL functions</p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF__GUID-2FA1A39E-A936-41EC-909F-C43504CA8916">
<p class="titleinexample">Example 4-1 Inserting Data into a DATE Column</p>
<p>Set the date format.</p>
<pre dir="ltr">SQL&gt; ALTER SESSION SET NLS_DATE_FORMAT=&#39;DD-MON-YYYY HH24:MI:SS&#39;;
</pre>
<p>Create a table <code>table_dt</code> with columns <code>c_id</code> and <code>c_dt</code>. The <code>c_id</code> column is of <code>NUMBER</code> data type and helps to identify the method by which the data is entered. The <code>c_dt</code> column is of <code>DATE</code> data type.</p>
<pre dir="ltr">SQL&gt; CREATE TABLE table_dt (c_id NUMBER, c_dt DATE);
</pre>
<p>Insert a date as a character string.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_dt VALUES(1, &#39;01-JAN-2003&#39;);
</pre>
<p>Insert the same date as a <code>DATE</code> literal.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_dt VALUES(2, DATE &#39;2003-01-01&#39;);
</pre>
<p>Insert the date as a <code>TIMESTAMP</code> literal. Oracle Database drops the time zone information.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_dt VALUES(3, TIMESTAMP &#39;2003-01-01 00:00:00 America/Los_Angeles&#39;);
</pre>
<p>Insert the date with the <code>TO_DATE</code> function.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_dt VALUES(4, TO_DATE(&#39;01-JAN-2003&#39;, &#39;DD-MON-YYYY&#39;));
</pre>
<p>Display the data.</p>
<pre dir="ltr">SQL&gt; SELECT * FROM table_dt;

C_ID       C_DT
---------- --------------------
1          01-JAN-2003 00:00:00
2          01-JAN-2003 00:00:00
3          01-JAN-2003 00:00:00
4          01-JAN-2003 00:00:00
</pre></div>
<!-- class="example" -->
<div class="example" id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF__GUID-C894235A-2E0A-49A8-BC78-7BEA1CCC8808">
<p class="titleinexample">Example 4-2 Inserting Data into a TIMESTAMP Column</p>
<p>Set the timestamp format.</p>
<pre dir="ltr">SQL&gt; ALTER SESSION SET NLS_TIMESTAMP_FORMAT=&#39;DD-MON-YY HH:MI:SSXFF&#39;;
</pre>
<p>Create a table <code>table_ts</code> with columns <code>c_id</code> and <code>c_ts</code>. The <code>c_id</code> column is of <code>NUMBER</code> data type and helps to identify the method by which the data is entered. The <code>c_ts</code> column is of <code>TIMESTAMP</code> data type.</p>
<pre dir="ltr">SQL&gt; CREATE TABLE table_ts(c_id NUMBER, c_ts TIMESTAMP);
</pre>
<p>Insert a date and time as a character string.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_ts VALUES(1, &#39;01-JAN-2003 2:00:00&#39;);
</pre>
<p>Insert the same date and time as a <code>TIMESTAMP</code> literal.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_ts VALUES(2, TIMESTAMP &#39;2003-01-01 2:00:00&#39;);
</pre>
<p>Insert the same date and time as a <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literal. Oracle Database converts it to a <code>TIMESTAMP</code> value, which means that the time zone information is dropped.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_ts VALUES(3, TIMESTAMP &#39;2003-01-01 2:00:00 -08:00&#39;);
</pre>
<p>Display the data.</p>
<pre dir="ltr">SQL&gt; SELECT * FROM table_ts;

C_ID        C_TS
----------  -----------------------------
1           01-JAN-03 02:00:00.000000 AM
2           01-JAN-03 02:00:00.000000 AM
3           01-JAN-03 02:00:00.000000 AM
</pre>
<p>Note that the three methods result in the same value being stored.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF__GUID-359ED73C-033E-4CD8-8730-E071847BD477">
<p class="titleinexample">Example 4-3 Inserting Data into the TIMESTAMP WITH TIME ZONE Data Type</p>
<p>Set the timestamp format.</p>
<pre dir="ltr">SQL&gt; ALTER SESSION SET NLS_TIMESTAMP_TZ_FORMAT=&#39;DD-MON-RR HH:MI:SSXFF AM TZR&#39;;
</pre>
<p>Set the time zone to <code>&#39;-07:00&#39;</code>.</p>
<pre dir="ltr">SQL&gt; ALTER SESSION SET TIME_ZONE=&#39;-7:00&#39;;
</pre>
<p>Create a table <code>table_tstz</code> with columns <code>c_id</code> and <code>c_tstz</code>. The <code>c_id</code> column is of <code>NUMBER</code> data type and helps to identify the method by which the data is entered. The <code>c_tstz</code> column is of <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type.</p>
<pre dir="ltr">SQL&gt; CREATE TABLE table_tstz (c_id NUMBER, c_tstz TIMESTAMP WITH TIME ZONE);
</pre>
<p>Insert a date and time as a character string.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tstz VALUES(1, &#39;01-JAN-2003 2:00:00 AM -07:00&#39;);
</pre>
<p>Insert the same date and time as a <code>TIMESTAMP</code> literal. Oracle Database converts it to a <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literal, which means that the session time zone is appended to the <code>TIMESTAMP</code> value.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tstz VALUES(2, TIMESTAMP &#39;2003-01-01 2:00:00&#39;);
</pre>
<p>Insert the same date and time as a <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literal.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tstz VALUES(3, TIMESTAMP &#39;2003-01-01 2:00:00 -8:00&#39;);
</pre>
<p>Display the data.</p>
<pre dir="ltr">SQL&gt; SELECT * FROM table_tstz;

C_ID        C_TSTZ
----------  ------------------------------------
1           01-JAN-03 02:00.00:000000 AM -07:00
2           01-JAN-03 02:00:00.000000 AM -07:00
3           01-JAN-03 02:00:00.000000 AM -08:00
</pre>
<p>Note that the time zone is different for method 3, because the time zone information was specified as part of the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literal.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-C5DBDD5B-A781-4D2B-8CC2-DB9BB2D335FF__GUID-BBA8B250-B90C-42A7-9BAF-86CF9BBB188E">
<p class="titleinexample">Example 4-4 Inserting Data into the TIMESTAMP WITH LOCAL TIME ZONE Data Type</p>
<p>Consider data that is being entered in Denver, Colorado, U.S.A., whose time zone is UTC-7.</p>
<pre dir="ltr">SQL&gt; ALTER SESSION SET TIME_ZONE=&#39;-07:00&#39;;
</pre>
<p>Create a table <code>table_tsltz</code> with columns <code>c_id</code> and <code>c_tsltz</code>. The <code>c_id</code> column is of <code>NUMBER</code> data type and helps to identify the method by which the data is entered. The <code>c_tsltz</code> column is of <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> data type.</p>
<pre dir="ltr">SQL&gt; CREATE TABLE table_tsltz (c_id NUMBER, c_tsltz TIMESTAMP WITH LOCAL TIME ZONE);
</pre>
<p>Insert a date and time as a character string.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tsltz VALUES(1, &#39;01-JAN-2003 2:00:00&#39;);
</pre>
<p>Insert the same data as a <code>TIMESTAMP WITH LOCAL TIME ZONE</code> literal.</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tsltz VALUES(2, TIMESTAMP &#39;2003-01-01 2:00:00&#39;);
</pre>
<p>Insert the same data as a <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> literal. Oracle Database converts the data to a <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> value. This means the time zone that is entered (<code>-08:00</code>) is converted to the session time zone value (<code>-07:00</code>).</p>
<pre dir="ltr">SQL&gt; INSERT INTO table_tsltz VALUES(3, TIMESTAMP &#39;2003-01-01 2:00:00 -08:00&#39;);
</pre>
<p>Display the data.</p>
<pre dir="ltr">SQL&gt; SELECT * FROM table_tsltz;

C_ID        C_TSLTZ
----------  ------------------------------------
1           01-JAN-03 02.00.00.000000 AM
2           01-JAN-03 02.00.00.000000 AM
3           01-JAN-03 03.00.00.000000 AM
</pre>
<p>Note that the information that was entered as UTC-8 has been changed to the local time zone, changing the hour from <code>2</code> to <code>3</code>.</p>
</div>
<!-- class="example" --></div>
</div>
<a id="NLSPG244"></a>
<div class="props_rev_3"><a id="GUID-2DFBD56C-5832-4AE8-831E-7EF1EFB7F0BB"></a>
<h4 id="NLSPG-GUID-2DFBD56C-5832-4AE8-831E-7EF1EFB7F0BB" class="sect4">Choosing a TIMESTAMP Data Type</h4>
<div>
<p>Use the <code>TIMESTAMP</code> data type when you need a datetime value to record the time of an event without the time zone. For example, you can store information about the times when workers punch a time card in and out of their assembly line workstations. Because this is always a local time it is then not needed to store the timezone part. The <code>TIMESTAMP</code> data type uses 7 or 11 bytes of storage.</p>
<p>Use the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type when the datetime value represents a future local time or the time zone information must be recorded with the value. Consider a scheduled appointment in a local time. The future local time may need to be adjusted if the time zone definition, such as daylight saving rule, changes. Otherwise, the value can become incorrect. This data type is most immune to such impact.</p>
<p>The <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type requires 13 bytes of storage, or two more bytes of storage than the <code>TIMESTAMP</code> and <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> data types because it stores time zone information. The time zone is stored as a time zone region name or as an offset from UTC. The data is available for display or calculations without additional processing. A <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> column cannot be used as a primary key. If an index is created on a <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> column, it becomes a function-based index.</p>
<p>The <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> data type stores the timestamp without time zone information. It normalizes the data to the database time zone every time the data is sent to and from a client. It requires 11 bytes of storage.</p>
<p>The <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> data type is appropriate when the original time zone is of no interest, but the relative times of events are important and daylight saving adjustment does not have to be accurate. The time zone conversion that this data type performs to and from the database time zone is asymmetrical, due to the daylight saving adjustment. Because this data type does not preserve the time zone information, it does not distinguish values near the adjustment in fall, whether they are daylight saving time or standard time. This confusion between distinct instants can cause an application to behave unexpectedly, especially if the adjustment takes place during the normal working hours of a user.</p>
<p>Note that some regions, such as Brazil and Israel, that update their Daylight Saving Transition dates frequently and at irregular periods, are particularly susceptible to time zone adjustment issues. If time information from these regions is key to your application, you may want to consider using one of the other datetime types.</p>
</div>
</div>
</div>
<a id="NLSPG245"></a>
<div class="props_rev_3"><a id="GUID-773BD5B5-D6AD-4AF6-B38B-EBD1459C8445"></a>
<h3 id="NLSPG-GUID-773BD5B5-D6AD-4AF6-B38B-EBD1459C8445" class="sect3">Interval Data Types</h3>
<div>
<p>Interval data types store time durations. They are used primarily with analytic functions. For example, you can use them to calculate a moving average of stock prices. You must use interval data types to determine the values that correspond to a particular percentile. You can also use <a id="d33472e2155" class="indexterm-anchor"></a><a id="d33472e2157" class="indexterm-anchor"></a>interval data types to update historical tables.</p>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-517CEB46-C6FA-4B94-9299-5BBB5A58CF7B">INTERVAL YEAR TO MONTH Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-FD8C41B7-8CDC-4D02-8E6B-5250416BC17D">INTERVAL DAY TO SECOND Data Type</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-158FDE82-6032-4E94-801D-A71901C5986A">Inserting Values into Interval Data Types</a></p>
<div class="infoboxnotealso" id="GUID-773BD5B5-D6AD-4AF6-B38B-EBD1459C8445__GUID-CD1B2A9D-79EA-48A7-ABB6-68879BF43933">
<p class="notep1">See Also:</p>
<p><a class="olink DWHSG021" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=DWHSG021"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information about analytic functions, including moving averages and inverse percentiles</p>
</div>
</li>
</ul>
</div>
<a id="NLSPG246"></a>
<div class="props_rev_3"><a id="GUID-517CEB46-C6FA-4B94-9299-5BBB5A58CF7B"></a>
<h4 id="NLSPG-GUID-517CEB46-C6FA-4B94-9299-5BBB5A58CF7B" class="sect4">INTERVAL YEAR TO MONTH Data Type</h4>
<div>
<p><code>INTERVAL</code> <code>YEAR</code> <code>TO</code> <code>MONTH</code> stores a period of time using the <code>YEAR</code> and <code>MONTH</code> datetime fields. Specify <code>INTERVAL YEAR TO MONTH</code> as follows:</p>
<pre dir="ltr">INTERVAL YEAR [(<span class="italic">year_precision</span>)] TO MONTH
</pre>
<p><span class="italic"><code>year_precision</code></span> is the number of digits in the <code>YEAR</code> datetime field. Accepted values are 0 to 9. The default value of <span class="italic"><code>year_precision</code></span> is 2.</p>
<p>Interval values can be specified as literals. There are many ways to specify interval literals. The following is one example of specifying an interval of 123 years and 2 months. The year precision is 3.</p>
<pre dir="ltr">INTERVAL &#39;123-2&#39; YEAR(3) TO MONTH
</pre>
<div class="infoboxnotealso" id="GUID-517CEB46-C6FA-4B94-9299-5BBB5A58CF7B__GUID-C9E1F398-27DF-4064-A83F-9F65E48916DA">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00206" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00206"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about specifying interval literals with the <code>INTERVAL YEAR TO MONTH</code> data type</p>
</div>
</div>
</div>
<a id="NLSPG247"></a>
<div class="props_rev_3"><a id="GUID-FD8C41B7-8CDC-4D02-8E6B-5250416BC17D"></a>
<h4 id="NLSPG-GUID-FD8C41B7-8CDC-4D02-8E6B-5250416BC17D" class="sect4">INTERVAL DAY TO SECOND Data Type</h4>
<div>
<p><code>INTERVAL</code> <code>DAY</code> <code>TO</code> <code>SECOND</code> stores a period of time in terms of days, hours, minutes, and seconds. Specify this data type as follows:</p>
<pre dir="ltr">INTERVAL DAY [(<span class="italic">day_precision</span>)] TO SECOND [(<span class="italic">fractional_seconds_precision</span>)]
</pre>
<p><span class="italic"><code>day_precision</code></span> is the number of digits in the <code>DAY</code> datetime field. Accepted values are 0 to 9. The default is 2.</p>
<p><span class="italic"><code>fractional_seconds_precision</code></span> is the number of digits in the fractional part of the <code>SECOND</code> datetime field. Accepted values are 0 to 9. The default is 6.</p>
<p>The following is one example of specifying an interval of 4 days, 5 hours, 12 minutes, 10 seconds, and 222 thousandths of a second. The fractional second precision is 3.</p>
<pre dir="ltr">INTERVAL &#39;4 5:12:10.222&#39; DAY TO SECOND(3)
</pre>
<p>Interval values can be specified as literals. There are many ways to specify interval literals.</p>
<div class="infoboxnotealso" id="GUID-FD8C41B7-8CDC-4D02-8E6B-5250416BC17D__GUID-A340F358-3186-41BA-9AAF-6259D92234E5">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00207" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00207"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about specifying interval literals with the <code>INTERVAL DAY TO SECOND</code> data type</p>
</div>
</div>
</div>
<a id="NLSPG248"></a>
<div class="props_rev_3"><a id="GUID-158FDE82-6032-4E94-801D-A71901C5986A"></a>
<h4 id="NLSPG-GUID-158FDE82-6032-4E94-801D-A71901C5986A" class="sect4">Inserting Values into Interval Data Types</h4>
<div>
<div class="section">
<p>You can insert <a id="d33472e2517" class="indexterm-anchor"></a><a id="d33472e2521" class="indexterm-anchor"></a>values into an interval column in the following ways:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Insert an interval as a literal. For example:</p>
<pre dir="ltr">INSERT INTO table1 VALUES (INTERVAL &#39;4-2&#39; YEAR TO MONTH);
</pre>
<p>This statement inserts an interval of 4 years and 2 months.</p>
<p>Oracle Database recognizes literals for other ANSI interval types and converts the values to Oracle Database interval values.</p>
</li>
<li>
<p>Use the <code>NUMTODSINTERVAL</code>, <code>NUMTOYMINTERVAL</code>, <code>TO_DSINTERVAL</code>, and <code>TO_YMINTERVAL</code> SQL functions.</p>
<div class="infoboxnotealso" id="GUID-158FDE82-6032-4E94-801D-A71901C5986A__GUID-9399D831-1E85-4EA2-8B7B-BC24CFDB932A">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-429C290A-C201-4272-A369-FF8F4F8E54F7">Datetime SQL Functions</a>&#34;</span></p>
</div>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="NLSPG249"></a>
<div class="props_rev_3"><a id="GUID-B6CAA1E5-2A82-42B2-889C-F3F5AFBD53AF"></a>
<h2 id="NLSPG-GUID-B6CAA1E5-2A82-42B2-889C-F3F5AFBD53AF" class="sect2">Datetime and Interval Arithmetic and Comparisons</h2>
<div>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-772A1B60-BF0F-43D8-9049-AD0BF4073D9D">Datetime and Interval Arithmetic</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-F29074EF-81CA-48C5-A060-2789EF439256">Datetime Comparisons</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-81D56D0A-84DF-44F8-A82D-E850AD338153">Explicit Conversion of Datetime Data Types</a></p>
</li>
</ul>
</div>
<a id="NLSPG250"></a>
<div class="props_rev_3"><a id="GUID-772A1B60-BF0F-43D8-9049-AD0BF4073D9D"></a>
<h3 id="NLSPG-GUID-772A1B60-BF0F-43D8-9049-AD0BF4073D9D" class="sect3">Datetime and Interval Arithmetic</h3>
<div>
<p>You can perform arithmetic operations on date (<code>DATE</code>), timestamp (<code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE</code>, and <code>TIMESTAMP WITH LOCAL TIME ZONE</code>) and interval (<code>INTERVAL DAY TO SECOND</code> and <code>INTERVAL YEAR TO MONTH</code>) data. You can maintain the most precision in arithmetic operations by using a timestamp data type with an interval data type.</p>
<p>You can use <code>NUMBER</code> constants in arithmetic operations on date and timestamp values. Oracle Database internally converts timestamp values to date values before doing arithmetic operations on them with <code>NUMBER</code> constants. This means that information about fractional seconds is lost during operations that include both date and timestamp values. Oracle Database interprets <code>NUMBER</code> constants in datetime and interval expressions as number of days.</p>
<p>Each <code>DATE</code> value contains a time component. The result of many date operations includes a fraction. This fraction means a portion of one day. For example, 1.5 days is 36 hours. These fractions are also returned by Oracle Database built-in SQL functions for common operations on <code>DATE</code> data. For example, the built-in <code>MONTHS_BETWEEN</code> SQL function returns the number of months between two dates. The fractional portion of the result represents that portion of a 31-day month.</p>
<p>Oracle Database performs all timestamp arithmetic in UTC time. For <code>TIMESTAMP</code> <code>WITH</code> <code>LOCAL</code> <code>TIME</code> <code>ZONE</code> data, Oracle Database converts the datetime value from the database time zone to UTC and converts back to the database time zone after performing the arithmetic. For <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data, the datetime value is always in UTC, so no conversion is necessary.</p>
<div class="infoboxnotealso" id="GUID-772A1B60-BF0F-43D8-9049-AD0BF4073D9D__GUID-7F94DA9B-B16C-44BE-BCB6-52CE7D8811BB">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF00208" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF00208"><span class="italic">Oracle Database SQL Language Reference</span></a> for detailed information about datetime and interval arithmetic operations</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-429C290A-C201-4272-A369-FF8F4F8E54F7">Datetime SQL Functions</a>&#34;</span> for information about which functions cause implicit conversion to <code>DATE</code></p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG251"></a>
<div class="props_rev_3"><a id="GUID-F29074EF-81CA-48C5-A060-2789EF439256"></a>
<h3 id="NLSPG-GUID-F29074EF-81CA-48C5-A060-2789EF439256" class="sect3">Datetime Comparisons</h3>
<div>
<p>When you compare date and timestamp values, Oracle Database converts the data to the more precise data type before doing the comparison. For example, if you compare data of <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type with data of <code>TIMESTAMP</code> data type, Oracle Database converts the <code>TIMESTAMP</code> data to <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code>, using the session time zone.</p>
<p>The order of precedence for converting date and timestamp data is as follows:</p>
<ol>
<li>
<p><code>DATE</code></p>
</li>
<li>
<p><code>TIMESTAMP</code></p>
</li>
<li>
<p><code>TIMESTAMP WITH LOCAL TIME ZONE</code></p>
</li>
<li>
<p><code>TIMESTAMP WITH TIME ZONE</code></p>
</li>
</ol>
<p>For any pair of data types, Oracle Database converts the data type that has a smaller number in the preceding list to the data type with the larger number.</p>
</div>
</div>
<a id="NLSPG252"></a>
<div class="props_rev_3"><a id="GUID-81D56D0A-84DF-44F8-A82D-E850AD338153"></a>
<h3 id="NLSPG-GUID-81D56D0A-84DF-44F8-A82D-E850AD338153" class="sect3">Explicit Conversion of Datetime Data Types</h3>
<div>
<p>If you want to do explicit conversion of datetime data types, use the <code>CAST</code> SQL function. You can explicitly convert <code>DATE</code>, <code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE</code>, and <code>TIMESTAMP WITH LOCAL TIME ZONE</code> to another data type in the list.</p>
<div class="infoboxnotealso" id="GUID-81D56D0A-84DF-44F8-A82D-E850AD338153__GUID-840153B0-F0AC-439F-B4F1-F01AF4309E34">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00613" target="_blank" href="../SQLRF/functions024.htm#SQLRF00613"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</div>
</div>
</div>
</div>
<a id="NLSPG755"></a><a id="NLSPG756"></a><a id="NLSPG757"></a><a id="NLSPG253"></a>
<div class="props_rev_3"><a id="GUID-429C290A-C201-4272-A369-FF8F4F8E54F7"></a>
<h2 id="NLSPG-GUID-429C290A-C201-4272-A369-FF8F4F8E54F7" class="sect2">Datetime SQL Functions</h2>
<div>
<p>Datetime functions operate on date (<code>DATE</code>), timestamp (<code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE</code>, and <code>TIMESTAMP WITH LOCAL TIME ZONE</code>) and interval (<code>INTERVAL DAY TO SECOND</code>, <code>INTERVAL YEAR TO MONTH</code>) values.</p>
<p>Some of the datetime functions were designed for the Oracle Database <code>DATE</code> data type. If you provide a timestamp value as their argument, then Oracle Database internally converts the input type to a <code>DATE</code> value. Oracle Database does not perform internal conversion for the <code>ROUND</code> and <code>TRUNC</code> functions.</p>
<p>The following table shows the datetime functions that were designed for the Oracle Database <code>DATE</code> data type. For more detailed descriptions, refer to <a class="olink SQLRF-GUID-5652DBC2-41C7-4F07-BEDD-DAF620E35F3C" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=SQLRF-GUID-5652DBC2-41C7-4F07-BEDD-DAF620E35F3C"><span class="italic">Oracle Database SQL Language Reference.</span></a></p>
<div class="tblformal" id="GUID-429C290A-C201-4272-A369-FF8F4F8E54F7__G1010956">
<p class="titleintable">Table 4-1 Datetime Functions Designed for the DATE Data Type</p>
<table class="cellalignment2377" title="Datetime Functions Designed for the DATE Data Type " summary="This table describes Datetime functions designed for the DATE data type.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2406" id="d33472e3163">Function</th>
<th class="cellalignment2406" id="d33472e3166">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3171" headers="d33472e3163">
<p><a class="olink SQLRF00603" target="_blank" href="../SQLRF/functions011.htm#SQLRF00603"><code>ADD_MONTHS</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3171 d33472e3166">
<p>Retur<a id="d33472e3180" class="indexterm-anchor"></a><a id="d33472e3182" class="indexterm-anchor"></a>ns the date <span class="italic"><code>d</code></span> plus <span class="italic"><code>n</code></span> months</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3196" headers="d33472e3163">
<p><a class="olink SQLRF00654" target="_blank" href="../SQLRF/functions096.htm#SQLRF00654"><code>LAST_DAY</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3196 d33472e3166">
<p>Returns th<a id="d33472e3205" class="indexterm-anchor"></a><a id="d33472e3207" class="indexterm-anchor"></a>e last day of the month that contains <span class="italic"><code>date</code></span></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3216" headers="d33472e3163">
<p><a class="olink SQLRF00669" target="_blank" href="../SQLRF/functions114.htm#SQLRF00669"><code>MONTHS_BETWEEN</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3216 d33472e3166">
<p>Returns <a id="d33472e3225" class="indexterm-anchor"></a><a id="d33472e3227" class="indexterm-anchor"></a>the number of months between <span class="italic"><code>date1</code></span> and <span class="italic"><code>date2</code></span></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3240" headers="d33472e3163">
<p><a class="olink SQLRF00671" target="_blank" href="../SQLRF/functions117.htm#SQLRF00671"><code>NEW_TIME</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3240 d33472e3166">
<p>Returns t<a id="d33472e3249" class="indexterm-anchor"></a><a id="d33472e3251" class="indexterm-anchor"></a>he date and time in <span class="italic"><code>zone2</code></span> time zone when the date and time in <span class="italic"><code>zone1</code></span> time zone are <span class="italic"><code>date</code></span></p>
<p><span class="bold">Note:</span> This function takes as input only a limited number of time zones. You can have access to a much greater number of time zones by combining the <code>FROM_TZ</code> function and the datetime expression.</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3275" headers="d33472e3163">
<p><a class="olink SQLRF00672" target="_blank" href="../SQLRF/functions118.htm#SQLRF00672"><code>NEXT_DAY</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3275 d33472e3166">
<p>Retur<a id="d33472e3284" class="indexterm-anchor"></a><a id="d33472e3286" class="indexterm-anchor"></a>ns the date of the first weekday named by <span class="italic"><code>char</code></span> that is later than <span class="italic"><code>date</code></span></p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3299" headers="d33472e3163">
<p><a class="olink SQLRF00699" target="_blank" href="../SQLRF/functions168.htm#SQLRF00699"><code>ROUND(date)</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3299 d33472e3166">
<p>Retur<a id="d33472e3308" class="indexterm-anchor"></a><a id="d33472e3310" class="indexterm-anchor"></a>ns <span class="italic"><code>date</code></span> rounded to the unit specified by the <span class="italic"><code>fmt</code></span> format model</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3324" headers="d33472e3163">
<p><a class="olink SQLRF06151" target="_blank" href="../SQLRF/functions236.htm#SQLRF06151"><code>TRUNC(date)</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3324 d33472e3166">
<p>Retur<a id="d33472e3333" class="indexterm-anchor"></a><a id="d33472e3335" class="indexterm-anchor"></a>ns <span class="italic"><code>date</code></span> with the time portion of the day truncated to the unit specified by the <span class="italic"><code>fmt</code></span> format model</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The following table describes additional datetime functions. For more detailed descriptions, refer to <a class="olink SQLRF-GUID-5652DBC2-41C7-4F07-BEDD-DAF620E35F3C" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=SQLRF-GUID-5652DBC2-41C7-4F07-BEDD-DAF620E35F3C"><span class="italic">Oracle Database SQL Language Reference.</span></a></p>
<div class="tblformal" id="GUID-429C290A-C201-4272-A369-FF8F4F8E54F7__G1010984">
<p class="titleintable">Table 4-2 Additional Datetime Functions</p>
<table class="cellalignment2377" title="Additional Datetime Functions " summary="This table describes additional Datetime functions.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2406" id="d33472e3364">Datetime Function</th>
<th class="cellalignment2406" id="d33472e3367">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3372" headers="d33472e3364">
<p><a class="olink SQLRF00628" target="_blank" href="../SQLRF/functions051.htm#SQLRF00628"><code>CURRENT_DATE</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3372 d33472e3367">
<p>Returns the<a id="d33472e3381" class="indexterm-anchor"></a><a id="d33472e3383" class="indexterm-anchor"></a> current date in the session time zone in a value in the Gregorian calendar, of the <code>DATE</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3392" headers="d33472e3364">
<p><a class="olink SQLRF00629" target="_blank" href="../SQLRF/functions052.htm#SQLRF00629"><code>CURRENT_TIMESTAMP</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3392 d33472e3367">
<p>Returns the c<a id="d33472e3401" class="indexterm-anchor"></a><a id="d33472e3403" class="indexterm-anchor"></a>urrent date and time in the session time zone as a <code>TIMESTAMP WITH TIME ZONE</code> value</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3412" headers="d33472e3364">
<p><a class="olink SQLRF00630" target="_blank" href="../SQLRF/functions056.htm#SQLRF00630"><code>DBTIMEZONE</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3412 d33472e3367">
<p>Returns the value<a id="d33472e3421" class="indexterm-anchor"></a><a id="d33472e3423" class="indexterm-anchor"></a> of the database time zone. The value is a time zone offset or a time zone region name</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3429" headers="d33472e3364">
<p><a class="olink SQLRF00639" target="_blank" href="../SQLRF/functions067.htm#SQLRF00639"><code>EXTRACT</code> (datetime)</a></p>
</td>
<td class="cellalignment2368" headers="d33472e3429 d33472e3367">
<p>Extracts an<a id="d33472e3439" class="indexterm-anchor"></a><a id="d33472e3441" class="indexterm-anchor"></a>d returns the value of a specified datetime field from a datetime or interval value expression</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3447" headers="d33472e3364">
<p><a class="olink SQLRF00644" target="_blank" href="../SQLRF/functions077.htm#SQLRF00644"><code>FROM_TZ</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3447 d33472e3367">
<p>Conve<a id="d33472e3456" class="indexterm-anchor"></a><a id="d33472e3458" class="indexterm-anchor"></a>rts a <code>TIMESTAMP</code> value at a time zone to a <code>TIMESTAMP WITH TIME ZONE</code> value</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3470" headers="d33472e3364">
<p><a class="olink SQLRF00660" target="_blank" href="../SQLRF/functions104.htm#SQLRF00660"><code>LOCALTIMESTAMP</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3470 d33472e3367">
<p>Returns <a id="d33472e3479" class="indexterm-anchor"></a><a id="d33472e3481" class="indexterm-anchor"></a>the current date and time in the session time zone in a value of the <code>TIMESTAMP</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3490" headers="d33472e3364">
<p><a class="olink SQLRF00682" target="_blank" href="../SQLRF/functions129.htm#SQLRF00682"><code>NUMTODSINTERVAL</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3490 d33472e3367">
<p>Convert<a id="d33472e3499" class="indexterm-anchor"></a><a id="d33472e3501" class="indexterm-anchor"></a>s number <span class="italic"><code>n</code></span> to an <code>INTERVAL DAY TO SECOND</code> literal</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3514" headers="d33472e3364">
<p><a class="olink SQLRF00683" target="_blank" href="../SQLRF/functions130.htm#SQLRF00683"><code>NUMTOYMINTERVAL</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3514 d33472e3367">
<p>Conv<a id="d33472e3523" class="indexterm-anchor"></a><a id="d33472e3525" class="indexterm-anchor"></a>erts number <span class="italic"><code>n</code></span> to an <code>INTERVAL YEAR TO MONTH</code> literal</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3538" headers="d33472e3364">
<p><a class="olink SQLRF06105" target="_blank" href="../SQLRF/functions176.htm#SQLRF06105"><code>SESSIONTIMEZONE</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3538 d33472e3367">
<p>Retur<a id="d33472e3547" class="indexterm-anchor"></a><a id="d33472e3549" class="indexterm-anchor"></a>ns the value of the current session&#39;s time zone</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3555" headers="d33472e3364">
<p><a class="olink SQLRF06119" target="_blank" href="../SQLRF/functions201.htm#SQLRF06119"><code>SYS_EXTRACT_UTC</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3555 d33472e3367">
<p>Extr<a id="d33472e3564" class="indexterm-anchor"></a><a id="d33472e3566" class="indexterm-anchor"></a>acts the UTC from a datetime with time zone offset</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3572" headers="d33472e3364">
<p><a class="olink SQLRF06124" target="_blank" href="../SQLRF/functions207.htm#SQLRF06124"><code>SYSDATE</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3572 d33472e3367">
<p>Returns the date and time of the operating system on which the database resides, taking into account the time zone of the database<a id="d33472e3581" class="indexterm-anchor"></a><a id="d33472e3583" class="indexterm-anchor"></a> server&#39;s operating system that was in effect when the database was started</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3590" headers="d33472e3364">
<p><a class="olink SQLRF06125" target="_blank" href="../SQLRF/functions208.htm#SQLRF06125"><code>SYSTIMESTAMP</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3590 d33472e3367">
<p>Return<a id="d33472e3599" class="indexterm-anchor"></a><a id="d33472e3601" class="indexterm-anchor"></a>s the system date, including fractional seconds and time zone of the system on which the database resides</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3607" headers="d33472e3364">
<p><a class="olink SQLRF06128" target="_blank" href="../SQLRF/functions215.htm#SQLRF06128"><code>TO_CHAR</code> (datetime)</a></p>
</td>
<td class="cellalignment2368" headers="d33472e3607 d33472e3367">
<p>Converts a<a id="d33472e3617" class="indexterm-anchor"></a><a id="d33472e3619" class="indexterm-anchor"></a> datetime or interval value of <code>DATE</code>, <code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE</code>, or <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type to a value of <code>VARCHAR2</code> data type in the format specified by the <span class="italic"><code>fmt</code></span> date format</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3645" headers="d33472e3364">
<p><a class="olink SQLRF06133" target="_blank" href="../SQLRF/functions220.htm#SQLRF06133"><code>TO_DSINTERVAL</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3645 d33472e3367">
<p>Converts a ch<a id="d33472e3654" class="indexterm-anchor"></a><a id="d33472e3656" class="indexterm-anchor"></a>aracter string of <code>CHAR</code>, <code>VARCHAR2</code>, <code>NCHAR</code>, or <code>NVARCHAR2</code> data type to a value of <code>INTERVAL DAY TO SECOND</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3678" headers="d33472e3364">
<p><a class="olink SQLRF06137" target="_blank" href="../SQLRF/functions224.htm#SQLRF06137"><code>TO_NCHAR</code> (datetime)</a></p>
</td>
<td class="cellalignment2368" headers="d33472e3678 d33472e3367">
<p>Converts a datetime or interval value of <code>DATE</code>, <code>TIMESTAMP</code>, <code>TIMESTAMP WITH TIME ZONE</code>, <code>TIMESTAMP WITH LOCAL TIME ZONE</code>, <code>INTERVAL MONTH TO YEAR</code>, or <code>INTERVAL DAY TO SECOND</code> data type from the database character set to the national character set</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3708" headers="d33472e3364">
<p><a class="olink SQLRF06142" target="_blank" href="../SQLRF/functions229.htm#SQLRF06142"><code>TO_TIMESTAMP</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3708 d33472e3367">
<p>Convert<a id="d33472e3717" class="indexterm-anchor"></a><a id="d33472e3719" class="indexterm-anchor"></a>s a character string of <code>CHAR</code>, <code>VARCHAR2</code>, <code>NCHAR</code>, or <code>NVARCHAR2</code> data type to a value of <code>TIMESTAMP</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3741" headers="d33472e3364">
<p><a class="olink SQLRF06143" target="_blank" href="../SQLRF/functions230.htm#SQLRF06143"><code>TO_TIMESTAMP_TZ</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3741 d33472e3367">
<p>Converts a c<a id="d33472e3750" class="indexterm-anchor"></a><a id="d33472e3752" class="indexterm-anchor"></a>haracter string of <code>CHAR</code>, <code>VARCHAR2</code>, <code>NCHAR</code>, or <code>NVARCHAR2</code> data type to a value of the <code>TIMESTAMP WITH TIME ZONE</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3774" headers="d33472e3364">
<p><a class="olink SQLRF06144" target="_blank" href="../SQLRF/functions231.htm#SQLRF06144"><code>TO_YMINTERVAL</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3774 d33472e3367">
<p>Conve<a id="d33472e3783" class="indexterm-anchor"></a><a id="d33472e3785" class="indexterm-anchor"></a>rts a character string of <code>CHAR</code>, <code>VARCHAR2</code>, <code>NCHAR</code>, or <code>NVARCHAR2</code> data type to a value of the <code>INTERVAL YEAR TO MONTH</code> data type</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3807" headers="d33472e3364">
<p><a class="olink SQLRF06152" target="_blank" href="../SQLRF/functions238.htm#SQLRF06152"><code>TZ_OFFSET</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3807 d33472e3367">
<p>Returns the time zone offset that corresponds to the entered value, based o<a id="d33472e3816" class="indexterm-anchor"></a><a id="d33472e3818" class="indexterm-anchor"></a>n the date that the statement is executed</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The following table describes functions that are used in the Daylight Saving Time (DST) upgrade process, and are only available when preparing or updating windows. For more detailed information, see <a class="olink SQLRF30039" target="_blank" href="../SQLRF/sql_elements001.htm#SQLRF30039"><span class="italic">Oracle Database SQL Language Reference</span></a>.</p>
<div class="tblformal" id="GUID-429C290A-C201-4272-A369-FF8F4F8E54F7__CBBICFDB">
<p class="titleintable">Table 4-3 Time Zone Conversion Functions</p>
<table class="cellalignment2377" title="Time Zone Conversion Functions" summary="This table lists and describes Timezone functions.">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2406" id="d33472e3840">Time Zone Function</th>
<th class="cellalignment2406" id="d33472e3843">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3848" headers="d33472e3840">
<p><a class="olink SQLRF30032" target="_blank" href="../SQLRF/functions133.htm#SQLRF30032"><code>ORA_DST_AFFECTED</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3848 d33472e3843">
<p>Enables yo<a id="d33472e3857" class="indexterm-anchor"></a><a id="d33472e3859" class="indexterm-anchor"></a>u to verify whether the data in a column is affected by upgrading the DST rules from one version to another version</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3865" headers="d33472e3840">
<p><a class="olink SQLRF30034" target="_blank" href="../SQLRF/functions134.htm#SQLRF30034"><code>ORA_DST_CONVERT</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3865 d33472e3843">
<p>Enables you to upgrade your TSTZ column data from one version to<a id="d33472e3874" class="indexterm-anchor"></a><a id="d33472e3876" class="indexterm-anchor"></a> another</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2368" id="d33472e3882" headers="d33472e3840">
<p><a class="olink SQLRF30033" target="_blank" href="../SQLRF/functions135.htm#SQLRF30033"><code>ORA_DST_ERROR</code></a></p>
</td>
<td class="cellalignment2368" headers="d33472e3882 d33472e3843">
<p>Enables you to<a id="d33472e3891" class="indexterm-anchor"></a><a id="d33472e3893" class="indexterm-anchor"></a> verify that there are no errors when upgrading a datetime value</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-429C290A-C201-4272-A369-FF8F4F8E54F7__GUID-39B19E01-FF5B-4CEB-A4EB-0654B3B5A82C">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF53062" target="_blank" href="../SQLRF/statements_2015.htm#SQLRF53062"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</div>
</div>
</div>
<a id="NLSPG254"></a>
<div class="props_rev_3"><a id="GUID-ABF6392E-EBCA-484B-88F1-E69BA3E1721C"></a>
<h2 id="NLSPG-GUID-ABF6392E-EBCA-484B-88F1-E69BA3E1721C" class="sect2">Datetime and Time Zone Parameters and Environment Variables</h2>
<div>
<p>This section includes the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="ch4datetime.htm#GUID-644948A3-FF6B-4843-9C7A-7EA554862549">Datetime Format Parameters</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-3E815FC2-E6AB-4442-8729-915657CEC7A5">Time Zone Environment Variables</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-7ECF5B82-C3B5-4873-AC78-61080C8F756A">Daylight Saving Time Session Parameter</a></p>
</li>
<li>
<p><a href="ch4datetime.htm#GUID-8B7DFC05-31F1-4843-8E70-3BE5BEE9BFD5">Daylight Saving Time Upgrade Parameter</a></p>
</li>
</ul>
</div>
<a id="NLSPG758"></a><a id="NLSPG255"></a>
<div class="props_rev_3"><a id="GUID-644948A3-FF6B-4843-9C7A-7EA554862549"></a>
<h3 id="NLSPG-GUID-644948A3-FF6B-4843-9C7A-7EA554862549" class="sect3">Datetime Format Parameters</h3>
<div>
<p><a href="ch4datetime.htm#GUID-644948A3-FF6B-4843-9C7A-7EA554862549__g1011052" title="This table is described in the preceding text">Table 4-4</a> contains the names and descriptions of the datetime <a id="d33472e4078" class="indexterm-anchor"></a>format parameters.</p>
<div class="tblformal" id="GUID-644948A3-FF6B-4843-9C7A-7EA554862549__g1011052">
<p class="titleintable">Table 4-4 Datetime Format Parameters</p>
<table class="cellalignment2377" title="Datetime Format Parameters " summary="This table is described in the preceding text">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2399" id="d33472e4091">Parameter</th>
<th class="cellalignment2398" id="d33472e4094">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2401" id="d33472e4099" headers="d33472e4091">
<p><code>NLS_DATE_FORMAT</code></p>
</td>
<td class="cellalignment2400" headers="d33472e4099 d33472e4094">
<p>Defines the <a id="d33472e4106" class="indexterm-anchor"></a>default date f<a id="d33472e4111" class="indexterm-anchor"></a><a id="d33472e4113" class="indexterm-anchor"></a>ormat to use with the <code>TO_CHAR</code> and <code>TO_DATE</code> functions</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2401" id="d33472e4125" headers="d33472e4091">
<p><code>NLS_TIMESTAMP_FORMAT</code></p>
</td>
<td class="cellalignment2400" headers="d33472e4125 d33472e4094">
<p>Defines the <a id="d33472e4132" class="indexterm-anchor"></a><a id="d33472e4134" class="indexterm-anchor"></a>default timestamp format to use with the <code>TO_CHAR</code> and <code>TO_TIMESTAMP</code> functions</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2401" id="d33472e4146" headers="d33472e4091">
<p><code>NLS_TIMESTAMP_TZ_FORMAT</code></p>
</td>
<td class="cellalignment2400" headers="d33472e4146 d33472e4094">
<p>Defines th<a id="d33472e4153" class="indexterm-anchor"></a><a id="d33472e4155" class="indexterm-anchor"></a>e default timestamp with time zone format to use with the <code>TO_CHAR</code> and <code>TO_TIMESTAMP_TZ</code> functions</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Their default values are derived from <code>NLS_TERRITORY</code>.</p>
<p>You can specify their values by setting them in the initialization parameter file. If you change the values in the initialization parameter file, you must restart the instance for the change to take effect. You can also specify their values for a client as client environment variables. For Java clients, the value of <code>NLS_TERRITORY</code> is derived from the default locale of JRE. The values specified in the initialization parameter file are not used for JDBC sessions.</p>
<p>To change their values during a session, use the <code>ALTER SESSION</code> statement.</p>
<div class="infoboxnotealso" id="GUID-644948A3-FF6B-4843-9C7A-7EA554862549__GUID-C81DBFE7-4410-498A-868C-60965F6C343F">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-2796FB20-5F58-4471-B28D-748C514DEE32">Date and Time Parameters</a>&#34;</span> for more information, including examples</p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-0887A83E-06E1-469A-AA8A-A9A50B8B7B57">NLS_DATE_FORMAT</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-0BB80533-A202-4D1A-95BC-0CFA2192DCD2">NLS_TIMESTAMP_FORMAT</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch3globenv.htm#GUID-A00DF2B2-2A01-4517-B8DA-D595788F16B5">NLS_TIMESTAMP_TZ_FORMAT</a>&#34;</span></p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG256"></a>
<div class="props_rev_3"><a id="GUID-3E815FC2-E6AB-4442-8729-915657CEC7A5"></a>
<h3 id="NLSPG-GUID-3E815FC2-E6AB-4442-8729-915657CEC7A5" class="sect3">Time Zone Environment Variables</h3>
<div>
<p>The <a id="d33472e4282" class="indexterm-anchor"></a><a id="d33472e4286" class="indexterm-anchor"></a><a id="d33472e4288" class="indexterm-anchor"></a><a id="d33472e4290" class="indexterm-anchor"></a><a id="d33472e4294" class="indexterm-anchor"></a>time zone environment variables are:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>ORA_TZFILE</code>, which enables you to specify a time zone on the client and Oracle Database server. Note that when you specify <code>ORA_TZFILE</code> on Oracle Database server, the only time when this environment variable takes effect is during the creation of the database.</p>
</li>
<li>
<p><code>ORA_SDTZ</code>, which specifies the default session time zone.</p>
<div class="infoboxnotealso" id="GUID-3E815FC2-E6AB-4442-8729-915657CEC7A5__GUID-2043B787-DC8A-4F13-B865-65A7E425FC7B">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF">Choosing a Time Zone File</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-578B5988-31E2-4D0F-ACEA-95C827F6012B">Setting the Session Time Zone</a>&#34;</span></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<a id="NLSPG257"></a>
<div class="props_rev_3"><a id="GUID-7ECF5B82-C3B5-4873-AC78-61080C8F756A"></a>
<h3 id="NLSPG-GUID-7ECF5B82-C3B5-4873-AC78-61080C8F756A" class="sect3">Daylight Saving Time Session Parameter</h3>
<div>
<p><code>ERROR_ON_OVERLAP_TIME</code> is a session parameter that determines how Oracle Database handles an ambiguous datetime boundary value. Ambiguous datetime values can occur when the time changes between Daylight Saving Time and standard time.</p>
<p>The possible values are <code>TRUE</code> and <code>FALSE</code>. When <code>ERROR_ON_OVERLAP_TIME</code> is <code>TRUE</code>, then an error is returned when Oracle Database encounters an ambiguous datetime value. When <code>ERROR_ON_OVERLAP_TIME</code> is <code>FALSE</code>, then ambiguous datetime values are assumed to be the standard time representation for the region. The default value is <code>FALSE</code>.</p>
<div class="infoboxnotealso" id="GUID-7ECF5B82-C3B5-4873-AC78-61080C8F756A__GUID-FE3A9D91-E52F-4DB5-8516-33F08F61C0EF">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="ch4datetime.htm#GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC">Support for Daylight Saving Time</a>&#34;</span></p>
</li>
<li>
<p><a class="olink SQLRF53052" target="_blank" href="../SQLRF/statements_2015.htm#SQLRF53052"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG759"></a>
<div class="props_rev_3"><a id="GUID-8B7DFC05-31F1-4843-8E70-3BE5BEE9BFD5"></a>
<h3 id="NLSPG-GUID-8B7DFC05-31F1-4843-8E70-3BE5BEE9BFD5" class="sect3">Daylight Saving Time Upgrade Parameter</h3>
<div>
<p><code>DST_UPGRADE_INSERT_CONV</code> is <a id="d33472e4518" class="indexterm-anchor"></a><a id="d33472e4520" class="indexterm-anchor"></a><a id="d33472e4524" class="indexterm-anchor"></a><a id="d33472e4526" class="indexterm-anchor"></a>an initialization parameter that is only used during the upgrade window of the Daylight Saving Time (DST) upgrade process. It is only applicable to tables with <code>TIMESTAMP</code> <code>WITH</code> <code>TIME ZONE</code> columns because those are the only ones that are modified during the DST upgrade.</p>
<p>During the upgrade window of the DST patching process (which is described in the <code>DBMS_DST</code> package), tables with <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> data undergo conversion to the new time zone version. Columns in tables that have not yet been converted will still have the <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> reflecting the previous time zone version. In order to present the data in these columns as though they had been converted to the new time zone version when you issue <code>SELECT</code> statements, Oracle adds by default conversion operators over the columns to convert them to the new version. Adding the conversion operator may, however, slow down queries and disable usage of indexes on the <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> columns. Hence, Oracle provides a parameter, <code>DST_UPGRADE_INSERT_CONV</code>, that specifies whether or not internal operators are allocated on top of <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> columns of tables that have not been upgraded. By default, its value is <code>TRUE</code>. If users know that the conversion process will not affect the <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> columns, then this parameter can be set to <code>FALSE</code>.</p>
<p>Oracle strongly recommends that you set this parameter to <code>TRUE</code> throughout the DST patching process. By default, this parameter is set to <code>TRUE</code>. However, if set to <code>TRUE</code>, query performance may be degraded on unconverted tables. Note that this only applies during the upgrade window.</p>
<div class="infoboxnotealso" id="GUID-8B7DFC05-31F1-4843-8E70-3BE5BEE9BFD5__GUID-DE5083C7-DB94-43E3-A614-D9D2D25FB558">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink REFRN10308" target="_blank" href="../REFRN/GUID-806A8F78-8170-43BC-8C14-42A6D5C24157.htm#REFRN10308"><span class="italic">Oracle Database Reference</span></a></p>
</li>
<li>
<p><a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<a id="NLSPG258"></a>
<div class="props_rev_3"><a id="GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF"></a>
<h2 id="NLSPG-GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF" class="sect2">Choosing a Time Zone File</h2>
<div>
<p>The Oracle Database <a id="d33472e4706" class="indexterm-anchor"></a><a id="d33472e4710" class="indexterm-anchor"></a>time zone files contain the valid time zone names. The following information is also included for each time zone:</p>
<ul style="list-style-type: disc;">
<li>
<p>Offset from Coordinated Universal Time (UTC)</p>
</li>
<li>
<p>Transition times for Daylight Saving Time</p>
</li>
<li>
<p>Abbreviations for standard time and Daylight Saving Time</p>
</li>
</ul>
<p>Oracle Database supplies multiple versions of time zone files, and there are two types of file associated with each one: a large file, which contains all the time zones defined in the database, and a small file, which contains only the most commonly used time zones. The large versions are designated as <code>timezlrg_&lt;version_number&gt;.dat</code>, while the small versions are designated as <code>timezone_&lt;version_number&gt;.dat</code>. The files are located in the <code>oracore/zoneinfo</code> subdirectory under the Oracle Database home directory, so, for example, the default time zone file is the highest version time zone file in this subdirectory. For example, in Oracle Database 11<span class="italic">g</span>, release 2, the default file is <code>$ORACLE_HOME/oracore/zoneinfo/timezlrg_14.dat</code>, which contains all the time zones defined in the database.</p>
<p>Examples of time zone files are:</p>
<pre dir="ltr">$ORACLE_HOME/oracore/zoneinfo/timezlrg_4.dat   -- large version 4
$ORACLE_HOME/oracore/zoneinfo/timezone_4.dat   -- small version 4
$ORACLE_HOME/oracore/zoneinfo/timezlrg_5.dat   -- large version 5
$ORACLE_HOME/oracore/zoneinfo/timezone_5.dat   -- small version 5
</pre>
<p>During the database creation process, you choose the time zone version for the server. This version is fixed, but you can, however, go through the upgrade process to achieve a higher version. You can use different versions of time zone files on the client and server, but Oracle recommends that you do not. This is because there is a performance penalty when a client on one version communicates with a server on a different version. The performance penalty arises because the <code>TIMESTAMP</code> <code>WITH</code> <code>TIME ZONE</code> (TSTZ) data is transferred using a local timestamp instead of UTC.</p>
<p>On the server, Oracle Database always uses a large file. On the client, you can use either a large or a small file. If you use a large time zone file on the client, then you should continue to use it unless you are sure that no information will be missing if you switch to a smaller one. If you use a small file, you have to make sure that the client does not query data that is not present in the small time zone file. Otherwise, you get an error.</p>
<p>You can enable the use of a specific time zone file in the client or on the server. If you want to enable a time zone file on the server, there are two situations. One is that you go through a time zone upgrade to the target version. See <span class="q">&#34;<a href="ch4datetime.htm#GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A">Upgrading the Time Zone File and Timestamp with Time Zone Data</a>&#34;</span> for more information. Another is when you are creating a new database, in that case, you can set the <code>ORA_TZFILE</code> environment variable to point to the time zone file of your choice.</p>
<p>To enable a specific time zone file on the client, you can set <code>ORA_TZFILE</code> to whatever time zone file you want. If <code>ORA_TZFILE</code> is not set, Oracle Database automatically picks up and use the file with the latest time zone version. See <a class="olink LNOCI16761" target="_blank" href="../LNOCI/oci10new.htm#LNOCI16761"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a> for more information on how to upgrade Daylight Saving Time on the client.</p>
<p>Oracle Database <a id="d33472e4784" class="indexterm-anchor"></a>time zone data is derived from the public domain information available at <a href="http://www.iana.org/time-zones" target="_blank"><code>http://www.iana.org/time-zones</code></a>. Oracle Database time zone data may not reflect the most recent data available at this site.</p>
<p>You can obtain a list of time <a id="d33472e4796" class="indexterm-anchor"></a><a id="d33472e4800" class="indexterm-anchor"></a><a id="d33472e4804" class="indexterm-anchor"></a><a id="d33472e4806" class="indexterm-anchor"></a>zone names and time zone abbreviations from the time zone file that is installed with your database by entering the following statement:</p>
<pre dir="ltr">SELECT TZNAME, TZABBREV 
FROM V$TIMEZONE_NAMES
ORDER BY TZNAME, TZABBREV;
</pre>
<p>For the default time zone file, this statement results in output similar to the following:</p>
<pre dir="ltr">TZNAME               TZABBREV
-------------------- ----------
Africa/Abidjan       GMT
Africa/Abidjan       LMT
...
Africa/Algiers       CEST
Africa/Algiers       CET
Africa/Algiers       LMT
Africa/Algiers       PMT
Africa/Algiers       WET
Africa/Algiers       WEST
...
WET                  LMT
WET                  WEST
WET                  WET

2137 rows selected.
</pre>
<p>In the above output, 2 time zone abbreviations are associated with the Africa/Abidjan time zone, and 6 abbreviations are associated with the Africa/Algiers time zone. The following table shows some of the time zone abbreviations and their meanings.</p>
<div class="tblformal" id="GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF__GUID-C74C8481-6D12-4E61-8328-658B4936A3F3">
<table class="cellalignment2377" summary="This table is described in the preceding text">
<thead>
<tr class="cellalignment2368">
<th class="cellalignment2492" id="d33472e4826">Time Zone Abbreviation</th>
<th class="cellalignment2493" id="d33472e4829">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4834" headers="d33472e4826">
<p>LMT</p>
</td>
<td class="cellalignment2495" headers="d33472e4834 d33472e4829">
<p>Local Mean Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4841" headers="d33472e4826">
<p>PMT</p>
</td>
<td class="cellalignment2495" headers="d33472e4841 d33472e4829">
<p>Paris Mean Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4848" headers="d33472e4826">
<p>WET</p>
</td>
<td class="cellalignment2495" headers="d33472e4848 d33472e4829">
<p>Western European Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4855" headers="d33472e4826">
<p>WEST</p>
</td>
<td class="cellalignment2495" headers="d33472e4855 d33472e4829">
<p>Western European Summer Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4862" headers="d33472e4826">
<p>CET</p>
</td>
<td class="cellalignment2495" headers="d33472e4862 d33472e4829">
<p>Central Europe Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4869" headers="d33472e4826">
<p>CEST</p>
</td>
<td class="cellalignment2495" headers="d33472e4869 d33472e4829">
<p>Central Europe Summer Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4876" headers="d33472e4826">
<p>EET</p>
</td>
<td class="cellalignment2495" headers="d33472e4876 d33472e4829">
<p>Eastern Europe Time</p>
</td>
</tr>
<tr class="cellalignment2368">
<td class="cellalignment2494" id="d33472e4883" headers="d33472e4826">
<p>EEST</p>
</td>
<td class="cellalignment2495" headers="d33472e4883 d33472e4829">
<p>Eastern Europe Summer Time</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Note that an abbreviation can be associated with multiple time zones. For example, CET is associated with both Africa/Algiers and Africa/Casablanca, as well as time zones in Europe.</p>
<p>If you want a list of time zones without repeating the time zone name for each abbreviation, use the following query:</p>
<pre dir="ltr">SELECT UNIQUE TZNAME
FROM V$TIMEZONE_NAMES;
</pre>
<p>For example, version 11 contains output similar to the following:</p>
<pre dir="ltr">TZNAME
--------------------
Africa/Addis_Ababa
Africa/Bissau
Africa/Ceuta
...
Turkey
US/East-Indiana
US/Samoa
</pre>
<p>The default time zone file contains more than 350 unique time zone names. The small time zone file contains more than 180 unique time zone names.</p>
<div class="infoboxnotealso" id="GUID-805AB986-DE12-4FEA-AF56-5AABCD2132DF__GUID-8D2EB05A-AC95-457C-AB87-B0EA4A86983C">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="applocaledata.htm#GUID-21D14370-A707-4482-A3FE-9277263F292A">Time Zone Region Names</a>&#34;</span> for a list of valid Oracle Database time zone names</p>
</li>
<li>
<p><code>$ORACLE_HOME/oracore/zoneinfo/timezdif.csv</code>, provided with your Oracle Database software installation, for a full list of time zones changed since Oracle9<span class="italic">i</span></p>
</li>
<li>
<p><a class="olink UPGRD52789" target="_blank" href="../UPGRD/preup.htm#UPGRD52789"><span class="italic">Oracle Database Upgrade Guide</span></a> for upgrade information</p>
</li>
</ul>
</div>
</div>
</div>
<a id="NLSPG259"></a>
<div class="props_rev_3"><a id="GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A"></a>
<h2 id="NLSPG-GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A" class="sect2">Upgrading the Time Zone File and Timestamp with Time Zone Data</h2>
<div>
<p>The time <a id="d33472e4999" class="indexterm-anchor"></a><a id="d33472e5003" class="indexterm-anchor"></a>zone files that are supplied with the Oracle Database are updated periodically to reflect changes in transition rules for various time zone regions. To find which Time Zone File your database currently uses, query <code>V$TIMEZONE_FILE</code>.</p>
<div class="infobox-note" id="GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A__GUID-899C0F64-8DC4-4EE0-8D87-81C92B6BF606">
<p class="notep1">Note:</p>
<p>Oracle Database 9<span class="italic">i</span> includes version 1 of the time zone files, and Oracle Database 10<span class="italic">g</span> includes version 2. For Oracle Database 11<span class="italic">g</span>, release 2, all time zone files from versions 1 to 14 are included. Various patches and patch sets, which are released separately for these releases, may update the time zone file version as well. With Oracle Database 12<span class="italic">c</span>, version 18 is included.</p>
</div>
</div>
<a id="NLSPG260"></a>
<div class="props_rev_3"><a id="GUID-93FD346E-5DB1-4517-977E-70D278BEFE09"></a>
<h3 id="NLSPG-GUID-93FD346E-5DB1-4517-977E-70D278BEFE09" class="sect3">Daylight Saving Time (DST) Transition Rules Changes</h3>
<div>
<p>Governments can an<a id="d33472e5100" class="indexterm-anchor"></a>d do change the rules for when Daylight Saving Time takes effect or how it is handled. When this occurs, Oracle provides a new set of transition rules for handling timestamp with time zone data.</p>
<p>Transition periods for the beginning or ending of Daylight Saving Time can potentially introduce problems (such as data loss) when handling timestamps with time zone data. Because of this, there are certain rules for dealing with the transition, and, in this release, these transition rules have changed. In addition, Oracle has significantly improved the way of dealing with this transition by providing a new package called <code>DBMS_DST</code>.</p>
<p>The changes to DST transition rules may affect existing data of <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data type, because of the way Oracle Database stores this data internally. When users enter timestamps with time zone, Oracle Database converts the data to UTC, based on the transition rules in the time zone file, and stores the data together with the ID of the original time zone on disk. When data is retrieved, the reverse conversion from UTC takes place. For example, when the version 2 transition rules were in effect, the value <code>TIMESTAMP</code> <code>&#39;2007-11-02 12:00:00 America/Los_Angeles&#39;</code>, would have been stored as UTC value <code>&#39;2007-11-02 20:00:00&#39;</code> <span class="italic">plus</span> the time zone ID for <code>&#39;America/Los_Angeles&#39;</code>. The time in Los Angeles would have been UTC <span class="italic">minus</span> eight hours (PST). Under version 3 of the transition rules, the offset for the same day is <span class="italic">minus</span> seven hours (PDT). Beginning with year 2007, the DST has been in effect longer (until the first Sunday of November, which is November 4th in 2007). Now, when users retrieve the same timestamp and the new offset is added to the stored UTC time, they receive <code>TIMESTAMP</code> <code>&#39;2007-11-02 13:00:00 America/Los_Angeles&#39;</code>. There is a one hour difference compared to the data previous to version 3 taking effect.</p>
<p>See <a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information regarding the <code>DBMS_DST</code> package.</p>
<div class="infobox-note" id="GUID-93FD346E-5DB1-4517-977E-70D278BEFE09__GUID-5A4C76E7-31F8-4DBC-A853-F69DD5875063">
<p class="notep1">Note:</p>
<p>For any time zone region whose transition rules have been updated, the upgrade process discussed throughout this section, <span class="q">&#34;<a href="ch4datetime.htm#GUID-B0ACDB2E-4B49-4EB4-B4CC-9260DAE1567A">Upgrading the Time Zone File and Timestamp with Time Zone Data</a>&#34;</span>, affects only timestamps that point to the future relative to the effective date of the corresponding DST rule change. For example, no timestamp before year 2007 is affected by the version 3 change to the &#39;America/Los_Angeles&#39; time zone region.</p>
</div>
</div>
</div>
<a id="NLSPG760"></a>
<div class="props_rev_3"><a id="GUID-F0283FDA-7BA0-4D28-BBBD-80CD5538DD4B"></a>
<h3 id="NLSPG-GUID-F0283FDA-7BA0-4D28-BBBD-80CD5538DD4B" class="sect3">Preparing to Upgrade the Time Zone File and Timestamp with Time Zone Data</h3>
<div>
<div class="section">
<p>Before you actually upgrade any data, you should verify what the impact of the upgrade is likely to be. In general, you can consider the upgrade process to have two separate subprocesses. The first is to create a prepare window and the second is to create an upgrade window. The prepare window is the time where you check how much data has to be updated in the database, while the upgrade window is the time when the upgrade actually occurs.</p>
<p>While not required, Oracle strongly recommends you perform the prepare window step. In addition to finding out how much data will have to be modified during the upgrade, thus giving you an estimate of how much time the upgrade will take, you will also see any semantic errors that you may encounter. See <span class="q">&#34;<a href="ch4datetime.htm#GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</a>&#34;</span>.</p>
<p>You can create a prepare window to find the affected data using the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Install the desired (latest) time zone file to which you will be later migrating into <code>$ORACLE_HOME/oracore/zoneinfo</code>. The desired (latest) version of <code>timezlrg_&lt;version_number&gt;.dat</code> is required, while <code>timezone_&lt;version_number&gt;.dat</code> may also be added at your discretion. These files can be found on My Oracle Support.</span></li>
<li class="stepexpand"><span>You can optionally create an error table as well as a table that contains affected timestamp with time zone information by using <code>DBMS_DST.CREATE_ERROR_TABLE</code> and <code>DBMS_DST.CREATE_AFFECTED_TABLE</code>, respectively, If you do not, Oracle Database uses the pre-built <code>sys.dst$affected_tables</code> and <code>sys.dst$error_table</code>. These tables are used in step 4.</span>
<div>
<pre dir="ltr">EXEC DBMS_DST.CREATE_AFFECTED_TABLE(&#39;my_affected_tables&#39;);
EXEC DBMS_DST.CREATE_ERROR_TABLE(&#39;my_error_table&#39;);
</pre></div>
</li>
<li class="stepexpand"><span>Invoke <code>DBMS_DST.BEGIN_PREPARE(&lt;new_version&gt;)</code>, which is the version you chose in Step 1. See <a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information regarding <code>DBMS_DST</code> privilege information.</span></li>
<li class="stepexpand"><span>Check the affected data by invoking <code>DBMS_DST.FIND_AFFECTED_TABLES</code>, and verifying the affected columns by querying <code>sys.dst$affected_tables</code>. Also, it is particularly important to check <code>sys.dst$affected_tables.error_count</code> for possible errors. If the error count is greater than 0, you can check what kind of errors might expect during the upgrade by checking <code>sys.dst$error_table</code>. See <span class="q">&#34;<a href="ch4datetime.htm#GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>End the prepare window by invoking <code>DBMS_DST.END_PREPARE</code>.</span></li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-F0283FDA-7BA0-4D28-BBBD-80CD5538DD4B__GUID-1CB5D622-7F2D-4718-A2EE-8588E4B92946">
<p class="notep1">Note:</p>
<p>Note that only one DBA should run the prepare window at one time. Also, make sure to correct all errors before running the upgrade.</p>
</div>
<div class="infobox-note" id="GUID-F0283FDA-7BA0-4D28-BBBD-80CD5538DD4B__GUID-05872D36-61A9-432B-BD74-7B760FFD6967">
<p class="notep1">Note:</p>
<p>You can find the matrix of available patches for updating your time zone files by going to Oracle Support and reading Document ID 412160.1.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="NLSPG261"></a>
<div class="props_rev_3"><a id="GUID-12830F09-735F-4E25-B141-42B4776A110A"></a>
<h3 id="NLSPG-GUID-12830F09-735F-4E25-B141-42B4776A110A" class="sect3">Steps to Upgrade Time Zone File and Timestamp with Time Zone Data</h3>
<div>
<div class="section">
<p>Upgrading a time zone file <a id="d33472e5409" class="indexterm-anchor"></a>and timestamp with time zone data contains the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>If you have not already done so, download the desired (latest) version of <code>timezlrg_&lt;version_number&gt;.dat</code> and install it in <code>$ORACLE_HOME/oracore/zoneinfo</code>. In addition, you can optionally download <code>timezone_&lt;version_number&gt;.dat</code> from My Oracle Support and put it in the same location.</span></li>
<li class="stepexpand"><span>Shut down the database. In Oracle RAC, you must shut down all instances.</span></li>
<li class="stepexpand"><span>Start up the database in <code>UPGRADE</code> mode. Note that, in Oracle RAC, only one instance should be started. See <a class="olink UPGRD52874" target="_blank" href="../UPGRD/upgrade.htm#UPGRD52874"><span class="italic">Oracle Database Upgrade Guide</span></a> for an explanation of <code>UPGRADE</code> mode.</span></li>
<li class="stepexpand"><span>Execute <code>DBMS_DST.BEGIN_UPGRADE(&lt;new_version&gt;)</code>. Optionally, you can have two other parameters that you can specify to <code>TRUE</code> if you do not want to ignore semantic errors during the upgrade of dictionary tables that contain timestamp with time zone data. If you specify <code>TRUE</code> for either or both of these parameters, the errors are populated into <code>sys.dst$error_table</code> by default. In this case, you might want to truncate the error table before you begin the <code>BEGIN_UPGRADE</code> procedure. See <span class="italic">Oracle Database PL/SQL Packages and Types Reference</span> for more information.</span></li>
<li class="stepexpand"><span>If the <code>BEGIN_UPGRADE</code> execution fails, an ORA-56927 error (Starting an upgrade window failed) is raised.</span>
<div>
<p>After <code>BEGIN_UPGRADE</code> finishes executing with errors, check <code>sys.dst$error_table</code> to determine if the dictionary conversion was successful. If successful, there will not be any rows in the table. If there are errors, correct these errors manually and rerun <code>DBMS_DST.BEGIN_UPGRADE(&lt;new_version&gt;)</code>. See <span class="q">&#34;<a href="ch4datetime.htm#GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Restart the database in normal mode.</span></li>
<li class="stepexpand"><span>Truncate the error and trigger tables (by default, <code>sys.dst$error_table</code> and <code>sys.dst$trigger_table</code>).</span>
<div>
<p>The trigger table records the disabled TSTZ table triggers during the upgrade process, which is passed as a parameter to <code>DBMS_DST.UPGRADE_*</code> procedures. Note that you can optionally create your own trigger table by calling <code>DBMS_DST.CREATE_TRIGGER_TABLE</code>. During <code>DBMS_DST.UPGRADE_*</code>, Oracle Database first disables the triggers on a TSTZ table before performing the upgrade of its affected TSTZ data. Oracle Database also saves the information from those triggers in <code>sys.dst$trigger_table</code>. After completing the upgrade of the affected TSTZ data in the table, those disabled triggers are enabled by reading from <code>sys.dst$trigger_table</code> and then removed from <code>sys.dst$trigger_table</code>. If any fatal error occurs, such as an unexpected instance shutdown during the upgrade process, you should check <code>sys.dst$trigger_table</code> to see if any trigger has not been restored to its previous active state before the upgrade.</p>
</div>
</li>
<li class="stepexpand"><span>Upgrade the TSTZ data in all tables by invoking <code>DBMS_DST.UPGRADE_DATABASE</code>.</span></li>
<li class="stepexpand"><span>Verify that all tables have finished being upgraded by querying the <code>DBA_TSTZ_TABLES</code> view, as shown in <span class="q">&#34;<a href="ch4datetime.htm#GUID-AD9EFCFB-CBEA-4BE2-A91E-9CC2A28CB199">Example of Updating Daylight Saving Time Behavior</a>&#34;</span>. Then look at <code>dst$error_table</code> to see if there were any errors. If there were errors, correct the errors and rerun <code>DBMS_DST.UPGRADE_TABLE</code> on the relevant tables. Or, if you do not think those errors are important, re-run with the parameters set to ignore errors.</span></li>
<li class="stepexpand"><span>End the upgrade window by invoking <code>DBMS_DST.END_UPGRADE</code>.</span></li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-12830F09-735F-4E25-B141-42B4776A110A__GUID-780832F9-AC0A-438F-A224-76F3D34501C7">
<p class="notep1">Note:</p>
<p>Tables containing timestamp with time zone columns need to be in a state where they can be updated. So, as an example, the columns cannot have validated and disabled check constraints as this prevents updating.</p>
<p>Oracle recommends that you use the parallel option if a table size is greater than 2 Gigabytes. Oracle also recommends that you allow Oracle to handle any semantic errors that may arise.</p>
<p>Note that, when you issue a <code>CREATE</code> statement for error, trigger, or affected tables, you must pass the table name only, not the schema name. This is because the tables will be created in the current invoker&#39;s schema.</p>
</div>
</div>
<!-- class="section" --></div>
<a id="NLSPG761"></a>
<div class="props_rev_3"><a id="GUID-AD9EFCFB-CBEA-4BE2-A91E-9CC2A28CB199"></a>
<h4 id="NLSPG-GUID-AD9EFCFB-CBEA-4BE2-A91E-9CC2A28CB199" class="sect4">Example of Updating Daylight Saving Time Behavior</h4>
<div>
<div class="section">
<p>This example illustrates updating DST behavior to Oracle Database 11<span class="italic">g</span>, release 2. First, assume that your current database is using time zone version 3, and also assume you have an existing table <code>t</code>, which contains timestamp with time zone data.</p>
<pre dir="ltr">CONNECT scott/tiger
DROP TABLE t;
CREATE TABLE t (c NUMBER, mark VARCHAR(25), ts TIMESTAMP WITH TIME ZONE);
 
INSERT INTO t VALUES(1, &#39;not_affected&#39;, 
                    to_timestamp_tz(&#39;22-sep-2006 13:00:00 america/los_angeles&#39;,
                                     &#39;dd-mon-yyyy hh24:mi:ss tzr tzd&#39;));
INSERT INTO t VALUES(4, &#39;affected_err_exist&#39;,
                     to_timestamp_tz(&#39;11-mar-2007 00:30:00 america/st_johns&#39;,
                                     &#39;dd-mon-yyyy hh24:mi:ss tzr tzd&#39;));
INSERT INTO t VALUES(6, &#39;affected_no_err&#39;,
                     to_timestamp_tz(&#39;11-mar-2007 01:30:00 america/st_johns&#39;,
                                     &#39;dd-mon-yyyy hh24:mi:ss tzr tzd&#39;));
INSERT INTO t VALUES(14, &#39;affected_err_dup&#39;, 
                     to_timestamp_tz(&#39;21-sep-2006 23:30:00 egypt&#39;,
                                     &#39;dd-mon-yyyy hh24:mi:ss tzr tzd&#39;));
COMMIT;
 
</pre>
<p>Then, optionally, you can start a prepare window to check the affected data and potential semantic errors where there is an overlap or non-existing time. To do this, you should start a window for preparation to migrate to version 4. It is assumed that you have the necessary privileges. These privileges are controlled with the <code>DBMS_DST</code> package. See <a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information.</p>
<p>As an example, first, prepare the window.</p>
<pre dir="ltr">conn / AS SYSDBA
set serveroutput on
EXEC DBMS_DST.BEGIN_PREPARE(4);
 
A prepare window has been successfully started.
 
PL/SQL procedure successfully completed.
 
</pre>
<p>Note that the argument 4 causes version 4 to be used in this statement. After this window is successfully started, you can check the status of the DST in <code>DATABASE_PROPERTIES</code>, as in the following:</p>
<pre dir="ltr">SELECT PROPERTY_NAME, SUBSTR(property_value, 1, 30) value
FROM DATABASE_PROPERTIES
WHERE NAME LIKE &#39;DST_%&#39;
ORDER BY PROPERTY_NAME;
 
</pre>
<p>You will see output resembling the following:</p>
<pre dir="ltr">PROPERTY_NAME                  VALUE
---------------------------    ---------
DST_PRIMARY_TT_VERSION         3
DST_SECONDARY_TT_VERSION       4
DST_UPGRADE_STATE              PREPARE
</pre>
<p>Next, you can invoke <code>DBMS_DST.FIND_AFFECTED_TABLES</code> to find all the tables in the database that are affected if you upgrade from version 3 to version 4. This table contains the table owner, table name, column name, row count, and error count. Here, you have the choice of using the defaults for error tables (<code>sys.dst$error_table</code>) and affected tables (<code>sys.dst$affected_table</code>) or you can create your own. In this example, we create our own tables by using <code>DBMS_DST.CREATE_ERROR_TABLE</code> and <code>DBMS_DST.CREATE_AFFECTED_TABLE</code> and then pass to <code>FIND_AFFECTED_TABLES</code>, as in the following:</p>
<pre dir="ltr">EXEC DBMS_DST.CREATE_AFFECTED_TABLE(&#39;scott.my_affected_tables&#39;);
EXEC DBMS_DST.CREATE_ERROR_TABLE(&#39;scott.my_error_table&#39;);
 
</pre>
<p>It is a good idea to make sure that there are no rows in these tables. You can do this by truncating the tables, as in the following:</p>
<pre dir="ltr">TRUNCATE TABLE scott.my_affected_tables;
TRUNCATE TABLE scott.my_error_table;
</pre>
<p>Then, you can invoke <code>FIND_AFFECTED_TABLES</code> to see which tables are impacted during the upgrade:</p>
<pre dir="ltr">EXEC DBMS_DST.FIND_AFFECTED_TABLES(affected_tables  =&gt; &#39;scott.my_affected_tables&#39;,
                                   log_errors       =&gt; TRUE,
                                   log_errors_table =&gt; &#39;scott.my_error_table&#39;);
</pre>
<p>Then, check the affected tables:</p>
<pre dir="ltr">SELECT * FROM scott.my_affected_tables;
 
TABLE_OWNER   TABLE_NAME   COLUMN_NAM   ROW_COUNT  ERROR_COUNT
-----------   ----------   ----------   ---------  -----------
SCOTT         T            TS                   3            2
 
</pre>
<p>Then, check the error table:</p>
<pre dir="ltr">SELECT * FROM scott.my_error_table;
 
TABLE_OWNER   TABLE_NAME  COLUMN_NAME   ROWID                ERROR_NUMBER
-----------   ----------  -----------   ------------------   ------------
SCOTT         T           TS            AAAPW3AABAAANzoAAB           1878
SCOTT         T           TS            AAAPW3AABAAANzoAAE           1883
 
</pre>
<p>These errors can be corrected by seeing <span class="q">&#34;<a href="ch4datetime.htm#GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</a>&#34;</span>. Then, end the prepare window, as in the following statement:</p>
<pre dir="ltr">EXEC DBMS_DST.END_PREPARE;
 
A prepare window has been successfully ended.
 
PL/SQL procedure successfully completed.
 
</pre>
<p>After this, you can check the DST status in <code>DATABASE_PROPERTIES</code>:</p>
<pre dir="ltr">SELECT PROPERTY_NAME, SUBSTR(property_value, 1, 30) value
FROM DATABASE_PROPERTIES
WHERE PROPERTY_NAME LIKE &#39;DST_%&#39;
ORDER BY PROPERTY_NAME;
 
PROPERTY_NAME                 VALUE
------------------------      --------
DST_PRIMARY_TT_VERSION        3
DST_SECONDARY_TT_VERSION      0
DST_UPGRADE_STATE             NONE
 
</pre>
<p>Next, you can use the upgrade window to upgrade the affected data. To do this, first, start an upgrade window. Note that the database must be opened in <code>UPGRADE</code> mode before you can execute <code>DBMS_DST.BEGIN_UPGRADE</code>. In Oracle RAC, only one instance can be started. <code>BEGIN_UPGRADE</code> upgrades all dictionary tables in one transaction, so the invocation will either succeed or fail as one whole. During the procedure&#39;s execution, all user tables with TSTZ data are marked as an upgrade in progress. See <a class="olink UPGRD52705" target="_blank" href="../UPGRD/intro.htm#UPGRD52705"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information.</p>
<p>Also, only <code>SYSDBA</code> can start an upgrade window. If you do not open the database in <code>UPGRADE</code> mode and invoke <code>BEGIN_UPGRADE</code>, you will see the following error:</p>
<pre dir="ltr">EXEC DBMS_DST.BEGIN_UPGRADE(4);
BEGIN DBMS_DST.BEGIN_UPGRADE(4); END;
 
*
ERROR at line 1:
ORA-56926: database must be in UPGRADE mode in order to start an upgrade window
ORA-06512: at &#34;SYS.DBMS_SYS_ERROR&#34;, line 79
ORA-06512: at &#34;SYS.DBMS_DST&#34;, line 1021
ORA-06512: at line 1
 
</pre>
<p>So, <code>BEGIN_UPGRADE</code> upgrades system tables that contain TSTZ data and marks user tables (containing TSTZ data) with the <code>UPGRADE_IN_PROGRESS</code> property. This can be checked in <code>ALL_TSTZ_TABLES</code>, and is illustrated later in this example.</p>
<p>There are two parameters in <code>BEGIN_UPGRADE</code> that are for handling semantic errors: <code>error_on_overlap_time</code> (error number ORA-1883) and <code>error_on_nonexisting_time</code> (error number ORA-1878). If the parameters use the default setting of <code>FALSE</code>, Oracle converts the data using a default conversion and does not signal an error. See <span class="q">&#34;<a href="ch4datetime.htm#GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</a>&#34;</span> for more information regarding what they mean, and how to handle errors.</p>
<p>The following call can automatically correct semantic errors based on some default values when you upgrade the dictionary tables. If you do not ignore semantic errors, and you do have such errors in the dictionary tables, <code>BEGIN_UPGRADE</code> will fail. These semantic errors are populated into <code>sys.dst$error_table</code>.</p>
<pre dir="ltr">EXEC DBMS_DST.BEGIN_UPGRADE(4);
An upgrade window has been successfully started.
 
PL/SQL procedure successfully completed.
 
</pre>
<p>After this, you can check the DST status in <code>DATABASE_PROPERTIES</code>, as in the following:</p>
<pre dir="ltr">SELECT PROPERTY_NAME, SUBSTR(property_value, 1, 30) value
FROM DATABASE_PROPERTIES
WHERE PROPERTY_NAME LIKE &#39;DST_%&#39;
ORDER BY PROPERTY_NAME;
 
PROPERTY_NAME               VALUE
------------------------    --------
DST_PRIMARY_TT_VERSION             4
DST_SECONDARY_TT_VERSION           3
DST_UPGRADE_STATE            UPGRADE
 
</pre>
<p>Then, check which user tables are marked with <code>UPGRADE_IN_PROGRESS</code>:</p>
<pre dir="ltr">SELECT OWNER, TABLE_NAME, UPGRADE_IN_PROGRESS FROM ALL_TSTZ_TABLES;
 
OWNER   TABLE_NAME                      UPGRADE_IN_PROGRESS
-----   -------------------------       -------------------
SYS     WRI$_OPTSTAT_AUX_HISTORY        NO
SYS     WRI$_OPTSTAT_OPR                NO
SYS     OPTSTAT_HIST_CONTROL$           NO
SYS     SCHEDULER$_JOB                  NO
SYS     KET$_AUTOTASK_STATUS            NO
SYS     AQ$_ALERT_QT_S                  NO
SYS     AQ$_KUPC$DATAPUMP_QUETAB_S      NO
DBSNMP  MGMT_DB_FEATURE_LOG             NO
WMSYS   WM$VERSIONED_TABLES             NO
SYS     WRI$_OPTSTAT_IND_HISTORY        NO
SYS     OPTSTAT_USER_PREFS$             NO
SYS     FGR$_FILE_GROUP_FILES           NO
SYS     SCHEDULER$_WINDOW               NO
SYS     WRR$_REPLAY_DIVERGENCE          NO
SCOTT   T                               YES
IX      AQ$_ORDERS_QUEUETABLE_S         YES
...
 
</pre>
<p>In this output, dictionary tables (in the <code>SYS</code> schema) have already been upgraded by <code>BEGIN_UPGRADE</code>. User tables, such as <code>SCOTT.T</code>, have not been and are in progress.</p>
<p>Now you can perform an upgrade of user tables using <code>DBMS_DST.UPGRADE_DATABASE</code>. All tables must be upgraded, otherwise, you will not be able to end the upgrade window using the <code>END_UPGRADE</code> procedure. Before this step, you must restart the database in <code>normal</code> mode. An example of the syntax is as follows:</p>
<pre dir="ltr">VAR numfail number
BEGIN
   DBMS_DST.UPGRADE_DATABASE(:numfail,
            parallel                  =&gt; TRUE,
            log_errors                =&gt; TRUE,
            log_errors_table          =&gt; &#39;SYS.DST$ERROR_TABLE&#39;,
            log_triggers_table        =&gt; &#39;SYS.DST$TRIGGER_TABLE&#39;,
            error_on_overlap_time     =&gt; TRUE,
            error_on_nonexisting_time =&gt; TRUE);
DBMS_OUTPUT.PUT_LINE(&#39;Failures:&#39;|| :numfail);
END;
/
</pre>
<p>If there are any errors, you should correct them and use <code>UPGRADE_TABLE</code> on the individual tables. In that case, you may need to handle tables related to materialized views, such as materialized view base tables, materialized view log tables, and materialized view container tables. There are a couple of considerations to keep in mind when upgrading these tables. First, the base table and its materialized view log table have to be upgraded atomically. Next, the materialized view container table has to be upgraded after all its base tables and the materialized view log tables have been upgraded. In general, Oracle recommends that you handle semantic errors by letting Oracle Database take the default action.</p>
<p>For the sake of this example, let us assume there were some errors in <code>SCOTT.T</code> after you ran <code>UPGRADE_DATABASE</code>. In that case, you can check these errors by issuing:</p>
<pre dir="ltr">SELECT * FROM scott.error_table;
 
TABLE_OWNER   TABLE_NAME  COLUMN_NAME   ROWID                ERROR_NUMBER
-----------   ----------  -----------   ------------------   ------------
SCOTT         T           TS            AAAO2XAABAAANrgAAD           1878
SCOTT         T           TS            AAAO2XAABAAANrgAAE           1878
 
</pre>
<p>From this output, you can see that error number 1878 has occurred. This error means that an error has been thrown for a non-existing time.</p>
<p>To continue with this example, assume that <code>SCOTT.T</code> has a materialized view log <code>scott.mlog$_t</code>, and that there is a single materialized view on <code>SCOTT.T</code>. Then, assume that this 1878 error has been corrected.</p>
<p>Finally, you can upgrade the table, materialized view log and materialized view as follows:</p>
<pre dir="ltr">BEGIN
  DBMS_DST.UPGRADE_TABLE(:numfail,
           table_list                =&gt; &#39;SCOTT.t, SCOTT.mlog$_T&#39;,
           parallel                  =&gt; TRUE,
           continue_after_errors     =&gt; FALSE,
           log_errors                =&gt; TRUE,
           log_errors_table          =&gt; &#39;SYS.DST$ERROR_TABLE&#39;,
           error_on_overlap_time     =&gt; FALSE,
           error_on_nonexisting_time =&gt; TRUE,
           log_triggers_table        =&gt; &#39;SYS.DST$TRIGGER_TABLE&#39;,
           atomic_upgrade            =&gt; TRUE);
 
 DBMS_OUTPUT.PUT_LINE(&#39;Failures:&#39;|| :numfail);
END;
/

BEGIN
  DBMS_DST.UPGRADE_TABLE(:numfail, 
           table_list                =&gt; &#39;SCOTT.MYMV_T&#39;,
           parallel                  =&gt; TRUE,
           continue_after_errors     =&gt; FALSE,
           log_errors                =&gt; TRUE, 
           log_errors_table          =&gt; &#39;SYS.DST$ERROR_TABLE&#39;,
           error_on_overlap_time     =&gt; FALSE,
           error_on_nonexisting_time =&gt; TRUE,
           log_triggers_table        =&gt; &#39;SYS.DST$TRIGGER_TABLE&#39;,
           atomic_upgrade            =&gt; TRUE);
 
  DBMS_OUTPUT.PUT_LINE(&#39;Failures:&#39;|| :numfail);
END;
/ 
</pre>
<p>The <code>atomic_upgrade</code> parameter enables you to combine the upgrade of the table with its materialized view log. See <a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information.</p>
<p>After all the tables are upgraded, you can invoke <code>END_UPGRADE</code> to end an upgrade window, as in the following:</p>
<pre dir="ltr">BEGIN
  DBMS_DST.END_UPGRADE(:numfail);
END;
/
</pre>
<p>If no other table was upgraded successfully, the <code>END_UPGRADE</code> statement fails.</p>
<div class="infoboxnotealso" id="GUID-AD9EFCFB-CBEA-4BE2-A91E-9CC2A28CB199__GUID-B6804D7E-C716-458B-8F7F-AE92806AA14D">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information regarding the <code>DBMS_DST</code> package</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="NLSPG762"></a>
<div class="props_rev_3"><a id="GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D"></a>
<h4 id="NLSPG-GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D" class="sect4">Error Handling when Upgrading Time Zone File and Timestamp with Time Zone Data</h4>
<div>
<p>There are three major semantic errors that can occur during an upgrade. The first is when an existing time becomes a non-existing time, the second is when a time becomes duplicated, and the third is when a duplicate time becomes a non-duplicate time.</p>
<p>As an example of the first case, consider the change from Pacific Standard Time (PST) to Pacific Daylight Saving Time (PDT) in 2007. This change takes place on Mar-11-2007 at 2AM according to version 4 when the clock moves forward one hour to 3AM and produces a gap between 2AM and 3AM. In version 2, this time change occurs on Apr-01-2007. If you upgrade the time zone file from version 2 to version 4, any time in the interval between 2AM and 3AM on Mar-11-2007 is not valid, and raises an error (ORA-1878) if <code>ERROR_ON_NONEXISTING_TIME</code> is set to <code>TRUE</code>. Therefore, there is a non-existing time problem. When <code>ERROR_ON_NONEXISTING_TIME</code> is set to <code>FALSE</code>, which is the default value for this parameter, the error is not reported and Oracle preserves UTC time in this case. For example, &#34;Mar-11-2007 02:30 PST&#34; in version 2 becomes &#34;Mar-11-2007 03:30 PDT&#34; in version 4 as they both are translated to the same UTC timestamp.</p>
<p>An example of the second case occurs when changing from PDT to PST. For example, in version 4 for 2007, the change occurs on Nov-04-2007, when the time falls back from 2AM to 1AM. This means that times in the interval &lt;1AM, 2AM&gt; on Nov-04-2007 can appear twice, once with PST and once with PDT. In version 2, this transition occurs on Oct-28-2007 at 2AM. Thus, any timestamp within &lt;1AM, 2AM&gt; on Nov-04-2007, which is uniquely identified in version 2, results in an error (ORA-1883) in version 4, if <code>ERROR_ON_OVERLAP_TIME</code> is set to <code>TRUE</code>. If you leave this parameter on its default setting of <code>FALSE</code>, then the UTC timestamp value is preserved and no error is raised. In this situation, if you change the version from 2 to 4, timestamp &#34;Nov-04-2007 01:30 PST&#34; in version 2 becomes &#34;Nov-04-2007 01:30 PST&#34; in version 4.</p>
<p>The third case happens when a duplicate time becomes a non-duplicate time. Consider the transition from PDT to PST in 2007, for example, where &lt;1AM, 2AM&gt; on Oct-28-2007 in version 2 is the overlapped interval. Then both &#34;Oct-28-2007 01:30 PDT&#34; and &#34;Oct-28-2007 01:30 PST&#34; are valid timestamps in version 2. If <code>ERROR_ON_OVERLAP_TIME</code> is set to <code>TRUE</code>, an ORA-1883 error is raised during an upgrade from version 2 to version 4. If <code>ERROR_ON_OVERLAP_TIME</code> is set to <code>FALSE</code> (the default value of this parameter), however, the LOCAL time is preserved and no error is reported. In this case, both &#34;Oct-28-2007 01:30 PDT&#34; and &#34;Oct-28-2007 01:30 PST&#34; in version 2 convert to the same &#34;Oct-28-2007 01:30 PDT&#34; in version 4. Note that setting <code>ERROR_ON_OVERLAP_TIME</code> to <code>FALSE</code> can potentially cause some time sequences to be reversed. For example, a job (Job A) scheduled at &#34;Oct-28-2007 01:45 PDT&#34; in version 2 is supposed to be executed before a job (Job B) scheduled at &#34;Oct-28-2007 01:30 PST&#34;. After the upgrade to version 4, Job A is scheduled at &#34;Oct-28-2007 01:45 PDT&#34; and Job B remains at &#34;Oct-28-2007 01:30 PDT&#34;, resulting in Job B being executed before Job A. Even though unchained scheduled jobs are not guaranteed to be executed in a certain order, this issue should be kept in mind when setting up scheduled jobs.</p>
<div class="infoboxnotealso" id="GUID-6377A1C4-F76A-4C53-82CD-BF4AE6148D6D__GUID-5FBB09AF-72C8-43AC-A75B-814961ADA2B7">
<p class="notep1">See Also:</p>
<p><a class="olink ARPLS234" target="_blank" href="../ARPLS/d_dst.htm#ARPLS234"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information regarding how to use these parameters</p>
</div>
</div>
</div>
</div>
</div>
<a id="NLSPG975"></a>
<div class="props_rev_3"><a id="GUID-1A80594A-6D9D-4088-8240-F7CA18300E76"></a>
<h2 id="NLSPG-GUID-1A80594A-6D9D-4088-8240-F7CA18300E76" class="sect2">Clients and Servers Operating with Different Versions of Time Zone Files</h2>
<div>
<p>In Oracle Database 11<span class="italic">g</span>, Release 11.2 (or higher), you can use different versions of time zone file on the client and server; this mode of operation was not supported prior to 11.2. Both client and server must be 11.2 or higher to operate in such a mixed mode. For the ramifications of working in such a mode, see <a class="olink LNOCI16761" target="_blank" href="../LNOCI/oci10new.htm#LNOCI16761"><span class="italic">Oracle Call Interface Programmer&#39;s Guide</span></a>.</p>
<p>OCI, JDBC, Pro*C, and SQL*Plus clients can now continue to communicate with the database server without having to update client-side time zone files. For other products, if not explicitly stated in the product-specific documentation, it should be assumed that such clients cannot operate with a database server with a different time zone file than the client. Otherwise, computations on the <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> values that are region ID based may give inconsistent results on the client. This is due to different daylight saving time (DST) rules in effect for the time zone regions affected between the different time zone file versions at the client and on the server.</p>
<p>Note if an application connects to different databases directly or via database links, it is recommended that all databases be on the same time zone file version. Otherwise, computations on the <code>TIMESTAMP</code> <code>WITH</code> <code>TIMEZONE</code> values on these different databases may give inconsistent results. This is due to different DST rules in effect for the time zone regions affected between the different time zone file versions across the different database servers.</p>
</div>
</div>
<a id="NLSPG262"></a>
<div class="props_rev_3"><a id="GUID-2AF15A96-CD19-4074-8DE6-17BAD0D7DF37"></a>
<h2 id="NLSPG-GUID-2AF15A96-CD19-4074-8DE6-17BAD0D7DF37" class="sect2">Setting the Database Time Zone</h2>
<div>
<div class="section">
<p>Set the <a id="d33472e6214" class="indexterm-anchor"></a><a id="d33472e6216" class="indexterm-anchor"></a>database time zone when the database is created by using the <code>SET TIME_ZONE</code> clause of the <code>CREATE DATABASE</code> statement. If you do not set the database time zone, then it defaults to the time zone of the server&#39;s operating system.</p>
<p>The time zone may be set to a named region or an absolute offset from UTC. To set the time zone to a named region, use a statement similar to the following example:</p>
<pre dir="ltr">CREATE DATABASE db01
...
SET TIME_ZONE=&#39;Europe/London&#39;;
</pre>
<p>To set the time zone to an offset from UTC, use a statement similar to the following example:</p>
<pre dir="ltr">CREATE DATABASE db01
...
SET TIME_ZONE=&#39;-05:00&#39;;
</pre>
<p>The range of valid offsets is -12:00 to +14:00.</p>
<div class="infobox-note" id="GUID-2AF15A96-CD19-4074-8DE6-17BAD0D7DF37__GUID-3F7611FB-D22B-4BD8-8352-41B01662300D">
<p class="notep1">Note:</p>
<p>The database time zone is relevant only for <code>TIMESTAMP WITH LOCAL TIME ZONE</code> columns. Oracle recommends that you set the database time zone to UTC (0:00) to avoid data conversion and improve performance when data is transferred among databases. This is especially important for distributed databases, replication, and exporting and importing.</p>
</div>
<p>You can change the database time zone by using the <code>SET TIME_ZONE</code> clause of the <code>ALTER DATABASE</code> statement. For example:</p>
<pre dir="ltr">ALTER DATABASE SET TIME_ZONE=&#39;Europe/London&#39;;
ALTER DATABASE SET TIME_ZONE=&#39;-05:00&#39;;
</pre>
<p>The <code>ALTER DATABASE SET TIME_ZONE</code> statement returns an error if the database contains a table with a <code>TIMESTAMP WITH LOCAL TIME ZONE</code> column and the column contains data.</p>
<p>The change does not take effect until the database has been shut down and restarted.</p>
<p>You can find out the database time zone by entering the following query:</p>
<pre dir="ltr">SELECT dbtimezone FROM DUAL;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="NLSPG263"></a>
<div class="props_rev_3"><a id="GUID-578B5988-31E2-4D0F-ACEA-95C827F6012B"></a>
<h2 id="NLSPG-GUID-578B5988-31E2-4D0F-ACEA-95C827F6012B" class="sect2">Setting the Session Time Zone</h2>
<div>
<div class="section">
<p>You can set the default <a id="d33472e6343" class="indexterm-anchor"></a><a id="d33472e6345" class="indexterm-anchor"></a>session time zone with the <code>ORA_SDTZ</code> environment variable. When users retrieve <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data, Oracle Database returns it in the users&#39; session time zone. The session time zone also takes effect when a <code>TIMESTAMP</code> value is converted to the <code>TIMESTAMP WITH TIME ZONE</code> or <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type.</p>
<div class="infobox-note" id="GUID-578B5988-31E2-4D0F-ACEA-95C827F6012B__GUID-9D09C194-DF98-49F9-A141-B5CECAA2D65B">
<p class="notep1">Note:</p>
<p>Setting the session time zone does not affect the value returned by the <code>SYSDATE</code> and <code>SYSTIMESTAMP</code> SQL function. <code>SYSDATE</code> returns the date and time of the operating system on which the database resides, taking into account the time zone of the database server&#39;s operating system that was in effect when the database was started.</p>
</div>
<p>The <code>ORA_SDTZ</code> environment variable can be set to the following values:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Operating system local time zone (<code>&#39;OS_TZ&#39;</code>)</p>
</li>
<li>
<p>Database time zone (<code>&#39;DB_TZ&#39;</code>)</p>
</li>
<li>
<p>Absolute offset from UTC (for example, <code>&#39;-05:00&#39;</code>)</p>
</li>
<li>
<p>Time zone region name (for example, <code>&#39;Europe/London&#39;</code>)</p>
</li>
</ul>
<p>To set <code>ORA_SDTZ</code>, use statements similar to one of the following in a UNIX environment (C shell):</p>
<pre dir="ltr">% setenv ORA_SDTZ &#39;OS_TZ&#39;
% setenv ORA_SDTZ &#39;DB_TZ&#39;
% setenv ORA_SDTZ &#39;Europe/London&#39;
% setenv ORA_SDTZ &#39;-05:00&#39;
</pre>
<p>When setting the <code>ORA_SDTZ</code> variable in a Microsoft Windows environment -- in the Registry, among system environment variables, or in a command prompt window -- do not enclose the time zone value in quotes.</p>
<p>You can change the time zone for a specific SQL session with the <code>SET TIME_ZONE</code> clause of the <code>ALTER SESSION</code> statement.</p>
<p><code>TIME_ZONE</code> can be set to the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p>Default local time zone when the session was started (<code>local</code>)</p>
</li>
<li>
<p>Database time zone (<code>dbtimezone</code>)</p>
</li>
<li>
<p>Absolute offset from UTC (for example, <code>&#39;+10:00&#39;</code>)</p>
</li>
<li>
<p>Time zone region name (for example, <code>&#39;Asia/Hong_Kong&#39;</code>)</p>
</li>
</ul>
<p>Use <code>ALTER SESSION</code> statements similar to the following:</p>
<pre dir="ltr">ALTER SESSION SET TIME_ZONE=local;
ALTER SESSION SET TIME_ZONE=dbtimezone;
ALTER SESSION SET TIME_ZONE=&#39;Asia/Hong_Kong&#39;;
ALTER SESSION SET TIME_ZONE=&#39;+10:00&#39;;
</pre>
<p>You can find out the current session time zone by entering the following query:</p>
<pre dir="ltr">SELECT sessiontimezone FROM DUAL;
</pre></div>
<!-- class="section" --></div>
</div>
<a id="NLSPG764"></a><a id="NLSPG264"></a>
<div class="props_rev_3"><a id="GUID-D8C7A7EB-A507-42A2-9B10-5301E822A7F2"></a>
<h2 id="NLSPG-GUID-D8C7A7EB-A507-42A2-9B10-5301E822A7F2" class="sect2">Converting Time Zones With the AT TIME ZONE Clause</h2>
<div>
<div class="section">
<p>A datetime SQL expression can be one of the following:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>A datetime column</p>
</li>
<li>
<p>A compound expression that yields a datetime value</p>
</li>
</ul>
<p>A datetime expression can include an <code>AT LOCAL</code> clause or an <code>AT TIME ZONE</code> clause. If you include an <code>AT LOCAL</code> clause, then the result is returned in the current session time zone. If you include the <code>AT TIME ZONE</code> clause, then use one of the following settings with the clause:</p>
<ul style="list-style-type: disc;">
<li>
<p>Time zone offset: The string &#39;<code>(+|-)HH:MM&#39;</code> specifies a time zone as an offset from UTC. For example, <code>&#39;-07:00&#39;</code> specifies the time zone that is 7 hours behind UTC. For example, if the UTC time is 11:00 a.m., then the time in the <code>&#39;-07:00&#39;</code> time zone is 4:00 a.m.</p>
</li>
<li>
<p><code>DBTIMEZONE</code>: Oracle Database uses the database time zone established (explicitly or by default) during database creation.</p>
</li>
<li>
<p><code>SESSIONTIMEZONE</code>: Oracle Database uses the session time zone established by default or in the most recent <code>ALTER SESSION</code> statement.</p>
</li>
<li>
<p>Time zone region name: Oracle Database returns the value in the time zone indicated by the time zone region name. For example, you can specify <code>Asia/Hong_Kong</code>.</p>
</li>
<li>
<p>An expression: If an expression returns a character string with a valid time zone format, then Oracle Database returns the input in that time zone. Otherwise, Oracle Database returns an error.</p>
</li>
</ul>
<p>The following example converts the <a id="d33472e6604" class="indexterm-anchor"></a><a id="d33472e6606" class="indexterm-anchor"></a>datetime value in the <code>America/New_York</code> time zone to the datetime value in the <code>America/Los_Angeles</code> time zone.</p>
<div class="infoboxnotealso" id="GUID-D8C7A7EB-A507-42A2-9B10-5301E822A7F2__GUID-0F10BB3E-4A19-47A9-AC60-409E189A071F">
<p class="notep1">See Also:</p>
<p><a class="olink SQLRF00644" target="_blank" href="../SQLRF/functions077.htm#SQLRF00644"><span class="italic">Oracle Database SQL Language Reference</span></a></p>
</div>
</div>
<!-- class="section" -->
<div class="example" id="GUID-D8C7A7EB-A507-42A2-9B10-5301E822A7F2__GUID-45A0F380-458B-4692-8955-C120D50B5E5E">
<p class="titleinexample">Example 4-5 Converting a Datetime Value to Another Time Zone</p>
<pre dir="ltr">SELECT FROM_TZ(CAST(TO_DATE(&#39;1999-12-01 11:00:00&#39;,
     &#39;YYYY-MM-DD HH:MI:SS&#39;) AS TIMESTAMP), &#39;America/New_York&#39;)
     AT TIME ZONE &#39;America/Los_Angeles&#39; &#34;West Coast Time&#34;
FROM DUAL;

West Coast Time
----------------------------------------------------------
01-DEC-99 08.00.00.000000 AM AMERICA/LOS_ANGELES
</pre></div>
<!-- class="example" --></div>
</div>
<a id="NLSPG265"></a>
<div class="props_rev_3"><a id="GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC"></a>
<h2 id="NLSPG-GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC" class="sect2">Support for Daylight Saving Time</h2>
<div>
<p>Oracle Database automatically determines whether <a id="d33472e6703" class="indexterm-anchor"></a>Daylight Saving Time is in effect for a specified time zone and returns the corresponding local time. Normally, date/time values are sufficient to allow Oracle Database to determine whether Daylight Saving Time is in effect for a specified time zone. The periods when Daylight Saving Time begins or ends are boundary cases. For example, in the Eastern region of the United States, the time changes from 01:59:59 a.m. to 3:00:00 a.m. when Daylight Saving Time goes into effect. The interval between 02:00:00 and 02:59:59 a.m. does not exist. Values in that interval are invalid. When Daylight Saving Time ends, the time changes from 02:00:00 a.m. to 01:00:01 a.m. The interval between 01:00:01 and 02:00:00 a.m. is repeated. Values from that interval are ambiguous because they occur twice.</p>
<p>To resolve these boundary cases, Oracle Database uses the <code>TZR</code> and <code>TZD</code> format elements. <code>TZR</code> represents the time zone region in datetime input strings. Examples are &#39;<code>Australia/North</code>&#39;, &#39;<code>UTC</code>&#39;, and &#39;<code>Singapore</code>&#39;. <code>TZD</code> represents an abbreviated form of the time zone region with Daylight Saving Time information. Examples are &#39;<code>PST</code>&#39; for U. S. Pacific Standard Time and &#39;<code>PDT</code>&#39; for U. S. Pacific Daylight Time. To see a list of valid values for the <code>TZR</code> and <code>TZD</code> format elements, query the <code>TZNAME</code> and <code>TZABBREV</code> columns of the <code>V$TIMEZONE_NAMES</code> dynamic performance view.</p>
<div class="infoboxnotealso" id="GUID-E5171DEF-74D7-482A-B4E9-1EE3403E18BC__GUID-70CF630E-DCB5-47EF-8466-B21E94C92B8D">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink SQLRF53052" target="_blank" href="../SQLRF/statements_2015.htm#SQLRF53052"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information regarding the session parameter <code>ERROR_ON_OVERLAP_TIME</code></p>
</li>
<li>
<p><span class="q">&#34;<a href="applocaledata.htm#GUID-21D14370-A707-4482-A3FE-9277263F292A">Time Zone Region Names</a>&#34;</span> for a list of valid time zones</p>
</li>
</ul>
</div>
</div>
<a id="NLSPG765"></a><a id="NLSPG766"></a><a id="NLSPG767"></a><a id="NLSPG266"></a>
<div class="props_rev_3"><a id="GUID-C874556E-F66E-4A35-A0C8-28C527673451"></a>
<h3 id="NLSPG-GUID-C874556E-F66E-4A35-A0C8-28C527673451" class="sect3">Examples: The Effect of Daylight Saving Time on Datetime Calculations</h3>
<div>
<p>The <code>TIMESTAMP</code> data type does not accept time zone values and does not calculate Daylight Saving Time.</p>
<p>The <code>TIMESTAMP WITH TIME ZONE</code> and <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data types have the following behavior:</p>
<ul style="list-style-type: disc;">
<li>
<p>If a time zone region is associated with the datetime value, then the database server knows the Daylight Saving Time rules for the region and uses the rules in calculations.</p>
</li>
<li>
<p>Daylight Saving Time is not calculated for regions that do not use Daylight Saving Time.</p>
</li>
</ul>
<p>The rest of this section contains examples that use datetime data types. The examples use the <code>global_orders</code> table. It contains the <code>orderdate1</code> column of <code>TIMESTAMP</code> data type and the <code>orderdate2</code> column of <code>TIMESTAMP WITH TIME ZONE</code> data type. The <code>global_orders</code> table is created as follows:</p>
<pre dir="ltr">CREATE TABLE global_orders ( orderdate1 TIMESTAMP(0),
                      orderdate2 TIMESTAMP(0) WITH TIME ZONE);
INSERT INTO global_orders VALUES ( &#39;28-OCT-00 11:24:54 PM&#39;,
                            &#39;28-OCT-00 11:24:54 PM America/New_York&#39;);
</pre>
<div class="infobox-note" id="GUID-C874556E-F66E-4A35-A0C8-28C527673451__GUID-24AC5578-4BC5-4553-BEC6-1794AC62634E">
<p class="notep1">Note:</p>
<p>If you have created a <code>global_orders</code> table for the previous examples, then drop the <code>global_orders</code> table before you try <a href="ch4datetime.htm#GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006829">Example 4-7</a> through <a href="ch4datetime.htm#GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006863">Example 4-8</a>.</p>
</div>
<div class="example" id="GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006793">
<p class="titleinexample">Example 4-6 Comparing Daylight Saving Time Calculations Using TIMESTAMP WITH TIME ZONE and TIMESTAMP</p>
<pre dir="ltr">SELECT orderdate1 + INTERVAL &#39;8&#39; HOUR, orderdate2 + INTERVAL &#39;8&#39; HOUR 
       FROM global_orders;
</pre>
<p>The following output results:</p>
<pre dir="ltr">ORDERDATE1+INTERVAL&#39;8&#39;HOUR      ORDERDATE2+INTERVAL&#39;8&#39;HOUR
--------------------------      --------------------------
29-OCT-00 07.24.54.000000 AM    29-OCT-00 06.24.54.000000 AM AMERICA/NEW_YORK
</pre>
<p>This example shows the effect of adding 8 hours to the columns. The time period includes a Daylight Saving Time boundary (a change from Daylight Saving Time to standard time). The <code>orderdate1</code> column is of <code>TIMESTAMP</code> data type, which does not use Daylight Saving Time information and thus does not adjust for the change that took place in the 8-hour interval. The <code>TIMESTAMP WITH TIME ZONE</code> data type does adjust for the change, so the <code>orderdate2</code> column shows the time as one hour earlier than the time shown in the <code>orderdate1</code> column.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006829">
<p class="titleinexample">Example 4-7 Comparing Daylight Saving Time Calculations Using TIMESTAMP WITH LOCAL TIME ZONE and TIMESTAMP</p>
<p>The <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type uses the value of <code>TIME_ZONE</code> that is set for the session environment. The following statements set the value of the <code>TIME_ZONE</code> session parameter and create a <code>global_orders</code> table. The <code>global_orders</code> table has one column of <code>TIMESTAMP</code> data type and one column of <code>TIMESTAMP WITH LOCAL TIME ZONE</code> data type.</p>
<pre dir="ltr">ALTER SESSION SET TIME_ZONE=&#39;America/New_York&#39;;
CREATE TABLE global_orders ( orderdate1 TIMESTAMP(0),
                             orderdate2 TIMESTAMP(0) WITH LOCAL TIME ZONE );
INSERT INTO global_orders VALUES ( &#39;28-OCT-00 11:24:54 PM&#39;,
                                   &#39;28-OCT-00 11:24:54 PM&#39; );
</pre>
<p>Add 8 hours to both columns.</p>
<pre dir="ltr">SELECT orderdate1 + INTERVAL &#39;8&#39; HOUR, orderdate2 + INTERVAL &#39;8&#39; HOUR 
FROM global_orders;
</pre>
<p>Because a time zone region is associated with the datetime value for <code>orderdate2</code>, the Oracle Database server uses the Daylight Saving Time rules for the region. Thus the output is the same as in <a href="ch4datetime.htm#GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006793">Example 4-6</a>. There is a one-hour difference between the two calculations because Daylight Saving Time is not calculated for the <code>TIMESTAMP</code> data type, and the calculation crosses a Daylight Saving Time boundary.</p>
</div>
<!-- class="example" -->
<div class="example" id="GUID-C874556E-F66E-4A35-A0C8-28C527673451__i1006863">
<p class="titleinexample">Example 4-8 Daylight Saving Time Is Not Calculated for Regions That Do Not Use Daylight Saving Time</p>
<p>Set the time zone region to UTC. UTC does not use Daylight Saving Time.</p>
<pre dir="ltr">ALTER SESSION SET TIME_ZONE=&#39;UTC&#39;;
</pre>
<p>Truncate the <code>global_orders</code> table.</p>
<pre dir="ltr">TRUNCATE TABLE global_orders;
</pre>
<p>Insert values into the <code>global_orders</code> table.</p>
<pre dir="ltr">INSERT INTO global_orders VALUES ( &#39;28-OCT-00 11:24:54 PM&#39;,
                                 TIMESTAMP &#39;2000-10-28 23:24:54 &#39; );
</pre>
<p>Add 8 hours to the columns.</p>
<pre dir="ltr">SELECT orderdate1 + INTERVAL &#39;8&#39; HOUR, orderdate2 + INTERVAL &#39;8&#39; HOUR 
FROM global_orders;
</pre>
<p>The following output results.</p>
<pre dir="ltr">ORDERDATE1+INTERVAL&#39;8&#39;HOUR                 ORDERDATE2+INTERVAL&#39;8&#39;HOUR
--------------------------                 ---------------------------
29-OCT-00 07.24.54.000000000 AM            29-OCT-00 07.24.54.000000000 AM UTC
</pre>
<p>The times are the same because Daylight Saving Time is not calculated for the UTC time zone region.</p>
</div>
<!-- class="example" --></div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2367">
<tr>
<td class="cellalignment2374">
<table class="cellalignment2372">
<tr>
<td class="cellalignment2371"><a href="ch3globenv.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2371"><a href="ch5lingsort.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2376">
<table class="cellalignment2370">
<tr>
<td class="cellalignment2371"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2371"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2371"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2371"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2371"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2371"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>