<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86739"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/High%20Availability%20Network%20File%20Storage%20for%20Oracle%20Grid%20Infrastructure"></a><title>High Availability Network File Storage for Oracle Grid Infrastructure</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-B342F29C-20E9-4B10-AC41-BA0AB8D902DD.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-B7A61F3B-C22A-4021-A846-F5EA749E79FF.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E"></a> <span id="PAGE" style="display:none;">404/612</span> <!-- End Header -->
<a id="OSTMG95489"></a>
<h1 id="OSTMG-GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E" class="sect1">High Availability Network File Storage for Oracle Grid Infrastructure</h1>
<div>
<p><a id="d111994e130" class="indexterm-anchor"></a><a id="d111994e134" class="indexterm-anchor"></a>High Availability Network File Storage (NFS) for Oracle Grid Infrastructure provides uninterrupted service of NFS V2/V3/V4 exported paths by exposing NFS exports on Highly Available Virtual IPs (HAVIP) and using Oracle Clusterware agents to ensure that the HAVIPs and NFS exports are always online. While base NFS supports file locking, HANFS does not support NFS file locking.</p>
<div class="infobox-note" id="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E__GUID-7FF8433E-F662-4D63-BA3F-8C04FCACC128">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d111994e144" class="indexterm-anchor"></a>This functionality relies on a working NFS server configuration available on the host computer. You must configure the NFS server before attempting to use the Oracle ACFS NFS export functionality.</p>
</li>
<li>
<p>This functionality is not available on Windows.</p>
</li>
<li>
<p>This functionality is not supported in Oracle Restart configurations.</p>
</li>
<li>
<p>The HAVIP cannot be started until at least one file system export resource has been created for it.</p>
</li>
</ul>
</div>
<p><a id="d111994e159" class="indexterm-anchor"></a>To set up High Availability NFS for Oracle Grid Infrastructure, perform the following steps:</p>
<ol>
<li>
<p>Add and register a new HAVIP resource.</p>
<p>For example:</p>
<pre dir="ltr"># srvctl add havip -id <span class="italic">hrexports</span> -address <span class="italic">my_havip_name</span> 
</pre>
<p>In the example, <span class="italic"><code class="codeph">my_havip_name</code></span> is mapped in the domain name server (DNS) to the VIP address and is used by the client systems when mounting the file system.</p>
<p>The initial processing of <code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">havip</code> ensures that:</p>
<ul style="list-style-type: disc;">
<li>
<p>The address being used is static, not dynamic</p>
</li>
<li>
<p>Any DNS names resolve to only one host, not round-robin multiple DNS resolutions</p>
</li>
<li>
<p>The network resource and provided IP address and resolved name are in the same subnet</p>
</li>
<li>
<p>The name is not in use</p>
</li>
</ul>
<p>SRVCTL creates the appropriate HAVIP name using the <span class="italic"><code class="codeph">id</code></span>, ensuring it is unique. As a final validation step, SRVCTL ensures that the <span class="italic"><code class="codeph">network</code></span> resource (if provided) of <code class="codeph">ora.net#.network</code> exists. After this step, SRVCTL adds a new <code class="codeph">havip</code> of type <code class="codeph">ora.havip.type</code> with the name of <code class="codeph">ora.</code><span class="italic"><code class="codeph">id</code></span><code class="codeph">.havip</code>. In this example, the name is <code class="codeph">ora.</code><span class="italic"><code class="codeph">hrexports</code></span><code class="codeph">.havip</code>.</p>
<p>Next SRVCTL modifies HAVIP start dependencies, such as <code class="codeph">active</code> <code class="codeph">dispersion</code>; sets the stop dependencies; and ensures the <span class="italic"><code class="codeph">description</code></span> attribute (if provided) is appropriately set.</p>
</li>
<li>
<p>Create a shared Oracle ACFS file system.</p>
<p>High Availability NFS for Oracle Grid Infrastructure operates only with Oracle ACFS file systems configured for clusterwide accessibility and does not support Oracle ACFS file systems configured for access on particular subsets of cluster nodes. High Availability NFS is not supported with non-Oracle ACFS file systems.</p>
<p>For information on creating an Oracle ACFS file system, refer to <span class="q">&#34;<a href="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268.htm">Creating an Oracle ACFS File System</a>&#34;</span>.</p>
</li>
<li>
<p>Register the Oracle ACFS file system.</p>
<p>For example:</p>
<pre dir="ltr">$ srvctl add filesystem -device /dev/asm/d1volume1-295 -volume VOLUME1 \
  -diskgroup HR_DATA -mountpath /oracle/cluster1/acfs1
</pre>
<div class="infoboxnotealso" id="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E__GUID-08D89FA3-00B9-4533-9913-668ED9B5B922">
<p class="notep1">See Also:</p>
<p><a class="olink RACAD7920" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=RACAD7920"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about the <code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code> command</p>
</div>
</li>
<li>
<p>Create an Oracle ACFS file system export resource.</p>
<p>For example:</p>
<pre dir="ltr"># srvctl add exportfs -id hrexports -path /oracle/cluster1/acfs1 \
  -name hrexport1
</pre>
<p>After the file system export resource has been created, then you can start the HAVIP created in step 1 to export the file system using the <code class="codeph">srvctl</code> <code class="codeph">start</code> <code class="codeph">havip</code> command.</p>
<p>The NFS mount option FSID is added to any export options, in the range of one billion or higher to minimize potential collisions with other FSIDs that are set on the server. This FSID option provides for reliable fail over between nodes and allows the usage of snapshot mounting.</p>
<p>The default mount and export options for configured exports are the defaults for the NFS server.</p>
<p>Relative paths that are fully-qualified are converted to absolute paths. Relative paths that are not fully-qualified are not accepted as an export path.</p>
<p>HAVIPs attempts to find the best server to run on based on available file systems and other running HAVIPs, but this dispersion only occurs during CSS membership change events, such as a node joining or leaving the cluster.</p>
<div class="infobox-note" id="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E__GUID-6AC48B9F-CDC5-41CF-A0E0-ACC2A02FFF0E">
<p class="notep1">Note:</p>
<p>It is not recommended to start and stop exports individually; this functionality should be provided through the start and stop operations of HAVIP.</p>
<p>When HAVIP is not running, exports can exist on different nodes. After the associated HAVIP is started, the exports gather on a single node.</p>
<p>Clients that are using an export that is stopped while HAVIP is running raise the NFS error <code class="codeph">estale</code>, and must dismount and remount the file system.</p>
</div>
</li>
</ol>
<div class="infoboxnotealso" id="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E__GUID-F20963CD-EE7E-4C81-B8F5-B0E86F30559E">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink RACAD005" target="_blank" href="../RACAD/GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D.htm#RACAD005"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about SRVCTL commands</p>
</li>
<li>
<p><a class="olink CWADD1111" target="_blank" href="../CWADD/GUID-58F85575-7D88-4D45-B097-6274FBBBB646.htm#CWADD1111"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about Oracle Clusterware resources</p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-B342F29C-20E9-4B10-AC41-BA0AB8D902DD.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-B7A61F3B-C22A-4021-A846-F5EA749E79FF.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>