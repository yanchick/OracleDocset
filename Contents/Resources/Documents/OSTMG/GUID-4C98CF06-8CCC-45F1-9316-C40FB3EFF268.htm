<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86736"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Creating%20an%20Oracle%20ACFS%20File%20System"></a><title>Creating an Oracle ACFS File System</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-14BA3BA5-088D-4395-A22F-43F84006649B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268"></a> <span id="PAGE" style="display:none;">471/612</span> <!-- End Header -->
<a id="OSTMG94787"></a>
<h1 id="OSTMG-GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" class="sect1">Creating an Oracle ACFS File System</h1>
<div>
<div class="section">
<p><a id="d127843e131" class="indexterm-anchor"></a>To create and verify a file system, perform the following steps:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Create an Oracle ADVM volume in a mounted disk group with the ASMCMD <code class="codeph">volcreate</code> command.</span>
<div>
<p><a id="d127843e145" class="indexterm-anchor"></a>The compatibility parameters <code class="codeph">COMPATIBLE.ASM</code> and <code class="codeph">COMPATIBLE.ADVM</code> must be set to <code class="codeph">11.2</code> or higher for the disk group to contain an Oracle ADVM volume. To use Oracle ACFS encryption, replication, security, or tagging, the disk group on which the volume is created for the file system must have compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.2</code> or higher. See <span class="q">&#34;<a href="GUID-AE540604-92D9-4CFE-A40E-BF4486163772.htm#GUID-AE540604-92D9-4CFE-A40E-BF4486163772">Disk Group Compatibility Attributes</a>&#34;</span>.</p>
<p>Start ASMCMD connected to the Oracle ASM instance. You must be a user in the OSASM operating system group. See <span class="q">&#34;<a href="GUID-7396FD18-628B-4026-AA55-79C6D6205EAE.htm">About Privileges for Oracle ASM</a>&#34;</span>.</p>
<p>When configuring Oracle ADVM volume devices within a disk group, Oracle recommends assigning the Oracle Grid Infrastructure user and Oracle ASM administrator roles to users who have root privileges.</p>
<p><a id="d127843e184" class="indexterm-anchor"></a><a id="d127843e188" class="indexterm-anchor"></a>To create a volume:</p>
<pre dir="ltr">ASMCMD [+] &gt; volcreate -G data -s 10G volume1
</pre>
<p>When creating an Oracle ADVM volume, a volume device name is created that includes a unique Oracle ADVM persistent disk group number. The volume device file functions in the same manner as any other disk or logical volume to mount file systems or for applications to use directly.</p>
<p>The format of the volume name is platform-specific. For information about the syntax of the <code class="codeph">volcreate</code> command, see <span class="q">&#34;<a href="GUID-FA76B787-7D01-4988-BC8F-2AD8798602A6.htm">ASMCMD Volume Management Commands</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Determine the device name of the volume that was created.</span>
<div>
<p><a id="d127843e212" class="indexterm-anchor"></a><a id="d127843e216" class="indexterm-anchor"></a>You can determine the volume device name with the ASMCMD <code class="codeph">volinfo</code> command or from the <code class="codeph">VOLUME_DEVICE</code> column in the <code class="codeph">V$ASM_VOLUME</code> view.</p>
<p>For example:</p>
<pre dir="ltr">ASMCMD [+] &gt; volinfo -G data volume1
Diskgroup Name: DATA

         Volume Name: VOLUME1
         Volume Device: /dev/asm/volume1-123
         State: ENABLED
     ... 

SQL&gt; SELECT volume_name, volume_device FROM V$ASM_VOLUME 
     WHERE volume_name =&#39;VOLUME1&#39;;

VOLUME_NAME        VOLUME_DEVICE
-----------------  --------------------------------------
VOLUME1            /dev/asm/volume1-123
</pre>
<p>For information about the <code class="codeph">volinfo</code> command, see <a href="GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF.htm">Managing Oracle ADVM with ASMCMD</a> .</p>
<div class="infoboxnotealso" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-FCC052BA-377E-47E5-8641-9F05EFF9E50C">
<p class="notep1">See Also:</p>
<p><a class="olink REFRN30625" target="_blank" href="../REFRN/GUID-6005A792-228F-44C2-885C-A1F02CA558F6.htm#REFRN30625"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">V$ASM_VOLUME</code> view</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Create a file system with the Oracle ACFS <code class="codeph">mkfs</code> command.</span>
<div>
<p><a id="d127843e261" class="indexterm-anchor"></a><a id="d127843e265" class="indexterm-anchor"></a>Create a file system using an existing volume device.</p>
<p>For example:</p>
<pre dir="ltr">$ /sbin/mkfs -t acfs /dev/asm/volume1-123

mkfs.acfs: version                   = 11.2.0.1.0.0
mkfs.acfs: on-disk version           = 39.0
mkfs.acfs: volume                    = /dev/asm/volume1-123
mkfs.acfs: volume size               = 10737418240
mkfs.acfs: Format complete.
</pre>
<p>See <span class="q">&#34;<a href="GUID-458DC5C6-2218-4C6F-866B-1B9DAB7C278D.htm">mkfs</a>&#34;</span> (Linux environments) or <span class="q">&#34;<a href="GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB.htm">acfsformat</a>&#34;</span> (Windows). The <code class="codeph">root</code> privilege is not required. The ownership of the volume device file dictates who can run this command.</p>
</div>
</li>
<li class="stepexpand"><span>Optionally register the file system with the <code class="codeph">acfsutil</code> <code class="codeph">registry</code> command.</span>
<div>
<p>For example:</p>
<pre dir="ltr">$ /sbin/acfsutil registry -a /dev/asm/volume1-123 /acfsmounts/acfs1

acfsutil registry: mount point /acfsmounts/acfs1 successfully added 
  to Oracle Registry
</pre>
<p>See <span class="q">&#34;<a href="GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6.htm">acfsutil registry</a>&#34;</span>. The <code class="codeph">root</code> or <code class="codeph">asmadmin</code> privileges are required to modify the registry. The Windows <code class="codeph">Administrator</code> privilege is equivalent to the <code class="codeph">root</code> privilege on Linux.</p>
<p><a id="d127843e321" class="indexterm-anchor"></a><a id="d127843e325" class="indexterm-anchor"></a>Registering a file system is optional. After registering an Oracle ACFS file system in the cluster mount registry, the file system is mounted automatically on each cluster member listed in the registry entry during the next registry check action. This automatic process runs every 30 seconds and eliminates the requirement to manually mount the file system on each member of the cluster.</p>
<p>Registering an Oracle ACFS file system also causes the file system to be mounted automatically whenever Oracle Clusterware or the system is restarted.</p>
<div class="infobox-note" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-EF7EBD40-D36E-4B66-ABBF-0E67033B77EC">
<p class="notep1">Note:</p>
<p>In an Oracle Grid Infrastructure Clusterware configuration, you can run <code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code> to automount a file system; this method is required when an Oracle Database home is installed on an Oracle ACFS file system. However, that file system should not be added to the registry. For information about Server Control Utility (SRVCTL), see <a class="olink RACAD005" target="_blank" href="../RACAD/GUID-3ED4DBCE-A148-462B-8A79-534A3F0D6E7D.htm#RACAD005"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a>.</p>
</div>
<p>For more information, see <span class="q">&#34;<a href="GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B.htm">About the Oracle ACFS Mount Registry</a>&#34;</span>.</p>
<div class="infobox-note" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-BAFFD84B-70C8-44E5-B9F3-3CB0E834990B">
<p class="notep1">Note:</p>
<p>Oracle ACFS registration (<code class="codeph">acfsutil</code> <code class="codeph">registry</code>) is not supported in an Oracle Restart (standalone) configuration, which is a single-instance (non-clustered) environment.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Mount the file system with the Oracle ACFS <code class="codeph">mount</code> command. You can mount a file system before or after registering the file system. If the file system has been registered, you can wait for the file system to be mounted automatically.</span>
<div>
<p><a id="d127843e373" class="indexterm-anchor"></a><a id="d127843e377" class="indexterm-anchor"></a>For example:</p>
<pre dir="ltr"># /bin/mount -t acfs /dev/asm/volume1-123 /acfsmounts/acfs1
</pre>
<p>See <span class="q">&#34;<a href="GUID-CF7314E2-D95E-45CF-9D1D-155C1AC39A1F.htm">mount</a>&#34;</span> (Linux environments) or <span class="q">&#34;<a href="GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D.htm">acfsmountvol</a>&#34;</span> (Windows). The <code class="codeph">root</code> privilege is required to run the <code class="codeph">mount</code> command and the Windows <code class="codeph">Administrator</code> privilege is required to run the <code class="codeph">acfsmountvol</code> command.</p>
<p>After the file system has been mounted, ensure that the permissions are set to allow access to the file system for the appropriate users. For example:</p>
<pre dir="ltr"># chown -R oracle:dba /acfsmounts/acfs1
</pre></div>
</li>
<li class="stepexpand"><span>Create a test file in the file system.</span>
<div>
<p>The user that creates the test file should be a user that is intended to access the file system. This test ensures that the appropriate user can write to the file system.</p>
<p>For example:</p>
<pre dir="ltr">$ echo &#34;Oracle ACFS File System&#34; &gt; /acfsmounts/acfs1/myfile
</pre></div>
</li>
<li class="stepexpand"><span>List the contents of the test file that was created in the file system.</span>
<div>
<p>For example:</p>
<pre dir="ltr">$ cat /acfsmounts/acfs1/myfile
Oracle ACFS File System
</pre></div>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-14BA3BA5-088D-4395-A22F-43F84006649B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>