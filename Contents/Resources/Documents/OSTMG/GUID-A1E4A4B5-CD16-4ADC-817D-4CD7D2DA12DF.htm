<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86938"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/acfsutil%20snap%20create"></a><title>acfsutil snap create</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="acfsutil snap create command"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-848A0E4D-1B4C-466D-9AAC-1F451EA57F96.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-CDB26CF4-DDE6-4465-83E7-87D5251045E0.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF"></a> <span id="PAGE" style="display:none;">576/612</span> <!-- End Header -->
<a id="OSTMG95240"></a><a id="OSTMG95241"></a><a id="OSTMG95242"></a><a id="OSTMG95243"></a><a id="OSTMG95244"></a><a id="OSTMG95597"></a><a id="OSTMG95239"></a>
<h1 id="OSTMG-GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF" class="sect1">acfsutil snap create</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a id="d179738e144" class="indexterm-anchor"></a><a id="d179738e148" class="indexterm-anchor"></a><a id="d179738e152" class="indexterm-anchor"></a><a id="d179738e156" class="indexterm-anchor"></a>Creates a read-only or read-write snapshot of an Oracle ACFS file system or an existing snapshot.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax and Description</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">acfsutil snap create -h
acfsutil snap create [-r|-w] [-p <span class="italic">parent_snapshot</span>] <span class="italic">snapshot</span> <span class="italic">mount_point</span>
</pre>
<p><code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> <code class="codeph">-h</code> displays help text and exits.</p>
<p><a href="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF.htm#GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABJGBFC" title="This table lists the options for the ofsutil snap create command, along with a description for each option">Table 16-98</a> contains the options available with the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> command.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABJGBFC">
<p class="titleintable">Table 16-98 Options for the acfsutil snap create command</p>
<table class="cellalignment1697" title="Options for the acfsutil snap create command" summary="This table lists the options for the ofsutil snap create command, along with a description for each option">
<thead>
<tr class="cellalignment1688">
<th class="cellalignment1698" id="d179738e213">Option</th>
<th class="cellalignment1699" id="d179738e216">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d179738e221" headers="d179738e213">
<p><code class="codeph">-r</code></p>
</td>
<td class="cellalignment1701" headers="d179738e221 d179738e216">
<p>Creates a read-only snapshot. This is the default setting.</p>
</td>
</tr>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d179738e229" headers="d179738e213">
<p><code class="codeph">-w</code></p>
</td>
<td class="cellalignment1701" headers="d179738e229 d179738e216">
<p>Creates a read-write snapshot.</p>
</td>
</tr>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d179738e237" headers="d179738e213">
<p><span class="italic"><code class="codeph">snapshot</code></span></p>
</td>
<td class="cellalignment1701" headers="d179738e237 d179738e216">
<p>Specifies a name for the snapshot. The name provided must be a valid directory name. The<code class="codeph">.ACFS/snaps</code> directory itself cannot be snapped.</p>
</td>
</tr>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d179738e249" headers="d179738e213">
<p><code class="codeph">-p</code> <span class="italic"><code class="codeph">parent_snapshot</code></span></p>
</td>
<td class="cellalignment1701" headers="d179738e249 d179738e216">
<p>Specifies the name of an existing snapshot image within the Oracle ACFS file system.</p>
</td>
</tr>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d179738e261" headers="d179738e213">
<p><span class="italic"><code class="codeph">mount_point</code></span></p>
</td>
<td class="cellalignment1701" headers="d179738e261 d179738e216">
<p>Specifies the directory where the file system is mounted.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p><code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> creates a read-only or read-write snapshot of the Oracle ACFS file system mounted on <span class="italic"><code class="codeph">mount_point</code></span> or creates a snapshot of an existing snapshot if the <code class="codeph">-p</code> option is specified. You can specify <code class="codeph">-r</code> for read-only or <code class="codeph">-w</code> for read-write; read-only is the default if neither <code class="codeph">-r</code> or <code class="codeph">-w</code> are specified.</p>
<p>The read-write snapshot enables the fast creation of an Oracle ACFS snapshot image that can be both read and written without impacting the state of the Oracle ACFS file system hosting the snapshot images. You can use the read-write functionality for testing new versions of application software or running test scenarios on production file data without modifying the original file system.</p>
<p>Snapshots are not separate file systems. The snapshot appears in the <code class="codeph">.ACFS/snaps/</code><span class="italic"><code class="codeph">snapshot</code></span> <a id="d179738e310" class="indexterm-anchor"></a><a id="d179738e314" class="indexterm-anchor"></a><a id="d179738e318" class="indexterm-anchor"></a><a id="d179738e322" class="indexterm-anchor"></a>directory and initially is a complete replica of the file system at the time the snapshot command was given. A read-only snapshot continues to preserve that initial point-in-time view. A read-write snapshot can be modified by updates written directly to the files located within the <code class="codeph">.ACFS/snaps/</code><span class="italic"><code class="codeph">snapshot</code></span> hierarchy.</p>
<p>A symbol link (symlink) file is a pointer to a path specified at the time that the symlink is created. For any existing symlink in the source of the <code class="codeph">afsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> command, a new link is made in the snapshot; however, the stored path to the symlink target is not modified during snap creation time. When an absolute path is used as the target of the link, the link target of the snapshot still refers to the absolute path, outside the newly-created snapshot namespace. Future modifications to the targeted file can occur through the snapshot symlink, not to a new target inside the snapshot namespace. The contents of the targeted file can also be changed outside of the snapshot. Because of this behavior, you should use relative path targets for all symlinks that are within the same file system.</p>
<p>Any user can access the snapshot directory by specifying the path name. However, the .<code class="codeph">ACFS</code> directory itself is hidden from directory listings of the root of the file system. This prevents recursive commands, such as <code class="codeph">rm</code> <code class="codeph">-rf</code> or <code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">set</code> <code class="codeph">-r</code>, from the root of the file system inadvertently operating on snapshot files.</p>
<p>Snapshots usually use very little storage initially as they share file system blocks with the original file system until a file changes.</p>
<p>Tools such as <code class="codeph">du</code> report the total disk space usage of the snapshotted files, which includes the storage shared with the original versions of the files. To determine the total space used for the snapshots, use the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code> or <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> command. See <span class="q">&#34;<a href="GUID-1D06D15C-A37F-4805-BD99-953B01B1CD08.htm">acfsutil info fs</a>&#34;</span>.</p>
<p>Oracle ACFS snapshots are immediately available for use after they are created. They are always online under the<code class="codeph">.ACFS/snaps</code> directory when the original file system is mounted. No separate command is needed to mount them.</p>
<p>The <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> operation fails if the cluster is in rolling migration.</p>
<p>Creation from an existing snapshot is not permitted if there are:</p>
<ul style="list-style-type: disc;">
<li>
<p>Any snapshots present in the file system that were created with the <code class="codeph">ADVM</code> compatibility set to less than 12.1</p>
</li>
<li>
<p>Any snapshots of the file system that were created after <code class="codeph">ADVM</code> compatibility was set to <code class="codeph">12.1</code> but while 11.2 snapshots existed</p>
</li>
<li>
<p>Any snapshot deletion cleanup operations still running in the background for the above conditions</p>
<p>You can display pending snapshot operations with the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code> command. For information, refer to <span class="q">&#34;<a href="GUID-519612AC-CFC1-4842-AEC1-CE271BF35051.htm">acfsutil snap info</a>&#34;</span>.</p>
</li>
</ul>
<p>Administrator privileges are required to use this command or you must be a member of the Oracle ASM administrator group.</p>
<p>For more information about Oracle ACFS snapshots, refer to <span class="q">&#34;<a href="GUID-5A3EF695-A795-4FEA-8BE2-AF657BD2238C.htm">About Oracle ACFS Snapshots</a>&#34;</span>. For information about the number of snapshots supported, refer to <span class="q">&#34;<a href="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9.htm#GUID-B95CD674-F7C7-47D1-9466-6A86B86B6BF5">Oracle ACFS Disk Space Usage</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a href="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF.htm#GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABIIJAC">Example 16-92</a> shows the use of the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> command to create snapshots on a Linux platform.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABIIJAC">
<p class="titleinexample">Example 16-92 Using the acfsutil snap create command on Linux</p>
<pre dir="ltr">$ acfsutil snap create -w midday_test1 /acfsmounts/critical_apps

$ acfsutil snap create -w midday_test2 /acfsmounts/critical_apps

$ /sbin/acfsutil snap create payroll_report1 /acfsmounts/critical_apps

$ /sbin/acfsutil snap create payroll_report2 /acfsmounts/critical_apps

$ ls /acfsmounts/critical_apps/.ACFS/snaps
midday_test1  midday_test2  payroll_report1  payroll_report2
</pre></div>
<!-- class="example" -->
<div class="section">
<p><a href="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF.htm#GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABGGCJA">Example 16-93</a> shows the use of the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">create</code> command to create snapshots on a Windows platform. This example shows the creation of a snapshot from an existing snapshot.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF__BABGGCJA">
<p class="titleinexample">Example 16-93 Using the acfsutil snap create command on Windows</p>
<pre dir="ltr">$ /sbin/acfsutil snap create /w snap_1 e:

$ /sbin/acfsutil snap create /w snap_1-1 /p snap_1 e:
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-848A0E4D-1B4C-466D-9AAC-1F451EA57F96.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-CDB26CF4-DDE6-4465-83E7-87D5251045E0.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>