<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86600"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Replicating%20Oracle%20ACFS%20File%20Systems"></a><title>Replicating Oracle ACFS File Systems</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-1C351316-3D71-4520-A412-95AE85F56453.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-13F8260D-7549-475E-A701-A12386FE7048"></a> <span id="PAGE" style="display:none;">477/612</span> <!-- End Header -->
<a id="OSTMG94793"></a>
<h1 id="OSTMG-GUID-13F8260D-7549-475E-A701-A12386FE7048" class="sect1">Replicating Oracle ACFS File Systems</h1>
<div>
<p><a id="d130331e130" class="indexterm-anchor"></a><a id="d130331e134" class="indexterm-anchor"></a>This section discusses the operations to manage replication on an Oracle ACFS file system on Linux.</p>
<p>The disk groups on which volumes are created for the primary and standby file systems must have compatibility attributes for <code class="codeph">ASM</code> and <code class="codeph">ADVM</code> set to <code class="codeph">11.2.0.3</code> or higher. For information about disk group compatibility, refer to <span class="q">&#34;<a href="GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34.htm">Disk Group Compatibility</a>&#34;</span>.</p>
<p>The steps to manage replication are:</p>
<ol>
<li>
<p><a id="d130331e160" class="indexterm-anchor"></a><a id="d130331e164" class="indexterm-anchor"></a>Determine the storage capacity necessary for replication on the sites hosting the primary and standby file systems. The primary file system must have a minimum size of 4 GB for each node that is mounting the file system. The standby file system must have a minimum size of 4 GB and should be sized appropriately for the amount of data being replicated and the space necessary for the replication logs sent from the primary file system.</p>
<p>Calculate the replication-related storage requirement for the primary file system, then use the same size requirement for the standby file system. If Oracle ACFS tagging is used to replicate only a subset of the files in the primary file system, then the size requirement for the standby file system is proportional to that subset of the primary file system.</p>
<p>Run the <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> command with the <code class="codeph">-s</code> <span class="italic"><code class="codeph">interval</code></span> option on the node where the primary file system is mounted to display the amount and rate of change to the primary file system for the node. The amount of change includes all user and metadata modifications to the primary file system. This amount approximates the size of replication logs that are generated when recording changes to the file system. Changes are stored in temporary files called replication logs which are kept in a special directory in the primary file system until they can be sent to the standby to be applied. After confirmation is received that the changes contained in a replication log have been successfully applied to the standby file system, the replication logs on the primary file system are deleted.</p>
<p>To approximate the extra storage capacity necessary for the replication logs, determine the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The time interval during which the site hosting the primary file system may experience network connectivity problems or slowdowns when accessing the site hosting the standby file system.</p>
</li>
<li>
<p>The time interval during which the site hosting the standby file system may be taken offline for maintenance.</p>
</li>
</ul>
<p>These time intervals are used in calculating the amount and rate of change in storage space. You must account for the time interval when the primary file system cannot send the replication logs over to the standby file system at its usual rate or when standby file systems are inaccessible while undergoing maintenance. The replication logs continue to accumulate on the site hosting the primary file system and may eventually cause that site to run out of space.</p>
<p>For the following scenario, assume <code class="codeph">t</code> = 60 minutes is the time interval in your environment that would adequately account for network problems or maintenance on site hosting the standby file system.</p>
<p>Run <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> <code class="codeph">-s</code> <code class="codeph">900</code> on the primary file system to collect the average rate of change over a 24 hour period with a 15 minute (900 seconds) interval. The <code class="codeph">t/4</code> (60/4=15) result is the value for the sampling interval. Do not exceed a value of <code class="codeph">t/2</code> for the time interval as you may miss some important peaks.</p>
<pre dir="ltr">$ /sbin/acfsutil info fs -s 900 /acfsmounts/repl_data
</pre>
<p>With the output, you can determine the average rate of change, the peak rate of change, and how long the peaks last. However, the command displays information only for the node on which the command is run. To collect the total amount of change in the file system the command must be run on every node that is modifying the file system. The maximum number of supported nodes is eight.</p>
<p>The following formula approximates the extra storage capacity needed:</p>
<pre dir="ltr">Extra storage capacity to hold replication logs = 
    (Number-nodes-on-primary * 1GB) + P
</pre>
<p>where <code class="codeph">P</code> is the peak amount of change generated across all nodes for time <code class="codeph">t</code> as reported by the <code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code> <code class="codeph">&ndash;s</code> output.</p>
<p>In the example, you must total the changes from four 15-minute intervals to find the total amount of change that could occur in 60 minutes. You may choose to use the single hour that generated the largest amount of change, or you could select the top four 15-minute intervals even if they did not occur together to prepare for the worst-case scenario.</p>
<p>Assume that you have four nodes modifying the primary file system, and that during the measured interval, the peak amount of change reported for the 60 minutes is approximately 20 GB for all nodes. Using the storage capacity formula, 24 GB of excess storage capacity on each site hosting the primary file system is required for storage of the replication logs.</p>
<pre dir="ltr">Extra storage capacity to hold replication logs = (4 * 1GB per node) + 
 20GB maximum change per hour = 24GB of extra storage capacity
</pre>
<p>Next, check that the network transfer rate is greater than or equal to the rate of change observed during the monitoring period. In the previous example, the peak of 20 GB of changed data per hour is equivalent to a peak rate of change of about 5.5 MB/sec. To keep up with this rate of change, you must ensure that the network can reliably transfer at least this amount of data per second without negatively impacting your existing network workloads.</p>
<p>To estimate your current actual network transfer rate, calculate the elapsed time required to FTP a 1 GB file from the primary file system to the intended standby file system during an interval when network usage is low. For example, if the 1 GB file transfers in 30 seconds, then your current FTP transfer rate is 33 MB per seconds (1000 MB/30 seconds = 33 MB per second). Because of various delays inherent in the transfers, for planning purposes you should reduce this measured FTP transfer rate by 20%, and then by an additional 5% per node.</p>
<p>In the previous example with 4 nodes, the FTP transfer rate used for planning is:</p>
<pre dir="ltr">33 MB/sec * (1 &ndash; (0.2) &ndash; (4 * 0.05)) = 33 * (0.6) = ~20MB/sec
</pre>
<p>Because the peak rate of change was only 5.5 MB/second, you can expect the network to be able to handle this additional workload in this example. However, if the network capacity is close to fully utilized, you might want to consider increasing network capacity before implementing replication for this file system and workload.</p>
<p>In addition, insure you have sufficient network capacity to allow replication to catch up after times when network problems prevent a primary file system from sending replication logs to the standby file system.</p>
<p>For more information, refer to <span class="q">&#34;<a href="GUID-1D06D15C-A37F-4805-BD99-953B01B1CD08.htm">acfsutil info fs</a>&#34;</span>.</p>
</li>
<li>
<p>Set up tags, user names, and service names.</p>
<p><a id="d130331e289" class="indexterm-anchor"></a><a id="d130331e293" class="indexterm-anchor"></a>When starting replication on an Oracle ACFS file system, first perform the following steps:</p>
<ul style="list-style-type: disc;">
<li>
<p>Determine the user name and password that the sites hosting the primary and standby file systems use to connect to the remote Oracle ASM instance as the Oracle ASM and DBA administrator. All nodes that have the file system mounted must support this user name and password. The user must have <code class="codeph">SYSASM</code> and <code class="codeph">SYSDBA</code> privileges. For example:</p>
<pre dir="ltr">SQL&gt; CREATE USER primary_admin IDENTIFIED BY primary_passwd;
SQL&gt; GRANT sysasm,sysdba TO primary_admin;
</pre>
<p><a id="d130331e311" class="indexterm-anchor"></a>Oracle wallets should be used to manage security credentials.</p>
<div class="infoboxnotealso" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-1ABF218A-116A-48E2-9595-9543C6D336A3">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink DBIMI160" target="_blank" href="../DBIMI/walet.htm#DBIMI160"><span class="italic">Oracle Database Enterprise User Security Administrator&#39;s Guide</span></a> for information about Oracle wallets</p>
</li>
<li>
<p><a class="olink ADLOB46075" target="_blank" href="../ADLOB/adlob_hierarch.htm#ADLOB46075"><span class="italic">Oracle Database SecureFiles and Large Objects Developer&#39;s Guide</span></a> for information about wallet management</p>
</li>
<li>
<p><a class="olink NETRF182" target="_blank" href="../NETRF/sqlnet.htm#NETRF182"><span class="italic">Oracle Database Net Services Reference</span></a> for information about wallet parameters in the <code class="codeph">SQLNET.ORA</code> file</p>
</li>
</ul>
</div>
</li>
<li>
<p>Determine a unique service name for the replicated file system.</p>
<p><a id="d130331e347" class="indexterm-anchor"></a>When both the primary and standby file systems are located in different clusters for disaster tolerance, then the service names for the primary and standby file systems can be the same. However, if the both file systems are mounted on the same node, such as a test configuration, then unique service names must be used for the primary and standby file systems. Using unique service names for the primary and standby file systems requires the use of the <code class="codeph">-c</code> option during replication initialization. Service names are limited to a maximum of 128 bytes.</p>
<div class="infobox-note" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-D44951A2-E52D-4D35-939B-BC58FEB54F5D">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must specify a service name other than +ASM because that service name is currently in use by the Oracle ASM instance.</p>
</li>
<li>
<p>You must specify a unique service name for each file system that you want to replicate when there are multiple replicated file systems on a node or cluster.</p>
</li>
</ul>
</div>
<p>Using this service name, create a net service alias on the sites hosting the primary and standby file system that connects to the remote site. This alias along with the user name and password are used as the connection string in the replication initialization commands.</p>
<p>For example, the following are examples of connect descriptors with net service aliases for the sites hosting the primary and standby file systems.</p>
<pre dir="ltr">primary_repl_site=(DESCRIPTION=
  (ADDRESS=(PROTOCOL=tcp)(HOST=primary1.example.com)(PORT=1521))
  (ADDRESS=(PROTOCOL=tcp)(HOST=primary2.example.com)(PORT=1521))
  (CONNECT_DATA=(SERVICE_NAME=primary_service)))

standby_repl_site=(DESCRIPTION=
  (ADDRESS=(PROTOCOL=tcp)(HOST=standby1.example.com)(PORT=1521))
  (CONNECT_DATA=(SERVICE_NAME=standby_service)))
</pre>
<p>If you want to perform replication using a single client access name (SCAN) VIP, you must update the <code class="codeph">REMOTE_LISTENER</code> initialization parameter in the Oracle ASM instance before initializing replication. You can update the parameter in the initialization file or with the <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> SQL statement.</p>
<p>For example:</p>
<pre dir="ltr">SQL&gt; ALTER SYSTEM SET remote_listener=&#39;SCAN_NAME:1521&#39; sid=&#39;*&#39; scope=both;
</pre>
<div class="infoboxnotealso" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-0B4AFB38-6FF0-4206-B8E5-BAB064F58CEF">
<p class="notep1">See Also:</p>
<p><a class="olink NETAG002" target="_blank" href="../NETAG/concepts.htm#NETAG002"><span class="italic">Oracle Database Net Services Administrator&#39;s Guide</span></a> for information about connect descriptors</p>
</div>
</li>
<li>
<p>Optionally set tags on directories and files to replicate only selected files in an Oracle ACFS file system. You can also add tags to files after replication has started. For information about the steps to tag files, refer to <span class="q">&#34;<a href="GUID-1C351316-3D71-4520-A412-95AE85F56453.htm">Tagging Oracle ACFS File Systems</a>&#34;</span>.</p>
</li>
</ul>
</li>
<li>
<p>Configure the site hosting the standby file system.</p>
<p><a id="d130331e404" class="indexterm-anchor"></a>Before replicating an Oracle ACFS file system, configure the site hosting the standby file system by performing the following procedures.</p>
<ul style="list-style-type: disc;">
<li>
<p>Create a new file system of adequate size to hold the replicated files and associated replication logs from the primary file system. For example: <code class="codeph">/standby/repl_data</code></p>
</li>
<li>
<p>Mount the file system on one node only.</p>
</li>
<li>
<p>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command. If this command is interrupted for any reason, the user must re-create the file system, mount it on one node only, and rerun the command. This command requires the following configuration information:</p>
<ul style="list-style-type: disc;">
<li>
<p>The connect string to be used to connect to the site hosting the primary file system. For example:</p>
<p><code class="codeph">/@primary_repl_site</code></p>
<p>The connect string searches in the user&#39;s wallet for the user name and password associated with the alias <code class="codeph">primary_repl_site</code>. The user must have <code class="codeph">SYSASM</code> and <code class="codeph">SYSDBA</code> privileges.</p>
</li>
<li>
<p>If the standby file system is using a different service name than the primary file system, then the use <code class="codeph">-c</code> option. This option specifies the service name for the standby file system. For example:</p>
<p><code class="codeph">standby_repl_service</code></p>
</li>
<li>
<p>The mount point of the standby file system. For example:</p>
<p><code class="codeph">/standby/repl_data</code></p>
</li>
</ul>
</li>
</ul>
<p>For example, run the following <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command on the site hosting the standby file system.</p>
<pre dir="ltr">$ /sbin/acfsutil repl init standby 
    -p /@primary_repl_site
    -c standby_repl_service /standby/repl_data
</pre>
<p>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code> command requires root or system administrator privileges to run.</p>
<p>For more information, refer to <span class="q">&#34;<a href="GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD.htm">acfsutil repl init</a>&#34;</span>.</p>
</li>
<li>
<p>Configure the site hosting the primary file system.</p>
<p><a id="d130331e507" class="indexterm-anchor"></a>After the standby file system has been set up, configure the site hosting the primary file system and start replication by performing the following procedures.</p>
<p>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> command. This command requires the following configuration information:</p>
<ul style="list-style-type: disc;">
<li>
<p>The connect string to be used to connect to the site hosting the standby file system. For example:</p>
<p><code class="codeph">/@standby_repl_site</code></p>
<p>The connect string searches in the user&#39;s wallet for the user name and password associated with the alias <code class="codeph">standby_repl_site</code>. The user must have <code class="codeph">SYSASM</code> and <code class="codeph">SYSDBA</code> privileges.</p>
</li>
<li>
<p>The mount point of the primary file system. For example: <code class="codeph">/acfsmounts/repl_data</code></p>
</li>
<li>
<p>If the primary file system is using a different service name than the standby file system, then use the <code class="codeph">-c</code> option. This option specifies the service name on the site hosting the primary file system. For example:</p>
<p><code class="codeph">primary_repl_service</code></p>
</li>
<li>
<p>If the mount point is different on the site hosting the standby file system than it is on the site hosting the primary file system, specify the mount point on the standby file system with the <code class="codeph">-m</code> <span class="italic"><code class="codeph">standby_mount_point</code></span> option. For example:</p>
<p><code class="codeph">-m /standby/repl_data</code></p>
</li>
</ul>
<p>For example, run the following <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> command on the site hosting the primary file system.</p>
<pre dir="ltr">$ /sbin/acfsutil repl init primary 
     -s /@standby_repl_site
     -m /standby/repl_data -c primary_repl_service 
     /acfsmounts/repl_data
</pre>
<p>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code> command requires root or system administrator privileges to run.</p>
<p>For more information, refer to <span class="q">&#34;<a href="GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD.htm">acfsutil repl init</a>&#34;</span>.</p>
</li>
<li>
<p>Monitor information about replication on the file system.</p>
<p><a id="d130331e612" class="indexterm-anchor"></a>The <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> command displays information about the state of the replication processing on the primary or standby file system.</p>
<p>For example, run the following <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> command on the site hosting the primary file system to display configuration information.</p>
<pre dir="ltr">$ /sbin/acfsutil repl info -c -v /acfsmounts/repl_data
</pre>
<p>You must have system administrator or Oracle ASM administrator privileges to run this command.</p>
<p>For information, refer to <span class="q">&#34;<a href="GUID-5242D6F8-462A-40A5-81DC-4599EB91C32C.htm">acfsutil repl info</a>&#34;</span>.</p>
</li>
<li>
<p>Manage replication background processes.</p>
<p><a id="d130331e652" class="indexterm-anchor"></a>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code> command to start, stop, or retrieve information about replication background processes.</p>
<p>For example, the following example displays information about the replication processes for the <code class="codeph">/acfsmounts/repl_data</code> file system.</p>
<pre dir="ltr">$ /sbin/acfsutil repl bg info /acfsmounts/repl_data
</pre>
<p>You must have system administrator or Oracle ASM administrator privileges to run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code> <code class="codeph">info</code> command.</p>
<p>For more information, refer to <span class="q">&#34;<a href="GUID-FCAF4630-2B5F-4F31-B977-7D14C112D643.htm">acfsutil repl bg</a>&#34;</span>.</p>
</li>
<li>
<p>Pause replication momentarily only if necessary.</p>
<p><a id="d130331e698" class="indexterm-anchor"></a>Run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">pause</code> to momentarily stop replication. You should run the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">resume</code> command soon as possible to resume replication.</p>
<p>For example, the following command pauses replication on the <code class="codeph">/acfsmounts/repl_data</code> file system.</p>
<pre dir="ltr">$ /sbin/acfsutil repl pause /acfsmounts/repl_data
</pre>
<p>The following command resumes replication on the <code class="codeph">/acfsmounts/repl_data</code> file system.</p>
<pre dir="ltr">$ /sbin/acfsutil repl resume /acfsmounts/repl_data
</pre>
<p>You must have system administrator or Oracle ASM administrator privileges to run these commands.</p>
<p>For more information, refer to <span class="q">&#34;<a href="GUID-77EB3E00-98F7-4AA8-94B4-1D3985634DF4.htm">acfsutil repl pause</a>&#34;</span> and <span class="q">&#34;<a href="GUID-BBD27CCA-4206-4418-B0CB-ACC5BD2475CE.htm">acfsutil repl resume</a>&#34;</span>.</p>
</li>
<li>
<p>Failing over to a standby or turning a standby file system into an active file system.</p>
<p>If the primary file system is gone, you can run the <code class="codeph">acfsutil</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> <span class="italic"><code class="codeph">mount_point</code></span> command to turn the standby file system into an active file system. If the primary file system still exists, you should terminate the primary first with <code class="codeph">acfsutil</code> <code class="codeph">terminate</code> <code class="codeph">primary</code> <span class="italic"><code class="codeph">mount_point</code></span>.</p>
<p>Before terminating replication with <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> on the standby file system, you can determine the point in time of the primary file system that the standby file system represents. This timestamp is displayed with the <code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> command as <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code>. If the failover action must be coordinated with Oracle Data Guard, you can use the timestamp to set back the database if needed or perform other necessary actions that are based on the time stamp. For information, refer to <span class="q">&#34;<a href="GUID-5242D6F8-462A-40A5-81DC-4599EB91C32C.htm">acfsutil repl info</a>&#34;</span>.</p>
</li>
</ol>
<div class="infobox-note" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-454FA14E-9900-4BC8-9151-7FF11ED6E9A9">
<p class="notep1">Note:</p>
<p>On an Oracle ACFS file system <code class="codeph">df</code> reports space usage by internal metadata plus user files and directories. <code class="codeph">du</code> only reports the space usage of user files and directories. Depending on the size of the volume and number of the nodes, internal metadata is allocated in varying sizes. Additionally, with replication enabled an internal replication log is allocated for each node that is used to record changes to the file system before exposing the replication log to user space daemons to transport to the standby.</p>
</div>
<p>For more information about replicating an Oracle ACFS file system, refer to <span class="q">&#34;<a href="GUID-8522E0B6-BE6E-4BE3-B7C7-5EA2ED4A602C.htm">Oracle ACFS Replication</a>&#34;</span>.</p>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-1C351316-3D71-4520-A412-95AE85F56453.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>