<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86769"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/About%20Oracle%20ACFS%20Snapshots"></a><title>About Oracle ACFS Snapshots</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-238A0439-A764-42C7-91FE-80CF32B82ADE.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-5A3EF695-A795-4FEA-8BE2-AF657BD2238C"></a> <span id="PAGE" style="display:none;">375/612</span> <!-- End Header -->
<a id="OSTMG33000"></a>
<h1 id="OSTMG-GUID-5A3EF695-A795-4FEA-8BE2-AF657BD2238C" class="sect1">About Oracle ACFS Snapshots</h1>
<div>
<p><a id="d106750e130" class="indexterm-anchor"></a><a id="d106750e134" class="indexterm-anchor"></a>An Oracle ACFS snapshot is an online, read-only or read-write, point in time copy of an Oracle ACFS file system. The snapshot copy is space-efficient and uses Copy-On-Write functionality. Before an Oracle ACFS file extent is modified or deleted, its current value is copied to the snapshot to maintain the point-in-time view of the file system.</p>
<p>Oracle ACFS snapshots are immediately available for use after they are created. The snapshots are created in the <code class="codeph">.ACFS/snaps/</code> <a id="d106750e144" class="indexterm-anchor"></a><a id="d106750e148" class="indexterm-anchor"></a><a id="d106750e152" class="indexterm-anchor"></a><a id="d106750e156" class="indexterm-anchor"></a>directory of the file system. They are always online while the file system is mounted. Consequently, an Oracle ACFS snapshot can support the online recovery of files inadvertently modified or deleted from a file system. With up to a total of 1023 read-only, read-write, or combination of read-only and read-write snapshot views supported for each file system, flexible online file recovery solutions spanning multiple views can be employed. An Oracle ACFS snapshot can also be used as the source of a file system backup, as it can be created on demand to deliver a current, consistent, online view of an active file system. For information about the number of snapshots supported, refer to <span class="q">&#34;<a href="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9.htm#GUID-B95CD674-F7C7-47D1-9466-6A86B86B6BF5">Oracle ACFS Disk Space Usage</a>&#34;</span>.</p>
<p><a id="d106750e167" class="indexterm-anchor"></a><a id="d106750e171" class="indexterm-anchor"></a>Oracle ACFS read-write snapshots enable fast creation of an snapshot image that can be both read and written without impacting the state of the Oracle ACFS file system hosting the snapshot images. You can use read-write snapshots for:</p>
<ul style="list-style-type: disc;">
<li>
<p>Testing of new versions of application software on production file data reflected in the read-write snapshot image without modifying the original production file system</p>
</li>
<li>
<p>Running test scenarios on a real data set without modifying the original production file system</p>
</li>
</ul>
<p>To use Oracle ACFS read-write snapshots, the disk group compatibility attribute for <code class="codeph">ADVM</code> must be set to <code class="codeph">11.2.0.3.0</code> or higher. If you create a read-write snapshot on an existing Oracle ACFS file system from a version earlier than <code class="codeph">11.2.0.3.0</code>, then the file system is updated to the <code class="codeph">11.2.0.3.0</code> or higher format. After a file system has been updated to a higher version, an Oracle ACFS file system cannot be reverted to an earlier version, and accordingly cannot be mounted on an earlier Oracle Grid Infrastructure version.</p>
<p><a id="d106750e198" class="indexterm-anchor"></a><a id="d106750e202" class="indexterm-anchor"></a>You can create a snapshot from an existing snapshot in the same Oracle ACFS file system. In addition, you can convert a snapshot between read-only and read-write formats. To create from an existing snapshot or convert a snapshot, the disk group compatibility attribute for <code class="codeph">ADVM</code> must be set to <code class="codeph">12.1</code> or higher. In addition, creation from an existing snapshot is not permitted if there are:</p>
<ul style="list-style-type: disc;">
<li>
<p>Any snapshots present in the file system that were created with the <code class="codeph">ADVM</code> compatibility set to less than 12.1</p>
</li>
<li>
<p>Any snapshots of the file system that were created after <code class="codeph">ADVM</code> compatibility was set to <code class="codeph">12.1</code> but while 11.2 snapshots existed</p>
</li>
</ul>
<p>Oracle ACFS snapshot storage is maintained within the file system, eliminating the management of separate storage pools for file systems and snapshots. Oracle ACFS file systems can be dynamically resized to accommodate additional file and snapshot storage requirements.</p>
<p><a id="d106750e232" class="indexterm-anchor"></a><a id="d106750e236" class="indexterm-anchor"></a><a id="d106750e240" class="indexterm-anchor"></a><a id="d106750e244" class="indexterm-anchor"></a>You cannot modify security or encryption metadata in read-write snapshots except for enabling or disabling security or encryption. No other alteration is permitted on Oracle ACFS security or encryption metadata in a snapshot. If a file was not secured by a security realm in the snapshot, it cannot be realm secured by adding the corresponding file in the active file system to a security realm. If a file was not encrypted in the snapshot, that file cannot be encrypted by encrypting the corresponding file in the active file system.</p>
<p>A new file created in a realm-secured directory in a read-write snapshot inherits the realm security attributes of the parent directory. If the realm protecting the new file has encryption turned on, the file is encrypted with the encryption parameters set in the realm. If the realm protecting the new file has encryption turned off, the file is decrypted. Files and directories in a read-write snapshot cannot be added to or removed from any security realm.</p>
<p>Files in a read-write snapshot can be encrypted, decrypted, or rekeyed if the operation target is a path specified for a file or directory of the read-write snapshot. However, if an encryption, decryption, or rekey operation is specified at the file system level, then the operation does not process files and directories of snapshots in the <code class="codeph">.ACFS/snaps/</code> directory.</p>
<p>All Oracle ACFS snapshot operations are serialized clusterwide in the kernel. For example, if a snapshot create operation is initiated at the same time as a snapshot delete operation, then both operations would complete, but they would not run in parallel inside of the kernel. One operation would complete before the other was started.</p>
<p>For information about Oracle ACFS security, refer to <span class="q">&#34;<a href="GUID-41F44E7A-7547-4D04-A8E7-072C3A697867.htm">Oracle ACFS Security</a>&#34;</span>.</p>
<p>For information about Oracle ACFS encryption, refer to <span class="q">&#34;<a href="GUID-5591C710-D763-4F72-BB56-A1452CA6AAB2.htm">Oracle ACFS Encryption</a>&#34;</span>.</p>
<p>Oracle ACFS snapshots are administered with the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> commands. For information about the <code class="codeph">acfsutil</code> <code class="codeph">snap</code> commands, refer to <span class="q">&#34;<a href="GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF.htm">acfsutil snap create</a>&#34;</span>, <span class="q">&#34;<a href="GUID-CDB26CF4-DDE6-4465-83E7-87D5251045E0.htm">acfsutil snap delete</a>&#34;</span>, and <span class="q">&#34;<a href="GUID-519612AC-CFC1-4842-AEC1-CE271BF35051.htm">acfsutil snap info</a>&#34;</span>.</p>
<div class="infobox-note" id="GUID-5A3EF695-A795-4FEA-8BE2-AF657BD2238C__GUID-855DE24C-B1DB-443D-8BE3-B4F3E257619D">
<p class="notep1">Note:</p>
<p>The <code class="codeph">link()</code> and <code class="codeph">rename(</code>) system calls fail if an attempt is made to link or rename a file in the Oracle ACFS file system and a file in any associated read-write snapshot, or vice versa. Any tools which use the <code class="codeph">link()</code> and <code class="codeph">rename()</code> system calls, such as <code class="codeph">ln</code> and <code class="codeph">mv</code>, also fail in the same scenario.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-238A0439-A764-42C7-91FE-80CF32B82ADE.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>