<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87144"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/acfsutil%20sec%20prepare"></a><title>acfsutil sec prepare</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="acfsutil sec prepare command"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-22923FB9-45B6-4295-9F0A-C2FCDDA9FB2E.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-A184A170-4A4C-498E-9154-FFD3D16796BF.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1"></a> <span id="PAGE" style="display:none;">538/612</span> <!-- End Header -->
<a id="OSTMG95065"></a><a id="OSTMG95066"></a><a id="OSTMG95067"></a><a id="OSTMG95068"></a><a id="OSTMG95069"></a><a id="OSTMG95064"></a>
<h1 id="OSTMG-GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1" class="sect1">acfsutil sec prepare</h1>
<div>
<div class="section">
<p class="subhead1">Purpose</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Prepares an Oracle ACFS file system for security features.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Syntax and Description</p>
</div>
<!-- class="section" -->
<div class="section">
<pre dir="ltr">acfsutil sec prepare -h
acfsutil sec prepare [-u] -m <span class="italic">mount_point</span>
</pre>
<p><code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> <code class="codeph">-h</code> displays help text and exits.</p>
<p><a href="GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1.htm#GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1__BABGCAGC" title="This table lists the options for the acfsutil sec prepare command, along with a description for each option">Table 16-58</a> contains the options available with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1__BABGCAGC">
<p class="titleintable">Table 16-58 Options for the acfsutil sec prepare command</p>
<table class="cellalignment1697" title="Options for the acfsutil sec prepare command" summary="This table lists the options for the acfsutil sec prepare command, along with a description for each option">
<thead>
<tr class="cellalignment1688">
<th class="cellalignment1698" id="d158423e190">Option</th>
<th class="cellalignment1699" id="d158423e193">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d158423e198" headers="d158423e190">
<p><code class="codeph">-m</code> <span class="italic"><code class="codeph">mount_point</code></span></p>
</td>
<td class="cellalignment1701" headers="d158423e198 d158423e193">
<p>Specifies the directory where the file system is mounted.</p>
</td>
</tr>
<tr class="cellalignment1688">
<td class="cellalignment1700" id="d158423e210" headers="d158423e190">
<p><code class="codeph">-u</code></p>
</td>
<td class="cellalignment1701" headers="d158423e210 d158423e193">
<p>Backs out security for the specified mount point.</p>
<p>This command removes security from in the file system and reverts the file system to the state before <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> was run on the file system.</p>
<p>This command removes all realm-secured files and directories from the realms and then destroys all Oracle ACFS security rules, rule sets and realms from the file system. However, the <code class="codeph">.Security</code> directory and its contents, including log files and the security metadata backup files, are not deleted.</p>
<p>If you want to remove encryption and security is being used, then this command must be run before encryption is backed out. To back out encryption, refer to <span class="q">&#34;<a href="GUID-4714B6EF-28B7-4318-A209-ADF7A2546586.htm">acfsutil encr set</a>&#34;</span>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>The <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command must be run before any of the realm management commands. This command prepares the specified Oracle ACFS file system for security and by default turns security on for the file system.</p>
<p>When running <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> <code class="codeph">-u</code>, ensure that no other Oracle ACFS security commands are run until <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> has completed.</p>
<p>If auditing is initialized on a cluster, this command also enables an Oracle ACFS security auditing source on the file system. The actions performed when enabling this audit source are the same as those done when the <code class="codeph">acfsutil</code> <code class="codeph">audit</code> <code class="codeph">enable</code> command is run directly. For more information, refer to <span class="q">&#34;<a href="GUID-D897E7D0-CEC0-428B-BE72-7C1215E0C50A.htm">acfsutil audit enable</a>&#34;</span>.</p>
<p>This command creates the <code class="codeph">/</code><span class="italic"><code class="codeph">mount_point</code></span><code class="codeph">/.Security</code>, <code class="codeph">/</code><span class="italic"><code class="codeph">mount_point</code></span><code class="codeph">/.Security/backup</code>, and <code class="codeph">/</code><span class="italic"><code class="codeph">mount_point</code></span><code class="codeph">/.Security/realm/logs</code> directories where <span class="italic"><code class="codeph">mount_point</code></span> is the option specified in the command line.</p>
<p><a id="d158423e324" class="indexterm-anchor"></a><a id="d158423e328" class="indexterm-anchor"></a><a id="d158423e332" class="indexterm-anchor"></a><a id="d158423e336" class="indexterm-anchor"></a>This command creates the following system security realms:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">SYSTEM_Logs</code></p>
<p>This is a system-created realm to protect the Oracle ACFS security log files in the directory <code class="codeph">.Security/realm/logs/</code> directory.</p>
</li>
<li>
<p><code class="codeph">SYSTEM_Audit</code></p>
<p>This is a system-created realm to protect audit trail files. This realm is created if auditing has been initialized. If auditing has not been initialized, it is created when auditing is enabled for the security source through the <code class="codeph">acfsutil</code> <code class="codeph">audit</code> <code class="codeph">enable</code> command. This realm secures the audit trail file so that the audit manager can read and write and the auditor can read the file, and no one else has access. This realm also protects the audit trail file so the audit manager cannot delete (without running the <code class="codeph">acfsutil</code> <code class="codeph">audit</code> <code class="codeph">purge</code> command), truncate, overwrite, or chmod the file.</p>
</li>
<li>
<p><code class="codeph">SYSTEM_SecurityMetadata</code></p>
<p>This is a system-created realm to protect the Oracle ACFS metadata XML file in the directory <code class="codeph">.Security/backup/</code> directory.</p>
</li>
<li>
<p><code class="codeph">SYSTEM_Antivirus</code></p>
<p>This is a system-created realm that allows access for the antivirus software that is running on an Oracle ACFS file system. For every realm protected file or directory, the <code class="codeph">SYSTEM_Antivirus</code> realm is evaluated when authorization checks are performed to determine if the <code class="codeph">SYSTEM_Antivirus</code> realm allows access to the file or directory.</p>
<p>To allow the antivirus process to access realm-protected files or directories, you must add the <code class="codeph">LocalSystem</code> or <code class="codeph">SYSTEM</code> group to the realm with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command, as shown in <a href="GUID-A184A170-4A4C-498E-9154-FFD3D16796BF.htm#GUID-A184A170-4A4C-498E-9154-FFD3D16796BF__BABGIHCB">Example 16-52</a>. If other antivirus processes are running as <code class="codeph">Administrator</code>, then the user <code class="codeph">Administrator</code> must be added to the <code class="codeph">SYSTEM_Antivirus</code> realm to allow access to realm protected files and directories.</p>
<p>If no Antivirus products have been installed, do not add any users or groups to the <code class="codeph">SYSTEM_Antivirus</code> realm. Because users or groups added to the <code class="codeph">SYSTEM_Antivirus</code> realm have <code class="codeph">READ</code> and <code class="codeph">READDIR</code> access, limit the users or groups added to this realm. You can restrict the time window when the users or groups of this realm can access the realm protected files or directories with time-based rules. You can also have application-based rules if you can identify the process name for the antivirus installation that scans the files.</p>
<p>The <code class="codeph">SYSTEM_Antivirus</code> realm can only perform the following operations on a file or directory: <code class="codeph">OPEN</code>, <code class="codeph">READ</code>, <code class="codeph">READDIR</code>, and setting time attributes. To remove or delete files or directories, you may need to disable security to clean up the infected files.</p>
<p>This realm is set up only for Windows systems.</p>
</li>
<li>
<p><code class="codeph">SYSTEM_BackupOperators</code></p>
<p>This is a system-created realm that enables you to authorize users that can back up realm-secured files and directories. You can add users, groups, rule sets, and command rules to this realm to provide fine-grain authorization for backing up realm-secured files and directories. A user must be added to this realm to back up realm-secured files and directories.</p>
<p>Use caution when adding groups to this system realm. After you add a group to this system realm, all the users of the added group are able to override the realm protections to access files.</p>
</li>
</ul>
<p>To access files in the system security realms, the user should be assigned as a security administrator with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">add</code> command.</p>
<p>You can add users, groups, rule sets, and command rules to system-created realms with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code> command, the same as for user-created realms. However, adding files and directories to system realms is not recommended. You can use the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">delete</code> command to delete objects from the system-created realms.</p>
<p>System-created security realms cannot be removed by a security administrator with the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">destroy</code> command. These realms are only removed when security is backed out of a file system when executing the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command with the <code class="codeph">-u</code> option.</p>
<p>The <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> <code class="codeph">&ndash;u</code> command is not allowed if any snapshots exist in the file system.</p>
<p>Only a security administrator can run the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The following example shows the use of the <code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> command.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1__GUID-2743CDF0-B557-40FD-B16B-081BEBF39EDF">
<p class="titleinexample">Example 16-51 Using the acfsutil sec prepare command</p>
<pre dir="ltr">$ /sbin/acfsutil sec prepare -m /acfsmounts/acfs1
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-22923FB9-45B6-4295-9F0A-C2FCDDA9FB2E.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-A184A170-4A4C-498E-9154-FFD3D16796BF.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>