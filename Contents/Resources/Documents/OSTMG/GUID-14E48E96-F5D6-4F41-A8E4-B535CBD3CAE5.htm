<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86602"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Tuning%20Rebalance%20Operations"></a><title>Tuning Rebalance Operations</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-020ABD10-8370-444C-9B44-71F2FF688861.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5"></a> <span id="PAGE" style="display:none;">124/612</span> <!-- End Header -->
<a id="OSTMG10221"></a>
<h1 id="OSTMG-GUID-14E48E96-F5D6-4F41-A8E4-B535CBD3CAE5" class="sect1">Tuning Rebalance Operations</h1>
<div>
<p><a id="d30849e130" class="indexterm-anchor"></a><a id="d30849e134" class="indexterm-anchor"></a>If the <code class="codeph">POWER</code> clause is not specified in an <code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> statement, or when rebalance is implicitly run by adding or dropping a disk, then the rebalance power defaults to the value of the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter. You can adjust the value of this parameter dynamically. The range of values for the <code class="codeph">POWER</code> clause is the same for the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter. For information about the <code class="codeph">ASM_POWER_LIMIT</code> initialization parameter, refer to <span class="q">&#34;<a href="GUID-BCA97B38-50AB-4B71-8D09-C67D8530D7BD.htm">ASM_POWER_LIMIT</a>&#34;</span>.</p>
<p>The higher the power limit, the more quickly a rebalance operation can complete. Rebalancing takes longer with lower power values, but consumes fewer processing and I/O resources which are shared by other applications, such as the database.</p>
<p>Oracle ASM tries to keep a rebalance I/O for each unit of power. Each I/O requires PGA memory for the extent involved in the relocation.</p>
<p>The default value of <code class="codeph">1</code> minimizes disruption to other applications. The appropriate value is dependent on your hardware configuration, performance requirements, and availability requirements. Oracle ASM always adjusts the power to fit available memory.</p>
<p>When the <code class="codeph">COMPATIBLE.ASM</code> disk group is set to <code class="codeph">11.2.0.2</code> or higher, the rebalance operation may be run as one process using asynchronous I/O. You can check the Oracle ASM alert log for details on the rebalance process.</p>
<p>If a rebalance is in progress because a disk is manually or automatically dropped, then increasing the power of the rebalance shortens the time frame during which redundant copies of that data on the dropped disk are reconstructed on other disks.</p>
<p><a id="d30849e184" class="indexterm-anchor"></a><a id="d30849e188" class="indexterm-anchor"></a>You can also affect rebalance behavior with the <code class="codeph">CONTENT.CHECK</code> and <code class="codeph">THIN_PROVISIONED</code> disk group attributes. For information about disk group attributes, refer to <span class="q">&#34;<a href="GUID-7A52077C-DCE5-44E0-BFA9-D30F485B8079.htm#GUID-7A52077C-DCE5-44E0-BFA9-D30F485B8079">Summary of Disk Group Attributes</a>&#34;</span>.</p>
<p>The <code class="codeph">EXPLAIN</code> <code class="codeph">WORK</code> SQL statement determines the amount of work for a rebalance operation and the resulting calculations are displayed in the <code class="codeph">V$ASM_ESTIMATE</code> view.</p>
<p>For example:</p>
<pre dir="ltr">EXPLAIN WORK FOR ALTER DISKGROUP data DROP DISK data_0000;
Explained.

SELECT est_work FROM V$ASM_ESTIMATE;
EST_WORK
--------
    4211

EXPLAIN WORK SET STATEMENT_ID=&#39;online&#39; FOR ALTER DISKGROUP data 
  ONLINE disk data_000;
Explained.

SELECT est_work FROM V$ASM_ESTIMATE WHERE STATEMENT_ID=&#39;online&#39;;
EST_WORK
--------
     421
</pre>
<p>The <code class="codeph">V$ASM_ESTIMATE</code> view provides information for adjusting <code class="codeph">ASM_POWER_LIMIT</code> and the resulting power of rebalance operations. The <code class="codeph">EST_WORK</code> column provides an estimate of the number of allocation units that have to be moved by the rebalance operation to complete.</p>
<p>The <code class="codeph">PASS</code> column of <code class="codeph">V$ASM_OPERATION</code> is updated for resync and rebalance operations. The contents of the column can be <code class="codeph">RESYNC</code>, <code class="codeph">REBALANCE</code>, or <code class="codeph">COMPACT</code>. For example, the following SQL query shows values in the <code class="codeph">PASS</code> column during a rebalance operation.</p>
<pre dir="ltr">SQL&gt; SELECT GROUP_NUMBER, PASS, STATE FROM V$ASM_OPERATION;

GROUP_NUMBER PASS      STAT
------------ --------- ----
           2 RESYNC    WAIT
           2 REBALANCE WAIT
           2 COMPACT   WAIT
</pre>
<p>For more information about rebalancing disk groups, refer to <span class="q">&#34;<a href="GUID-020ABD10-8370-444C-9B44-71F2FF688861.htm">Manually Rebalancing Disk Groups</a>&#34;</span>.</p>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-020ABD10-8370-444C-9B44-71F2FF688861.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-ECCAE4F3-CFC5-4B55-81D2-FFB6953C035C.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>