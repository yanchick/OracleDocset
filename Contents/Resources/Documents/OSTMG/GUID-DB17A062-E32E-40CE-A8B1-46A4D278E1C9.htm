<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87060"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Limits%20of%20Oracle%20ACFS"></a><title>Limits of Oracle ACFS</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-07-10T10:06:05Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E41058-12"/>
<meta name="dcterms.isVersionOf" content="OSTMG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-807B70D5-9F88-46FF-BA27-6CB53D0CEE72.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-8D71BD92-78F9-40DF-8418-A000E201218B.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41058-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9"></a> <span id="PAGE" style="display:none;">591/612</span> <!-- End Header -->
<a id="OSTMG35100"></a>
<h1 id="OSTMG-GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9" class="sect1">Limits of Oracle ACFS</h1>
<div>
<p><a id="d183485e130" class="indexterm-anchor"></a><a id="d183485e134" class="indexterm-anchor"></a>The limits of Oracle ACFS are discussed in this section.</p>
<p>The topics contained in this section are:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9.htm#GUID-B95CD674-F7C7-47D1-9466-6A86B86B6BF5">Oracle ACFS Disk Space Usage</a></p>
</li>
<li>
<p><a href="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9.htm#GUID-F136A597-3842-4554-80FE-A68E9B14143F">Oracle ACFS Error Handling</a></p>
</li>
<li>
<p><a href="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9.htm#GUID-94EFDE44-3A1F-4E27-8BBD-DE8E0C3E420D">Oracle ACFS and NFS</a></p>
</li>
</ul>
<div class="infobox-note" id="GUID-DB17A062-E32E-40CE-A8B1-46A4D278E1C9__GUID-D891981A-BB72-47B2-97D4-960E99C4AA35">
<p class="notep1">Note:</p>
<p>Oracle ACFS does not support hard links on directories.</p>
</div>
</div>
<a id="OSTMG95284"></a>
<div class="props_rev_3"><a id="GUID-B95CD674-F7C7-47D1-9466-6A86B86B6BF5"></a>
<h2 id="OSTMG-GUID-B95CD674-F7C7-47D1-9466-6A86B86B6BF5" class="sect2">Oracle ACFS Disk Space Usage</h2>
<div>
<p><a id="d183485e292" class="indexterm-anchor"></a><a id="d183485e296" class="indexterm-anchor"></a>Oracle ACFS supports 64 mounted file systems on 32-bit systems, and 256 mounts on 64-bit systems. However, more file systems can be mounted if there is adequate memory.</p>
<p>Oracle ACFS supports 2^40 (1 trillion) files in a file system. More than 4 billion files have been tested. 32-bit Linux systems are limited to 2^26 (67 million) files. There is no absolute limit to the number of directories in a file system; the limit is based on hardware resources.</p>
<p><a id="d183485e304" class="indexterm-anchor"></a><a id="d183485e308" class="indexterm-anchor"></a>Oracle ACFS supports 1023 snapshots on 64-bit systems. These snapshots can be any combination of read-only and read-write snapshots. To support the creation of 1023 snapshots, the disk group compatibility attribute for <code class="codeph">ADVM</code> must be set to <code class="codeph">12.1.0.2</code> or higher. Before or after setting <code class="codeph">COMPATIBLE.ADVM</code> to <code class="codeph">12.1.0.2</code>, all existing snapshots must be deleted or the limit remains at 63 snapshots.</p>
<p>Oracle ACFS preallocates large user files to improve performance when writing data. This storage is not returned when the file is closed, but it is returned when the file is deleted. Oracle ACFS also allocates local metadata files as nodes mount the file system for the first time. This can result in a mount failing due to an out of space error, and much of this storage must be contiguous. This storage is approximately 64-128 megabytes per node.</p>
<p>Oracle ACFS also keeps local bitmaps available to reduce contention on the global storage bitmap when searching for free space. This disk space is reported as <code class="codeph">in</code> <code class="codeph">use</code> by tools such as the Linux <code class="codeph">df</code> command even though some space may not actually be allocated yet. This local storage pool can be as large as 128 megabytes per node and can allow space allocations to succeed, even though commands, such as <code class="codeph">df</code>, report less space available than what is being allocated.</p>
</div>
</div>
<a id="OSTMG95285"></a>
<div class="props_rev_3"><a id="GUID-F136A597-3842-4554-80FE-A68E9B14143F"></a>
<h2 id="OSTMG-GUID-F136A597-3842-4554-80FE-A68E9B14143F" class="sect2">Oracle ACFS Error Handling</h2>
<div>
<p><a id="d183485e473" class="indexterm-anchor"></a><a id="d183485e477" class="indexterm-anchor"></a>Oracle ASM instance failure or forced shutdown while Oracle ACFS or another file system is using an Oracle ADVM volume results in I/O failures. The volumes must be closed and re-opened to access the volume again. This requires dismounting any file systems that were mounted when the local Oracle ASM instance failed. After the instance is restarted, the corresponding disk group must be mounted with the volume enabled followed by a remount of the file system. See <span class="q">&#34;<a href="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284.htm#GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284">Deregistering_ Dismounting_ and Disabling Volumes and Oracle ACFS File Systems</a>&#34;</span>.</p>
<p>If any file systems are currently mounted on Oracle ADVM volume files, the <code class="codeph">SHUTDOWN</code> <code class="codeph">ABORT</code> command should not be used to terminate the Oracle ASM instance without first dismounting those file systems. Otherwise, applications encounter I/O errors and Oracle ACFS user data and metadata being written at the time of the termination may not be flushed to storage before the Oracle ASM storage is fenced. If there is not time to permit the file system to dismount, then you should run two <code class="codeph">sync</code> (1) commands to flush cached file system data and metadata to persistent storage before issuing the <code class="codeph">SHUTDOWN</code> <code class="codeph">ABORT</code> operation.</p>
<p>Oracle ACFS does not interrupt the operating system environment when a metadata write fails, whether due to Oracle ASM instance failure or storage failure. Instead, Oracle ACFS isolates errors to a specific file system, putting it in an offline error state. The only operation that succeeds on that node for that file system from that point forward is a dismount operation. Another node recovers any outstanding metadata transactions, assuming it can write the metadata out to the storage. It is possible to remount the file system on the offlined node after the I/O condition is resolved.</p>
<p>It might not be possible for an administrator to dismount a file system while it is in the offline error state if there are processes referencing the file system, such as a directory of the file system being the current working directory for a process. To dismount the file system in this case it would be necessary to identify all processes on that node with references to files and directories on the file system and cause them to exit. The Linux <code class="codeph">fuser</code> or <code class="codeph">lsof</code> commands or Window <code class="codeph">handle</code> command list information about processes and open files.</p>
<p>If Oracle ACFS detects inconsistent file metadata returned from a read operation, based on checksum or expected type comparisons, Oracle ACFS takes the appropriate action to isolate the affected file system components and generate a notification that <code class="codeph">fsck</code> or <code class="codeph">acfschkdsk</code> should be run as soon as possible. Each time the file system is mounted a notification is generated with a system event logger message until <code class="codeph">fsck</code> or <code class="codeph">acfschkdsk</code> is run.</p>
</div>
</div>
<a id="OSTMG95286"></a>
<div class="props_rev_3"><a id="GUID-94EFDE44-3A1F-4E27-8BBD-DE8E0C3E420D"></a>
<h2 id="OSTMG-GUID-94EFDE44-3A1F-4E27-8BBD-DE8E0C3E420D" class="sect2">Oracle ACFS and NFS</h2>
<div>
<p><a id="d183485e664" class="indexterm-anchor"></a><a id="d183485e668" class="indexterm-anchor"></a>When exporting file systems through NFS on Linux, use the <code class="codeph">-fsid=num</code> exports option. This option forces the file system identification portion of the file handle used to communicate with NFS clients to be the specified number instead of a number derived from the major and minor number of the block device on which the file system is mounted. You can use any 32-bit number for <code class="codeph">num</code>, but it must be unique among all the exported file systems. In addition, <code class="codeph">num</code> must be unique among members of the cluster and must be the same <code class="codeph">num</code> on each member of the cluster for a given file system. This is needed because Oracle ASM DVM block device major numbers are not guaranteed to be the same across restarts of the same node or across different nodes in the cluster.</p>
<p>When using High Availability NFS for Grid Home Clusters (HANFS), HANFS automatically handles the situation described in the previous paragraph. For information about HANFS, refer to <span class="q">&#34;<a href="GUID-4D7A5911-8FA6-47DC-98BB-593B2C90D43E.htm">High Availability Network File Storage for Oracle Grid Infrastructure</a>&#34;</span>.</p>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1687">
<tr>
<td class="cellalignment1694">
<table class="cellalignment1692">
<tr>
<td class="cellalignment1691"><a href="GUID-807B70D5-9F88-46FF-BA27-6CB53D0CEE72.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1691"><a href="GUID-8D71BD92-78F9-40DF-8418-A000E201218B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1696">
<table class="cellalignment1690">
<tr>
<td class="cellalignment1691"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1691"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1691"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1691"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1691"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1691"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>