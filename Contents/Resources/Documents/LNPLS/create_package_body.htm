<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-78085"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CREATE%20PACKAGE%20BODY%20Statement"></a><title>CREATE PACKAGE BODY Statement</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="package body, creating, replacing"/>
<meta name="dcterms.created" content="2017-05-09T17:03:42Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database PL/SQL Language Reference"/>
<meta name="dcterms.identifier" content="E50727-06"/>
<meta name="dcterms.isVersionOf" content="LNPLS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="create_package.htm" title="Previous" type="text/html"/>
<link rel="Next" href="create_procedure.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E50727-06.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE"></a> <span id="PAGE" style="display:none;">83/100</span> <!-- End Header -->
<a id="LNPLS1973"></a><a id="LNPLS1521"></a><a id="LNPLS2181"></a><a id="LNPLS1974"></a><a id="LNPLS1975"></a><a id="LNPLS1976"></a><a id="LNPLS1523"></a><a id="LNPLS1524"></a><a id="LNPLS1525"></a><a id="LNPLS1977"></a><a id="LNPLS1978"></a><a id="LNPLS01381"></a><a id="LNPLS1979"></a><a id="LNPLS1980"></a><a id="LNPLS01372"></a>
<h1 id="LNPLS-GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE" class="sect1">CREATE PACKAGE BODY Statement</h1>
<div>
<div class="section">
<p>The <code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code> statement creates or replaces the body of a stored <span class="bold">package</span>, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database. The <span class="bold">package body</span> defines these objects. The <span class="bold">package</span> <span class="bold">specification</span>, defined in an earlier <code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> statement, declares these objects.</p>
<p>Packages are an alternative to creating procedures and functions as standalone schema objects.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Topics</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="create_package_body.htm#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJDGG">Prerequisites</a></p>
</li>
<li>
<p><a href="create_package_body.htm#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJIFI">Syntax</a></p>
</li>
<li>
<p><a href="create_package_body.htm#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABDHHJI">Semantics</a></p>
</li>
<li>
<p><a href="create_package_body.htm#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__I2065503">Examples</a></p>
</li>
<li>
<p><a href="create_package_body.htm#GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABJCAAC">Related Topics</a></p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJDGG">
<p class="subhead1">Prerequisites</p>
<p>To create or replace a package in your schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">PROCEDURE</code> system privilege. To create or replace a package in another user&#39;s schema, you must have the <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">PROCEDURE</code> system privilege. In both cases, the package body must be created in the same schema as the package.</p>
<p>To embed a <code class="codeph">CREATE</code> <code class="codeph">PACKAGE</code> <code class="codeph">BODY</code> statement inside an the database precompiler program, you must terminate the statement with the keyword <code class="codeph">END-EXEC</code> followed by the embedded SQL statement terminator for the specific language.</p>
</div>
<!-- class="section" -->
<div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABFJIFI">
<p class="subhead1">Syntax</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1"><span class="italic">create_package_body</span> ::=</p>
<div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-26148660-88DE-4B2D-9313-DD67AC1C3C73"><img width="774" height="79" src="img/create_package_body.gif" alt="Description of create_package_body.eps follows" title="Description of create_package_body.eps follows"/><br/>
<a href="img_text/create_package_body.htm">Description of the illustration create_package_body.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead1"><span class="italic">plsql_package_body_source</span> ::=</p>
<div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-6BAEB48E-FCEA-486A-9B95-410CD9C77856"><img width="574" height="138" src="img/plsql_package_body_source.gif" alt="Description of plsql_package_body_source.eps follows" title="Description of plsql_package_body_source.eps follows"/><br/>
<a href="img_text/plsql_package_body_source.htm">Description of the illustration plsql_package_body_source.eps</a></div>
<!-- class="figure" -->
<p>See <span class="q">&#34;<a href="block.htm#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJAIABJJ">declare_section ::=</a>&#34;</span></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1"><span class="italic">initialize_section</span> ::=</p>
<div class="figure" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__GUID-5ED9967B-5746-4690-B2A2-CF9FCB1F4978"><img width="629" height="91" src="img/initialize_section.gif" alt="Description of initialize_section.eps follows" title="Description of initialize_section.eps follows"/><br/>
<a href="img_text/initialize_section.htm">Description of the illustration initialize_section.eps</a></div>
<!-- class="figure" --></div>
<!-- class="section" -->
<div class="section">
<p>See:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="block.htm#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJACJBCH">statement ::=</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="block.htm#GUID-9ACEB9ED-567E-4E1A-A16A-B8B35214FC9D__CJADJGJE">pragma ::=</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="exception_handler.htm#GUID-3FECF29B-A240-4191-A635-92C612D00C4D__CJAEIGAB">exception_handler ::=</a>&#34;</span></p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABDHHJI">
<p class="subhead1">Semantics</p>
<p><span class="bold">OR REPLACE</span></p>
<p>Re-creates the package body if it exists, and recompiles it.</p>
<p>Users who were granted privileges on the package body before it was redefined can still access the package without being regranted the privileges.</p>
</div>
<!-- class="section" -->
<div class="section">
<p><span class="bold">[ EDITIONABLE | NONEDITIONABLE ]</span></p>
<p>If you do not specify this property, then the package body inherits <code class="codeph">EDITIONABLE</code> or <code class="codeph">NONEDITIONABLE</code> from the package specification. If you do specify this property, then it must match that of the package specification.</p>
<p><span class="bold"><span class="italic">schema</span></span></p>
<p>Name of the schema containing the package. <span class="bold">Default:</span> your schema.</p>
<p><span class="bold"><span class="italic">package_name</span></span></p>
<p>Name of the package to be created.</p>
</div>
<!-- class="section" -->
<div class="section">
<p><span class="bold"><span class="italic">declare_section</span></span></p>
<p>Has a definition for every cursor and subprogram declaration in the package specification. The headings of corresponding subprogram declarations and definitions must match word for word, except for white space.</p>
<p>Can also declare and define private items that can be referenced only from inside the package.</p>
<p>Restriction on <span class="italic">declare_section</span></p>
<p><code class="codeph">PRAGMA</code> <code class="codeph">AUTONOMOUS_TRANSACTION</code> cannot appear here.</p>
</div>
<!-- class="section" -->
<div class="section">
<p><span class="bold"><span class="italic">initialize_section</span></span></p>
<p>Initializes variables and does any other one-time setup steps.</p>
</div>
<!-- class="section" -->
<div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__I2065503">
<p class="subhead1">Examples</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__I2098638">
<p class="titleinexample">Example 14-17 Creating a Package Body: Example</p>
<p>This statement creates the body of the <code class="codeph">emp_mgmt</code> package created in <span class="q">&#34;<a href="create_package.htm#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5__I2088318">create_package.htm#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5__I2088318</a>&#34;</span>.</p>
<pre dir="ltr">CREATE OR REPLACE PACKAGE BODY emp_mgmt AS 
   <span class="italic">tot_emps NUMBER; </span>
   tot_depts NUMBER; 
FUNCTION hire 
   (last_name VARCHAR2, job_id VARCHAR2, 
    manager_id NUMBER, salary NUMBER, 
    commission_pct NUMBER, department_id NUMBER) 
   RETURN NUMBER IS new_empno NUMBER; 
BEGIN 
   SELECT employees_seq.NEXTVAL 
      INTO new_empno 
      FROM DUAL; 
   INSERT INTO employees 
      VALUES (new_empno, &#39;First&#39;, &#39;Last&#39;,&#39;first.example@example.com&#39;,
              &#39;(415)555-0100&#39;,
              TO_DATE(&#39;18-JUN-2002&#39;,&#39;DD-MON-YYYY&#39;),
              &#39;IT_PROG&#39;,90000000,00, 100,110);
      tot_emps := tot_emps + 1; 
   RETURN(new_empno); 
END; 
FUNCTION create_dept(department_id NUMBER, location_id NUMBER) 
   RETURN NUMBER IS 
      new_deptno NUMBER; 
   BEGIN 
      SELECT departments_seq.NEXTVAL 
         INTO new_deptno 
         FROM dual; 
      INSERT INTO departments 
         VALUES (new_deptno, &#39;department name&#39;, 100, 1700); 
      tot_depts := tot_depts + 1; 
      RETURN(new_deptno); 
   END; 
PROCEDURE remove_emp (employee_id NUMBER) IS 
   BEGIN 
      DELETE FROM employees 
      WHERE employees.employee_id = remove_emp.employee_id; 
      tot_emps := tot_emps - 1; 
   END; 
PROCEDURE remove_dept(department_id NUMBER) IS 
   BEGIN 
      DELETE FROM departments 
      WHERE departments.department_id = remove_dept.department_id; 
      tot_depts := tot_depts - 1; 
      SELECT COUNT(*) INTO tot_emps FROM employees; 
   END; 
PROCEDURE increase_sal(employee_id NUMBER, salary_incr NUMBER) IS 
   curr_sal NUMBER; 
   BEGIN 
      SELECT salary INTO curr_sal FROM employees 
      WHERE employees.employee_id = increase_sal.employee_id; 
      IF curr_sal IS NULL 
         THEN RAISE no_sal; 
      ELSE 
         UPDATE employees 
         SET salary = salary + salary_incr 
         WHERE employee_id = employee_id; 
      END IF; 
   END; 
PROCEDURE increase_comm(employee_id NUMBER, comm_incr NUMBER) IS 
   curr_comm NUMBER; 
   BEGIN 
      SELECT commission_pct 
      INTO curr_comm 
      FROM employees 
      WHERE employees.employee_id = increase_comm.employee_id; 
      IF curr_comm IS NULL 
         THEN RAISE no_comm; 
      ELSE 
         UPDATE employees 
         SET commission_pct = commission_pct + comm_incr; 
      END IF; 
   END; 
END emp_mgmt; 
/ 
</pre>
<p>The package body defines the public program objects declared in the package specification:</p>
<ul style="list-style-type: disc;">
<li>
<p>The functions <code class="codeph">hire</code> and <code class="codeph">create_dept</code></p>
</li>
<li>
<p>The procedures <code class="codeph">remove_emp</code>, <code class="codeph">remove_dept</code>, <code class="codeph">increase_sal</code>, and <code class="codeph">increase_comm</code></p>
</li>
</ul>
<p>These objects are declared in the package specification, so they can be called by application programs, procedures, and functions outside the package. For example, if you have access to the package, you can create a procedure <code class="codeph">increase_all_comms</code> separate from the <code class="codeph">emp_mgmt</code> package that invokes the <code class="codeph">increase_comm</code> procedure.</p>
<p>These objects are defined in the package body, so you can change their definitions without causing the database to invalidate dependent schema objects. For example, if you subsequently change the definition of <code class="codeph">hire</code>, then the database need not recompile <code class="codeph">increase_all_comms</code> before running it.</p>
<p>The package body in this example also declares private program objects, the variables <code class="codeph">tot_emps</code> and <code class="codeph">tot_depts</code>. These objects are declared in the package body rather than the package specification, so they are accessible to other objects in the package, but they are not accessible outside the package. For example, you cannot develop an application that explicitly changes the value of the variable <code class="codeph">tot_depts</code>. However, the function <code class="codeph">create_dept</code> is part of the package, so <code class="codeph">create_dept</code> can change the value of <code class="codeph">tot_depts</code>.</p>
</div>
<!-- class="example" -->
<div class="section" id="GUID-68526FF2-96A1-4F14-A10B-4DD3E1CD80BE__BABJCAAC">
<p class="subhead1">Related Topics</p>
<p>In this chapter:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">&#34;<a href="create_package.htm#GUID-03A70A54-90FF-4293-B6B8-F0B35E184AC5">CREATE PACKAGE Statement</a>&#34;</span></p>
</li>
</ul>
<p>In other chapters:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="packages.htm#GUID-C285EC5A-BE50-4192-A88E-48C0778B34E0" title="This chapter explains how to bundle related PL/SQL code and data into a package, whose contents are available to many applications.">PL/SQL Packages</a></p>
</li>
<li>
<p><span class="q">&#34;<a href="packages.htm#GUID-49A935CE-825D-4FEA-BF2D-89F87EA9C750">Package Body</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="function.htm#GUID-4E19FB09-46B5-4CE5-8A5B-CD815C29DA1C">Function Declaration and Definition</a>&#34;</span></p>
</li>
<li>
<p><span class="q">&#34;<a href="procedure.htm#GUID-9A48D7CE-3720-46A4-B5CA-C2250CA86AF2">Procedure Declaration and Definition</a>&#34;</span></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment869">
<tr>
<td class="cellalignment912">
<table class="cellalignment874">
<tr>
<td class="cellalignment873"><a href="create_package.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment873"><a href="create_procedure.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment914">
<table class="cellalignment872">
<tr>
<td class="cellalignment873"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment873"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment873"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment873"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment873"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment873"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>