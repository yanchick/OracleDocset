<!--NewPage--><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en-US"><head>
<!-- Generated by javadoc (build 1.6.0_21) on Sat Dec 29 19:14:36 PST 2012 -->
<a class="dashingAutolink" name="autolink-70719"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/OXQCloseable%20%28%7C%7COracle%20Database%20XML%20Java%20API%20Reference%7C%7C%29"></a><title>OXQCloseable (||Oracle Database XML Java API Reference||)</title>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii"/>
<meta name="date" content="2012-12-29"/>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style"/>
<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OXQCloseable (||Oracle Database XML Java API Reference||)";
    }
}
</script>
<meta name="generator" content="Oracle ST-Doc Jadey 2.5"/>
</head>
<body bgcolor="white" onload="windowTitle();">
<hr/>
<p style="display: none"><a href="#skip_navbar_top" title="Skip navigation links">Skip navigation links</a> <a name="navbar_top" id="navbar_top"><!-- --></a></p>
<table class="oac_no_warn" summary="Layout table... probably." border="0" width="100%" cellpadding="1" cellspacing="0">
<tbody><tr>
<td colspan="2" bgcolor="#EEEEFF" class="NavBarCell1"><a name="navbar_top_firstrow" id="navbar_top_firstrow"><!-- --></a>
<table class="oac_no_warn" summary="Layout table... probably." border="0" cellpadding="0" cellspacing="3">
<tbody><tr align="center" valign="top">
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../overview-summary.html"><span class="NavBarFont1"><b>Overview</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="package-summary.html"><span class="NavBarFont1"><b>Package</b></span></a>&nbsp;</td>
<td bgcolor="#FFFFFF" class="NavBarCell1Rev">&nbsp;<span class="NavBarFont1Rev"><b>Class</b></span>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="package-tree.html"><span class="NavBarFont1"><b>Tree</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../deprecated-list.html"><span class="NavBarFont1"><b>Deprecated</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../index-all.html"><span class="NavBarFont1"><b>Index</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../help-doc.html"><span class="NavBarFont1"><b>Help</b></span></a>&nbsp;</td>
</tr>
</tbody></table>
</td>
<td align="right" valign="top" rowspan="3"><em><b>Oracle&reg; Database XML Java API Reference<br/>
12<em>c</em> Release 1 (12.1)</b><br/>
E15981-09</em></td>
</tr>
<tr>
<td bgcolor="white" class="NavBarCell2"><span style="font-size: smaller">&nbsp;PREV CLASS&nbsp; &nbsp;<a href="../../../oracle/xml/xquery/OXQCompositeResolverFactory.html" title="interface in oracle.xml.xquery"><b>NEXT CLASS</b></a></span></td>
<td bgcolor="white" class="NavBarCell2"><span style="font-size: smaller"><a href="../../../index.html?oracle/xml/xquery/OXQCloseable.html" target="_top"><b>FRAMES</b></a> &nbsp; &nbsp;<a href="OXQCloseable.html" target="_top"><b>NO FRAMES</b></a> &nbsp; &nbsp;</span><script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes<\/B><\/A>');
  }
  //-->
</script> <noscript><a href="../../../allclasses-noframe.html"><b>All Classes</b></a></noscript></td>
</tr>
<tr>
<td valign="top" class="NavBarCell3"><span style="font-size: smaller">SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<a href="#method_summary">METHOD</a></span></td>
<td valign="top" class="NavBarCell3"><span style="font-size: smaller">DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<a href="#method_detail">METHOD</a></span></td>
</tr>
</tbody></table>
<p><a name="skip_navbar_top" id="skip_navbar_top"></a> <!-- ========= END OF TOP NAVBAR ========= --></p>
<hr/>
<!-- ======== START OF CLASS DATA ======== -->
<h2><span style="font-size: smaller">oracle.xml.xquery</span><br/>
Interface OXQCloseable</h2>
<dl>
<dt><b>All Known Subinterfaces:</b></dt>
<dd><a href="../../../oracle/xml/xquery/OXQSequence.html" title="interface in oracle.xml.xquery">OXQSequence</a></dd>
</dl>
<dl>
<dt><b>All Known Implementing Classes:</b></dt>
<dd><a href="../../../oracle/xml/xquery/OXQEntity.html" title="class in oracle.xml.xquery">OXQEntity</a></dd>
</dl>
<hr/>
<dl>
<dd>
<pre>public interface <b>OXQCloseable</b>
</pre></dd>
</dl>
<p>Extension methods for closeable objects.</p>
<p>The XQJ user is responsible for explicitly calling <code>close()</code> on streaming resources bound to external variables and on sequences that are returned as a streaming resource. This is inconvenient in a streaming execution pipeline scenario where it may be difficult to keep track of what needs to be closed at each step in the pipeline. For example, suppose we need to bind an instance of <code>XMLStreamReader</code> to an expression, execute this expression and obtain the result sequence, and then return the result sequence as an instance of <code>XMLStreamReader</code>. In order to properly close all resources after we are done processing the output, we have to explicitly invoke <code>close()</code> on the output <code>XMLStreamReader</code> instance, the result sequence, and the input <code>XMLStreamReader</code> instance. If the pipeline is long and the objects are passed around between multiple methods, the user may not have access to all the resources that must be closed at the end of the pipeline. The <a href="../../../oracle/xml/xquery/OXQCloseable.html#enlistCloseable_java_io_Closeable_"><code>enlistCloseable</code></a> methods provide a way to declare that when a resource is closed, one or more other resources should be closed as well. Thus the closing of streaming resources is declaratively specified as they are used, with the user only having to explicitly call <code>close()</code> on the final streaming resource at the end of the pipeline.</p>
<p>The precise semantics are as follows: during this object&#39;s <code>close()</code> invocation, <code>close()</code> will be invoked for all <code>closeable</code> objects that were registered using the <code>enlistCloseable()</code> methods in the order they were registered.</p>
<p>Example:<br/></p>
<pre> XQConnection conn = ...;
 XQPreparedExpression xqExpression1 = conn.prepareExpression(&#34;(1, 2, 3)&#34;);
 XQSequence xqSequence1 = xqExpression1.executeQuery();
 XQPreparedExpression xqExpression2 = conn.prepareExpression(&#34;declare variable $x9 as item()* external;
                                      declare variable $x10 as item() external; ($x9, $x10)&#34;);
 //Bind XQSequnce
 xqExpression2.bindSequence(new QName(&#34;x9&#34;), xqSequence1);

 //Bind an InputStream
 String data = &#34;&lt;num&gt;33&lt;/num&gt;&#34;;
 InputStream inputStream = new ByteArrayInputStream(data.getBytes());
 xqExpression2.bindDocument(new QName(&#34;x10&#34;), inputStream, null, null);

 //Get the result sequence
 XQSequence xqFinalSequence = xqExpression2.executeQuery();

 XMLStreamReader strmReader = xqFinalSequence.getSequenceAsStream();
 
 //Declare that input sequence should be closed when the final sequence is closed
 OXQView.getCloseable(xqFinalSequence).enlistCloseable(xqSequence1);

 //Declare that the input stream should be closed when the final sequence is closed
 OXQView.getCloseable(xqFinalSequence).enlistCloseable(inputStream);

 //Declare that the final sequence should be closed when the stream reader is closed
 OXQView.getCloseable(strmReader).enlistCloseable(xqFinalSequence);
 
 while (strmReader.hasNext()) {
   ...
 }

 //This will close the stream reader and all of the dependent resources, ie
 //the final sequence, the input sequence, and the input stream.
 strmReader.close()
 
</pre>
<p>If exceptions occur during invocation of <code>close()</code> on any of the <code>closeable</code> objects, a single exception will be thrown by this object&#39;s <code>close()</code>. The first of the exceptions thrown by the <code>closeable</code> objects will be the cause of that exception.</p>
<p>Thread-safety semantics of registered resources</p>
<p>The XQuery processor assumes that each registered resource, while not necessarily generally thread-safe, has a thread-safe implementation of the &#34;close&#34; method that can be invoked in parallel with any &#34;read&#34; method, in order to stop reading activity and close gracefully. Many of the JDK implementations of <code>java.io.Closeable</code> satisfy this requirement. The Oracle implementation of <a href="../../../javax/xml/xquery/XQSequence.html" title="interface in javax.xml.xquery"><code>XQSequence</code></a> satisfies this requirement as well, in the case where it, in turn, relies only on resources that are thread-safe with respect to closing. Registration of resources not following this assumption might result in unpredictable behavior in a multi-threaded environment.</p>
<dl>
<dt><b>Since:</b></dt>
<dd>12.1</dd>
</dl>
<hr/>
<p><!-- ========== METHOD SUMMARY =========== -->
 <a name="method_summary" id="method_summary"><!-- --></a></p>
<table class="oac_no_warn" summary="Layout table... probably." border="1" width="100%" cellpadding="3" cellspacing="0">
<tbody><tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="2"><span><b>Method Summary</b></span></th>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><span style="font-size: smaller"><code>&nbsp;void</code></span></td>
<td><code><b><a href="../../../oracle/xml/xquery/OXQCloseable.html#enlistCloseable_java_io_Closeable_">enlistCloseable</a></b>(java.io.Closeable&nbsp;closeable)</code><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Declares a <code>closeable</code> object that will be closed when this object is closed.</td>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><span style="font-size: smaller"><code>&nbsp;void</code></span></td>
<td><code><b><a href="../../../oracle/xml/xquery/OXQCloseable.html#enlistCloseable_javax_xml_stream_XMLStreamReader_">enlistCloseable</a></b>(javax.xml.stream.XMLStreamReader&nbsp;closeable)</code><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Declares an <code>XMLStreamReader</code> object that will be closed when this object is closed.</td>
</tr>
<tr bgcolor="white" class="TableRowColor">
<td align="right" valign="top" width="1%"><span style="font-size: smaller"><code>&nbsp;void</code></span></td>
<td><code><b><a href="../../../oracle/xml/xquery/OXQCloseable.html#enlistCloseable_javax_xml_xquery_XQSequence_">enlistCloseable</a></b>(<a href="../../../javax/xml/xquery/XQSequence.html" title="interface in javax.xml.xquery">XQSequence</a>&nbsp;closeable)</code><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Declares an <code>XQSequence</code> object that will be closed when this object is closed.</td>
</tr>
</tbody></table>
<p>&nbsp;</p>
<p><!-- ============ METHOD DETAIL ========== -->
 <a name="method_detail" id="method_detail"><!-- --></a></p>
<table class="oac_no_warn" summary="Layout table... probably." border="1" width="100%" cellpadding="3" cellspacing="0">
<tbody><tr bgcolor="#CCCCFF" class="TableHeadingColor">
<th align="left" colspan="1"><span><b>Method Detail</b></span></th>
</tr>
</tbody></table>
<p><a name="enlistCloseable_javax_xml_xquery_XQSequence_" id="enlistCloseable_javax_xml_xquery_XQSequence_"><!-- --></a></p>
<h3>enlistCloseable</h3>
<pre class="oac_no_warn">void <b>enlistCloseable</b>(<a href="../../../javax/xml/xquery/XQSequence.html" title="interface in javax.xml.xquery">XQSequence</a> closeable)
                     throws <a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a>
</pre>
<dl>
<dd>Declares an <code>XQSequence</code> object that will be closed when this object is closed.</dd>
<dd>
<dl>
<dt><b>Parameters:</b></dt>
<dd><code>closeable</code> - object that <code>close()</code> must be invoked on after <code>close()</code> is invoked on this object.</dd>
<dt><b>Throws:</b></dt>
<dd><code><a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a></code> - if (1) <code>closeable</code> is <code>null</code>, (2) this object is in a closed state, or (3) provided closeable object is not supported for this main object.</dd>
<dt><b>See Also:</b></dt>
<dd><a href="../../../oracle/xml/xquery/OXQCloseable.html" title="interface in oracle.xml.xquery"><code>Detailed description</code></a></dd>
</dl>
</dd>
</dl>
<hr/>
<p><a name="enlistCloseable_java_io_Closeable_" id="enlistCloseable_java_io_Closeable_"><!-- --></a></p>
<h3>enlistCloseable</h3>
<pre class="oac_no_warn">void <b>enlistCloseable</b>(java.io.Closeable closeable)
                     throws <a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a>
</pre>
<dl>
<dd>Declares a <code>closeable</code> object that will be closed when this object is closed.</dd>
<dd>
<dl>
<dt><b>Parameters:</b></dt>
<dd><code>closeable</code> - input streaming object that <code>close()</code> must be invoked on after <code>close()</code> is invoked on this object.</dd>
<dt><b>Throws:</b></dt>
<dd><code><a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a></code> - if (1) <code>closeable</code> is <code>null</code>, (2) this object is in a closed state, or (3) provided closeable object is not supported for this main object.</dd>
<dt><b>See Also:</b></dt>
<dd><a href="../../../oracle/xml/xquery/OXQCloseable.html" title="interface in oracle.xml.xquery"><code>Detailed description</code></a></dd>
</dl>
</dd>
</dl>
<hr/>
<p><a name="enlistCloseable_javax_xml_stream_XMLStreamReader_" id="enlistCloseable_javax_xml_stream_XMLStreamReader_"><!-- --></a></p>
<h3>enlistCloseable</h3>
<pre class="oac_no_warn">void <b>enlistCloseable</b>(javax.xml.stream.XMLStreamReader closeable)
                     throws <a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a>
</pre>
<dl>
<dd>Declares an <code>XMLStreamReader</code> object that will be closed when this object is closed.
<p>Note: <code>XMLStreamReader</code> implementations don&#39;t usually conform to the thread-safety semantics defined above, so their use as resources is not recommended in multi-threaded environments.</p>
</dd>
<dd>
<dl>
<dt><b>Parameters:</b></dt>
<dd><code>closeable</code> - object that <code>close()</code> must be invoked on after <code>close()</code> is invoked on this object.</dd>
<dt><b>Throws:</b></dt>
<dd><code><a href="../../../javax/xml/xquery/XQException.html" title="class in javax.xml.xquery">XQException</a></code> - if (1) <code>closeable</code> is <code>null</code>, (2) this object is in a closed state, or (3) provided closeable object is not supported for this main object.</dd>
<dt><b>See Also:</b></dt>
<dd><a href="../../../oracle/xml/xquery/OXQCloseable.html" title="interface in oracle.xml.xquery"><code>Detailed description</code></a></dd>
</dl>
</dd>
</dl>
<!-- ========= END OF CLASS DATA ========= -->
<hr/>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<p style="display: none"><a href="#skip_navbar_bottom" title="Skip navigation links">Skip navigation links</a> <a name="navbar_bottom" id="navbar_bottom"><!-- --></a></p>
<table class="oac_no_warn" summary="Layout table... probably." border="0" width="100%" cellpadding="1" cellspacing="0">
<tbody><tr>
<td colspan="2" bgcolor="#EEEEFF" class="NavBarCell1"><a name="navbar_bottom_firstrow" id="navbar_bottom_firstrow"><!-- --></a>
<table class="oac_no_warn" summary="Layout table... probably." border="0" cellpadding="0" cellspacing="3">
<tbody><tr align="center" valign="top">
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../overview-summary.html"><span class="NavBarFont1"><b>Overview</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="package-summary.html"><span class="NavBarFont1"><b>Package</b></span></a>&nbsp;</td>
<td bgcolor="#FFFFFF" class="NavBarCell1Rev">&nbsp;<span class="NavBarFont1Rev"><b>Class</b></span>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="package-tree.html"><span class="NavBarFont1"><b>Tree</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../deprecated-list.html"><span class="NavBarFont1"><b>Deprecated</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../index-all.html"><span class="NavBarFont1"><b>Index</b></span></a>&nbsp;</td>
<td bgcolor="#EEEEFF" class="NavBarCell1"><a href="../../../help-doc.html"><span class="NavBarFont1"><b>Help</b></span></a>&nbsp;</td>
</tr>
</tbody></table>
</td>
<td align="right" valign="top" rowspan="3"><em><b>Oracle&reg; Database XML Java API Reference<br/>
12<em>c</em> Release 1 (12.1)</b><br/>
E15981-09</em></td>
</tr>
<tr>
<td bgcolor="white" class="NavBarCell2"><span style="font-size: smaller">&nbsp;PREV CLASS&nbsp; &nbsp;<a href="../../../oracle/xml/xquery/OXQCompositeResolverFactory.html" title="interface in oracle.xml.xquery"><b>NEXT CLASS</b></a></span></td>
<td bgcolor="white" class="NavBarCell2"><span style="font-size: smaller"><a href="../../../index.html?oracle/xml/xquery/OXQCloseable.html" target="_top"><b>FRAMES</b></a> &nbsp; &nbsp;<a href="OXQCloseable.html" target="_top"><b>NO FRAMES</b></a> &nbsp; &nbsp;</span><script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes<\/B><\/A>');
  }
  //-->
</script> <noscript><a href="../../../allclasses-noframe.html"><b>All Classes</b></a></noscript></td>
</tr>
<tr>
<td valign="top" class="NavBarCell3"><span style="font-size: smaller">SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<a href="#method_summary">METHOD</a></span></td>
<td valign="top" class="NavBarCell3"><span style="font-size: smaller">DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<a href="#method_detail">METHOD</a></span></td>
</tr>
</tbody></table>
<p><a name="skip_navbar_bottom" id="skip_navbar_bottom"></a> <!-- ======== END OF BOTTOM NAVBAR ======= --></p>
<hr/>
<p>Copyright &copy; 2003, 2014, Oracle and/or its affiliates. All rights reserved.</p>


</body></html>