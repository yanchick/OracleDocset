<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5830"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Administration%20and%20Customization%20of%20Oracle%20Database%20Provider%20for%20DRDA"></a><title>Administration and Customization of Oracle Database Provider for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1022"/>
<meta name="description" content="For customers who have a large investment in DB2-based applications, this document describes how to migrate to Oracle Database while keeping these applications largely unchanged."/>
<meta name="dcterms.created" content="2014-06-25T19:35:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Provider for DRDA User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E55482-01"/>
<meta name="dcterms.isVersionOf" content="DRDAS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="translation_examples.htm" title="Previous" type="text/html"/>
<link rel="Next" href="diagnostics.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55482-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/24</span> <!-- End Header -->
<div id="DRDAS219" class="chapter"><a id="sthref109"></a>
<h1 class="chapter"><span class="secnum">5</span> Administration and Customization of Oracle Database Provider for DRDA</h1>
<p>This chapter covers various administration and customization issues.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CJHEHHIB">Migration Steps using Oracle Database Provider for DRDA</a></p>
</li>
<li>
<p><a href="#CJHFEBFB">Installing and Configuring Oracle Database Provider for DRDA Software</a></p>
</li>
<li>
<p><a href="#CJHEEEBG">Installing Oracle Database Provider for DRDA Objects in the Oracle Database</a></p>
</li>
<li>
<p><a href="#CJHGDBFC">Administering DRDA Package Authority</a></p>
</li>
<li>
<p><a href="#CJHDIJJB">Migrating DB2 Data</a></p>
</li>
<li>
<p><a href="#CJHIJGFI">Retargeting the Application</a></p>
</li>
<li>
<p><a href="#CJHDGFCH">SQL Statement Translation and Datatype Tuning</a></p>
</li>
</ul>
<a id="CJHEHHIB"></a>
<div id="DRDAS220" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Migration Steps using Oracle Database Provider for DRDA</h2>
<p>While migration of existing DB2 applications to Oracle Database is data- and target-specific, the general methodology has the following six steps:</p>
<ol>
<li>
<p>Installing and configuring Oracle Database Provider for DRDA software</p>
</li>
<li>
<p>Installing Oracle Database Provider for DRDA objects in the Oracle Database</p>
</li>
<li>
<p>Administering DRDA Package authority</p>
</li>
<li>
<p>Migrating DB2 data</p>
</li>
<li>
<p>Re-targeting the application</p>
</li>
<li>
<p>Tuning SQL Translation and Data types</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CJHFEBFB"></a>
<div id="DRDAS221" class="sect1">
<h2 class="sect1">Installing and Configuring Oracle Database Provider for DRDA Software</h2>
<p>Before installing Oracle Database Provider for DRDA software, an organization must consider several operational and resource issues. Flexibility and performance of machine and network resources is paramount when determining whether an optimal installation is as a standalone Oracle home, an Oracle home within an existing Oracle Database, or on a machine that is entirely separate from the Oracle Database. Additionally, the nature of all possible DB2 clients that must use the installation is a determining factor; in this context, DB2 is considered a client.</p>
<p>See <a href="install_config.htm#CBDBDHBI">Chapter 3, &#34;Installation and Configuration of Oracle Database Provider for DRDA&#34;</a>.</p>
</div>
<!-- class="sect1" -->
<a id="CJHEEEBG"></a>
<div id="DRDAS222" class="sect1">
<h2 class="sect1">Installing Oracle Database Provider for DRDA Objects in the Oracle Database</h2>
<p>Before installing Oracle Database Provider for DRDA objects in the Oracle Database, one or more users must be designated as DRDA Administrators, and have the Administrator role. See <a href="install_config.htm#CBDECJJD">&#34;Administrator Role&#34;</a>.</p>
<p>Similarly, designate users who will be accessing the Oracle Database through Oracle Database Provider for DRDA or DB2 applications, and grant to them roles and privileges of DRDA User. See <a href="install_config.htm#CBDIDCDF">&#34;User Role&#34;</a>.Some aspects of setting the DRDA User&#39;s authority and configuration may need to be delayed until further in the migration process. This mostly concerns specific DRDA packages used by the application, and any specific SQL translations or datatype tuning. If the application&#39;s packages are identified before migration, these may be applied as part of the package authorization workflow.</p>
</div>
<!-- class="sect1" -->
<a id="CJHGDBFC"></a>
<div id="DRDAS223" class="sect1">
<h2 class="sect1">Administering DRDA Package Authority</h2>
<p>In order to successfully access Oracle Database from DRDA or DB2 applications through Oracle Database Provider for DRDA, package authorization must be in place; see <a href="translation_examples.htm#BABEGFDC">&#34;Using the SQL Translator Interface Package&#34;</a>. At a minimum, the following information must be collected about the application and its users:</p>
<ul>
<li>
<p>package collection ID, such as <code>NULLID</code></p>
</li>
<li>
<p>package name, such as <code>DSNPBD3</code></p>
</li>
<li>
<p>package version name, if applicable, such as <code>01</code> or <code>NULL</code></p>
</li>
<li>
<p>name of the Oracle user who must access the database, such as <code>DRDAUSR</code></p>
</li>
</ul>
<p>A SQL Translation Profile Name must also be designated for the application represented by the package. See <a href="architecture.htm#CACEADIH">&#34;Packages&#34;</a>.</p>
</div>
<!-- class="sect1" -->
<a id="CJHDIJJB"></a>
<div id="DRDAS224" class="sect1">
<h2 class="sect1">Migrating DB2 Data</h2>
<p>In DB2, objects may be created under an arbitrary schema, whereas schema names are not arbitrary in Oracle Database. Therefore, careful use of schemas must be considered when migrating data from DB2 to Oracle. In Oracle, all schema objects, such as tables, views, synonyms, and so on, must be allocated in a schema of an actual user. This obviously effects how these objects are named, created, and accessed.</p>
<p>Consider the following example: <code>USER1</code> creates tables <code>&#34;USER1&#34;.&#34;TABLE1&#34;</code> and <code>&#34;USER2&#34;.&#34;TABLE2&#34;</code>. In DB2, <code>TABLE1</code> and <code>TABLE2</code> are owned by <code>USER1</code>, because <code>USER1</code> is their creator. In Oracle, the table <code>&#34;USER2&#34;.&#34;TABLE2&#34;</code> is owned by user <code>USER2</code>. Additionally, <code>USER1</code> could not have created <code>TABLE2</code> unless <code>USER1</code> has <code>CREATE ANY TABLE</code> privelege. Instead, <code>USER2</code> must create <code>TABLE2</code>, and then grant <code>USER1</code> access to it.</p>
<p>Data migrated from DB2 to Oracle must be defined also in terms of Oracle data types. While Oracle uses ANSI-defined data type names, they do not necessarily have the same range limits or semantics as the DB2 implementation. To accurately model existing DB2 application data types, review <a href="data_dictionary.htm#BABHGJAH">Chapter 8, &#34;Data Dictionary for Oracle Database Provider for DRDA&#34;</a>.</p>
<p>After creating the schema and objects with appropriate data types, the data may be imported into Oracle.</p>
</div>
<!-- class="sect1" -->
<a id="CJHIJGFI"></a>
<div id="DRDAS225" class="sect1">
<h2 class="sect1">Retargeting the Application</h2>
<p>Note that the following examples illustrate how to migrate DB2 z/OS applications. You would need to follow similar steps when migrating DB2/LUW or DB2/400 applications. Refer to IBM documentation for details of each product&#39;s equivalent steps.</p>
<p>There are two general categories of applications: <span class="bolditalic">native applications</span> and <span class="bolditalic">remote applications</span>.</p>
<div id="DRDAS226" class="sect2"><a id="sthref110"></a>
<h3 class="sect2">Re-targeting Native Applications</h3>
<p>Typical DB2 applications are called native because they interact with a local DB2 system directly, through an internal IPC mechanism. These applications use embedded SQL programming, and utilize the DB2 SQL PreProcessor. Pre-processing the source generates an <span class="bolditalic">execution plan</span> that is stored in a Database Resource Module (DBRM). Users must upload, or bind the execution plan to the local DB2 instance before the program runs.</p>
<p>The execution plan contains all the static SQL embedded in the application source, as well as additional attributes such as <span class="bolditalic">location</span>, also called the Current Server. By default, Current Server is blank; this indicates that the server is on the local DB2 instance. It is possible, however, to re-target the execution plan to run all operations on another server by setting a new value for the Current Server attribute.</p>
<p>The following steps should be performed by an IBM DB administrator.</p>
<p class="subhead2"><a id="DRDAS227"></a>To re-target a native application using an execution plan:</p>
<ol>
<li>
<p>Create location entries in the DB2 Communications Database.</p>
<p>DB2 has a internal communications system for connecting to remote DB2 instances. To address a remote instance, insert records into the <code>SYSIBM.IPNAMES</code> table, the <code>SYSIBM.LOCATIONS</code> table and, optionally, into the <code>SYSIBM.USERNAMES</code> table.</p>
<p>See IBM DB2 documentation for a description of the DB2 Communications Database facility.</p>
<p>The following command inserts a linkname <code>REMHOST</code>, a location entry <code>DRDAAS</code>, and an optional username mapping entry in the DB2 Communications Database. The linkname specifies the hostname or IP address of the computer that is running Oracle Database Provider for DRDA. The location specifies an RDB name that uses the linkname and the port number that Oracle Database Provider for DRDA is listening on. These correspond to Oracle Database Provider for DRDA configuration parameters <code>DATA_PORT</code> and <code>RDB_MAP</code>. Note that the location name must match exactly to the <code>RDB()</code> value specified in the <code>RDB_MAP</code> parameter.</p>
<pre>INSERT INTO SYSIBM.IPNAMES (LINKNAME,SECURITY_OUT,USERNAMES,IPADDR)
  VALUES (&#39;REMHOST&#39;,&#39;P&#39;,&#39;O&#39;,&#39;remotehost.remotedomain.com&#39;);

INSERT INTO SYSIBM.LOCATIONS (LOCATION,LINKNAME,PORT)
  VALUES (&#39;DRDAAS&#39;,&#39;REHMOST&#39;,&#39;1446&#39;);

INSERT INTO SYSIBM.USERNAMES (TYPE,AUTHID,LINKNAME,NEWAUTHID,PASSWORD)
  VALUES (&#39;O&#39;,&#39; &#39;,&#39;REMHOST&#39;,&#39;DRDAUSER&#39;, &#39;userpwd&#39; );
</pre></li>
<li>
<p>Remotely bind the application Plan to Oracle Database Provider for DRDA.</p>
<p>After the location entries are inserted, you must remotely bind the application execution plan. The following code binds plan <code>DSNPBD3</code> through the DSN command processor <code>IKJEFT01</code>. Note that location <code>DRDAAS</code> prefixes the collection Id.</p>
<pre>BIND PACKAGE(DRDAAS.NULLID) MEMBER(DSNPBD3) -
            ACT(REP) ISO(CS) CURRENTDATA(YES) ENCODING(EBCDIC)
</pre></li>
<li>
<p>Locally bind the package with current server.</p>
<p>After the plan is bound remotely, re-bind the local plan using the current server option to re-target execution. The following code binds plan <code>DSNPBD3</code> through the DSN command processor <code>IKJEFT01</code>.</p>
<p>Note that the plan must be referred to in the remote plan through the package list, <code>PKLIST</code>, and must specify both the location in the package reference, <code>DRDAAS.NULLID.DSNPBD3</code>, and specify the <code>CURRENTSERVER</code> option that contains the location.</p>
<pre>BIND PLAN(DSNPBD3) -
   PKLIST(DRDAAS.NULLID.DSNPBD3) -
   ACT(REP) ISO(CS) CURRENTDATA(YES) ENCODING(EBCDIC) -
   CURRENTSERVER(DRDAAS)
</pre></li>
<li>
<p>After the plan is bound remotely and re-bound locally, the application runs using plan <code>DSNPBD3</code>, implicitly makes a remote connection through the local DB2 to Oracle Database Provider for DRDA, and executes all operations of the plan remotely. The local DB2 remains a pass through coordinator in this configuration.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<div id="DRDAS228" class="sect2"><a id="sthref111"></a>
<h3 class="sect2">Re-targeting Remote Applications</h3>
<p>Remote applications are typically not directly tied to the Local DB2. Such applications typically are referred to as being <span class="italic">network-aware</span> or <span class="italic">network-oriented</span> and have a remote server location configuration attribute that is used to specify what and where to connect to.</p>
<p>Such applications utilize Oracle Database Provider for DRDA the network protocol. Re-targeting of this type of application is simple to configure.</p>
<p class="subhead2"><a id="DRDAS229"></a>To re-target a remote application using an execution plan:</p>
<ol>
<li>
<p>Change the configuration options of the Application to use the hostname (or IP address), port number and RDB name of that configured in Oracle Database Provider for DRDA. An example of this is through ODBC, in which the DSN entry contains network parameters.</p>
<p>In this example, the <code>Network</code> and <code>PortNumber</code> parameters correspond to the <code>Linkname</code> and <code>Location</code> entries inserted into the DB2 Communication Database example used earlier. The <code>Database</code> parameter corresponds to the <code>Location</code> name. All of which, again, correspond to the <code>DATA_PORT</code> and <code>RDB_MAP</code> parameters of the configured Oracle Database Provider for DRDA.</p>
<p>Here is an example of an <code>odbc.ini</code> file.</p>
<pre>[DRDAAS]
       Network=remotehost.remotedomain.com
       PortNumber=1446
       Database=DRDAAS
</pre></li>
<li>
<p>Execute the package resource binding operation for the application.</p>
<p>Often this is handled implicitly by the application itself, or is documented as a one-time step to setting up the applications access and resource to a remote DB2 instance. Refer to the documentation for the specific application for Binding instructions.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CJHDGFCH"></a>
<div id="DRDAS230" class="sect1">
<h2 class="sect1">SQL Statement Translation and Datatype Tuning</h2>
<p>Some applications may have DB2-specific SQL that is beyond the automatic translation mechanism of SQL translation, or may be expecting a very specific datatype for a particular column in a query. In such cases it may be necessary to manually insert SQL substitution statements, or add item-specific datatype manipulations.</p>
<p>For example, suppose an application has a specific SQL statement that has the following DB2-specific syntax: <code>SELECT LOG2(COL1) FROM TABLE1</code>. To work correctly in Oracle, the SQL needs to be translated into this statement: <code>SELECT LOG10(COL1,2) FROM TABLE1</code>.</p>
<p>Through SQL Translation&#39;s Register facility, a direct translation may be registered for this SQL statement, as shown in <a href="#CJHHICBG">Example 5-1</a>. Note that this must be done by the user who is executing the SQL statement; remember that the SQL Translation Profile must created as a resource for that user.</p>
<div id="DRDAS231" class="example">
<p class="titleinexample"><a id="CJHHICBG"></a>Example 5-1 Registering a SQL Substitution Statement</p>
<p>The application&#39;s package has been assigned the Profile name <code>DB2ZOS</code>.</p>
<pre>connect DRDAUSER/<span class="italic">userpwd</span>
execute dbms_sql_translator.register_sql_translation(&#39;DB2ZOS&#39;,
   &#39;SELECT LOG2(COL1) FROM TABLE1&#39;,
   &#39;SELECT LOG10(COL1,2) FROM TABLE1&#39;)
</pre></div>
<!-- class="example" -->
<p>After the SQL translator is registered, when the application issues the original SQL it is implicitly translated to the new SQL and processes.</p>
<p>In some very specific cases, application clients require the datatypes of select items in a query to be returned in a very specific format.</p>
<p>Let&#39;s say that the result of the translated query <code>SELECT LOG10(COL1,2) FROM TABLE1</code> returns a <code>DECFLOAT34</code> datatype, but the application is unable to process it, it is possible to implicitly coerce the datatype to another, compatible type.</p>
<p>If the application supports the <code>DOUBLE PRECISION</code> data type, it is possible to use the <code>TYPEMAP</code> facility to add this specific coercion described in <a href="#CJHEEFAG">Example 5-2</a>.</p>
<div id="DRDAS232" class="example">
<p class="titleinexample"><a id="CJHEEFAG"></a>Example 5-2 Registering an On-demand Datatype Conversion</p>
<pre>connect DRDAADM/<span class="italic">adminpwd</span>

execute DBMS_DRDAAS_ADMIN.SET_TYPEMAP(&#39;NULLID&#39;, &#39;DSNPBD3&#39;, NULL,
   &#39;TABLE1:LOG10(COL1,2)&#39;, &#39;NUMBER=DOUBLE&#39;)

execute DBMS_DRDAAS_ADMIN.SET_TYPEMAP(&#39;NULLID&#39;, &#39;DSNPBD3&#39;, NULL,
   &#39;TABLE1:LOG10(COL1,2)&#39;, &#39;NUMBER(0,-127)=DOUBLE&#39;)
</pre></div>
<!-- class="example" -->
<p>Refer to <a href="data_type.htm#CDECJHHB">&#34;Data Type Equivalence and Remapping&#34;</a> for details.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1406">
<tr>
<td class="cellalignment1413">
<table class="cellalignment1411">
<tr>
<td class="cellalignment1410"><a href="translation_examples.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1410"><a href="diagnostics.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1415">
<table class="cellalignment1409">
<tr>
<td class="cellalignment1410"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1410"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1410"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1410"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1410"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1410"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>