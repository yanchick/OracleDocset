<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5827"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Architecture%20of%20Oracle%20Database%20Provider%20for%20DRDA"></a><title>Architecture of Oracle Database Provider for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1022"/>
<meta name="description" content="For customers who have a large investment in DB2-based applications, this document describes how to migrate to Oracle Database while keeping these applications largely unchanged."/>
<meta name="dcterms.created" content="2014-06-25T19:35:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Provider for DRDA User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E55482-01"/>
<meta name="dcterms.isVersionOf" content="DRDAS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="introduction.htm" title="Previous" type="text/html"/>
<link rel="Next" href="install_config.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55482-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/24</span> <!-- End Header -->
<div id="DRDAS120" class="chapter"><a id="sthref86"></a>
<h1 class="chapter"><span class="secnum">2</span> Architecture of Oracle Database Provider for DRDA</h1>
<p>This chapter discusses the architecture of Oracle Database Provider for DRDA.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CACBHCHB">Protocol Considerations</a></p>
</li>
<li>
<p><a href="#CACIDIFJ">Two-Phase Commit and Transaction Recovery</a></p>
</li>
<li>
<p><a href="#CACFGFDD">Autonomy of Service</a></p>
</li>
<li>
<p><a href="#CACEADIH">Packages</a></p>
</li>
<li>
<p><a href="#CACCDICE">SQL Dialect</a></p>
</li>
</ul>
<p>For more information about DRDA in DB2, see <span class="italic">DB2 Version 9.1 for z/OS Information Center</span> at <code><a href="http://www.ibm.com">http://www.ibm.com</a></code>.</p>
<a id="CACBHCHB"></a>
<div id="DRDAS121" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Protocol Considerations</h2>
<p>DRDA is a data protocol with some similarities to Oracle&#39;s SQL*Net data protocol. While DRDA is designed to move relational data between a client and a server, it lacks the more robust management and routing controls of SQL*Net. The primary difference between DRDA and SQL*Net is the language of the protocol itself. DRDA and SQL*Net are not compatible, so it is not possible to use a SQL*Net client to connect to a DRDA server, or vice versa.</p>
<p>The terminology used with DRDA is also similar to SQL*Net, and general concepts translate to conventional Oracle definitions, as demonstrated by the following examples:</p>
<ul>
<li>
<p>An <span class="bolditalic">application requester</span> (AR) is an interface that client programs use to create and send SQL-based requests to an application server.</p>
</li>
<li>
<p>An <span class="bolditalic">application server</span> (AS) is a server- and database-side program that accepts such requests on behalf of the client, executes database operations, and returns resulting data back to the client.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CACIDIFJ"></a>
<div id="DRDAS122" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Two-Phase Commit and Transaction Recovery</h2>
<p>DRDA and DB2 implement two command sets that enable commit and rollback of transactions. They ensure that data integrity is maintained during updates of a transaction, and that these updates may be recovered if either the connection or applications fail at the time that the transaction is being committed. DRDA supports commands that implement both <span class="bold">SingleSite</span> and <span class="bold">TwoPhase</span> commit protocols. At a minimum, the AS must support SingleSite commitment.</p>
<ul>
<li>
<p>Single Site commit protocol consists of a simple operation that has no ability to coordinate between nodes that may be involved in a distributed transaction. It is the basic mechanism for committing data, and it is used by most common applications.</p>
</li>
<li>
<p>Two Phase commit protocol enables the coordination of multiple transactions, either on the same node or on separately networked nodes.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CACFGFDD"></a>
<div id="DRDAS123" class="sect1">
<h2 class="sect1">Autonomy of Service</h2>
<p>The Application Server is external to the Oracle Database server. Because of this, the application has a wide range of location options.</p>
<p>In a typical configuration, the AS runs on the same machine as the Oracle Database, as described in <a href="introduction.htm#CACGEEHA">Figure 1-1</a>. Because the AS is not tightly integrated into the Oracle Database, it may be installed into its own Oracle Home, or on a machine separate from either the client or the database, as illustrated in <a href="#CACEJAHG">Figure 2-1</a>. This <span class="bold">middle tier configuration</span> enables the separation of service resources. It also allows for better scaling of service because separate machine resources can be dedicated to both AS and Database.</p>
<div id="DRDAS124" class="figure">
<p class="titleinfigure"><a id="CACEJAHG"></a>Figure 2-1 AS Middle Tier Configuration</p>
<img width="542" height="120" src="img/drdas_vm_006.png" alt="Surrounding text describes Figure 2-1 ."/><br/></div>
<!-- class="figure" -->
<p>Additionally, the separation of the AS from the Client and Server tiers provides an extra layer of security and reliability. If the AS crashes, the Oracle Database instance is not impacted. Database integrity is maintained, and Oracle Database recovers the state of the transaction.</p>
</div>
<!-- class="sect1" -->
<a id="CACEADIH"></a>
<div id="DRDAS125" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Packages</h2>
<p>The resources associated with DRDA application are known as <span class="bold">packages</span>. More specifically, the application requester utilizes a package as a reference to what the application does: the package is where the statements are stored. The application refers to the statement through a section number. There are two general classes of application statements: static and dynamic.</p>
<ul>
<li>
<p><span class="bold">Static statements</span> contain hard-coded SQL, statements where the SQL text does not change during the run of the application. They are very quick to execute, and are often optimized prior to run-time to achieve high performance. Because it is predefined, static SQL has a shorter execution time at first invocation.</p>
</li>
<li>
<p><span class="bold">Dynamic statements</span> are primarily empty placeholders, and are sometimes called <span class="bold">generic cursors</span>. They have no SQL text before run-time, and the application constructs the actual SQL statements it needs during operation and optimizes them at runtime. After the first invocation, processed dynamic SQL statements are typically cached, so subsequent execution time of the same statement is comparable to static SQL statements of similar complexity.</p>
</li>
</ul>
<p>The packages are constructed through proprietary tools. For example, in a DB2 application environment, a developer often writes an application that contains embedded SQL statements. The application source is processed by the SQL PreCompiler, which is analogous to Oracle&#39;s Pro*C precompiler. The output is typically post-processed into a source module, along with an on-disk resource form of the statements used in the source program. In DB2 terminology, this creates a Database Request Module, or DBRM. Most implementations that create this file store it externally in a proprietary format.</p>
<p>The contents of the DBRM must be either loaded into the remote database or otherwise made available to the AS at the time of execution. However, loading data that is in proprietary format has many challenges. DRDA addresses this by providing a set of Command Requests to remotely upload the resource definition into a target AS. Most AR implementations provide an option or tool to upload the resource, either before or during the application&#39;s SQL session. This process is called <span class="bold">binding a package</span>.</p>
<p>After the resource definition (DBRM) is bound as a package to the remote database, the AS may load it in advance for better performance.</p>
</div>
<!-- class="sect1" -->
<a id="CACCDICE"></a>
<div id="DRDAS126" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">SQL Dialect</h2>
<p>While Oracle is partially ANSI SQL compliant, as are most SQL-based database systems today, there are some exceptions. Database vendors implemented the ANSI SQL standard differently; this resulted in SQL &#39;dialects&#39; that present some challenges during statement execution. Because the original target database used with DRDA is DB2, the applications that are discussed here use the DB2-specific dialect of SQL.</p>
<p>Much of Data Manipulation Language (DML) and some Data Definition Language (DDL) has been standardized in ANSI SQL for commonly used objects such as tables, views, indexes, simple procedures, or function definitions. However, each database vendor will still have its own set of product-specific extensions to both DDL and DML. The DRDA protocol treats SQL statements as database-specific entities that the database must handle; it indicates to Oracle Database that its SQL is in a DB2 dialect, and that it must have a translation service to handle it. This translation is supplied by the SQL Translation Framework feature, fully described in <a class="olink DRDAA" href="../DRDAA/toc.htm"><span class="italic">Oracle&reg; Database Migration Guide</span></a>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1406">
<tr>
<td class="cellalignment1413">
<table class="cellalignment1411">
<tr>
<td class="cellalignment1410"><a href="introduction.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1410"><a href="install_config.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1415">
<table class="cellalignment1409">
<tr>
<td class="cellalignment1410"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1410"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1410"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1410"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1410"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1410"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>