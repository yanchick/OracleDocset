<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5851"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/SQL%20Translation%20and%20Examples%20for%20Oracle%20Database%20Provider%20for%20DRDA"></a><title>SQL Translation and Examples for Oracle Database Provider for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1022"/>
<meta name="description" content="For customers who have a large investment in DB2-based applications, this document describes how to migrate to Oracle Database while keeping these applications largely unchanged."/>
<meta name="dcterms.created" content="2014-06-25T19:35:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Provider for DRDA User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E55482-01"/>
<meta name="dcterms.isVersionOf" content="DRDAS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="install_config.htm" title="Previous" type="text/html"/>
<link rel="Next" href="customization.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55482-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/24</span> <!-- End Header -->
<div id="DRDAS196" class="chapter"><a id="sthref102"></a>
<h1 class="chapter"><span class="secnum">4</span> SQL Translation and Examples for Oracle Database Provider for DRDA</h1>
<p>This section briefly introduces the topic of SQL Translation and provides actual examples of using IBM-to-Oracle SQL translation.</p>
<p>SQL Translation is a new feature in Oracle Database 12<span class="italic">c</span>. Oracle Provider for DRDA may be used without SQL Translation with earlier releases of Oracle Database.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#BABFEBGI">Overview of SQL Translation</a></p>
</li>
<li>
<p><a href="#BABFGBCA">Translating DB2-Specific SQL Syntax</a></p>
</li>
<li>
<p><a href="#BABEGFDC">Using the SQL Translator Interface Package</a></p>
</li>
<li>
<p><a href="#BABGJAHD">Accessing a Third-Party Translator from Oracle Database</a></p>
</li>
<li>
<p><a href="#BABECGJB">Using a Translator Management Script</a></p>
</li>
<li>
<p><a href="#BABIGAJJ">Verifying the SQL Translator Profile</a></p>
</li>
<li>
<p><a href="#BABHDABB">Altering the SQL Translation Profile</a></p>
</li>
</ul>
<p>For more information on SQL Translation, see <a class="olink DRDAA" href="../DRDAA/toc.htm"><span class="italic">Oracle&reg; Database Migration Guide</span></a>.</p>
<a id="BABFEBGI"></a>
<div id="DRDAS197" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of SQL Translation</h2>
<p>Oracle Database Release 12<span class="italic">c</span> introduces the concept of SQL Translation. This feature enables the translation of &#39;foreign&#39; SQL statements, such as DB2, into a SQL syntax that may be correctly used by Oracle Database. SQL Translation itself is implemented through a SQL Translator that is most often supplied by a third party to the translation. The SQL Translator inspects the input SQL, and sometimes alters it to adhere to Oracle SQL syntax. A SQL Translation Profile. which is specified through a SQL Translator Interface Package, specifies a SQL Translator that is used.</p>
<p>Note that each DB2 package may be associated with a SQL Translation profile through the attributes kept for that package. The SQL Translator associated with the SQL Translation Profile specified for the DB2 package is used when preparing SQL statements within that DB2 package.</p>
<p>In order for translation to proceed, the following sequence of events must take place:</p>
<ol>
<li>
<p>Acquisition of a SQL Translator.</p>
</li>
<li>
<p>Creation of a SQL Interface Package that references that translator.</p>
</li>
<li>
<p>Creation of a SQL Translation Profile that references the SQL Interface Package.</p>
<p>This step may be done only once in the life of an instance. However, it must be performed at least once to use SQL Translation.</p>
<p>In situations with multiple translators, or where different SQL Translation Profiles are necessary, this process may be repeated.</p>
</li>
<li>
<p>Association of DB2 packages with a SQL Translation profile.</p>
<p>This step must be completed for each package created.</p>
<p>Note that a package does not have to be created before it is associated with the translation profile; only the name of the package is necessary. This step does not validate that a particular package already exists.</p>
</li>
<li>
<p>At execution time, the user passes SQL text to Oracle Database Provider for DRDA through the package.</p>
</li>
<li>
<p>When Oracle Database Provider for DRDA acquires SQL text, it checks if the package is associated with a SQL Translation Profile, and then sets that SQL Translation Profile to be in effect during the time when SQL text is parsed and executed.</p>
</li>
<li>
<p>After Oracle Database Provider for DRDA prepares SQL text for execution, Oracle Database uses the current SQL Translation Profile to translate the SQL statements, and then executes them.</p>
</li>
</ol>
<p>Successful SQL translation may occur only in the following are true:</p>
<ul>
<li>
<p>A SQL Translation Profile must be enabled for the session, through the following command:</p>
<pre>ALTER SESSION SET SQL_TRANSLATION_PROFILE
</pre></li>
<li>
<p>The process must specify that incoming SQL statements are in a foreign syntax, or in a non-Oracle SQL dialect. In all cases discussed here, these dialect are variants of DB2 SQL.</p>
</li>
</ul>
<p>For Oracle Database Provider for DRDA product, the preceding two conditions are coupled; if a DB2 package is associated with a SQL Translation Profile, then the SQL statements are expected to be in a foreign syntax, and the SQL Translator associated with the SQL Translation Profile is called to translate any SQL in that package.</p>
<p>A SQL Translation Profile is a schema-level object of type <code>SQL TRANSLATION PROFILE</code>. It references a PL/SQL package through its <code>ATTR_TRANSLATOR</code> attribute; this package is known as the SQL Translator Interface Package. The package specifies the third-party SQL translator that performs the SQL translation when the SQL Translation Profile is active. Only one SQL Translation Profile may be enabled at a time.</p>
<p>SQL Translation Profiles may be shared among users. Commonly, all users share the same single SQL Translation Profile for a set of packages, but that is not necessary.</p>
</div>
<!-- class="sect1" -->
<a id="BABFGBCA"></a>
<div id="DRDAS199" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Translating DB2-Specific SQL Syntax</h2>
<p>While most of the SQL constructs that a client application submits to Oracle Database Provider for DRDA may be executed directly, some DB2 SQL constructs are not recognized by Oracle. This section discusses known issues when translating DB2 SQL statements issued by an application that is re-configured to use an Oracle Database instance.</p>
<p>If a SQL Translation Profile is in place, the SQL Translator associated with the profile may be designed to alter these SQL statements so that the application performs equivalent or similar operations in Oracle SQL and returns the expected results.</p>
<div id="DRDAS200" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref103"></a>
<h3 class="sect2">DB2 Special Registers</h3>
<p>Oracle Database does not support the <code>CURRENT TIME</code> special register construct, to get the current time of day. Calls to this construct, as in the following example, results in an <code>ORA-00936</code> error.</p>
<pre>SELECT CURRENT TIME FROM SYSIBM.SYSDUMMY1
</pre></div>
<!-- class="sect2" -->
<div id="DRDAS201" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref104"></a>
<h3 class="sect2">DB2 SQL Functions and Procedures</h3>
<p>Oracle does not support some functions that are defined in DB2. For example, the <code>CEILING</code> function does not exist in Oracle; instead, Oracle SQL syntax includes a compatible <code>CEIL</code> function.</p>
</div>
<!-- class="sect2" -->
<div id="DRDAS202" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref105"></a>
<h3 class="sect2">DB2 Named Data Types</h3>
<p>Some elementary SQL datatypes, such as <code>BIGINT</code>, are not defined in Oracle. When the application runs against Oracle, casting a column value or constant as a <code>BIGINT</code> produces an error. The following example results in an <code>ORA-00902</code> error because <code>BIGINT</code> is not recognized as a valid Oracle datatype.</p>
<pre>SELECT CAST(12345678912 AS BIGINT) from SYSIBM.SYSDUMMY1
</pre></div>
<!-- class="sect2" -->
<div id="DRDAS203" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref106"></a>
<h3 class="sect2">DB2 Syntactic Statements</h3>
<p>An <code>INSERT</code> statement in DB2 may contain syntactic clauses that are Oracle does not interpret. An example of such is the <span class="italic">isolation</span> clause, shown in the following code example.</p>
<pre>INSERT INTO SCOTT.DEPT VALUES(50, &#34;FARMING&#34;, &#34;SPRINGFIELD&#34;) WITH CHG
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEGFDC"></a>
<div id="DRDAS204" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using the SQL Translator Interface Package</h2>
<p>A SQL Translation Profile is a schema-level object of type <code>SQL TRANSLATION PROFILE</code> created through the <code>DBMS_SQL_TRANSLATOR.CREATE_PROFILE()</code> procedure. The SQL Translator Interface Package is a PL/SQL package of a certain format; it references the third-party-supplied translator objects and is, itself, referenced by the SQL Translation Profile. So the SQL Translator Interface Package connects the SQL Translation Profile and the third-party supplied SQL translator objects.</p>
<div id="DRDAS205" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref107"></a>
<h3 class="sect2">SQL Translator Interface Package</h3>
<p>A SQL Translation Profile references a PL/SQL wrapper package that has a fixed format, the <span class="bolditalic">SQL Translator Interface Package</span>. When a session sets a <code>SQL TRANSLATION PROFILE</code>, it specifies that all SQL is translated by the third-party SQL translator associated with the SQL Translator Interface Package. The procedure <code>translate_sql()</code> of the SQL Translator Interface Package performs the translation.</p>
<p><a href="#BABEJIDC">Example 4-1</a> shows a simple SQL Translation Interface Package used with a SQL Translation Profile. The language and name specifications are relative to the language-type and callable-names in the third-party SQL translator. After logging into the Oracle Database with <code>SYSDBA</code> privileges, the following package declaration must be made. The package name is the value of the <code>TRANSLATOR_ATTR</code> attribute of the SQL Translation Profile.</p>
<div id="DRDAS206" class="example">
<p class="titleinexample"><a id="BABEJIDC"></a>Example 4-1 Creating a SQL Translator Interface Package</p>
<pre>create or replace package SYSIBM.DBTooSQLTranslator as
  procedure translate_sql(
    sql_text in CLOB, 
   translated_text out CLOB);
  procedure translate_error(
    error_code in BINARY_INTEGER,
    translated_code out BINARY_INTEGER,
    translated_sqlstate out VARCHAR2);
end;
/
create or replace package body SYSIBM.DBTooSQLTranslator as
  procedure translate_sql(
    sql_text in CLOB,
    translated_text out CLOB ) 
    as language JAVA
  name /* actually the &#34;signature&#34; of the third-party callable */
  /* procedure associated with translate_sql    */
   &#39;DBTooSQLApiInterface.translateSQL(oracle.sql.CLOB, oracle.sql.CLOB[])&#39;;
 
   procedure translate_error(error_code in BINARY_INTEGER,
    translated_code out BINARY_INTEGER,
    translated_sqlstate out VARCHAR2) as
  language JAVA
  name /* actually the &#34;signature&#34; of the third-party callable */
  /* procedure associated with translate_error  */
 &#39;DBTooSQLApiInterface.translateError(oracle.sql.CLOB, oracle.sql.CLOB[])&#39;;
 end;
 /
</pre></div>
<!-- class="example" -->
<p>Note that Oracle <span class="bold">does</span> <span class="bold">not</span> provide a SQL Translator. Instead, a SQL Translator must be obtained from third-party vendors, or developed internally. Oracle provides various administrative scripts for creating and managing a SQL Translation Profile.</p>
<p>Because the SQL Translator Interface Package is called at run-time, it must have <code>EXECUTE</code> access enabled. <a href="#BABJIBDI">Example 4-2</a> shows how to grant this access.</p>
<div id="DRDAS207" class="example">
<p class="titleinexample"><a id="BABJIBDI"></a>Example 4-2 Granting EXECUTE access to SQL Translator Interface Package</p>
<pre>GRANT EXECUTE ON SYSIBM.DBTooSQLTranslator TO DRDAAS_USER_ROLE
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="DRDAS208" class="sect2"><a id="sthref108"></a>
<h3 class="sect2">Creating a SQL Translation Profile</h3>
<p>The SQL Translation Profile may be created and administered by any user who has the <code>CREATE SQL TRANSLATION PROFILE</code> authority and <code>TRANSLATE ANY SQL</code> authority. <a href="#BABHCIDC">Example 4-3</a> shows how to grant these two privileges to <code>DRDAAS_TRANS_ADMIN</code>. These privileges may be granted by a user with existing <code>SYSDBA</code> privileges.</p>
<div id="DRDAS209" class="example">
<p class="titleinexample"><a id="BABHCIDC"></a>Example 4-3 Granting Required Authority to Users with DRDAAS_TRANS_ADMIN Role</p>
<pre>GRANT CREATE SQL TRANSLATION PROFILE TO DRDAAS_TRANS_ADMIN;
GRANT TRANSLATE ANY SQL TO DRDAAS_TRANS_ADMIN WITH ADMIN OPTION;
</pre></div>
<!-- class="example" -->
<p>The <code>ADMIN OPTION</code> clause enables <code>DRDAAS_TRANS_ADMIN</code> to <code>GRANT</code> the <code>TRANSLATE ANY SQL</code> authority to other Oracle users. In this manner, the <code>DRDAAS_TRANS_ADMIN</code> may allow many users with <code>DRDAAS_USER_ROLE</code> to use the translation facility, as demonstrated in <a href="#BABDHGIE">Example 4-4</a>.</p>
<div id="DRDAS210" class="example">
<p class="titleinexample"><a id="BABDHGIE"></a>Example 4-4 Granting Translation Authority to Users with DRDAAS_USER_ROLE</p>
<pre>GRANT TRANSLATE ANY SQL TO DRDAAS_USER_ROLE;
</pre></div>
<!-- class="example" -->
<p>The actual SQL Translation Profile may be managed through a script provided in <a href="#BABEFDCF">Example 4-5</a>. Note that the administering id must already have the required authority to perform <code>CREATE SQL TRANSLATION PROFILE</code>.</p>
<div id="DRDAS211" class="example">
<p class="titleinexample"><a id="BABEFDCF"></a>Example 4-5 Creating and Managing the SQL Translation Profile</p>
<pre>declare
  PROFILE_DOES_NOT_EXIST exception;
  pragma EXCEPTION_INIT(PROFILE_DOES_NOT_EXIST, -24252);
  /* profile_name is the nsme of the SQL Translation Profile */
  /* created here.  */
  profile_name VARCHAR2(32) := &#39;DRDAAS_TRANS_ADMIN.MY_PROFILE&#39;;
 
  /* SYSIBM is the schema in which the SQL Translator Interface */
  /* package (viz., SYSIBM.DBTooSQLTranslator) is found.   */
  sql_trnsltr_intfc_schema VARCHAR2(32) := &#39;SYSIBM&#39;;
 
  /* DBTooTranslator is the unqualified package name of the SQL */
  /* Translator Interface Package */
  sql_trnsltr_intfc_pkgnm VARCHAR2(32) := &#39;DBTooSQLTranslator&#39;;
 
  sql_trnsltr_intfc_pkg VARCHAR2(128);
  grant_cmd VARCHAR2(256);
  cursor_id NUMBER;

begin
  sql_trnsltr_intfc_pkg := sql_trnsltr_intfc_schema || &#39;.&#39;  ||
    sql_trnsltr_intfc_pkgnm;
  begin
    DBMS_SQL_TRANSLATOR.DROP_PROFILE(profile_name);
    exception
      WHEN PROFILE_DOES_NOT_EXIST THEN NULL; /* ignore if non-existant */
  end;
  /* Create SQL Translation Profile */
  DBMS_SQL_TRANSLATOR.CREATE_PROFILE(profile_name);
  /* Associate the SQL Translator Interface Package denoted by */
  /* sql_trnsltr_intfc_pkg with this profile    */
  DBMS_SQL_TRANSLATOR.SET_ATTRIBUTE(profile_name,
    DBMS_SQL_TRANSLATOR.ATTR_TRANSLATOR,
    sql_trnsltr_intfc_pkg);    
  /* Mark this SQL Translation Profile as &#34;registered&#34; */
  DBMS_SQL_TRANSLATOR.SET_ATTRIBUTE(profile_name,
    DBMS_SQL_TRANSLATOR.ATTR_TRANSLATION_REGISTRATION,
    DBMS_SQL_TRANSLATOR.ATTR_VALUE_TRUE);
  /* The owner of the SQL Translator Interface Package must have */
  /* full authority for the SQL TRANSLATION PROFILE    */
  grant_cmd := &#39;GRANT ALL ON SQL TRANSLATION PROFILE &#39; ||
    profile_name || &#39; TO &#39; || sql_trnsltr_intfc_schema;
  cursor_id := DBMS_SQL.OPEN_CURSOR();
  DBMS_SQL.PARSE(cursor_id, grant_cmd, DBMS_SQL.NATIVE);
  DBMS_SQL.CLOSE_CURSOR(cursor_id);
  /* Let all with DRDAAS_USER_ROLE have access to the SQL Translation profile.  */
  grant_cmd := &#39;GRANT USE ON SQL TRANSLATION PROFILE &#39; ||
    profile_name || &#39; TO DRDAAS_USER_ROLE&#39;;
  cursor_id := DBMS_SQL.OPEN_CURSOR();
  DBMS_SQL.PARSE(cursor_id, grant_cmd, DBMS_SQL.NATIVE);
  DBMS_SQL.CLOSE_CURSOR(cursor_id);
end;
/
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGJAHD"></a>
<div id="DRDAS212" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Accessing a Third-Party Translator from Oracle Database</h2>
<p>To use a third-party translator, its files and objects must be installed in the following directory:</p>
<pre>$<span class="italic">ORACLE_HOME</span>/rdbms/drdaas/jlib
</pre>
<p>If the third-party SQL translator is in Java, <a href="#BABCJICI">Example 4-6</a> may be run in SQL*Plus environment by a <code>SYSDBA</code> user. <a href="#BABCJICI">Example 4-6</a> uses <code>DBMS_JAVA.LOADJAVA()</code> procedure to load the objects into the <code>SYSIBM</code> schema; it loads a single third-party object, <code>DBTooSQLAPI.jar</code>.</p>
<div id="DRDAS213" class="example">
<p class="titleinexample"><a id="BABCJICI"></a>Example 4-6 Loading a Third-Party SQL Translator; Single Object</p>
<pre>begin
  DBMS_JAVA.LOADJAVA(&#39;-definer -genmissing -schema SYSIBM &#39; || &#39;
  &#39; rdbms/drdaas/jlib/DBTooSQLAPI.jar&#39;, 
  &#39;((* SYSIBM)(* PUBLIC)(* -))&#39;);
end;
/
</pre></div>
<!-- class="example" -->
<p>If the third-party translator consists of multiple objects, each component must be specified in the <code>LOADJAVA</code> call. <a href="#BABEAFDG">Example 4-7</a> specifies two translator objects, <code>DBTooSQLAPI.jar</code> and <code>DBTooMainClass.class</code>.</p>
<div id="DRDAS214" class="example">
<p class="titleinexample"><a id="BABEAFDG"></a>Example 4-7 Loading a Third-Party SQL Translator; Multiple Objects</p>
<pre>begin
  DBMS_JAVA.LOADJAVA(&#39;-definer -genmissing -schema SYSIBM &#39; ||
  &#39; rdbms/drdaas/jlib/DBTooMainClass.class&#39; ||
  &#39; rdbms/drdaas/jlib/DBTooSQLAPI.jar&#39;,
  &#39;((* SYSIBM)(* PUBLIC)(* -))&#39;);
end;
/
</pre></div>
<!-- class="example" -->
<p>In case of difficulties, use <code>DBMS_JAVA.SET_OUTPUT()</code> procedure to redirect server-side error messages to <code>DBMS_OUTPUT</code>.</p>
<p>For more information on using Java in Oracle, see <a class="olink JJDEV" href="../JJDEV/toc.htm"><span class="italic">Oracle&reg; Database Java Developer&#39;s Guide</span></a>.</p>
</div>
<!-- class="sect1" -->
<a id="BABECGJB"></a>
<div id="DRDAS215" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using a Translator Management Script</h2>
<p>Oracle Database ships a <code>drdasqtt_translator_setup.sql</code> script, which manages translation profiles. The script must be invoked in SQL*Plus by a user with <code>SYSDBA</code> privileges. It asks for the following inputs:</p>
<ol>
<li>
<p>SQL Translator Interface Package Schema, such as <code>SYSIBM</code>.</p>
</li>
<li>
<p>SQL Translator Interface Package Name, such as <code>DBTooTranslator</code>.</p>
</li>
<li>
<p>SQL Translation Profile Schema, such as <code>DRDAAS_TRANS_ADMIN</code>.</p>
</li>
<li>
<p>SQL Translation Profile Name, such as <code>MY_PROFILE</code>.</p>
</li>
<li>
<p>Language type of the third-party translator, such as Java.</p>
</li>
<li>
<p>The names of files or objects supplied by the third-party vendor. If more than one is supplied, enclose the list in <span class="bolditalic">four (4)</span> single quotes and separate the items by blank spaces, as in the following code:</p>
<pre>&#39;&#39;&#39;&#39;rdbms/drdaas/jlib/DBTooMainClass.class rdbms/drdaas/jlib/DBTooSQLAPI.jar&#39;&#39;&#39;&#39;
</pre></li>
<li>
<p>The signature (entry name plus argument descriptions) of the entry in the files or objects supplied by the third-party vendor that are used for translating SQL. For Java-based third-party code, the signature may be obtained through the <code>javap</code> program. Note that signatures that contain blank space must be enclosed within double quotes.</p>
</li>
<li>
<p>The signature (entry name plus argument descriptions) for the entry in the files or objects supplied by the third-party vendor that are used for translating error codes. For Java-based third-party code, the signature may be obtained through the <code>javap</code> program. Note that signatures that contain blank space must be enclosed within double quotes.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABIGAJJ"></a>
<div id="DRDAS216" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Verifying the SQL Translator Profile</h2>
<p>The following steps verify that the SQL Translation Profile is correctly installed and fully enabled.</p>
<p class="subhead2"><a id="DRDAS217"></a>To verify the SQL Translator Profile configuration:</p>
<ol>
<li>
<p>Log into Oracle Database with SYSDBA privileges</p>
</li>
<li>
<p>Check that the translator profile is loaded into Oracle Database.</p>
<pre>SELECT * FROM ALL_SQL_TRANSLATION_PROFILES;
</pre></li>
<li>
<p>Log in with an id that has <code>DRDAAS_USER_ROLE</code> privileges.</p>
</li>
<li>
<p>Ensure that the role is set:</p>
<pre>SET ROLE DRDAAS_USER_ROLE;
</pre></li>
<li>
<p>Set the SQL Translation Profile for of session to the value specified at the time the SQL Translation Profile was created.</p>
<pre>ALTER SESSION SET SQL_TRANSLATION_PROFILE = DRDAAS_TRANS_ADMIN.MY_PROFILE;
</pre></li>
<li>
<p>Attempt the following commands:</p>
<pre>ALTER SESSION SET EVENTS = &#39;10601 trace name context forever, level 32&#39;;
SELECT CAST(1234567 AS BIGINT) FROM DUAL;
ALTER SESSION SET EVENTS = &#39;10601 trace name context off&#39;;
SELECT CAST(1234567 AS BIGINT) FROM DUAL;
</pre>
<p>The first <code>SELECT</code> should succeed, while the second should fail. The <code>ALTER SESSION SET EVENTS</code> commands specify that the following SQL is one of:</p>
<ul>
<li>
<p>foreign syntax (trace name context forever, level 32)</p>
</li>
<li>
<p>native Oracle syntax (trace name context off)</p>
</li>
</ul>
<p>This works only when using SQL*Plus.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABHDABB"></a>
<div id="DRDAS218" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Altering the SQL Translation Profile</h2>
<p>At times, it becomes necessary to completely change the SQL Translation Profile, and make the <code>SQL TRANSLATION PROFILE</code> attribute of a DB2 package reference a new SQL Translation Profile.</p>
<p>DB2 packages usually come in sets, and the names of the DB2 packages are determined by the client. However, if the client uses ODBC to access Oracle Database Provider for DRDA, the ODBC driver determines the names of the packages.</p>
<p>Oracle supplies two scripts that may be used to set the SQL Translation Profile attribute for a set of packages.</p>
<ul>
<li>
<p>If the DataDirect ODBC driver accesses Oracle Database Provider for DRDA, use the <code>drdasqt_set_profile_dd.sql</code> script, in the <code>drdaas/admin</code> directory.</p>
</li>
<li>
<p>If the IBM ODBC driver accesses Oracle Database Provider for DRDA, use the <code>drdasqt_set_profile_ibm.sql</code> script, in the <code>drdaas/admin</code> directory. Native client application may also use this script, but it may have to be extended.</p>
</li>
</ul>
<p>These scripts may be copied and altered for use with other sets of DB2 packages.</p>
<p>Additionally, each of these scripts must be run in SQL*Plus by a user with <code>DRDAAS_ADMIN_ROLE</code> privileges. The script prompts for the qualified name of the profile that is referenced by the various packages (such as <code>DRDAAS_TRANS_ADMIN.MY_PROFILE</code>). It also prompts for the default Package Collection schema, which is usually <code>NULLID</code>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1406">
<tr>
<td class="cellalignment1413">
<table class="cellalignment1411">
<tr>
<td class="cellalignment1410"><a href="install_config.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1410"><a href="customization.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1415">
<table class="cellalignment1409">
<tr>
<td class="cellalignment1410"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1410"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1410"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1410"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1410"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1410"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>