<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-5838"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Installation%20and%20Configuration%20of%20Oracle%20Database%20Provider%20for%20DRDA"></a><title>Installation and Configuration of Oracle Database Provider for DRDA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1022"/>
<meta name="description" content="For customers who have a large investment in DB2-based applications, this document describes how to migrate to Oracle Database while keeping these applications largely unchanged."/>
<meta name="dcterms.created" content="2014-06-25T19:35:18Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Provider for DRDA User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E55482-01"/>
<meta name="dcterms.isVersionOf" content="DRDAS"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="architecture.htm" title="Previous" type="text/html"/>
<link rel="Next" href="translation_examples.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55482-01.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/24</span> <!-- End Header -->
<div id="DRDAS137" class="chapter"><a id="CBDBDHBI"></a>
<h1 class="chapter"><span class="secnum">3</span> Installation and Configuration of Oracle Database Provider for DRDA</h1>
<p>This chapter discusses installation, configuration, and administration of Oracle Database Provider for DRDA.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CBDFFDCE">Installing Oracle Database Provider for DRDA</a></p>
</li>
<li>
<p><a href="#CBDDFFGC">Configuring Oracle Database Provider for DRDA</a></p>
</li>
<li>
<p><a href="#CBDEDIHA">Authorizing Oracle Database Provider for DRDA</a></p>
</li>
<li>
<p><a href="#CBDBCCJB">Uninstalling Oracle Database Provider for DRDA</a></p>
</li>
<li>
<p><a href="#CBDDFFAE">Configuration Parameters</a></p>
</li>
</ul>
<a id="CBDFFDCE"></a>
<div id="DRDAS138" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Installing Oracle Database Provider for DRDA</h2>
<p>Installation involves starting the Oracle Universal Installer, entering the Oracle home path, and selecting &#34;Oracle Database Provider for DRDA&#34; product to be installed. The installation will ask for several initial configuration items in an Interview panel for the product.</p>
<p>Note that the following procedure creates the <code>drdaas.ora</code> configuration file in the directory <code>$</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/drdaas/admin/</code>. See <a href="#CBDCJDIH">&#34;Configuration File: drdaas.ora&#34;</a>.</p>
<p class="subhead2"><a id="DRDAS139"></a>To install Oracle Database Provider for DRDA:</p>
<ol>
<li>
<p>Start Oracle Universal Installer.</p>
</li>
<li>
<p>Enter the path of an existing <code><span class="codeinlineitalic">ORACLE_HOME</span></code>, or a new path for a stand-alone installation.</p>
</li>
<li>
<p>[Optional] Enter the <code><span class="codeinlineitalic">ORACLE_HOME</span></code> name.</p>
</li>
<li>
<p>Select Oracle Database Provider for DRDA for installation.</p>
</li>
<li>
<p>In the <span class="bold">Interview</span> panel, enter the following information:</p>
<ul>
<li>
<p>Oracle Database Provider for DRDA listener host name and/or IP address</p>
<p>Specify host name or IP address of the network interface where Oracle Database Provider for DRDA is the listener.</p>
<p>Default is an empty string.</p>
</li>
<li>
<p>Oracle Database Provider for DRDA listener port number</p>
<p>Specify the port number of Oracle Database Provider for DRDA Listener.</p>
<p>Default is <code>1446</code>.</p>
</li>
<li>
<p>Oracle Database Provider for DRDA RDB map name</p>
<p>Specify the external relational database name that the client applications use as a location qualifier.</p>
<p>Default is <code>DRDAAS</code>.</p>
</li>
<li>
<p>Oracle Database connection descriptor</p>
<p>Specify the connection descriptor to use to connect to the Oracle Database. Valid values are:</p>
<ul>
<li>
<p><code>TNS(</code><code><span class="codeinlineitalic">tns_name_sentry</span></code><code>)</code>, such as <code>TNS(orcl)</code></p>
</li>
<li>
<p><code>oracle_sid</code> or <code>ORACLE_SID</code></p>
<p>This accesses the local Oracle Database before Oracle Database Provider for DRDA starts, based on the setting of the environment variable <code>$ORACLE_SID</code>.</p>
</li>
<li>
<p>TNS-Descriptor</p>
<p>For example:</p>
<pre>DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=drdaas))
(CONNECT_DATA=(SERVICE_NAME=drdaas.us.oracle.com))); 
</pre>
<p>Default is <code>oracle_sid</code>.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Select <span class="bold">Finish</span>.</p>
</li>
<li>
<p>At the command prompt, create a diagnostic directory:</p>
<pre>% mkdir -p $<span class="italic">ORACLE_HOME</span>/log/diag/dps
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBDDFFGC"></a>
<div id="DRDAS140" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Oracle Database Provider for DRDA</h2>
<p>To configure Oracle Database Provider for DRDA, you must update the <code>drdaas.ora</code> configuration file with any necessary information.</p>
<p>Additionally, you must install the objects that depend on Oracle Database Provider for DRDA product in all Oracle Database instances that use Oracle Database Provider for DRDA.</p>
<div id="DRDAS141" class="sect2"><a id="sthref87"></a>
<h3 class="sect2">Updating the drdaas.ora Configuration File</h3>
<p>Typically, no additional parameters are needed beyond those specified during installation. Refer to the section <a href="#CBDDFFAE">&#34;Configuration Parameters&#34;</a> for a list of parameters and their options.</p>
<p>In more advanced scenarios, it may be necessary to specify more than one <code>DATA_PORT</code> parameter or configure more than one <code>RDB_MAP</code> entry. Still more complex installations may require multiple Oracle Database Provider for DRDA instances.</p>
<div id="DRDAS142" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref88"></a>
<h4 class="sect3">DATA_PORT Considerations</h4>
<p>Additional <code>DATA_PORT</code> entries may be specified with different host name or IP addresses, and unallocated network port numbers. This is called a <span class="italic">Multiplexed Instance configuration</span>.</p>
</div>
<!-- class="sect3" -->
<div id="DRDAS143" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref89"></a>
<h4 class="sect3">RDB_MAP Considerations</h4>
<p>Additional <code>RDB_MAP</code> entries may be specified to add other map entries for converting between third-party relational databases and Oracle.</p>
<p>For some DRDA clients, such as the IBM DB2 Database for z/OS, the user must configure only one <code>RDB_MAP</code> entry for each Oracle Database Provider for DRDA instance. This is called a <span class="italic">Dedicated Instance configuration</span>.</p>
</div>
<!-- class="sect3" -->
<div id="DRDAS144" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref90"></a>
<h4 class="sect3">Oracle Database Provider for DRDA Instance Considerations</h4>
<p>It may be necessary to define more than one Oracle Database Provider for DRDA Instance to accommodate an environment that contains both types of DRDA clients. Therefore, Oracle Database Provider for DRDA product supports the definition of multiple instance configurations in the same <code>drdaas.ora</code> configuration file.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="DRDAS145" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref91"></a>
<h3 class="sect2">Installing Database Objects</h3>
<p>There are two sets of database objects that must be installed: Global Objects and Per-User Objects.</p>
<a id="CBDGCECJ"></a>
<div id="DRDAS146" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Global Objects</h4>
<p>Each instance of Oracle Database used in an Oracle Database Provider for DRDA configuration must install Oracle Database Provider for DRDA specific objects. This involves the following procedures:</p>
<ul>
<li>
<p>Creating a <code>SYSIBM</code> tablespace</p>
</li>
<li>
<p>Installing Oracle Database Provider for DRDA catalogs</p>
</li>
<li>
<p>Installing DB2 SQL translator</p>
</li>
<li>
<p>Designate Oracle Database Provider for DRDA administrative role</p>
</li>
</ul>
<p>See <a href="security.htm#BGBCIIDC">Chapter 11, &#34;Security and Storage Considerations for Oracle Database Provider for DRDA&#34;</a>.</p>
<p class="subhead2"><a id="DRDAS147"></a>To create a SYSIBM tablespace:</p>
<ol>
<li>
<p>Connect to the database; this example uses <code>SYSDBA</code> privileges, but they are not necessary.</p>
<pre>&gt; connect SYS as SYSDBA
</pre></li>
<li id="CBDHJDFA">
<p>Create the tablespace <code>SYSIBM</code>.</p>
<pre>&gt; create tablespace SYSIBM datafile &#39;sysibm01.dbf&#39; size 70M 
  reuse extent management local segment space management auto online;
</pre>
<p>This creates tablespace <code>SYSIBM</code> in the directory specified by the parameter <code>DB_CREATE_FILE_DEST</code>. This is discussed in more detail in section <a href="security.htm#BGBCCEEI">&#34;SYSIBM Tablespace&#34;</a>.</p>
</li>
</ol>
<p class="subhead2"><a id="DRDAS618"></a>To install Oracle Database Provider for DRDA catalogs:</p>
<ol>
<li id="CBDFACFC">
<p>Change directory to <code>$</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin</code></p>
<pre>$ cd $<span class="italic">ORACLE_HOME</span>/rdbms/admin
</pre></li>
<li>
<p>Connect to the database with <code>SYSDBA</code> privileges.</p>
<pre>&gt; connect SYS as SYSDBA
</pre></li>
<li>
<p>Invoke the following SQL script:</p>
<pre>&gt; @catdrdaas.sql
</pre>
<p>See <a href="scripts_appendix.htm#CHDEAEHI">catdrdaas.sql</a> in <a href="scripts_appendix.htm#CHDJEADJ">Appendix A, &#34;Scripts for Creating and Maintaining Oracle Database Provider for DRDA&#34;</a>.</p>
</li>
<li id="CBDCHEFA">
<p>If using Oracle Database Release 12c, invoke the following SQL script:</p>
<pre>&gt; @prvtdpsadzoscat.plb
</pre>
<p>If using Oracle Database Release 11.2, invoke the following SQL script:</p>
<pre>&gt; @prvtdpsadzoscat11.plb
</pre></li>
</ol>
<p class="subhead2"><a id="DRDAS619"></a>To install DB2 SQL translator:</p>
<p>This feature is available to users of Oracle Database 12<span class="italic">c</span> or higher.</p>
<ol>
<li id="CBDIEHEH">
<p>Change directory to <code>$</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/drdaas/admin</code></p>
<pre>$ cd $<span class="italic">ORACLE_HOME</span>/drdaas/admin
</pre></li>
<li>
<p>Connect to the database with <code>SYSDBA</code> privileges.</p>
<pre>&gt; connect SYS as SYSDBA
</pre></li>
<li id="CBDCAAHC">
<p>Invoke the following SQL script, and answer its prompts:</p>
<pre>&gt; @drdasqtt_translator_setup.sql
</pre>
<p>The script <code>drdasqtt_translator_setup.sql</code> is demonstrated in <a href="#CBDGJADA">Example 3-1</a>.</p>
</li>
</ol>
<p class="subhead2"><a id="DRDAS620"></a>To designate Oracle Database Provider for DRDA administrative role:</p>
<ol>
<li>
<p>Designate one or more user IDs to be an Oracle Database Provider for DRDA administrator. This role may set the access authority for DRDA packages and associated DRDA package attributes. Oracle user <code>SYSTEM</code> may be used, but the privilege may be granted to any user who performs the functions of DRDA administrator.</p>
</li>
<li>
<p>Grant initial DRDA package binding authority. Invoke the following SQL script and answer the prompts:</p>
<pre>&gt; @drdapkg_db2.sql

SQL&gt; Prompt Enter the OracleID under which the initial package BINDs will be made
SQL&gt; Use quotes (&#39;) if needed.
SQL&gt; Accept OracleID 
DRDAUSR

SQL&gt; Enter default collection ID for package binding (usually NULLID)
SQL&gt; Use quotes (&#39;) if needed.
SQL&gt; Accept DefaultCollection
NULLID
</pre></li>
</ol>
<p>See the <a href="security.htm#BGBIHGFG">&#34;Database Roles in Oracle Database Provider for DRDA&#34;</a> and <a href="pl_sql.htm#BABGIFIH">&#34;DBMS_DRDAAS_ADMIN Package&#34;</a>.</p>
</div>
<!-- class="sect3" -->
<div id="DRDAS148" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref92"></a>
<h4 class="sect3">SQL Translation Profile</h4>
<p>This feature is available to users of Oracle Database 12<span class="italic">c</span> or higher.</p>
<p>To facilitate correct interpretation of DRDA-based application SQL from it&#39;s native DB2 dialect to Oracle, the user must create a SQL Translation Profile.</p>
<p>Note that to perform these steps, the user must have <code>DRDAAS_USER_ROLE</code>, as described in <a href="#CBDEDIHA">&#34;Authorizing Oracle Database Provider for DRDA&#34;</a>.</p>
<p>A DB2 SQL Translator must be loaded into the database; see <a href="#CBDGCECJ">&#34;Global Objects&#34;</a>. The user may create a translation profile using this translator.</p>
<p>SQL Translation Profiles are managed on a per-user basis. In contrast, DRDA packages are managed on the application basis. As a result, only one SQL translation profile name may be associated with a specific DRDA package. The same SQL Translation Profile may be also associated with many packages; for consistency, the same SQL Translation Profile should be associated with each defined package. See <a class="olink DRDAA" href="../DRDAA/toc.htm"><span class="italic">Oracle&reg; Database Migration Guide</span></a> for details of SQL translation.</p>
<p>To create an additional translation profile, DRDA users must request a profile name from the DRDA administrator and then invoke the <code>drdasqtt_translator_setup.sql</code> script, in <code>$</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/drdaas/admin/</code> directory. <a href="#CBDGJADA">Example 3-1</a> demonstrates how to create a SQL Translation Profile for profile name <code>DB2ZOS</code>; this code creates the template of a translation profile.</p>
<div id="DRDAS149" class="example">
<p class="titleinexample"><a id="CBDGJADA"></a>Example 3-1 Creating a SQL Translation Interface Package and a Translation Profile</p>
<p>This example creates a SQL Translator Interface Package <code>SYSIBM.DBTooIntPkg</code>, and a SQL Translation Profile <code>TRANS_ADMIN.MyDBTooTransProfile</code>. It assumes that the third-party SQL translator is in JAVA, and that it appears entirely within an object <code>ThirdPartyDB2Translator.class</code> in the <code>rdbms/drdaas/jlib</code> directory.</p>
<p>The following two lines describe the signatures of the two translator methods within the third-party object:</p>
<pre>ThirdPartyTranslator.translateSQL(oracle.sql.CLOB,oracle.sql.CLOB[])
ThirdPartyTranslator.translateError(int,int[],java.lang.String[])
</pre>
<p>These signatures determine the method Oracle calls to translate both SQL text and Oracle Error codes. The method <code>translateSQL()</code>has two arguments: a <code>CLOB</code> for the original SQL text, and a <code>CLOB</code> for the CLOB output from the SQL translator. The second method may be ignored.</p>
<pre>connect / as sysdba
@$ORACLE_HOME/drdaas/admin/drdasqtt_translator_setup.sql

Enter schema in which the SQL Translator Interface Package will be created as well
as into which the third-party SQL translator will be loaded (usually SYSIBM).
SQL Translator Interface Package Schema:SYSIBM

Enter unqualified name of the SQL Translator Interface Package
SQL Translator Interface Package Name:DBTooIntPkg

Enter schema in which the Translation Profile will be created:
Translation Profile Schema:TRANS_ADMIN

Enter the unqualified name of the translation profile:
Translation Profile Name:MyDBTooTransProfile

Enter the &#34;language&#34; type of the translator: C, java, etc
Translator Language:JAVA

Enter the path names of the third-party SQL Translator objects;
(All objects must be located under the &#34;rdbms/&#34; directory,
for example: &#34;rdbms/drdaas/jlib/objecta.jar&#34;).

Enter all path qualified objects, one per prompt, up to 10.

Enter &#34;&#34; for all remaining object prompts.
SQL Translator object#1: rdbms/drdaas/jlib/ThirdPartyDB2Translator.class
SQL Translator object#2: &#34;&#34;
...
SQL Translator object#10: &#34;&#34;

Enter the signature for the entry for &#39;translateSQL&#39; in one of the
previously entered SQL Translator objects:
Entry for
 translateSQL:ThirdPartyTranslator.translateSQL(oracle.sql.CLOB,oracle.sql.CLOB[])

Enter the signature for the entry for &#39;translateError&#39; in one of the
previously entered SQL Translator objects callout for
 translateError:ThirdPartyTranslator.translateError(int,int[],java.lang.String[])
</pre></div>
<!-- class="example" -->
<p>Additional translations may be added, changed, or removed as needed. Please refer to the <span class="italic">Oracle&reg; Database Migration Guide</span> for details.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CBDCJDIH"></a>
<div id="DRDAS151" class="sect2">
<h3 class="sect2">Configuration File: drdaas.ora</h3>
<p>The file <code>drdaas.ora</code> defines the instances of Oracle Database Provider for DRDA. This file is composed of initialization parameters that define the instances of the Application Server.</p>
<p>The file <code>drdaas.ora</code> may be custom created. However, it may also be created at installation time from questions posed by the Installer and from user input.</p>
<p>The <code>drdaas.ora</code> configuration file must be located in the Oracle Home, under the product administration directory.</p>
<p>The default location is: <code>$ORACLE_HOME/drdaas/admin</code>.</p>
<p>Note that parameters that are qualified by the instance name apply only to that specific instance. Parameters that are not qualified by an instance name apply to all instances specified in the file.</p>
<div id="DRDAS152" class="example">
<p class="titleinexample"><a id="sthref93"></a>Example 3-2 Sample configuration file, drdaas.ora</p>
<pre># Example pre-configured instance named &#34;drdaas&#34;
# defines a single port and an rdb map that uses
# the local database instance accessed through
# the ORACLE_SID environmental variable.
drdaas.DATA_PORT = 10.0.0.1:1446
drdaas.RDB_MAP = RDB(DB2DS4M)-&gt;ORACLE_SID
#
# Example instance using a single port and a single rdb map
drdasingle.DATA_PORT = 10.0.0.1:1546
drdasingle.RDB_MAP = RDB(DB2DSN1)-&gt;TNS(ora101)
#
# Example instance using multiple rdb mappings
drdamulti.DATA_PORT = 10.0.0.1:2446
drdamulti.RDB_MAP = RDB(DB2DSN1)-&gt;TNS(ora101)
drdamulti.RDB_MAP = RDB(DB2DSN2)-&gt;TNS(ora102)
drdamulti.RDB_MAP = RDB(DB2DSN3)-&gt;TNS(ora103)
#
# global section affects all instances unless overridden
PROTOPROC_TRACE=&#34;ALL ERROR&#34;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBDEDIHA"></a>
<div id="DRDAS153" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Authorizing Oracle Database Provider for DRDA</h2>
<p>Oracle users must have the appropriate Oracle Database Provider for DRDA role in order to access Oracle Database Provider for DRDA catalogs and specific DRDA packages. See <a href="security.htm#BGBCDIHD">&#34;Storage in Oracle Database Provider for DRDA&#34;</a>.</p>
<a id="CBDECJJD"></a>
<div id="DRDAS154" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Administrator Role</h3>
<p>Users who must perform administrative functions must have the <code>DRDAAS_ADMIN_ROLE</code> role. This enables privilege grants on a specific DRDA package, and assigning package attributes (SQL translation profile name).</p>
<div id="DRDAS161" class="example">
<p class="titleinexample"><a id="sthref94"></a>Example 3-3 Granting the DRDAAS_ADMIN_ROLE</p>
<pre>connect sys as sysdba
grant DRDAAS_ADMIN_ROLE to DRDAADMIN;
</pre></div>
<!-- class="example" -->
<p>For installations that do not have the default role <code>ALL</code>, have several default roles for users, such as <code>CONNECT</code> or <code>RESOURCE</code>, and add the add <code>DRDAAS_ADMIN_ROLE</code> role to the default list, as described in <a href="#CBDICHAI">Example 3-10</a>:</p>
<div id="DRDAS621" class="example">
<p class="titleinexample"><a id="sthref95"></a>Example 3-4 Adding DRDAAS_ADMIN_ROLE to Default Values</p>
<pre>alter user DRDAADMIN default role CONNECT, DRDAAS_ADMIN_ROLE;
</pre></div>
<!-- class="example" -->
<p>The <code>DRDAAS_ADMIN_ROLE</code> role is not meant for users who must use the DRDA packages. They should have the <code>DRDAAS_USER_ROLE</code> assignment, instead, as demonstrated in <a href="#CBDHBCFD">Example 3-9</a>.</p>
<p>Administration is mainly concerned with granting and revoking of privilege to users, setting attributes on packages, and dropping packages.</p>
<p>Users who create packages, or are designated as owners of a package, have implicit authority over that package and may grant access to others. For example, the package owner may grant <code>RUN</code> privileges to any number of users. An owner may also set package attributes and drop the package.</p>
<p>However, in order to bind a package initially, a user must have <code>BIND</code> privilege, either for any package in a collection, or specifically for that package. Only users who have the <code>DRDAAS_ADMIN_ROLE</code> role may grant authorization to users for packages that are not already bound, or are not created or owned by that user. See <a href="#CBDGIAEG">&#34;DRDA Package Authorization&#34;</a> for information on how to grant access to a package and how to set package attributes.</p>
<p>Another primary responsibility of an administrator is to clean old or unused packages from the system. A list of all packages may be found by querying table <code>ALL_DRDAASPACKAGE</code>:</p>
<pre>SELECT * from ALL_DRDAASPACKAGE;
</pre>
<div id="DRDAS155" class="example">
<p class="titleinexample"><a id="sthref96"></a>Example 3-5 Dropping package ORACLE.MYPACKAGE, as Administrator</p>
<p>This function should be performed by a user with DRDA administrator role.</p>
<pre>connect DRDAADM/<span class="italic">password</span>
execute DBMS_DRDAAS_ADMIN.DROP_PACKAGE(&#39;ORACLE&#39;,&#39;MYPACKAGE);
commit;
</pre></div>
<!-- class="example" -->
<div id="DRDAS156" class="example">
<p class="titleinexample"><a id="sthref97"></a>Example 3-6 Dropping package ORACLE.MYPACKAGE, as User</p>
<p>This function should be performed by a user with DRDA user role. This operation fails if user <code>DRDAUSR2</code> does not own package <code>ORACLE.MYPACKAGE</code>, if the user is not the creator of this package, or if the user has no <code>DROP</code> privilege for this package.</p>
<pre>connect DRDAUSR2/<span class="italic">password</span>
execute DBMS_DRDAAS.DROP_PACKAGE(&#39;ORACLE&#39;,&#39;MYPACKAGE);
commit;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CBDGIAEG"></a>
<div id="DRDAS157" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">DRDA Package Authorization</h3>
<p>The DRDA administrator must perform these functions before supplying the user with the DRDA package name and (optionally) the SQL translation profile name.</p>
<p>Only a DRDA administrator may grant access to specific DRDA packages. <a href="#CBDHDABD">Example 3-7</a> demonstrates how to grant the <code>BIND</code>, <code>DROP</code> and <code>EXECUTE</code> privileges to user <code>DRDAUSR</code><code><span class="codeinlineitalic">x</span></code> for package <code>ORACLE.MYPACKAGE</code>.</p>
<div id="DRDAS158" class="example">
<p class="titleinexample"><a id="CBDHDABD"></a>Example 3-7 Granting and Revoking a User&#39;s Package Privileges</p>
<pre>connect DRDAADM/<span class="italic">password</span>

Rem Grant BIND on any package in collection ORACLE to DRDAUSR
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.BIND_PRIVILEGE, &#39;ORACLE&#39;, &#39;*&#39;, &#39;DRDAUSR&#39;);

Rem Grant BIND on package ORACLE.MYPACKAGE to user DRDAUSR2
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.BIND_PRIVILEGE, &#39;ORACLE&#39;, &#39;MYPACKAGE&#39;, &#39;DRDAUSR2&#39;);

Rem Grant EXECUTE on package ORACLE.MYPACKAGE to PUBLIC
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.EXECUTE_PRIVILEGE, &#39;ORACLE&#39;, &#39;MYPACKAGE&#39;, &#39;PUBLIC&#39;);

Rem Grant SET on package ORACLE.MYPACKAGE to user DRDAUSR3
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.SET_PRIVILEGE, &#39;ORACLE&#39;, &#39;MYPACKAGE&#39;, &#39;DRDAUSR3&#39;);

Rem Grant DROP on any package in collection ORACLE to user DRDAUSR3
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.DROP_PRIVILEGE, &#39;ORACLE&#39;, &#39;*&#39;, &#39;DRDAUSR3&#39;);

Rem Grant ALL on any package in collection NULLID to user DRDAUSR3
execute DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE, &#39;NULLID&#39;, &#39;*&#39;, &#39;DRDAUSR3&#39;);

Rem Revoke BIND on package ORACLE.NOTYOURPKG from user DRDAUSR3
execute DBMS_DRDAAS_ADMIN.REVOKE_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.BIND_PRIVILEGE, &#39;ORACLE&#39;, &#39;NOTYOURPKG&#39;, &#39;DRDAUSR3&#39;);

Rem Revoke ALL on any package in Collection OTHER from user DRDAUSR4
execute DBMS_DRDAAS_ADMIN.REVOKE_PRIVILEGE(
     DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE, &#39;OTHER&#39;, &#39;*&#39;, &#39;DRDAUSR4&#39;);
</pre></div>
<!-- class="example" -->
<p>The DRDA Administrator may also designate a SQL translation profile name to associate with the DRDA package. <a href="#CBDGJAHD">Example 3-8</a> demonstrates how to set the profile name to <code>DB2ZOS</code>.</p>
<div id="DRDAS159" class="example">
<p class="titleinexample"><a id="CBDGJAHD"></a>Example 3-8 Setting and Deleting Translation Profile Name for a DRDA Package</p>
<pre>connect DRDAADM/password
 
Rem Set the DB2ZOS profile name for &#34;any&#34; package in collection ORACLE
DBMS_DRDAAS_ADMIN.SET_PROFILE( &#39;ORACLE&#39;, &#39;*&#39;, &#39;DB2ZOS&#39; );
 
Rem Set the MYDB2ZOS profile name for package ORACLE.MYPACKAGE
DBMS_DRDAAS_ADMIN.SET_PROFILE( &#39;ORACLE&#39;, &#39;MYPACKAGE&#39;, &#39;MYDB2ZOS&#39; );
 
Rem Deleting the profile name for package ORACLE.MYPACKAGE
execute DBMS_DRDAAS_ADMIN.SET_PROFILE( NULL, &#39;ORACLE&#39;, &#39;MYPACKAGE&#39; );
 
Rem Deleting the profile name for &#34;any&#34; package in collection ORACLE
execute DBMS_DRDAAS_ADMIN.SET_PROFILE( NULL, &#39;ORACLE&#39;, &#39;*&#39; );
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CBDIDCDF"></a>
<div id="DRDAS160" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">User Role</h3>
<p>Each user who accesses the database through DRDA must have the <code>DRDAAS_USER_ROLE</code> user role as a default.</p>
<div id="DRDAS622" class="example">
<p class="titleinexample"><a id="CBDHBCFD"></a>Example 3-9 Granting the DRDAAS_USER_ROLE</p>
<pre>connect sys as sysdba
grant DRDAAS_USER_ROLE to DRDAUSR;
</pre></div>
<!-- class="example" -->
<p>Users commonly have the default role <code>ALL</code>, which immediately enables all granted roles. If a user has explicit default roles, they must also have the <code>DRDAAS_USER_ROLE</code> role, as described in <a href="#CBDICHAI">Example 3-10</a>:</p>
<p>Note that failing to specify the complete list of default roles may prevent the user from connecting to the database, or form being able to address certain resources implicitly. Refer to <span class="italic">Oracle&reg; Database SQL Language Reference</span> and <span class="italic">Oracle Database Security Guide</span>.</p>
<div id="DRDAS162" class="example">
<p class="titleinexample"><a id="CBDICHAI"></a>Example 3-10 Adding DRDAAS_USER_ROLE to Default Values</p>
<pre>alter user DRDAUSR default role CONNECT, RESOURCE, DRDAAS_USER_ROLE;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBDBCCJB"></a>
<div id="DRDAS163" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Uninstalling Oracle Database Provider for DRDA</h2>
<p>Full uninstall of Oracle Database Provider for DRDA involves the removal of the Database objects and uninstall of Oracle Database Provider for DRDA software. The product-dependent objects are removed, while the customer data remains intact.</p>
<div id="DRDAS164" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref98"></a>
<h3 class="sect2">Removing the Database Objects</h3>
<p>The following steps remove all Oracle Database Provider for DRDA objects from the database, and drop the user-created tablespace.</p>
<p class="subhead2"><a id="DRDAS165"></a>To remove Database objects:</p>
<ol>
<li>
<p>Change directory to <code>$</code><code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin</code>.</p>
<pre>&gt; cd $ORACLE_HOME/rdbms/admin
</pre></li>
<li>
<p>Connect to the database using the <code>SYSDBA</code> option.</p>
<pre>connect / as sysdba
</pre></li>
<li>
<p>Run the removal script.</p>
<pre>catnodrdaas.sql
</pre>
<p>See <a href="scripts_appendix.htm#CHDJHCHF">catnodrdaas.sql</a> in <a href="scripts_appendix.htm#CHDJEADJ">Appendix A, &#34;Scripts for Creating and Maintaining Oracle Database Provider for DRDA&#34;</a>.</p>
</li>
<li>
<p>Drop the user-created tablespace <code>sysibm</code> and its contents.</p>
<pre>&gt; drop tablespace sysibm;
</pre></li>
</ol>
<p>See <a class="olink SQLRF01807" href="../SQLRF/statements_9004.htm#SQLRF01807"><span class="italic">Oracle&reg; Database SQL Language Reference</span></a> for <code>DROP TABLESPACE</code> options.</p>
</div>
<!-- class="sect2" -->
<div id="DRDAS166" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref99"></a>
<h3 class="sect2">Uninstalling Oracle Database Provider for DRDA software</h3>
<p>To uninstall Oracle Database Provider for DRDA software, you must use the Oracle Universal Installer with the <code>-deinstall</code> option. You may choose specify path to Oracle Home using the <code>-home</code> option, or choose Oracle Home when Oracle Universal Installer is running.See further instructions on uninstalling Oracle software in <a class="olink LADBI0071" href="../LADBI/remove_oracle_sw.htm#LADBI0071"><span class="italic">Oracle&reg; Database Installation Guide</span></a>.</p>
<p class="subhead2"><a id="DRDAS167"></a>To uninstall Oracle Database Provider for DRDA software:</p>
<ol>
<li>
<p>In Oracle Universal Installer, click <span class="bold">Installed Products</span>.</p>
</li>
<li>
<p>Select the desired <code><span class="codeinlineitalic">ORACLE_HOME</span></code>.</p>
<p>Either select the whole <code><span class="codeinlineitalic">ORACLE_HOME</span></code>, or open <code><span class="codeinlineitalic">ORACLE_HOME</span></code> navigation tree and select Oracle Database Provider for DRDA product software.</p>
</li>
</ol>
<p>3) Click <span class="bold">Remove</span>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBDDFFAE"></a>
<div id="DRDAS168" class="sect1">
<h2 class="sect1">Configuration Parameters</h2>
<p>This section contains the description of parameters used in the configuration file.</p>
<div id="DRDAS169" class="sect2"><a id="sthref100"></a>
<h3 class="sect2">DATA_PORT</h3>
<p>This designates the DRDA data port used by this instance, and is represented by an Internet Address and Port Number.</p>
<p class="subhead2"><a id="DRDAS623"></a>Default Value</p>
<p>There is no default port number; an explicit port number must be specified. Oracle recommends using <code>1446</code>.</p>
<p class="subhead2"><a id="DRDAS624"></a>Allowable Values</p>
<p>A valid, unallocated TCP/IP network port number, optionally prefixed with a specific host name or IP address associated with a defined network interface on the local machine.</p>
<p class="subhead2"><a id="DRDAS625"></a>Syntax</p>
<p><code>DATA_PORT = {</code><code><span class="codeinlineitalic">host_name</span></code><code>|</code><code><span class="codeinlineitalic">ip_address</span></code><code>:}</code><code><span class="codeinlineitalic">number</span></code></p>
<p class="subhead2"><a id="DRDAS626"></a>Usage Example</p>
<pre>DATA_PORT = 10.0.0.1:1446
</pre></div>
<!-- class="sect2" -->
<div id="DRDAS184" class="sect2"><a id="sthref101"></a>
<h3 class="sect2">RDB_MAP</h3>
<p>This <code>string</code> parameter maps relational database names, as passed in the DRDA <code>ACCRDB</code> command object, to Oracle TNS entries, or to the locally addressable Oracle instance. This parameter may contain several occurrences of a map entry.</p>
<p>This has no default value.</p>
<p>A list of optional values includes the following:</p>
<ul>
<li>
<p><code>tns_name_entry</code> corresponds to a TNS entry in the local <code>tnsnames.ora</code> configuration file.</p>
</li>
<li>
<p><code>tns_entry</code> is a fully-formed TNS descriptor string. It may be used instead of a TNS name entry.</p>
</li>
<li>
<p><code>oracle_sid</code> uses the <code>$ORACLE_SID</code> environment variable value that is set prior to starting an Oracle Database Provider for DRDA instance.</p>
</li>
</ul>
<p>Note that the use of one or more occurrences of <code>RDB_MAP</code> determines a mode of compatibility with older application requesters. The default is a single, dedicated definition that connects to a single Oracle Database instance based on the <code>ORACLE_SID</code> environmental variable.</p>
<p class="subhead2"><a id="DRDAS627"></a>Allowable Values</p>
<p>A valid, unallocated TCP/IP network port number, optionally prefixed with a specific host name or IP address associated with a defined network interface on the local machine.</p>
<p class="subhead2"><a id="DRDAS628"></a>Syntax</p>
<pre>RDB_MAP = RDB(<span class="codeinlineitalic">rdb_name</span>)-&gt;TNS(tns_name_entry)
RDB_MAP = RDB(<span class="codeinlineitalic">rdb_name</span>)-&gt;ORACLE_SID
RDB_MAP = RDB(<span class="codeinlineitalic">rdb_name</span>)-&gt;&#34;tns_entry&#34;
</pre>
<p class="subhead2"><a id="DRDAS629"></a>Usage Examples</p>
<pre>RDB_MAP = RDB(DB2DSN1)-&gt;ORACLE_SID
RDB_MAP = RDB(DB2DSN2)-&gt;TNS(ora101)
RDB_MAP = RDB(DB2DSN3)-&gt;&#34;(ADDRESS=(PROTOCOL=TCP)(HOST=10.0.0.1)(PORT=1446))&#34;
</pre></div>
<!-- class="sect2" -->
<a id="CBDEJHCE"></a>
<div id="DRDAS192" class="sect2">
<h3 class="sect2">PROTOPROC_TRACE</h3>
<p>This parameter designates the trace facility and level of detail for tracing of the DRDA Protocol Processor. All initial Oracle Database Provider for DRDA sessions run with this setting. The parameter consists of a value pair that represents facility and level values. Multiple values may be specified simultaneously if the value tuples are separated by a comma.</p>
<p>It also designates the initial level of trace under which all AS session threads execute. <code>PROTOPROC_TRACE</code> is a decimal number or textual designated equivalent.</p>
<p>The facility names used with PROTOPROC_TRACE parameter are as follows:</p>
<ul>
<li>
<p><code>TASK</code> &ndash; Task-specific operations</p>
</li>
<li>
<p><code>NET</code> &ndash; Network-specific operations</p>
</li>
<li>
<p><code>SQL</code> &ndash; SQL-specific operations</p>
</li>
<li>
<p><code>OCI</code> &ndash; OCI resource operations</p>
</li>
<li>
<p><code>MEM</code> &ndash; Memory resource operations</p>
</li>
<li>
<p><code>ALL</code> &ndash; All facilities mentioned already</p>
</li>
</ul>
<p>The values of <code>PROTOPROC_TRACE</code> level are additive. For example, setting <code>ERROR(4)</code> includes <code>WARN(2)</code> and <code>INFO(1)</code> messages. The following values are expected:</p>
<ul>
<li>
<p><code>0</code> or <code>NONE</code> &ndash; No trace is generated; this is the default.</p>
</li>
<li>
<p><code>1</code> or <code>INFO</code> &ndash; Minimal trace is generated.</p>
</li>
<li>
<p><code>2</code> or <code>WARN</code> &ndash; Warning information is generated.</p>
</li>
<li>
<p><code>4</code> or <code>ERROR</code> &ndash; Error information is generated.</p>
</li>
<li>
<p><code>8</code> or <code>ADMIN</code> &ndash; Administration information is generated.</p>
</li>
<li>
<p><code>255</code> or <code>ALL</code> &ndash; All details are generated.</p>
</li>
</ul>
<p class="subhead2"><a id="DRDAS630"></a>Default Value</p>
<p><code>0</code> or none</p>
<p class="subhead2"><a id="DRDAS631"></a>Allowable Values</p>
<p>Facility name followed by level.</p>
<p class="subhead2"><a id="DRDAS632"></a>Usage Example</p>
<pre>PROTOPROC_TRACE=&#34;ALL ADMIN&#34;
PROTOPROC_TRACE=&#34;TASK WARN, NET ADMIN, MEM INFO&#34;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1406">
<tr>
<td class="cellalignment1413">
<table class="cellalignment1411">
<tr>
<td class="cellalignment1410"><a href="architecture.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1410"><a href="translation_examples.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1415">
<table class="cellalignment1409">
<tr>
<td class="cellalignment1410"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1410"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1410"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1410"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1410"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1410"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>