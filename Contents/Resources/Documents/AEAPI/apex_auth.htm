<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-1789"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/APEX_CUSTOM_AUTH"></a><title>APEX_CUSTOM_AUTH</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748"/>
<meta name="dcterms.created" content="2014-05-22T14:53:19Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Application Express API Reference"/>
<meta name="dcterms.identifier" content="E17963-07"/>
<meta name="dcterms.isVersionOf" content="AEAPI"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="apex_css.htm" title="Previous" type="text/html"/>
<link rel="Next" href="apex_debug.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17963-07.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/28</span> <!-- End Header -->
<div id="AEAPI218" class="chapter"><a id="CEGHIDHC"></a>
<h1 class="chapter"><span class="secnum">6</span> APEX_CUSTOM_AUTH</h1>
<p>You can use the <a id="sthref163"></a><a id="sthref164"></a><code>APEX_CUSTOM_AUTH</code> package to perform various operations related to authentication and session management.</p>
<p class="subhead2"><a id="AEAPI2207"></a>Topics:</p>
<ul>
<li>
<p><a href="#CHDIEFJB">APPLICATION_PAGE_ITEM_EXISTS Function</a></p>
</li>
<li>
<p><a href="#CHDEJGFD">CURRENT_PAGE_IS_PUBLIC Function</a></p>
</li>
<li>
<p><a href="#CHDCHIFH">DEFINE_USER_SESSION Procedure</a></p>
</li>
<li>
<p><a href="#BABBFCAA">GET_COOKIE_PROPS Procedure</a></p>
</li>
<li>
<p><a href="#BABCCBED">GET_LDAP_PROPS Procedure</a></p>
</li>
<li>
<p><a href="#CHDCIJJI">GET_NEXT_SESSION_ID Function</a></p>
</li>
<li>
<p><a href="#CHDEDBCF">GET_SECURITY_GROUP_ID Function</a></p>
</li>
<li>
<p><a href="#CHDJIGCE">GET_SESSION_ID Function</a></p>
</li>
<li>
<p><a href="#BABJFAJJ">GET_SESSION_ID_FROM_COOKIE Function</a></p>
</li>
<li>
<p><a href="#CHDJFBDI">GET_USER Function</a></p>
</li>
<li>
<p><a href="#BABFCBAJ">GET_USERNAME Function</a></p>
</li>
<li>
<p><a href="#BABHDFII">IS_SESSION_VALID Function</a></p>
</li>
<li>
<p><a href="#BABGGHII">LOGIN Procedure</a></p>
</li>
<li>
<p><a href="#BABICDIB">LOGOUT Procedure</a></p>
</li>
<li>
<p><a href="#BABJDEBJ">POST_LOGIN Procedure</a></p>
</li>
<li>
<p><a href="#CHDEAIHI">SESSION_ID_EXISTS Function</a></p>
</li>
<li>
<p><a href="#CHDHEDEI">SET_SESSION_ID Procedure</a></p>
</li>
<li>
<p><a href="#CHDDHIIF">SET_SESSION_ID_TO_NEXT_VALUE Procedure</a></p>
</li>
<li>
<p><a href="#CHDBHHIA">SET_USER Procedure</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDIEFJB"></a>
<div id="AEAPI219" class="refsect1">
<h2 class="refsect1">APPLICATION_PAGE_ITEM_<a id="sthref165"></a>EXISTS Function</h2>
<p>This function checks for the existence of page-level item within the current page of an application. This function requires the parameter <code>p_item_name</code>. This function returns a Boolean value (true or false).</p>
<p class="subhead2"><a id="AEAPI857"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.APPLICATION_PAGE_ITEM_EXISTS(
    p_item_name   IN    VARCHAR2)
RETURN BOOLEAN;
</pre>
<p class="subhead2"><a id="AEAPI858"></a>Parameters</p>
<p><a href="#CHDIJDAG">Table 6-1</a> describes the parameters available in the APPLICATION_PAGE_ITEM_EXISTS function.</p>
<div id="AEAPI859" class="tblformal">
<p class="titleintable"><a id="sthref166"></a><a id="CHDIJDAG"></a>Table 6-1 APPLICATION_PAGE_ITEM_EXISTS Parameters</p>
<table class="cellalignment3315" title="APPLICATION_PAGE_ITEM_EXISTS Parameters" summary="This table describes the available parameters." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t2">Parameter</th>
<th class="cellalignment3316" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t2" headers="r1c1-t2">
<p><code>p_item_name</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t2 r1c2-t2">
<p>The name of the page-level item.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI860"></a>Example</p>
<p>The following example checks for the existence of a page-level item, <code>ITEM_NAME</code>, within the current page of the application.</p>
<pre>DECLARE
    L_VAL BOOLEAN;
BEGIN
    VAL := APEX_CUSTOM_AUTH.APPLICATION_PAGE_ITEM_EXISTS(:ITEM_NAME);
    IF L_VAL THEN
        htp.p(&#39;Item Exists&#39;);
    ELSE
        htp.p(&#39;Does not Exist&#39;);
    END IF;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDEJGFD"></a>
<div id="AEAPI220" class="refsect1">
<h2 class="refsect1">CURRENT_PAGE_IS_PUBLIC <a id="sthref167"></a>Function</h2>
<p>This function checks whether the current page&#39;s authentication attribute is set to <span class="bold">Page Is Public</span> and returns a Boolean value (true or false)</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HTMDB25150" href="../HTMDB/bldr_pg_edit_att.htm#HTMDB25150">&#34;Editing Page Attributes&#34;</a> in <a class="olink HTMDB" href="../HTMDB/toc.htm"><span class="italic">Oracle Application Express Application Builder User&#39;s Guide</span></a>.</div>
</div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" -->
<p class="subhead2"><a id="AEAPI861"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.CURRENT_PAGE_IS_PUBLIC 
RETURN BOOLEAN;
</pre>
<p class="subhead2"><a id="AEAPI862"></a>Example</p>
<p>The following example checks whether the current page in an application is public.</p>
<pre>DECLARE
    L_VAL BOOLEAN;
BEGIN
    L_VAL := APEX_CUSTOM_AUTH.CURRENT_PAGE_IS_PUBLIC;
    IF L_VAL THEN
        htp.p(&#39;Page is Public&#39;);
    ELSE
        htp.p(&#39;Page is not Public&#39;);
    END IF;
END;
</pre>
<a id="CHDCHIFH"></a>
<div id="AEAPI221" class="refsect1">
<h2 class="refsect1">DEFINE_USER_SESSION <a id="sthref168"></a>Procedure</h2>
<p>This procedure combines the <code>SET_USER</code> and <code>SET_SESSION_ID</code> procedures to create one call.</p>
<p class="subhead2"><a id="AEAPI863"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.DEFINE_USER_SESSION(
    p_user         IN    VARCHAR2,
    p_session_id   IN    NUMBER);
</pre>
<p class="subhead2"><a id="AEAPI864"></a>Parameters</p>
<p><a href="#CHDCGCEG">Table 6-2</a> describes the parameters available in the <code>DEFINE_USER_SESSION</code> procedure.</p>
<div id="AEAPI865" class="tblformal">
<p class="titleintable"><a id="sthref169"></a><a id="CHDCGCEG"></a>Table 6-2 DEFINE_USER_SESSION Parameters</p>
<table class="cellalignment3315" title="DEFINE_USER_SESSION Parameters" summary="This table describes the available parameters." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t4">Parameter</th>
<th class="cellalignment3316" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t4" headers="r1c1-t4">
<p><code>p_user</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t4 r1c2-t4">
<p>Login name of the user.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t4" headers="r1c1-t4">
<p><code>p_session_id</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t4 r1c2-t4">
<p>The session ID.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI866"></a>Example</p>
<p>In the following example, a new session ID is generated and registered along with the current application user.</p>
<pre>APEX_CUSTOM_AUTH.DEFINE_USER_SESSION (
    :APP_USER, 
    APEX_CUSTOM_AUTH.GET_NEXT_SESSION_ID);
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDBHHIA">&#34;SET_USER Procedure&#34;</a> and <a href="#CHDHEDEI">&#34;SET_SESSION_ID Procedure&#34;</a>.</div>
</div>
<!-- class="refsect1" -->
<a id="BABBFCAA"></a>
<div id="AEAPI222" class="refsect1">
<h2 class="refsect1">GET_COOKIE_PROPS <a id="sthref170"></a><a id="sthref171"></a><a id="sthref172"></a>Procedure</h2>
<p>This procedure obtains the properties of the session cookie used in the current authentication scheme for the specified application. These properties can be viewed directly in the Application Builder by viewing the authentication scheme cookie attributes.</p>
<p class="subhead2"><a id="AEAPI867"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_COOKIE_PROPS(
    p_app_id                       IN  NUMBER,
    p_cookie_name                  OUT VARCHAR2,
    p_cookie_path                  OUT VARCHAR2,
    p_cookie_domain                OUT VARCHAR2
    p_secure                                    OUT BOOLEAN);
</pre>
<p class="subhead2"><a id="AEAPI868"></a>Parameters</p>
<p><a href="#BABHBCCG">Table 6-3</a> describes the parameters available in the <code>GET_COOKIE_PROPS</code> procedure.</p>
<div id="AEAPI869" class="tblformal">
<p class="titleintable"><a id="sthref173"></a><a id="BABHBCCG"></a>Table 6-3 GET_COOKIE_PROPS Parameters</p>
<table class="cellalignment3315" title="GET_COOKIE_PROPS Parameters" summary="This table describes the parameters available in the GET_COOKIE_PROPS procedure." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t6">Parameter</th>
<th class="cellalignment3316" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t6" headers="r1c1-t6">
<p><code>p_app_id</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t6 r1c2-t6">
<p>An application ID in the current workspace.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t6" headers="r1c1-t6">
<p><code>p_cookie_name</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t6 r1c2-t6">
<p>The cookie name.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r4c1-t6" headers="r1c1-t6">
<p><code>p_cookie_path</code></p>
</td>
<td class="cellalignment3317" headers="r4c1-t6 r1c2-t6">
<p>The cookie path.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r5c1-t6" headers="r1c1-t6">
<p><code>p_cookie_domain</code></p>
</td>
<td class="cellalignment3317" headers="r5c1-t6 r1c2-t6">
<p>The cookie domain.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r6c1-t6" headers="r1c1-t6">
<p><code>p_secure</code></p>
</td>
<td class="cellalignment3317" headers="r6c1-t6 r1c2-t6">
<p>Flag to set secure property of cookie.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI870"></a>Example</p>
<p>The following example retrieves the session cookie values used by the authentication scheme of the current application.</p>
<pre>DECLARE
    l_cookie_name   varchar2(256);
    l_cookie_path   varchar2(256);
    l_cookie_domain varchar2(256);
    l_secure        boolean;
BEGIN
    APEX_CUSTOM_AUTH.GET_COOKIE_PROPS(
        p_app_id =&gt; 2918,
        p_cookie_name =&gt; l_cookie_name,
        p_cookie_path =&gt; l_cookie_path,
        p_cookie_domain =&gt; l_cookie_domain,
        p_secure =&gt; l_secure);
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABCCBED"></a>
<div id="AEAPI223" class="refsect1">
<h2 class="refsect1">GET_LDAP_PROPS <a id="sthref174"></a><a id="sthref175"></a>Procedure</h2>
<p>This procedure obtains the LDAP attributes of the current authentication scheme for the current application. These properties can be viewed directly in Application Builder by viewing the authentication scheme attributes.</p>
<p class="subhead2"><a id="AEAPI871"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_LDAP_PROPS(
    p_ldap_host                OUT VARCHAR2,
    p_ldap_port                OUT INTEGER,
    p_use_ssl                  OUT VARCHAR2,
    p_use_exact_dn             OUT VARCHAR2,
    p_search_filter            OUT VARCHAR2,
    p_ldap_dn                  OUT VARCHAR2,
    p_ldap_edit_function       OUT VARCHAR2);
</pre>
<p class="subhead2"><a id="AEAPI872"></a>Parameters</p>
<p><a href="#BABFDCFA">Table 6-4</a> describes the parameters available in the <code>GET_LDAP_PROPS</code> procedure.</p>
<div id="AEAPI873" class="tblformal">
<p class="titleintable"><a id="sthref176"></a><a id="BABFDCFA"></a>Table 6-4 GET_LDAP_PROPS Parameters</p>
<table class="cellalignment3315" title="GET_LDAP_PROPS Parameters" summary="This table describes the parameters available in the GET_LDAP_PROPS procedure." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t7">Parameter</th>
<th class="cellalignment3316" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t7" headers="r1c1-t7">
<p><code>p_ldap_host</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t7 r1c2-t7">
<p>LDAP host name.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t7" headers="r1c1-t7">
<p><code>p_ldap_port</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t7 r1c2-t7">
<p>LDAP port number.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r4c1-t7" headers="r1c1-t7">
<p><code>p_use_ssl</code></p>
</td>
<td class="cellalignment3317" headers="r4c1-t7 r1c2-t7">
<p>Whether SSL is used.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r5c1-t7" headers="r1c1-t7">
<p><code>p_use_exact_dn</code></p>
</td>
<td class="cellalignment3317" headers="r5c1-t7 r1c2-t7">
<p>Whether exact distinguished names are used.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r6c1-t7" headers="r1c1-t7">
<p><code>p_search_filter</code></p>
</td>
<td class="cellalignment3317" headers="r6c1-t7 r1c2-t7">
<p>The search filter used if exact DN is not used.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r7c1-t7" headers="r1c1-t7">
<p><code>p_ldap_dn</code></p>
</td>
<td class="cellalignment3317" headers="r7c1-t7 r1c2-t7">
<p>LDAP DN string.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r8c1-t7" headers="r1c1-t7">
<p><code>p_ldap_edit_function</code></p>
</td>
<td class="cellalignment3317" headers="r8c1-t7 r1c2-t7">
<p>LDAP edit function name.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI874"></a>Example</p>
<p>The following example retrieves the LDAP attributes associated with the current application.</p>
<pre>DECLARE
    l_ldap_host          VARCHAR2(256);
    l_ldap_port          INTEGER;
    l_use_ssl            VARCHAR2(1);
    l_use_exact_dn       VARCHAR2(1);
    l_search_filter      VARCHAR2(256);
    l_ldap_dn            VARCHAR2(256);
    l_ldap_edit_function VARCHAR2(256);
BEGIN
APEX_CUSTOM_AUTH.GET_LDAP_PROPS (
    p_ldap_host       =&gt; l_ldap_host,
    p_ldap_port       =&gt; l_ldap_port,
    p_use_ssl         =&gt; l_use_ssl,
    p_use_exact_dn    =&gt; l_use_exact_dn,
    p_search_filter   =&gt; l_search_filter,
    p_ldap_dn         =&gt; l_ldap_dn,
    p_ldap_edit_function =&gt; l_ldap_edit_function);
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDCIJJI"></a>
<div id="AEAPI224" class="refsect1">
<h2 class="refsect1">GET_NEXT_SESSION_ID <a id="sthref177"></a>Function</h2>
<p>This function generates the next session ID from the Oracle Application Express sequence generator. This function returns a number.</p>
<p class="subhead2"><a id="AEAPI875"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_NEXT_SESSION_ID 
RETURN NUMBER;

</pre>
<p class="subhead2"><a id="AEAPI876"></a>Example</p>
<p>The following example generates the next session ID and stores it into a variable.</p>
<pre>DECLARE
    VAL NUMBER;
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_NEXT_SESSION_ID;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDEDBCF"></a>
<div id="AEAPI227" class="refsect1">
<h2 class="refsect1">GET_SECURITY_GROUP_ID <a id="sthref178"></a>Function</h2>
<p>This function returns a number with the value of the security group ID that identifies the workspace of the current user.</p>
<p class="subhead2"><a id="AEAPI877"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_SECURITY_GROUP_ID 
RETURN NUMBER;
</pre>
<p class="subhead2"><a id="AEAPI878"></a>Example</p>
<p>The following example retrieves the Security Group ID for the current user.</p>
<pre>DECLARE
    VAL NUMBER;
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_SECURITY_GROUP_ID;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDJIGCE"></a>
<div id="AEAPI228" class="refsect1">
<h2 class="refsect1">GET_SESSION_ID <a id="sthref179"></a>Function</h2>
<p>This function returns <code>APEX_APPLICATION</code>.<code>G_INSTANCE</code> global variable. <code>GET_SESSION_ID</code> returns a number.</p>
<p class="subhead2"><a id="AEAPI879"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_SESSION_ID 
RETURN NUMBER;
</pre>
<p class="subhead2"><a id="AEAPI880"></a>Example</p>
<p>The following example retrieves the session ID for the current user.</p>
<pre>DECLARE
    VAL NUMBER;
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_SESSION_ID;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABJFAJJ"></a>
<div id="AEAPI225" class="refsect1">
<h2 class="refsect1">GET_SESSION_ID_FROM_COOKIE <a id="sthref180"></a>Function</h2>
<p>This function returns the Oracle Application Express session ID located by the session cookie in a page request in the current browser session.</p>
<p class="subhead2"><a id="AEAPI881"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_SESSION_ID_FROM_COOKIE
RETURN NUMBER;
</pre>
<p class="subhead2"><a id="AEAPI882"></a>Example</p>
<p>The following example retrieves the session ID from the current session cookie.</p>
<pre>DECLARE 
    VAL NUMBER;
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_SESSION_ID_FROM_COOKIE;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDJFBDI"></a>
<div id="AEAPI229" class="refsect1">
<h2 class="refsect1">GET_USER <a id="sthref181"></a>Function</h2>
<p>This function returns the <code>APEX_APPLICATION</code>.<code>G_USER</code> global variable (<code>VARCHAR2</code>).</p>
<p class="subhead2"><a id="AEAPI883"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_USER 
RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="AEAPI884"></a>Examples</p>
<p>The following example retrieves the username associated with the current session.</p>
<pre>DECLARE
    VAL VARCHAR2(256);
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_USER;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABFCBAJ"></a>
<div id="AEAPI226" class="refsect1">
<h2 class="refsect1">GET_USERNAME <a id="sthref182"></a>Function</h2>
<p>This function returns user name registered with the current Oracle Application Express session in the internal sessions table. This user name is usually the same as the authenticated user running the current page.</p>
<p class="subhead2"><a id="AEAPI885"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.GET_USERNAME
RETURN VARCHAR2;
</pre>
<p class="subhead2"><a id="AEAPI886"></a>Example</p>
<p>The following example retrieves the username registered with the current application session.</p>
<pre>DECLARE
    VAL VARCHAR2(256);
BEGIN
    VAL := APEX_CUSTOM_AUTH.GET_USERNAME;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABHDFII"></a>
<div id="AEAPI230" class="refsect1">
<h2 class="refsect1">IS_SESSION_VALID <a id="sthref183"></a>Function</h2>
<p>This function is a Boolean result obtained from executing the current application&#39;s authentication scheme to determine if a valid session exists. This function returns the Boolean result of the authentication scheme&#39;s page sentry.</p>
<p class="subhead2"><a id="AEAPI887"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.IS_SESSION_VALID
RETURN BOOLEAN;
</pre>
<p class="subhead2"><a id="AEAPI888"></a>Example</p>
<p>The following example verifies whether the current session is valid.</p>
<pre>DECLARE
    L_VAL BOOLEAN;
BEGIN
    L_VAL := APEX_CUSTOM_AUTH.IS_SESSION_VALID;
    IF L_VAL THEN
        htp.p(&#39;Valid&#39;);
    ELSE
        htp.p(&#39;Invalid&#39;);
    END IF;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABGGHII"></a>
<div id="AEAPI231" class="refsect1">
<h2 class="refsect1">LOGIN <a id="sthref184"></a>Procedure</h2>
<p>Also referred to as the &#34;Login API,&#34; this procedure performs authentication and session registration.</p>
<p class="subhead2"><a id="AEAPI889"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.LOGIN(
    p_uname                    IN  VARCHAR2  DEFAULT NULL,
    p_password                 IN  VARCHAR2  DEFAULT NULL,
    p_session_id               IN  VARCHAR2  DEFAULT NULL,
    p_app_page                 IN  VARCHAR2  DEFAULT NULL,
    p_entry_point              IN  VARCHAR2  DEFAULT NULL,
    p_preserve_case            IN  BOOLEAN   DEFAULT FALSE);
</pre>
<p class="subhead2"><a id="AEAPI890"></a>Parameter</p>
<p><a href="#BABBIBGF">Table 6-5</a> describes the parameters available in the <code>LOGIN</code> procedure.</p>
<div id="AEAPI891" class="tblformal">
<p class="titleintable"><a id="sthref185"></a><a id="BABBIBGF"></a>Table 6-5 LOGIN Parameters</p>
<table class="cellalignment3315" title="LOGIN Parameters" summary="This table describes the parameters available in the LOGIN procedure." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t8">Parameter</th>
<th class="cellalignment3316" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t8" headers="r1c1-t8">
<p><code>p_uname</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t8 r1c2-t8">
<p>Login name of the user.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t8" headers="r1c1-t8">
<p><code>p_password</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t8 r1c2-t8">
<p>Clear text user password.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r4c1-t8" headers="r1c1-t8">
<p><code>p_session_id</code></p>
</td>
<td class="cellalignment3317" headers="r4c1-t8 r1c2-t8">
<p>Current Oracle Application Express session ID.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r5c1-t8" headers="r1c1-t8">
<p><code>p_app_page</code></p>
</td>
<td class="cellalignment3317" headers="r5c1-t8 r1c2-t8">
<p>Current application ID. After login page separated by a colon (:).</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r6c1-t8" headers="r1c1-t8">
<p><code>p_entry_point</code></p>
</td>
<td class="cellalignment3317" headers="r6c1-t8 r1c2-t8">
<p>Internal use only.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r7c1-t8" headers="r1c1-t8">
<p><code>p_preserve_case</code></p>
</td>
<td class="cellalignment3317" headers="r7c1-t8 r1c2-t8">
<p>If true, do not upper <code>p_uname</code> during session registration</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI892"></a>Example</p>
<p>The following example performs the user authentication and session registration.</p>
<pre>BEGIN
    APEX_CUSTOM_AUTH.LOGIN (
        p_uname       =&gt; &#39;FRANK&#39;,
        p_password    =&gt; &#39;secret99&#39;,
        p_session_id  =&gt; V(&#39;APP_SESSION&#39;),
        p_app_page    =&gt; :APP_ID||&#39;:1&#39;);
END;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use bind variable notations for <code>p_session_id</code> argument.</div>
</div>
<!-- class="refsect1" -->
<a id="BABICDIB"></a>
<div id="AEAPI232" class="refsect1">
<h2 class="refsect1">LOGOUT <a id="sthref186"></a>Procedure</h2>
<p>This procedure causes a logout from the current session by unsetting the session cookie and redirecting to a new location.</p>
<p class="subhead2"><a id="AEAPI893"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.LOGOUT(
    p_this_app                   IN VARCHAR2  DEFAULT NULL,
    p_next_app_page_sess         IN VARCHAR2  DEFAULT NULL,
    p_next_url                   IN VARCHAR2  DEFAULT NULL);
</pre>
<p class="subhead2"><a id="AEAPI894"></a>Parameter</p>
<p><a href="#BABJJHID">Table 6-6</a> describes the parameters available in the <code>LOGOUT</code> procedure.</p>
<div id="AEAPI895" class="tblformal">
<p class="titleintable"><a id="sthref187"></a><a id="BABJJHID"></a>Table 6-6 LOGOUT Parameters</p>
<table class="cellalignment3315" title="LOGOUT Parameters" summary="This table describes the parameters available in the LOGOUT procedure." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t10">Parameter</th>
<th class="cellalignment3316" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t10" headers="r1c1-t10">
<p><code>p_this_app</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t10 r1c2-t10">
<p>Current application ID.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t10" headers="r1c1-t10">
<p><code>p_next_app_page_sess</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t10 r1c2-t10">
<p>Application and page number to redirect to. Separate multiple pages using a colon (:) and optionally followed by a colon (:) and the session ID (if control over the session ID is desired).</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r4c1-t10" headers="r1c1-t10">
<p><code>p_next_url</code></p>
</td>
<td class="cellalignment3317" headers="r4c1-t10 r1c2-t10">
<p>URL to redirect to (use this instead of <code>p_next_app_page_sess</code>).</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI896"></a>Example</p>
<p>The following example causes a logout from the current session and redirects to page <code>99</code> of application <code>1000</code>.</p>
<pre>BEGIN
    APEX_CUSTOM_AUTH.LOGOUT (
        p_this_app            =&gt; &#39;1000&#39;,
        p_next_app_page_sess  =&gt; &#39;1000:99&#39;);
END;
</pre></div>
<!-- class="refsect1" -->
<a id="BABJDEBJ"></a>
<div id="AEAPI233" class="refsect1">
<h2 class="refsect1">POST_LOGIN <a id="sthref188"></a>Procedure</h2>
<p>This procedure performs session registration, assuming the authentication step has been completed. It can be called only from within an Oracle Application Express application page context.</p>
<p class="subhead2"><a id="AEAPI897"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.POST_LOGIN(
    p_uname                    IN  VARCHAR2  DEFAULT NULL,
    p_session_id               IN  VARCHAR2  DEFAULT NULL,
    p_app_page                 IN  VARCHAR2  DEFAULT NULL,
    p_preserve_case            IN  BOOLEAN   DEFAULT FALSE);
</pre>
<p class="subhead2"><a id="AEAPI898"></a>Parameter</p>
<p><a href="#BABJFIBC">Table 6-7</a> describes the parameters available in the <code>POST_LOGIN</code> procedure.</p>
<div id="AEAPI899" class="tblformal">
<p class="titleintable"><a id="sthref189"></a><a id="BABJFIBC"></a>Table 6-7 POST_LOGIN Parameters</p>
<table class="cellalignment3315" title="POST_LOGIN Parameters" summary="This table describes the parameters available in the POST_LOGIN procedure." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t11">Parameter</th>
<th class="cellalignment3316" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t11" headers="r1c1-t11">
<p><code>p_uname</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t11 r1c2-t11">
<p>Login name of user.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r3c1-t11" headers="r1c1-t11">
<p><code>p_session_id</code></p>
</td>
<td class="cellalignment3317" headers="r3c1-t11 r1c2-t11">
<p>Current Oracle Application Express session ID.</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r4c1-t11" headers="r1c1-t11">
<p><code>p_app_page</code></p>
</td>
<td class="cellalignment3317" headers="r4c1-t11 r1c2-t11">
<p>Current application ID and after login page separated by a colon (:).</p>
</td>
</tr>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r5c1-t11" headers="r1c1-t11">
<p><code>p_preserve_case</code></p>
</td>
<td class="cellalignment3317" headers="r5c1-t11 r1c2-t11">
<p>If true, do not include <code>p_uname</code> in uppercase during session registration.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI900"></a>Example</p>
<p>The following example performs the session registration following a successful authentication.</p>
<pre>BEGIN
    APEX_CUSTOM_AUTH.POST_LOGIN (
        p_uname       =&gt; &#39;FRANK&#39;,
        p_session_id  =&gt; V(&#39;APP_SESSION&#39;),
        p_app_page    =&gt; :APP_ID||&#39;:1&#39;);
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDEAIHI"></a>
<div id="AEAPI234" class="refsect1">
<h2 class="refsect1">SESSION_ID_EXISTS <a id="sthref190"></a>Function</h2>
<p>This function returns a Boolean result based on the global package variable containing the current Oracle Application Express session ID. Returns true if the result is a positive number and returns false if the result is a negative number.</p>
<p class="subhead2"><a id="AEAPI901"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.SESSION_ID_EXISTS 
RETURN BOOLEAN;
</pre>
<p class="subhead2"><a id="AEAPI902"></a>Example</p>
<p>The following example checks whether the current session ID is valid and exists.</p>
<pre>DECLARE
    L_VAL BOOLEAN;
BEGIN
    L_VAL := APEX_CUSTOM_AUTH.SESSION_ID_EXISTS;
    IF VAL THEN
        htp.p(&#39;Exists&#39;);
    ELSE
        htp.p(&#39;Does not exist&#39;);
    END IF;
END;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDHEDEI"></a>
<div id="AEAPI236" class="refsect1">
<h2 class="refsect1">SET_SESSION_ID <a id="sthref191"></a>Procedure</h2>
<p>This procedure sets <code>APEX_APPLICATION</code>.<code>G_INSTANCE</code> global variable. This procedure requires the parameter <code>P_SESSION_ID</code> (<code>NUMBER</code>) which specifies a session ID.</p>
<p class="subhead2"><a id="AEAPI903"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.SET_SESSION_ID( 
    p_session_id    IN    NUMBER);
</pre>
<p class="subhead2"><a id="AEAPI904"></a>Parameters</p>
<p><a href="#CHDJBGBA">Table 6-8</a> describes the parameters available in the <code>SET_SESSION_ID</code> procedure.</p>
<div id="AEAPI905" class="tblformal">
<p class="titleintable"><a id="sthref192"></a><a id="CHDJBGBA"></a>Table 6-8 SET_SESSION_ID Parameters</p>
<table class="cellalignment3315" title="SET_SESSION_ID Parameters" summary="This table describes the available parameters." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t12">Parameter</th>
<th class="cellalignment3316" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t12" headers="r1c1-t12">
<p><code>p_session_id</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t12 r1c2-t12">
<p>The session ID to be registered.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI906"></a>Example</p>
<p>In the following example, the session ID value registered is retrieved from the browser cookie.</p>
<pre>APEX_CUSTOM_AUTH.SET_SESSION_ID(APEX_CUSTOM_AUTH.GET_SESSION_ID_FROM_COOKIE);
</pre></div>
<!-- class="refsect1" -->
<a id="CHDDHIIF"></a>
<div id="AEAPI237" class="refsect1">
<h2 class="refsect1">SET_SESSION_ID_TO_NEXT_VALUE <a id="sthref193"></a>Procedure</h2>
<p>This procedure combines the operation of <code>GET_NEXT_SESSION_ID</code> and <code>SET_SESSION_ID</code> in one call.</p>
<p class="subhead2"><a id="AEAPI907"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.SET_SESSION_ID_TO_NEXT_VALUE;
</pre>
<p class="subhead2"><a id="AEAPI908"></a>Example</p>
<p>In the following example, if the current session is not valid, a new session ID is generated and registered.</p>
<pre>IF NOT APEX_CUSTOM_AUTH.SESSION_ID_EXISTS THEN
    APEX_CUSTOM_AUTH.SET_SESSION_ID_TO_NEXT_VALUE;
END IF;
</pre></div>
<!-- class="refsect1" -->
<a id="CHDBHHIA"></a>
<div id="AEAPI235" class="refsect1">
<h2 class="refsect1">SET_USER <a id="sthref194"></a>Procedure</h2>
<p>This procedure sets the <code>APEX_APPLICATION</code>.<code>G_USER</code> global variable. <code>SET_USER</code> requires the parameter <code>P_USER</code> (<code>VARCHAR2</code>) which defines a user ID.</p>
<p class="subhead2"><a id="AEAPI909"></a>Syntax</p>
<pre>APEX_CUSTOM_AUTH.SET_USER(
    p_user   IN    VARCHAR2);

</pre>
<p class="subhead2"><a id="AEAPI910"></a>Parameters</p>
<p><a href="#CHDEFIEC">Table 6-9</a> describes the parameters available in the <code>SET_USER</code> procedure.</p>
<div id="AEAPI911" class="tblformal">
<p class="titleintable"><a id="sthref195"></a><a id="CHDEFIEC"></a>Table 6-9 SET_USER Parameters</p>
<table class="cellalignment3315" title="SET_USER Parameters" summary="This table describes the available parameters." dir="ltr">
<thead>
<tr class="cellalignment3309">
<th class="cellalignment3316" id="r1c1-t13">Parameter</th>
<th class="cellalignment3316" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3309">
<td class="cellalignment3317" id="r2c1-t13" headers="r1c1-t13">
<p><code>p_user</code></p>
</td>
<td class="cellalignment3317" headers="r2c1-t13 r1c2-t13">
<p>The user ID to be registered.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="AEAPI912"></a>Example</p>
<p>In the following example, if the current application user is <span class="bold">NOBODY</span>, then <span class="bold">JOHN.DOE</span> is registered as the application user.</p>
<pre>IF V(&#39;APP_USER&#39;) = &#39;NOBODY&#39; THEN
    APEX_CUSTOM_AUTH.SET_USER(&#39;JOHN.DOE&#39;);
END IF;
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3308">
<tr>
<td class="cellalignment3317">
<table class="cellalignment3313">
<tr>
<td class="cellalignment3312"><a href="apex_css.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3312"><a href="apex_debug.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3319">
<table class="cellalignment3311">
<tr>
<td class="cellalignment3312"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3312"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3312"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3312"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3312"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3312"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>