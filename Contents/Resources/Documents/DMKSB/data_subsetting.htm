<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5618"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Data%20Subsetting"></a><title>Data Subsetting</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-03-17T05:29:01Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Masking and Subsetting Guide"/>
<meta name="dcterms.identifier" content="E63408-05"/>
<meta name="dcterms.isVersionOf" content="DMKSB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="data_masking.htm" title="Previous" type="text/html"/>
<link rel="Next" href="index.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E63408-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2146C7B2-5E7C-4970-9E14-D22E0E33B4E1"></a> <span id="PAGE" style="display:none;">11/12</span> <!-- End Header -->
<h1 id="DMKSB-GUID-2146C7B2-5E7C-4970-9E14-D22E0E33B4E1" class="sect1"><span class="enumeration_chapter">5</span> Data Subsetting</h1>
<div>
<p>This chapter covers the Integrated Subset and Mask capability, where you perform data masking and subsetting in a single taskflow and outlines a number of scenarios to demonstrate the process. You must have the Oracle Data Masking and Subsetting Pack license to use data subsetting features.</p>
<div class="infobox-note" id="GUID-2146C7B2-5E7C-4970-9E14-D22E0E33B4E1__GUID-9ADB2848-7621-493A-843F-41396FDF824F">
<p class="notep1">Note:</p>
<p>Data subsetting is supported only in Oracle Database versions 10.1 and higher. The procedures in this chapter are applicable only to Oracle Enterprise Manager Cloud Control 12.1 and higher.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89"></a>
<h2 id="DMKSB-GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89" class="sect2">Creating a Data Subset Definition</h2>
<div>
<div class="section">
<p><a id="d11629e75" class="indexterm-anchor"></a><a id="d11629e79" class="indexterm-anchor"></a>The procedure described in this section enables you to create a subset database, after which you can perform other tasks, such as editing the properties of the subset definition or exporting a subset definition.</p>
<p>The interface also allows you to perform inline, or at the source, masking while creating the subset definition.</p>
<p><a id="d11629e87" class="indexterm-anchor"></a><a id="d11629e91" class="indexterm-anchor"></a>Before proceeding, ensure that you have the following privileges:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">EM_ALL_OPERATOR</code> for Enterprise Manager Cloud Control users</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-9EBF2C97-94E9-4EA8-A1E1-7CA90DB311D5">
<p class="notep1">Note:</p>
<p>The EM_ALL_OPERATOR privilege is not required, if you have the following privileges:</p>
<p><span class="bold">Target Privileges (applicable to all targets):</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Connect to any viewable target</p>
</li>
<li>
<p>Execute Command Anywhere</p>
</li>
<li>
<p>View Any Target</p>
</li>
</ul>
<p><span class="bold">Resource Privileges:</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Job System</p>
</li>
<li>
<p>Named Credential</p>
</li>
<li>
<p>Oracle Data Masking and Subsetting resource privilege</p>
</li>
</ul>
</div>
</li>
<li>
<p><code class="codeph">SELECT_ANY_DICTIONARY</code> privilege for database users</p>
</li>
<li>
<p>Additionally, to perform an in-place delete operation, the DBA user must be granted the <code class="codeph">EXECUTE_ANY_TYPE</code> privilege</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To create a data subset definition:</p>
<ol>
<li>
<p>From the Enterprise menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Subset Definitions</span>.</p>
</li>
<li>
<p>Open the <span class="bold">Actions</span> menu in the Data Subset Definitions page, then select <span class="bold">Create</span>, or just click the <span class="bold">Create</span> icon.</p>
</li>
<li>
<p>Define the data subset definition properties:</p>
<ol>
<li>
<p>Provide the requisite information in the General pop-up that appears, then click <span class="bold">Continue</span>.</p>
<p>You can select any source database associated with the Application Data Model.</p>
<p>If you are performing masking within the subset definition, you must select the same ADM and target used in creating the masking definition.</p>
</li>
<li>
<p>Provide a job name, credentials, and specify a schedule in the Schedule Application Detail Collection pop-up that appears, then click <span class="bold">Submit</span>.</p>
<p>If you want to use new credentials, choose the New Credentials option. Otherwise, choose the Preferred Credentials or Named Credentials option.</p>
</li>
</ol>
<p>The space estimate collection job runs, and then displays the Data Subset Definitions page. Your definition appears in the table, and the Most Recent Job Status column should indicate Scheduled, Running, or Succeeded, depending on the schedule option selected and time required to complete the job.</p>
</li>
<li>
<p>Select the definition within the table, open the <span class="bold">Actions</span> menu, then select <span class="bold">Edit</span>.</p>
<p>The Database Login page appears.</p>
</li>
<li>
<p>Select either Named Credentials or New Credentials if you have not already set preferred credentials, then click <span class="bold">Login</span>.</p>
</li>
<li>
<p>In the Applications subpage of the Edit page, move applications from the Available list to the Selected list as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>If you intend only to mask the data (no subsetting), select all applications.</p>
</li>
<li>
<p>If you intend only to subset the data (no masking), select specific applications as appropriate.</p>
</li>
<li>
<p>If you intend both to subset and mask the data, the applications selected must include those that the masking definitions require.</p>
</li>
</ul>
<p>The names of application suites, applications, or application modules are maintained in the Application Data Model.</p>
</li>
<li>
<p>Click the <span class="bold">Object Rules</span> tab.</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-DF6174C5-FA49-4E62-B748-B39D5607EB54">
<p class="notep1">Note:</p>
<p>If you are masking only, set the Default Table Rules option to include all rows and skip to <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDGBFDI">Step 13</a>. The <span class="bold">Column Mask Rules</span> tab, <span class="bold">Rule Parameters</span> tab, and additional features on the <span class="bold">Object Rules</span> tab pertain specifically to subsetting.</p>
</div>
<p>You can add rules here to define the data to include in the subset.</p>
</li>
<li>
<p>Select <span class="bold">Actions</span>, then <span class="bold">Create</span> to display the Object Rule pop-up, or just click the <span class="bold">Create</span> icon.</p>
<ol>
<li>
<p><a id="d11629e264" class="indexterm-anchor"></a>Select the application for which you want to provide a rule.</p>
<p>Associate the rule with all objects, a specific object, or a specific type of object.</p>
</li>
<li>
<p>If you select <span class="bold">All Objects</span>, in the Rows to Include section, select the option that best suits your needs for a representative sample of production data. If you do not want to include all rows, you can include some rows by specifying a percentage portion of the rows. For finer granularity, you could specify a Where clause, such as where region_id=6.</p>
<p>For more information on specifying Where clauses, see <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__BCGFDBEI">Step 8f</a>.</p>
</li>
<li>
<p>If you select <span class="bold">Specified</span> as the object type, the tables from the selected Application appear in the drop-down list.</p>
<p>If the selected table is partitioned, click <span class="bold">Add/Remove Partitions</span> to choose the partitions and sub-partitions from which the objects must be included in the subset.</p>
</li>
<li>
<p>In the Include Related Rows section, do one of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d11629e301" class="indexterm-anchor"></a>Select <span class="bold">Ancestor and Descendant Objects</span></p>
<p>This rule impacts the parent and child columns, and ensures that referential integrity is maintained, and that child columns are also selected as part of the subset.</p>
</li>
<li>
<p>Select <a id="d11629e313" class="indexterm-anchor"></a><span class="bold">Ancestor Objects Only</span></p>
<p>This rule only impacts the parent columns, and ensures that referential integrity is maintained.</p>
</li>
</ul>
<p>If you disable the Include Related Rows check box, referential integrity may not be maintained. However, you can subsequently provide additional rules to restore referential integrity. You can disable this check box whether or not you specify a Where clause.</p>
</li>
<li>
<p>If you want to specify a Where clause, go to the next step. Otherwise, skip to <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__BCGECEIA">Step 9</a>.</p>
</li>
<li id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__BCGFDBEI">
<p><a id="d11629e332" class="indexterm-anchor"></a><a id="d11629e336" class="indexterm-anchor"></a>Provide a rule parameter, if desired, for the clause.</p>
<p>For instance, if you specify a particular value for an employee ID as employee_id=:emp_id, you could enter query values for the default of 100:</p>
<ul style="list-style-type: disc;">
<li>
<p>Select the Rows Where button and enter employee_id=:emp_id.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to save the rule and return to the Object Rules tab.</p>
<p>If this is a new rule, a warning appears stating that &#34;Rule parameters corresponding to the bind variables &#39;emp_id&#39; should be created before generating subset.&#34;</p>
</li>
<li>
<p>Select the table rule, click the <span class="bold">Rule Parameters</span> tab, then click <span class="bold">Create</span>.</p>
<p>The Rule Parameter Properties pop-up appears.</p>
</li>
<li>
<p>Enter emp_id for the Name and 100 for the Value.</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-A6EAA93D-EDC9-4800-956F-42FD5913632E">
<p class="notep1">Note:</p>
<p>The colon ( : ) preceding emp_id is only present in the Where clause, and not required when creating a new rule parameter.</p>
</div>
</li>
<li>
<p>Click <span class="bold">OK</span> to save the properties, which now appear in the <span class="bold">Rule Parameters</span> tab.</p>
</li>
<li>
<p>Skip to <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDHBCIG">Step 10</a>.</p>
</li>
</ul>
</li>
</ol>
</li>
<li id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__BCGECEIA">
<p>Click <span class="bold">OK</span> to save the rule and return to the <span class="bold">Object Rules</span> tab.</p>
<p>The new rule is displayed in the list. The related objects are displayed in the table below. Related rows from the objects are included in the subset to provide referential integrity in the subset database.</p>
</li>
<li id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDHBCIG">
<p>In the Related Objects section of the <span class="bold">Object Rules</span> tab, you can manage the size of the subset by controlling the levels of ancestors and descendants within the subset. Notice that each node in the table has a check box. By default, all nodes are included in the subset, as indicated by the check mark. Deselect the check box to exclude a node from the subset. The deselection option is disabled for parent rows (the join columns to the right identify parent and child rows). In addition, you can make these other refinements to subset content:</p>
<ul style="list-style-type: disc;">
<li>
<p>Click <span class="bold">Allow Excluding Parent Objects</span>. This enables the check marks that were grayed out. You can now selectively exclude parent rows from the subset by deselecting the check box.</p>
</li>
<li>
<p>Select a node within the table and click <span class="bold">Add Descendants</span> to include related rows. In the dialog that opens, make appropriate selections and click <span class="bold">OK</span>.</p>
</li>
</ul>
<p>As you make these refinements, columns on the right reflect the effect on space estimates for the subset. The Related Objects section also denotes the processing order of the ancestor and descendant tables, including the detailed impact of including each object. When you are done with the refinements, go to the <span class="bold">Space Estimates</span> tab to see a finer granularity of the impact on the overall size of the subset.</p>
</li>
<li>
<p>In the Default Object Rows section of the <span class="bold">Object Rules</span> tab, choose whether you want to include or exclude the objects not affected by the defined rules in the subset.</p>
<p>When you select the Include All Rows option, all of the rows for the object are selected as part of the subset.</p>
<p>This is a global rule and applies to the entire subset. You can only select the Include All Rows option when all of the rules have a scope of None. A scope of None is established when you uncheck the Include Related Rows option in the Object Rule pop-up.</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-4AC485E6-856F-4495-9DC3-54CC4BFD083B">
<p class="notep1">Note:</p>
<p>For a subset definition that has column rules (see <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDDBADD">Step 12</a>), be sure to use object rules to include the corresponding objects. You can use the Default Object Rules option to include all objects not affected by object rules, if required.</p>
</div>
</li>
<li id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDDBADD">
<p><span class="italic">Optional</span>: Click the <span class="bold">Column Mask Rules</span> tab to perform inline masking as part of the subset definition.</p>
<ol>
<li>
<p>Click <span class="bold">Create</span> and enter search criteria to filter on columns within the schema. These would typically be vertical columns such as CLOB AND BLOB columns.</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-C86B711F-EC24-4482-8B91-80AEFE3FA504">
<p class="notep1">Note:</p>
<p>If you are using column mask rules instead of masking definitions (see <a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDGBFDI">Step 13</a>), you can select no more than 10 columns in a given table. This restriction applies to the export method but not to the in-place delete method.</p>
</div>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Select a row or rows in the column search results and click <span class="bold">Manage Masking Formats</span>.</p>
</li>
<li>
<p>In the pop-up dialog, select a masking format and value to apply to the columns. For multiselection, the same format must be appropriate for all columns. If you select multiple columns, ensure that the column rule format you choose is applicable to the selected columns. Use the columns (flags) <span class="bold">not null</span> and <span class="bold">unique</span> to enforce compliance.</p>
<p>Click <span class="bold">OK</span> to apply the masking format to the columns.</p>
</li>
</ol>
</li>
<li id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__CHDGBFDI">
<p><span class="italic">Optional</span>: Click the <span class="bold">Data Masking Definitions</span> tab to include masking definitions as part of the subsetting operation or to perform at the source data masking only.</p>
<ol>
<li>
<p>Click <span class="bold">Add</span>.</p>
</li>
<li>
<p>In the pop-up dialog, enter search criteria to retrieve appropriate definitions. Be sure to select the desired radio button (All or Any). All formats except compound masking are supported for inline masking.</p>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-7CB5690B-9740-4A50-95BC-CA9B5F00C55C">
<p class="notep1">Note:</p>
<p>No single table within a masking definition can have more than 10 masked columns if you are using the export method. The restriction does not apply to the in-place delete method.</p>
</div>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p>The search results appear in the data masking table.</p>
</li>
<li>
<p>Click the <span class="bold">Space Estimates</span> tab.</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d11629e526" class="indexterm-anchor"></a>Note the value in the Estimated Subset Size MB column. The space estimates depend on optimizer statistics, and the actual distribution of data can only be calculated if histogram statistics are present.</p>
</li>
<li>
<p>Whenever you add new rules, recheck the space estimates for updated values.</p>
</li>
<li>
<p>Data in the Space Estimates subpage is sorted with the largest applications appearing at the top.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-B01EA839-BBA6-4470-8B3A-64CEF2D10CF7">
<p class="notep1">Note:</p>
<p>Space estimates are accurate only if &ldquo;dbms_stats.gather_table_stats&rdquo; is used. Also, space estimates do not reflect the effect of data masking, if used.</p>
</div>
<p>If you provide a Where clause and subsequent rule parameter properties, the Space Estimates subpage is updated with the value contained in the <span class="bold">Rule Parameters</span> tab.</p>
</li>
<li>
<p><span class="italic">Optional</span>: click the <span class="bold">Pre/Post Subset Script</span> tab.</p>
<ul style="list-style-type: disc;">
<li>
<p>You can specify a pre-subset script to run on the subset database before you select subset data.</p>
</li>
<li>
<p>You can specify a post-subset script to run on the subset database after you assemble the subset data.</p>
</li>
<li>
<p>Either script type runs on the source database.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Return</span>.</p>
<p>The definition is complete and displayed in the Data Subsetting Definitions table.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>You can now proceed with script generation. Alternatively, you may want to save the script for future use. In either case, you must decide whether to export data to a dump file or delete data from a target database.</p>
<div class="infoboxnotealso" id="GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89__GUID-A4D41F1C-A6E2-431E-85A1-4106DF5B00F7">
<p class="notep1">Tip:</p>
<p>If you have a very large database of 4 terabytes, for instance, and you want to export a small percentage of the rows, such as 10%, it is more advantageous to use the export method. Using the in-place delete method would require 3.6 terabytes of data, which would not perform as quickly as the export method.</p>
<p>The in-place delete method is recommended when the amount of data being deleted is a small percentage of the overall data size.</p>
<p>There is an EMCLI verb if you want to perform an in-place delete remotely or script it.</p>
</div>
<ul style="list-style-type: disc;">
<li>
<p><a href="data_subsetting.htm#GUID-575C8900-41D9-460B-9D42-0A6000B82E0B">Generating a Subset Script</a></p>
</li>
<li>
<p><a href="data_subsetting.htm#GUID-0E445E35-B047-4A6F-B348-B9FC8D4CF00A">Saving a Subset Script</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="props_rev_3"><a id="GUID-575C8900-41D9-460B-9D42-0A6000B82E0B"></a>
<h3 id="DMKSB-GUID-575C8900-41D9-460B-9D42-0A6000B82E0B" class="sect3">Generating a Subset Script</h3>
<div>
<div class="section">
<p><a id="d11629e629" class="indexterm-anchor"></a><span class="bold">To prepare and submit a job to generate a subset script</span>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Select the definition within the table, open the <span class="bold">Actions</span> menu, then select <span class="bold">Generate Subset</span>. The Subset Mode pop-up appears.</span></li>
<li class="stepexpand"><span>Select a target database that is either the same target database you used to create the subset model, or similar to this database regarding the table schema and objects.</span></li>
<li class="stepexpand"><span>Decide if you want to create a subset by writing subset data to export files, or by deleting data from a target database.</span>
<div>
<p>Choosing to delete data creates an in-place subset by removing/deleting unwanted data from a cloned copy of the production database, rather than a production database. Only data satisfying the rules are retained. You should never use this option on a production database.</p>
<p>Select either Named Credentials or New Credentials if you have not already set preferred credentials.</p>
<p>If you have defined any parameters from the <span class="bold">Rule Parameters</span> tab, they appear in the table at the bottom. You can change a parameter value by clicking on the associated field in the Value column.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Continue</span> to access the Parameters pop-up. The contents of the pop-up depend on whether you chose the export or delete option in the previous step.</span>
<div>
<p>For <span class="bold">Writing Subset Data to Export Files</span>, provide the requisite information, then click <span class="bold">Continue</span> to schedule the job.</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a subset directory where to save the export dump. The drop-down list consists of directory objects for which you have access. Alternatively, you can select a custom directory path. Click the check box if you want to speed the process by using an external directory. Recommended default: <code class="codeph">DATA_PUMP_DIR</code>.</p>
</li>
<li>
<p>Specify appropriate values if you want to override the defaults: enter a name for the export file; specify a maximum file size in megabytes; specify the maximum number of threads of active execution operating on behalf of the export job. This enables you to consider trade-offs between resource consumption and elapsed time.</p>
</li>
<li>
<p>Select whether to enable dump file compression and encryption. Enter and confirm an encryption password, if appropriate. Log file generation is selected by default.</p>
</li>
</ul>
<p>For <span class="bold">Deleting Data From a Target Database</span>, provide the requisite information, then click <span class="bold">Continue</span> to schedule the job.</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a subset directory where to save the subset scripts. The drop-down list consists of directory objects for which you have access. Alternatively, you can select a custom directory path. Recommended default: <code class="codeph">DATA_FILE_DIR</code>.</p>
</li>
<li>
<p>You must enable the check box indicating that the selected target is not a production database in order to proceed.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Continue</span> to schedule the job from the Generate Subset Schedule pop-up, then click <span class="bold">Submit</span>. For the delete option, you must specify and confirm an encryption seed.</span>
<div>
<p>The Data Subset Definitions page reappears, and the Most Recent Job Status column shows that the subset job is running, and subsequently that it has succeeded.</p>
</div>
</li>
</ol>
<div class="section">
<p>After performing this procedure, you can now create a subset database with the generated export files at any time.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-0E445E35-B047-4A6F-B348-B9FC8D4CF00A"></a>
<h3 id="DMKSB-GUID-0E445E35-B047-4A6F-B348-B9FC8D4CF00A" class="sect3">Saving a Subset Script</h3>
<div>
<div class="section">
<p><a id="d11629e760" class="indexterm-anchor"></a><span class="bold">To prepare and submit a job to save a subset script</span>:</p>
<ol>
<li>
<p>Select the definition within the table, open the <span class="bold">Actions</span> menu, then select <span class="bold">Save Subset Script</span>. The Subset Mode pop-up appears.</p>
</li>
<li>
<p>Select a target database that is either the same target database you used to create the subset model, or similar to this database regarding the table schema and objects.</p>
</li>
<li>
<p>Decide if you want to create a subset by writing subset data to export files, or by deleting data from a target database.</p>
<p>Choosing to delete data creates an in-place subset by removing/deleting unwanted data from a cloned copy of the production database, rather than a production database. Only data satisfying the rules are retained. You should never use this option on a production database.</p>
<p>Select either Named Credentials or New Credentials if you have not already set preferred credentials.</p>
<p>If you have defined any parameters from the <span class="bold">Rule Parameters</span> tab, they appear in the table at the bottom. You can change a parameter value by clicking on the associated field in the Value column.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span> to access the Parameters pop-up. The contents of the pop-up depend on whether you chose the export or delete option in the previous step.</p>
<p>For <span class="bold">Writing Subset Data to Export Files</span>, provide the requisite information, then click <span class="bold">Continue</span> to schedule the job.</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a subset directory where to save the export dump. The drop-down list consists of directory objects for which you have access. Alternatively, you can select a custom directory path. Click the check box if you want to speed the process by using an external directory. Recommended default: <code class="codeph">DATA_PUMP_DIR</code>.</p>
</li>
<li>
<p>Specify appropriate values if you want to override the defaults: enter a name for the export file; specify a maximum file size in megabytes; specify the maximum number of threads of active execution operating on behalf of the export job. This enables you to consider trade-offs between resource consumption and elapsed time.</p>
</li>
<li>
<p>Select whether to enable dump file compression and encryption. Enter and confirm an encryption password, if appropriate. Log file generation is selected by default.</p>
</li>
</ul>
<p>For <span class="bold">Deleting Data From a Target Database</span>, provide the requisite information, then click <span class="bold">Continue</span> to schedule the job.</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a subset directory where to save the subset scripts. The drop-down list consists of directory objects for which you have access. Alternatively, you can select a custom directory path. Recommended default: <code class="codeph">DATA_FILE_DIR</code>.</p>
</li>
<li>
<p>You must enable the check box indicating that the selected target is not a production database in order to proceed.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Continue</span>. A progress indicator tracks script generation. When complete, the Files table lists the results of script generation.</p>
</li>
<li>
<p>Click <span class="bold">Download</span>. In the File Download pop-up that appears, click <span class="bold">Save</span>.</p>
</li>
<li>
<p>In the Save As pop-up that appears, navigate to a file location and click <span class="bold">Save</span>.</p>
<p>The file containing the scripts (SubsetBundle.zip) now appears at the specified location on your desktop.</p>
</li>
</ol>
<p><span class="bold">To run the saved script at a later time</span>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Port the ZIP file to the target database and extract it to a directory on which you have the requisite privileges.</span></li>
<li class="stepexpand"><span>Change directory to where you extracted the files.</span></li>
<li class="stepexpand"><span>Execute the following script from the SQL command line:</span>
<div>
<pre dir="ltr">subset_exec.sql
</pre>
<p>Note that if you want to change generated parameter settings, you can do so by editing the following file in a text editor prior to executing the script:</p>
<pre dir="ltr">subset_exec_params.lst
</pre></div>
</li>
</ol>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1696F417-47C5-49E1-855D-DF9B77BF2D93"></a>
<h2 id="DMKSB-GUID-1696F417-47C5-49E1-855D-DF9B77BF2D93" class="sect2">Importing and Exporting Subset Templates and Dumps</h2>
<div>
<p>A subset template is an XML file that contains the details of the subset, consisting of the application, subset rules, rule parameters, and pre-scripts or post-scripts. When you create a subset definition and specify that you want to write subset data to export files, the export files become a template that you can subsequently import for reuse. You would import the template to perform subset operations on a different database.</p>
<p>Typically, the workflow is that you would first import a previously exported ADM template, which is another XML file, while creating an ADM. You would then import the related subset template while creating a data subset definition. You could alternatively select an existing ADM (skipping the import ADM flow) while importing the subset template.</p>
<div class="infobox-note" id="GUID-1696F417-47C5-49E1-855D-DF9B77BF2D93__GUID-E8D62E03-EF0F-4883-9CB3-C4E051CF46CC">
<p class="notep1">Note:</p>
<p>There are EMCLI verbs to export and import subset definitions and subset dumps if you want to perform these operations remotely or script them.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-D069AD09-3345-4CD8-8DF6-69179937BB1E"></a>
<h3 id="DMKSB-GUID-D069AD09-3345-4CD8-8DF6-69179937BB1E" class="sect3">Importing a Subset Definition</h3>
<div>
<div class="section">
<p><a id="d11629e960" class="indexterm-anchor"></a><a id="d11629e964" class="indexterm-anchor"></a>There are three methods of import:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Import a subset definition XML file from the desktop</p>
</li>
<li>
<p>Import a subset dump</p>
</li>
<li>
<p>Import a subset definition XML file from the Software Library</p>
</li>
</ul>
<p><span class="bold">To import a subset definition XML file from your desktop</span>:</p>
<ol>
<li>
<p>From the <span class="bold">Actions</span> menu, select <span class="bold">Import</span>, then select <span class="bold">File from Desktop</span>.</p>
</li>
<li>
<p>In the pop-up that appears:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a name for the subset definition</p>
</li>
<li>
<p>The ADM on which the subset is based</p>
</li>
<li>
<p>A source database</p>
</li>
<li>
<p>The location on your desktop from which you want to import the subset definition</p>
</li>
<li>
<p>Click <span class="bold">Continue</span></p>
</li>
</ul>
</li>
<li>
<p>In the pop-up that appears:</p>
<ul style="list-style-type: disc;">
<li>
<p>Enter a descriptive job name (or accept the default)</p>
</li>
<li>
<p>Provide credentials</p>
</li>
<li>
<p>Schedule the job</p>
</li>
<li>
<p>Click <span class="bold">Submit</span></p>
</li>
</ul>
<p>After the job runs successfully, the imported subset appears in the list of subsets in the table on the Data Subset Definitions page.</p>
</li>
</ol>
<p><span class="bold">To import a subset dump</span>:</p>
<ol>
<li>
<p>From the <span class="bold">Actions</span> menu, select <span class="bold">Import</span>, then select <span class="bold">Subset Dump</span>.</p>
</li>
<li>
<p>In the pop-up that appears:</p>
<ul style="list-style-type: disc;">
<li>
<p>Select a target database</p>
</li>
<li>
<p>Provide database and host credentials, then click <span class="bold">Login</span>.</p>
</li>
<li>
<p>Specify the location of the dump file, which can be in a selected directory on the target database or at a custom path on the target. Note that if the original export action used an external location for the dump files, the location must be specified as well.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
</li>
</ul>
</li>
<li>
<p>In the pop-up that appears:</p>
<ul style="list-style-type: disc;">
<li>
<p>Select whether to import both metadata and data, or data only. If data only, indicate if you want to truncate, that is, overlay existing data or append to existing data.</p>
</li>
<li>
<p>Perform tablespace remapping as necessary</p>
</li>
<li>
<p>Perform schema remapping as necessary</p>
</li>
<li>
<p>Select log file options</p>
</li>
<li>
<p>Click <span class="bold">Continue</span></p>
</li>
</ul>
</li>
<li>
<p>In the pop-up that appears:</p>
<ul style="list-style-type: disc;">
<li>
<p>Enter a descriptive job name (or accept the default)</p>
</li>
<li>
<p>Schedule the job</p>
</li>
<li>
<p>Click <span class="bold">Submit</span></p>
</li>
</ul>
<p>The job reads the dump files and loads the data into the selected target database.</p>
</li>
</ol>
<p><span class="bold">To import a subset definition XML file from the Software Library</span>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From the <span class="bold">Actions</span> menu, select <span class="bold">Import</span>, then select <span class="bold">File from Software Library</span>.</span></li>
<li class="stepexpand"><span>In the Import Data Subset Definition from Software Library pop-up that appears:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Selected the desired subset definition XML file on the left</p>
</li>
<li>
<p>Provide the ADM properties on the right.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>In the pop-up that appears:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Enter a descriptive job name (or accept the default)</p>
</li>
<li>
<p>Provide credentials</p>
</li>
<li>
<p>Schedule the job</p>
</li>
<li>
<p>Click <span class="bold">Submit</span></p>
</li>
</ul>
<p>After the job runs successfully, the imported subset appears in the list of subsets in the table on the Data Subset Definitions page.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-84C74852-A52F-47AB-BFD5-0FD53E50BA25"></a>
<h3 id="DMKSB-GUID-84C74852-A52F-47AB-BFD5-0FD53E50BA25" class="sect3">Exporting a Subset Definition</h3>
<div>
<div class="section">
<p><a id="d11629e1206" class="indexterm-anchor"></a><a id="d11629e1210" class="indexterm-anchor"></a>There are two methods of export:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Export a selected subset definition to the desktop</p>
</li>
<li>
<p>Export a subset definition from the Software Library</p>
</li>
</ul>
<p><span class="bold">To export a subset definition as an XML file to your desktop</span>:</p>
<ol>
<li>
<p>From the Data Subset Definitions page, select the subset definition you want to export.</p>
</li>
<li>
<p>From the <span class="bold">Actions</span> menu, select <span class="bold">Export</span>, then select <span class="bold">Selected Subset Definition</span>.</p>
</li>
<li>
<p>In the File Download pop-up that appears, click <span class="bold">Save</span>.</p>
</li>
<li>
<p>In the Save As pop-up that appears, navigate to a file location and click <span class="bold">Save</span>.</p>
<p>The system converts the subset definition into an XML file that now appears at the specified location on your desktop.</p>
</li>
</ol>
<p><span class="bold">To export a subset definition from the Software Library</span>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From the <span class="bold">Actions</span> menu, select <span class="bold">Export</span>, then select <span class="bold">File from Software Library</span>.</span></li>
<li class="stepexpand"><span>In the Export Subset Definition from Software Library pop-up that appears, select the desired subset definition and click <span class="bold">Export</span>.</span></li>
<li class="stepexpand"><span>In the File Download pop-up that appears, click <span class="bold">Save</span>.</span></li>
<li class="stepexpand"><span>In the Save As pop-up that appears, navigate to a file location and click <span class="bold">Save</span>.</span>
<div>
<p>The system converts the subset definition into an XML file that now appears at the specified location on your desktop.</p>
</div>
</li>
</ol>
<div class="section">
<p>After the job runs successfully, the subset template appears in the list of subsets in the table on the Data Subset Definitions page.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-274E3705-FCED-421F-9AD2-45D8A125F255"></a>
<h2 id="DMKSB-GUID-274E3705-FCED-421F-9AD2-45D8A125F255" class="sect2">Creating a Subset Version of a Target Database</h2>
<div>
<div class="section">
<p>After a subset is defined, analyzed, and validated, you can execute the subset operation to create a subset version of the source data.</p>
<p>The procedure assumes the following prerequisites:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>A subset definition already exists that contains the rules needed to subset the database.</p>
</li>
<li>
<p><a id="d11629e1346" class="indexterm-anchor"></a>You have the requisite privileges to extract the data from the source and create the subset version in a target database. Depending on the subset technique, different levels of file or database privileges may be created. The required privileges include:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Target Privileges (applicable to all targets):</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Connect to any viewable target</p>
</li>
<li>
<p>Execute Command Anywhere</p>
</li>
<li>
<p>View Any Target</p>
</li>
</ul>
<p><span class="bold">Resource Privileges:</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Job System</p>
</li>
<li>
<p>Named Credential</p>
</li>
<li>
<p>Oracle Data Masking and Subsetting resource privilege</p>
</li>
</ul>
<div class="infobox-note" id="GUID-274E3705-FCED-421F-9AD2-45D8A125F255__GUID-6A73B832-4E89-48DB-9990-9735176B22EF">
<p class="notep1">Note:</p>
<p>The <code class="codeph">EM_ALL_OPERATOR</code> privilege for Enterprise Manager Cloud Control users includes all of the above privileges.</p>
</div>
</li>
<li>
<p><code class="codeph">SELECT_CATALOG_ROLE</code> for database users</p>
</li>
<li>
<p><code class="codeph">SELECT ANY DICTIONARY</code> privilege for database users</p>
</li>
<li>
<p>DBA privileges on a database for target database users</p>
</li>
</ul>
</li>
<li>
<p>Additionally, to perform an in-place delete operation, the DBA user must be granted the <code class="codeph">EXECUTE_ANY_TYPE</code> privilege</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To create a subset version of a target database:</p>
<ol>
<li>
<p>Create a subset operation by selecting a subset definition and associating it with a source database.</p>
<p>Enterprise Manager validates the subset definition against the source database and flags schema differences. Note that this association may be different from the original association that an application developer may have created.</p>
</li>
<li>
<p>Edit the definition to remap the defined schema to a test schema.</p>
<p>You are prompted to connect to a database, whereupon the database is associated with the subset definition. This also enables you to remap the vendor-provided schema names to actual schema names in the database.</p>
</li>
<li>
<p>Select one of the various subset creation techniques:</p>
<ul style="list-style-type: disc;">
<li>
<p>Data Pump dump file followed by a Data Pump import</p>
</li>
<li>
<p>In-place delete, in which rows in the specified database not matching the rule conditions are deleted</p>
</li>
<li>
<p>In-transit subset creation or refresh</p>
</li>
</ul>
<p>Enterprise Manager generates the appropriate response file (that is, SQL script, Data Pump script, or OS script), checks the target system for appropriate privileges to be able proceed with the operation, and estimates the size of the target.</p>
</li>
<li>
<p>After reviewing the analysis, submit the subset process.</p>
<p>Enterprise Manager executes the subset process and summarizes the results of the execution.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-64F034A8-9DF1-42AA-AAAF-AE3E34DC8535"></a>
<h2 id="DMKSB-GUID-64F034A8-9DF1-42AA-AAAF-AE3E34DC8535" class="sect2">Synchronizing a Subset Definition with an Application Data Model</h2>
<div>
<div class="section">
<p>Changes to an ADM, adding referential relationships or deleting tables, for example, can render a subset definition stale. The Subset Definitions page clearly indicates this condition with a lock icon next to the subset name and an invalid status. Also, most menu items on the <span class="bold">Actions</span> menu are disabled. To revert the status to valid and unlock the subset definition, you have to synchronize the definition with its associated ADM.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>On the Subset Definitions page, select the locked subset definition.</span></li>
<li class="stepexpand"><span>From the <span class="bold">Actions</span> menu, select <span class="bold">Synchronize</span>.</span></li>
<li class="stepexpand"><span>Complete the job submission dialog, then click <span class="bold">Submit</span>.</span>
<div>
<p>When the job completes, the subset definition is unlocked and available for use.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F5463D58-0B25-47F6-A833-224DF5B5100E"></a>
<h2 id="DMKSB-GUID-F5463D58-0B25-47F6-A833-224DF5B5100E" class="sect2">Granting Privileges on a Subset Definition</h2>
<div>
<div class="section">
<p>You can grant privileges on a subset definition that you create so that others can have access. To do so, you must be an Enterprise Manager Administrator with at least Designer privileges on the subset definition.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then select <span class="bold">Data Subset Definitions</span>.</span></li>
<li class="stepexpand"><span>Select the subset definition to which you want to grant privileges.</span></li>
<li class="stepexpand"><span>From the <span class="bold">Actions</span> menu, select <span class="bold">Grant</span>, then select as follows:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Operator</span>&ndash;to grant Operator privileges on the subset definition to selected roles or administrators, which means the grantees can view and copy but not edit the definition.</p>
</li>
<li>
<p><span class="bold">Designer</span>&ndash;to grant Designer privileges on the subset definition to selected roles or administrators, which means the grantees can view and edit the definition.</p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>In the dialog that opens, select the type (administrator or role, or both). Search by name, if desired. Make your selections and click <span class="bold">Select</span>.</span>
<div>
<p>Those selected now have privileges on the subset definition.</p>
</div>
</li>
<li class="stepexpand"><span>Use the <span class="bold">Revoke</span> action if you want to deny privileges previously granted.</span></li>
</ol>
<div class="section">
<p>See <span class="q">&#34;<a href="before_you_begin.htm#GUID-1D69FEEB-4B3A-4F51-9E8B-6661C4D7AF5D">Oracle Data Masking and Subsetting Access Rights</a>&#34;</span> for more information on privileges within the test data management area.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-7FE2D24B-062F-4D34-AE7F-7DE8C40FC13A"></a>
<h2 id="DMKSB-GUID-7FE2D24B-062F-4D34-AE7F-7DE8C40FC13A" class="sect2">About Inline Masking and Subsetting</h2>
<div>
<p>You can reduce the size of the database simultaneous with masking sensitive data. This serves the dual purpose of obscuring exported production data while greatly reducing hardware costs related to storing large masked production databases for testing.</p>
<div class="infobox-note" id="GUID-7FE2D24B-062F-4D34-AE7F-7DE8C40FC13A__GUID-D62B35DC-0CBF-47E8-9465-57D338BB0128">
<p class="notep1">Note:</p>
<p>Inline masking is available only with Oracle Database 11<span class="italic">g</span> and higher releases.</p>
</div>
<p>The benefits of integrating data masking with subsetting include the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Prepare the test system in a single flow</p>
</li>
<li>
<p>Avoid the necessity of maintaining large-size masked databases for test purposes</p>
</li>
<li>
<p>Exported data in the form of a dump file can be imported into multiple databases without exposing sensitive data</p>
</li>
<li>
<p>Subsetting is enhanced by ability to discard columns containing chunks of large data</p>
</li>
</ul>
<p>You can select one or more data masking definitions during subset creation. The masking definitions must be based on the same ADM as the current subset definition. At the same time, you can significantly reduce the subset size by defining column rules to set CLOB and BLOB columns to null (or another supported format such as Fixed String, Fixed Number).</p>
<p>You generate a subset in two ways:</p>
<ul style="list-style-type: disc;">
<li>
<p>Export Dump&ndash;if masking definitions are part of the subset model, mapping tables are created during generation, and the resulting dump contains masked values</p>
</li>
<li>
<p>In-Place Delete&ndash;subsetting is performed on a cloned copy of the production database; if data masking is part of the subset model, pregenerated masking scripts are executed on the target sequentially</p>
</li>
</ul>
<p>Advantages of inline masking include the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Sensitive data never leaves the production environment and thus is not exposed (Export Dump option).</p>
</li>
<li>
<p>There is no need to temporarily store data in a staging area.</p>
</li>
<li>
<p>Exported data can subsequently be imported into multiple environments.</p>
</li>
<li>
<p>You can define table rules to export only a subset of data, and can further trim the volume by using column rules to eliminate large vertical columns.</p>
</li>
<li>
<p>You can mask the same data in different ways and import into different test databases.</p>
</li>
<li>
<p>You can use the provisioning framework to create multiple copies of trimmed down, referentially intact databases containing no sensitive data (in-place delete), or import a dump file into multiple databases (export dump).</p>
</li>
</ul>
<p>The section <span class="q">&#34;<a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a>&#34;</span> includes instructions for combining data subsetting and data masking within the process of creating a subset definition. See <a href="data_masking.htm#GUID-E3C164DC-0004-4857-A038-54EC7B1A5118">Data Masking</a>,for information on data masking and creating a data masking definition.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-553B4E0B-A7A5-467A-AC06-D5BE50238453"></a>
<h2 id="DMKSB-GUID-553B4E0B-A7A5-467A-AC06-D5BE50238453" class="sect2">Inline Masking and Subsetting Scenarios</h2>
<div>
<div class="section">
<p>The scenarios described below assume that an Application Data Model (ADM) exists for a production (or test) database in which sensitive column details are captured. The steps outlined are at a high level. See <span class="q">&#34;<a href="data_masking.htm#GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10">Masking with an Application Data Model and Workloads</a>&#34;</span> for details on creating a masking definition; see <span class="q">&#34;<a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a>&#34;</span> for details on creating and editing a subset definition.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Mask and Export Production Data</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to create copies of the production database by exporting the data with masked values; that is, the export dump will have only masked values and no sensitive data.</p>
<ol>
<li>
<p>Create a masking definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Search and select sensitive columns (includes dependent columns and recommended masking formats).</p>
</li>
<li>
<p>Review suggested formats and edit as necessary.</p>
</li>
<li>
<p>Save the results.</p>
</li>
</ol>
</li>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subsetting definition.</p>
<p>On the <span class="bold">Data Masking</span> tab, search for and select masking definitions. System validation checks for overlapping columns that use multiple masking definitions.</p>
</li>
<li>
<p>Generate the subset using the Export option.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generates and executes a script to create a mapping table and a mapping function. Also creates a table to map the column(s) to the respective mapping function.</p>
</li>
<li>
<p>Copies subsetting and masking scripts to the target database.</p>
</li>
<li>
<p>Generates an export dump of production data, replacing sensitive data with masked values using the mapping function.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Mask and Delete Operation on a Test Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to create a usable test database by masking sensitive information. The resulting database will have only masked values and no sensitive data.</p>
<ol>
<li>
<p>Create a masking definition on a cloned database. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Search and select sensitive columns (includes dependent columns and recommended masking formats).</p>
</li>
<li>
<p>Review suggested formats and edit as necessary.</p>
</li>
<li>
<p>Save.</p>
</li>
</ol>
</li>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subsetting definition.</p>
<p>On the <span class="bold">Data Masking</span> tab, search and select masking definitions. System validation checks for overlapping columns that use multiple masking definitions.</p>
</li>
<li>
<p>Generate the subset using the In-Place Delete option.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Copies subsetting and masking scripts to the target database.</p>
</li>
<li>
<p>Performs data subsetting based on subset rules, if specified.</p>
</li>
<li>
<p>Sequentially executes the pregenerated data masking scripts on the target database.</p>
</li>
<li>
<p>Creates a masked copy of the production database for use in testing.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Mask Sensitive Data and Export a Subset of a Production Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to create copies of the production database by exporting a subset of production data with masked values.</p>
<ol>
<li>
<p>Create a masking definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Search and select sensitive columns (includes dependent columns and recommended masking formats).</p>
</li>
<li>
<p>Review suggested formats and edit as necessary.</p>
</li>
<li>
<p>Save.</p>
</li>
</ol>
</li>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subset definition.</p>
<ol>
<li>
<p>Define table rules, resulting in space estimates.</p>
</li>
<li>
<p>On the <span class="bold">Data Masking</span> tab, search and select masking definitions. System validation checks for overlapping columns that use multiple masking definitions.</p>
</li>
</ol>
</li>
<li>
<p>Generate the subset using the Export option.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generates and executes a script to create a mapping table and a mapping function. Also creates a table to map the column(s) to the respective mapping function.</p>
</li>
<li>
<p>Copies subsetting and masking scripts to the target database.</p>
</li>
<li>
<p>Generates an export dump of production data, replacing sensitive data with masked values using the mapping function.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Perform Subset, Mask, and Delete Operations on a Test Database</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to create a usable test database by masking sensitive information. On import, the database will have only masked values and no sensitive data.</p>
<ol>
<li>
<p>Create a masking definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Search and select sensitive columns (includes dependent columns and recommended masking formats).</p>
</li>
<li>
<p>Review suggested formats and edit as necessary.</p>
</li>
<li>
<p>Save.</p>
</li>
</ol>
</li>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subset definition.</p>
<ol>
<li>
<p>Define table rules, resulting in space estimates.</p>
</li>
<li>
<p>On the <span class="bold">Data Masking</span> tab, search and select masking definitions. System validation checks for overlapping columns that use multiple masking definitions.</p>
</li>
</ol>
</li>
<li>
<p>Generate the subset using the In-Place Delete option.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Copies subsetting and masking scripts to the target database.</p>
</li>
<li>
<p>Performs data subsetting based on subset rules, if specified.</p>
</li>
<li>
<p>Following subset completion, sequentially executes the pregenerated data masking scripts on the target database.</p>
</li>
<li>
<p>Applies masking definitions and subsetting rules, resulting in a masked database of reduced size.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Apply Column Rules</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to create a targeted subset by selecting large-sized columns and setting them to null or a fixed value. Table rules can also be used to further reduce database size. Impact of size reduction is immediately visible and applied to the final subset.</p>
<ol>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subset definition.</p>
<ol>
<li>
<p>Click the <span class="bold">Table Rules</span> tab and select from existing options, if desired.</p>
</li>
<li>
<p>Click the <span class="bold">Column Rules</span> tab, then click <span class="bold">Create</span>.</p>
</li>
<li>
<p>Specify filtering criteria to search for large-sized columns and select the desired columns in the results table.</p>
</li>
<li>
<p>Click <span class="bold">Manage Masking Formats</span> and select a format from the drop-down list. Enter a value if appropriate to the selection.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> and review the updated space estimates.</p>
</li>
</ol>
</li>
<li>
<p>Generate the subset, using either the Export or In-Place Delete option.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generates an export dump/subset of production data.</p>
</li>
<li>
<p>Column rules are applied on the target database.</p>
</li>
<li>
<p>If table rules were also applied, the resulting subset reflects the combined effect of table and column rules.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Export a Subset Definition That Uses Inline Masking</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to export a subset definition for reuse.</p>
<ol>
<li>
<p>Create a subset definition. Implies the following:</p>
<ol>
<li>
<p>Select an appropriate ADM.</p>
</li>
<li>
<p>Submit the create subset job.</p>
</li>
</ol>
</li>
<li>
<p>Edit the subset definition.</p>
<ol>
<li>
<p>Create rules to compute space estimates.</p>
</li>
<li>
<p>On the <span class="bold">Data Masking</span> tab, search and select masking definitions. System validation checks for overlapping columns that use multiple masking definitions.</p>
</li>
</ol>
</li>
<li>
<p>Select the subset definition on the Subset home page and export it.</p>
</li>
</ol>
<p>The subset definition is saved on the client machine as an XML file that potentially contains the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Information on selected applications</p>
</li>
<li>
<p>Rules and rule parameters</p>
</li>
<li>
<p>Selected masking definitions</p>
</li>
<li>
<p>Columns to set to null</p>
</li>
<li>
<p>Pre- and post-scripts</p>
</li>
</ul>
<p>Had column rules been used, they would replace the masking definitions in the list.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Import a Subset Definition That Uses Inline Masking</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to import a subset definition XML file to create replicas of the subset definition previously exported.</p>
<ol>
<li>
<p>Import a subset definition.</p>
</li>
<li>
<p>Select an exported XML template that contains exported masking definitions. System validation:</p>
<ul style="list-style-type: disc;">
<li>
<p>Checks for overlapping columns that use multiple masking definitions.</p>
</li>
<li>
<p>Ensures that the masking definition specified is part of the same ADM as the current subset model.</p>
</li>
</ul>
</li>
<li>
<p>Submit the job to create the subset model.</p>
</li>
</ol>
<p>Summarizing the outcome:</p>
<ul style="list-style-type: disc;">
<li>
<p>Creates a subset definition model</p>
</li>
<li>
<p>Applies specified rules and calculates space estimates</p>
</li>
<li>
<p>Remembers masking definitions that were part of the XML</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Import a Subset Dump</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to import a subset dump, which might contain either or both of the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>A masked version of a production database</p>
</li>
<li>
<p>A subset version of a production database</p>
</li>
</ul>
<p>Note that this example assumes a previous export dump.</p>
<ol>
<li>
<p>On the subset home page, select <span class="bold">Import Subset Dump</span> from the <span class="bold">Actions</span> menu.</p>
</li>
<li>
<p>Provide credentials, a dump name, and select the dump location.</p>
</li>
<li>
<p>Provide the import type, tablespace options, and log file location details.</p>
</li>
<li>
<p>Schedule the job and submit.</p>
</li>
</ol>
<p>The job reads the dump files and loads the data into the selected target database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Save Subset Script Bundle</p>
</div>
<!-- class="section" -->
<div class="section">
<p>As the Security Administrator, you want to save a subset script bundle so that it can be executed on a target database external to Enterprise Manager.</p>
<p>This example presupposes the existence of a subset model that has required table rules and masking definitions.</p>
<ol>
<li>
<p>On the subset home page, from the <span class="bold">Actions</span> menu, select <span class="bold">Generate</span>, then select <span class="bold">Subset</span>.</p>
</li>
<li>
<p>Complete the mode page as follows:</p>
<ol>
<li>
<p>Indicate the method of subset creation.</p>
</li>
<li>
<p>Specify which credentials to use.</p>
</li>
<li>
<p>Provide rule parameters as appropriate.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
</li>
</ol>
</li>
<li>
<p>Complete the parameters page as follows:</p>
<ol>
<li>
<p>Select the location where to save the subset export.</p>
</li>
<li>
<p>If the subset is to be stored externally, click the check box and select the location.</p>
</li>
<li>
<p>Specify an export file name. Note that you can use the % wildcard.</p>
</li>
<li>
<p>Specify the maximum file size and number of threads.</p>
</li>
<li>
<p>Indicate whether to generate a log file and specify a log file name.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
</li>
</ol>
</li>
<li>
<p>Note the progress of the script file generation. When complete, click <span class="bold">Download</span>.</p>
</li>
<li>
<p>Specify where to save the <code class="codeph">SubsetBundle.zip</code> file.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-4C1D4D00-2D62-4804-8F48-1D432478559A"></a>
<h2 id="DMKSB-GUID-4C1D4D00-2D62-4804-8F48-1D432478559A" class="sect2">Lifecycle Management</h2>
<div>
<div class="section">
<p>This section discusses the lifecycle management of Application Data Models, Data Masking, and Data Subsetting definitions.</p>
<p>In the event of an Enterprise Manager user being dropped or modified, the user can reassign the Application Data Model, data masking and data subsetting definitions to another user in the system. However, if the user doesn&rsquo;t reassign the Application Data Model, data masking and data subsetting definitions to another user, these definitions are automatically reassigned to the SYSMAN user.</p>
<p>When you try to reassign the Application Data Model, data masking and data subsetting definitions to another user in the system, and if the reassigned user already has a definition with the same name, the original definitions are renamed.</p>
<p>For example: User A has an Application Data Model, ADM1, and user B also has an Application Data Model, named ADM1. If user B is being dropped, and you choose to assign its definitions to user A, the original definition ADM1 is renamed to ADM1_B, The original definitions with the same name are renamed by suffixing &#34;_&#34; and adding the user name that is being dropped. After the reassignment, user A will now have both definitions ADM1 and ADM1_B.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment576">
<tr>
<td class="cellalignment583">
<table class="cellalignment581">
<tr>
<td class="cellalignment580"><a href="data_masking.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment580"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment585">
<table class="cellalignment579">
<tr>
<td class="cellalignment580"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment580"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment580"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment580"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment580"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment580"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>