<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5616"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Data%20Masking"></a><title>Data Masking</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="data masking, other Oracle security products, security, list of Oracle products, creating formats, creating, masking formats, creating masking definition, data masking definition, Data Masking Definitions page, masking dependent columns, cloning the production database"/>
<meta name="dcterms.created" content="2017-03-17T05:29:01Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Masking and Subsetting Guide"/>
<meta name="dcterms.identifier" content="E63408-05"/>
<meta name="dcterms.isVersionOf" content="DMKSB"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="data_modeling.htm" title="Previous" type="text/html"/>
<link rel="Next" href="data_subsetting.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E63408-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-E3C164DC-0004-4857-A038-54EC7B1A5118"></a> <span id="PAGE" style="display:none;">10/12</span> <!-- End Header -->
<h1 id="DMKSB-GUID-E3C164DC-0004-4857-A038-54EC7B1A5118" class="sect1"><span class="enumeration_chapter">4</span> Data Masking</h1>
<div>
<p>This chapter provides conceptual information about the components that comprise Oracle Data Masking, and procedural information about performing the task sequence, such as creating masking formats and masking definitions. Data masking presupposes that you have created an Application Data Model (ADM) with defined sensitive columns.</p>
<p>The procedures in this chapter are applicable to Oracle Enterprise Manager 12.1 and higher Cloud Control only. You must have the Oracle Data Masking and Subsetting Pack license to use data masking features.</p>
<div class="infobox-note" id="GUID-E3C164DC-0004-4857-A038-54EC7B1A5118__GUID-6280C28E-088E-415A-B249-9F2E1FF0004D">
<p class="notep1">Note:</p>
<p>Performing masking on an 11.2.0.3 database that uses Database Plug-in 12.1.0.3 and higher requires that the database patch #16922826 is applied for masking to run successfully. The Mask-In Export feature (also known as At Source masking) works with Oracle Database 11.1 and higher.</p>
</div>
<p>Enterprises run the risk of breaching sensitive information when copying production data into non-production environments for the purposes of application development, testing, or data analysis. Oracle Data Masking helps reduce this risk by irreversibly replacing the original sensitive data with fictitious data so that production data can be shared safely with non-production users. Accessible through Oracle Enterprise Manager, Oracle Data Masking provides end-to-end secure automation for provisioning test databases from production in compliance with regulations.</p>
</div>
<div class="props_rev_3"><a id="GUID-A36C8E31-E49B-4AA5-983D-8BC4D8E5E99F"></a>
<h2 id="DMKSB-GUID-A36C8E31-E49B-4AA5-983D-8BC4D8E5E99F" class="sect2">Overview of Oracle Data Masking</h2>
<div>
<p>Enterprises run the risk of breaching sensitive information when copying production data into non-production environments for the purposes of application development, testing, or data analysis. Oracle Data Masking helps reduce this risk by irreversibly replacing the original sensitive data with fictitious data so that production data can be shared safely with non-production users. Accessible through Oracle Enterprise Manager, Oracle Data Masking provides end-to-end secure automation for provisioning test databases from production in compliance with regulations.</p>
</div>
<div class="props_rev_3"><a id="GUID-2B0418D5-0D85-4F9B-9A7F-53665681BE25"></a>
<h3 id="DMKSB-GUID-2B0418D5-0D85-4F9B-9A7F-53665681BE25" class="sect3">Data Masking Concepts</h3>
<div>
<p><a id="d5221e115" class="indexterm-anchor"></a><a id="d5221e119" class="indexterm-anchor"></a><a id="d5221e123" class="indexterm-anchor"></a><a id="d5221e125" class="indexterm-anchor"></a>Data masking (also known as data scrambling and data anonymization) is the process of replacing sensitive information copied from production databases to test non-production databases with realistic, but scrubbed, data based on masking rules. Data masking is ideal for virtually any situation when confidential or regulated data needs to be shared with non-production users. These users may include internal users such as application developers, or external business partners such as offshore testing companies, suppliers and customers. These non-production users need to access some of the original data, but do not need to see every column of every table, especially when the information is protected by government regulations.</p>
<p>Data masking enables organizations to generate realistic and fully functional data with similar characteristics as the original data to replace sensitive or confidential information. This contrasts with encryption or Virtual Private Database, which simply hides data, and the original data can be retrieved with the appropriate access or key. With data masking, the original sensitive data cannot be retrieved or accessed.</p>
<p>Names, addresses, phone numbers, and credit card details are examples of data that require protection of the information content from inappropriate visibility. Live production database environments contain valuable and confidential data&mdash;access to this information is tightly controlled. However, each production system usually has replicated development copies, and the controls on such test environments are less stringent. This greatly increases the risks that the data might be used inappropriately. Data masking can modify sensitive database records so that they remain usable, but do not contain confidential or personally identifiable information. Yet, the masked test data resembles the original in appearance to ensure the integrity of the application.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-E94AE163-E65C-4C30-916D-FBB42C9D4F9A"></a>
<h3 id="DMKSB-GUID-E94AE163-E65C-4C30-916D-FBB42C9D4F9A" class="sect3">Roles of Data Masking Users</h3>
<div>
<p>The following types of users participate in the data masking process for a typical enterprise:</p>
<ul style="list-style-type: disc;">
<li>
<p><span>Application database administrator or application developer</span></p>
<p>This user is knowledgeable about the application and database objects. This user may add additional custom database objects or extensions to packaged applications, such as the Oracle E-Business suite.</p>
</li>
<li>
<p><span>Information security administrator</span></p>
<p>This user defines information security policies, enforces security best practices, and also recommends the data to be hidden and protected.</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-237E72D8-96C2-4191-B5BA-3373E6D1FEB0"></a>
<h3 id="DMKSB-GUID-237E72D8-96C2-4191-B5BA-3373E6D1FEB0" class="sect3">Related Oracle Security Offerings</h3>
<div>
<p>Besides data masking, Oracle offers the following security products:</p>
<ul style="list-style-type: disc;">
<li>
<p><span>Virtual Private Database</span> or <span>Oracle Label Security</span> &mdash; Hides rows and data depending on user access grants.</p>
</li>
<li>
<p><span>Transparent Data Encryption</span> &mdash; Hides information stored on disk using encryption. Clients see unencrypted information.</p>
</li>
<li>
<p><code class="codeph">DBMS_CRYPTO</code> &mdash; Provides server packages that enable you to encrypt user data.</p>
</li>
<li>
<p><span>Database Vault</span> &mdash; Provides greater access controls on data.</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-BCBE0613-0831-4F74-8026-AB77B8273A04"></a>
<h3 id="DMKSB-GUID-BCBE0613-0831-4F74-8026-AB77B8273A04" class="sect3">Agent Compatibility for Data Masking</h3>
<div>
<p>Data masking supports Oracle Database 9<span class="italic">i</span> and newer releases. If you have a version prior to 11.1, you can use it by implementing the following workaround.</p>
<p>Replace the following file...</p>
<pre dir="ltr">AGENT_HOME/sysman/admin/scripts/db/reorg/reorganize.pl
</pre>
<p>... with this file:</p>
<pre dir="ltr">OMS_HOME/sysman/admin/scripts/db/reorg/reorganize.pl
</pre></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-40056DA2-7316-4729-892A-C9C72F9F7A89"></a>
<h2 id="DMKSB-GUID-40056DA2-7316-4729-892A-C9C72F9F7A89" class="sect2">Format Libraries and Masking Definitions</h2>
<div>
<p>To mask data, the Data Masking Pack provides two main features:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d5221e343" class="indexterm-anchor"></a><a id="d5221e345" class="indexterm-anchor"></a><a id="d5221e349" class="indexterm-anchor"></a><span>Masking format library</span></p>
<p>The format library contains a collection of ready-to-use masking formats. The library consists of format routines that you can use for masking. A masking format can either be one that you create, or one from the list of Oracle-supplied default masking formats.</p>
<p>As a matter of best practice, organizations should create masking formats for all commonly regulated information so that the formats can be applied to the sensitive data regardless of which database the sensitive data resides in. This ensures that all sensitive data is consistently masked across the entire organization.</p>
</li>
<li>
<p><a id="d5221e361" class="indexterm-anchor"></a><a id="d5221e363" class="indexterm-anchor"></a><a id="d5221e367" class="indexterm-anchor"></a><span>Masking definitions</span></p>
<p>A masking definition defines a data masking operation to be implemented on one or more tables in a database. Masking definitions associate table columns with formats to use for masking the data. They also maintain the relationship between columns that are not formally declared in the database using related columns.</p>
<p>You can create a new masking definition or use an existing definition for a masking operation. To create a <a id="d5221e377" class="indexterm-anchor"></a><a id="d5221e381" class="indexterm-anchor"></a>masking definition, you specify the column of the table for which the data should be masked and the format of masked data. If the columns being masked are involved in unique, <a id="d5221e386" class="indexterm-anchor"></a><a id="d5221e388" class="indexterm-anchor"></a>primary key, or foreign key constraints, data masking generates the values so that the constraints are not violated. Masking ensures uniqueness per character using decimal arithmetic. For example, a 5-character string generates a maximum of only 99999 unique values. Similarly, a 1-character string generates a maximum of only 9 unique values.</p>
<p>You would typically export masking definitions to files and import them on other systems. This is important when the test and production sites reside on different Oracle Management Systems or on entirely different sites.</p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-40056DA2-7316-4729-892A-C9C72F9F7A89__GUID-86EFD601-5DC2-463E-A572-774599094857">
<p class="notep1">See Also:</p>
<p>The online help topic &#34;Creating a Data Masking Definition&#34; as well as the help for each Data Masking page</p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-72241525-5253-4183-A55F-82EDFCF24FDF"></a>
<h2 id="DMKSB-GUID-72241525-5253-4183-A55F-82EDFCF24FDF" class="sect2">Recommended Data Masking Workflow</h2>
<div>
<p>The following figure shows that the production database is cloned to a <a id="d5221e436" class="indexterm-anchor"></a><a id="d5221e438" class="indexterm-anchor"></a>staging region and then masked there. During the masking process, the staging and test areas are tightly controlled like a production site.</p>
<div class="figure" id="GUID-72241525-5253-4183-A55F-82EDFCF24FDF__GUID-73181432-C013-47EC-96B0-AAF85A359672">
<p class="titleinfigure">Figure 4-1 Data Masking Workflow</p>
<img width="742" height="703" src="img/GUID-68FFF9E9-E9D6-4691-8CE0-B865748192DD-default.gif" alt="Description of Figure 4-1 follows" title="Description of Figure 4-1 follows"/><br/>
<a href="img_text/GUID-68FFF9E9-E9D6-4691-8CE0-B865748192DD-default.htm">Description of &#34;Figure 4-1 Data Masking Workflow&#34;</a></div>
<!-- class="figure" -->
<p>Data masking is an iterative and evolving process handled by the <a id="d5221e450" class="indexterm-anchor"></a><a id="d5221e452" class="indexterm-anchor"></a>security administrator and implemented by the database administrator. When you first configure data masking, try out the masking definition on a test system, then add a greater number of columns to the masking definition and test it to make sure it functions correctly and does not break any application constraints. During this process, you should exercise care when removing all imbedded references to the real data while maintaining referential integrity.</p>
<p>After data masking is configured to your satisfaction, you can use the existing definition to repeatedly mask after cloning. The masking definition, however, would need to evolve as new schema changes require new data and columns to be masked.</p>
<p>After the masking process is complete, you can distribute the database for wide availability. If you need to ship the database to another third-party site, you are required to use the Data Pump Export utility, and then ship the dump file to the remote site. However, if you are retaining the masked data in-house, see <a id="d5221e461" class="indexterm-anchor"></a><span class="q">&#34;<a href="data_masking.htm#GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D">Data Masking Task Sequence</a>&#34;</span>.</p>
<p>You can also perform inline, or at the source, data masking while creating a subset definition. See <span class="q">&#34;<a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a>&#34;</span> for more information.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D"></a>
<h2 id="DMKSB-GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D" class="sect2">Data Masking Task Sequence</h2>
<div>
<div class="section">
<p><a id="d5221e512" class="indexterm-anchor"></a>The task sequence in this section demonstrates the data masking workflow and refers you to additional information about some of the tasks in the sequence. Before reviewing this sequence, note that there are two options for completing this process:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><span>Exporting/importing to another database</span></p>
<p>You can <a id="d5221e525" class="indexterm-anchor"></a><a id="d5221e529" class="indexterm-anchor"></a>clone the production database to a staging area, mask it, then export/ import it to another database before delivering it to in-house testers or external customers. This is the most secure approach.</p>
</li>
<li>
<p><span>Making the staging area the new test region</span></p>
<p>You can clone the production database to a mask staging area, then make the staging area the new test region. In this case, you should not grant testers <code class="codeph">SYSDBA</code> access or access to the database files. Doing so would compromise security. The masked database contains the original data in unused blocks and in the free list. You can only purge this information by exporting/importing the data to another database.</p>
</li>
</ul>
<p>The following basic steps guide you through the data masking process, with references to other sections for supporting information.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Review the application database and identify the sources of sensitive information.</span></li>
<li class="stepexpand"><span>Define mask formats for the sensitive data. The mask formats may be simple or complex depending on the information security needs of the organization.</span>
<div>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C">Creating New Masking Formats</a>&#34;</span> and <span class="q">&#34;<a href="data_masking.htm#GUID-B836A063-AF64-49D5-87B9-E9AE516697E9">Using Oracle-supplied Predefined Masking Formats</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Create a masking definition to associate table columns and edition view objects to these mask formats. Data masking determines the database foreign key relationships and adds foreign key columns to the mask.</span>
<div>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10">Masking with an Application Data Model and Workloads</a>&#34;</span> .</p>
</div>
</li>
<li class="stepexpand"><span>Save the masking definition and generate the masking script.</span></li>
<li class="stepexpand"><span>Verify if the masked data meets the information security requirements. Otherwise, refine the masking definition, restore the altered tables, and reapply the masking definition until the optimal set of masking definitions has been identified.</span></li>
<li class="stepexpand"><span>Clone the production database to a staging area, selecting the masking definition to be used after cloning. Note that you can clone using Oracle Enterprise Manager, which enables you to add masking to the Oracle Enterprise Manager clone workflow. However, if you clone outside of Oracle Enterprise Manager, you must initiate masking from Oracle Enterprise Manager after cloning is complete. The cloned database should be controlled with the same privileges as the production system, because it still contains sensitive production data.</span>
<div>
<p>After cloning, make sure you change the passwords as well as update or disable any database links, streams, or references to external data sources. Back up the cloned database, or minimally the tables that contain masked data. This can help you restore the original data if the masking definition needs to be refined further.</p>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-EA648FED-030D-480E-A206-ACABEFA1F840">Cloning the Production Database</a>&#34;</span> .</p>
</div>
</li>
<li class="stepexpand"><span>After masking, test all of your applications, reports, and business processes to ensure they are functional. If everything is working, you can export the masking definition to keep it as a back-up.</span></li>
<li class="stepexpand"><span>After masking the staging site, make sure to drop any tables named <code class="codeph">MGMT_DM_TT</code> before cloning to a test region. These temporary tables contain a mapping between the original sensitive column value and the mask values, and are therefore sensitive in nature.</span>
<div>
<p>During masking, Oracle Enterprise Manager automatically drops these temporary tables for you with the default &#34;Drop temporary tables created during masking&#34; option. However, you can preserve these temporary tables by deselecting this option. In this case, you are responsible for deleting the temporary tables before cloning to the test region.</p>
</div>
</li>
<li class="stepexpand"><span>After masking is complete, ensure that all tables loaded for use by the substitute column format or table column format are going to be dropped. These tables contain the mask values that table column or substitute formats will use. It is recommended that you purge this information for security reasons.</span>
<div>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC">Deterministic Masking Using the Substitute Format</a>&#34;</span> .</p>
</div>
</li>
<li class="stepexpand"><span>Clone the database to a test region, or use it as the new test region. When cloning the database to an external or unsecured site, you should use Export or Import. Only supply the data in the database, rather than the database files themselves.</span></li>
<li class="stepexpand"><span>As part of cloning production for testing, provide the masking definition to the application database administrator to use in masking the database.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-8F2A793E-ACF7-4D1F-A759-C100EE8E10CF"></a>
<h2 id="DMKSB-GUID-8F2A793E-ACF7-4D1F-A759-C100EE8E10CF" class="sect2">Defining Masking Formats</h2>
<div>
<p><a id="d5221e656" class="indexterm-anchor"></a>A masking definition requires one or more masking formats for any columns included in the masking definition. When <a id="d5221e661" class="indexterm-anchor"></a>adding columns to a masking definition, you can either create masking formats manually or import them from the format library. It is often more efficient to work with masking formats from the format library.</p>
</div>
<div class="props_rev_3"><a id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C"></a>
<h3 id="DMKSB-GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C" class="sect3">Creating New Masking Formats</h3>
<div>
<div class="section">
<p>This section describes how to create new masking formats using Enterprise Manager.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create a masking format in the format library:</p>
<ol>
<li>
<p>From the Enterprise menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Formats</span>. Alternatively, if you are in the Database home page, select <span class="bold">Data Masking Format Library</span> from the Schema menu.</p>
<p>The Format Library appears with predefined formats that Oracle Enterprise Manager provides.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Format page appears, where you can define a masking format.</p>
<div class="infoboxnotealso" id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C__GUID-DCACCA36-6110-40B5-A183-07A582133E4B">
<p class="notep1">See Also:</p>
<p>The online help for information on page user controls</p>
</div>
</li>
<li>
<p>Provide a required name for the new format, select a format entry type from the <span class="bold">Add</span> list, then click <span class="bold">Go</span>.</p>
<p>A page appears that enables you to provide input for the format entry you have selected. For instance, if you select Array List, the subsequent page enables you to enter a list of values, such as New York, New Jersey, and New Hampshire.</p>
</li>
<li>
<p>Continue adding additional format entries as needed.</p>
</li>
<li>
<p>When done, provide an optional user-defined or post-processing function (see <span class="q">&#34;<a href="data_masking.htm#GUID-24FB5416-D54E-47AF-B091-4973B57CCE1A">Providing User-defined and Post-processing Functions</a>&#34;</span>), then click <span class="bold">OK</span> to save the masking format.</p>
<p>The Format Library page reappears with your newly created format displayed in the Format Library table. You can use this format later to mask a column of the same sensitive type.</p>
<div class="infoboxnotealso" id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C__GUID-72A776F7-961F-48AF-B6FE-095CCCC4423C">
<p class="notep1">See Also:</p>
<p>The online help for information on the Format Library and Create Format pages</p>
</div>
</li>
</ol>
</div>
<!-- class="section" --></div>
<div class="props_rev_3"><a id="GUID-24FB5416-D54E-47AF-B091-4973B57CCE1A"></a>
<h4 id="DMKSB-GUID-24FB5416-D54E-47AF-B091-4973B57CCE1A" class="sect4">Providing User-defined and Post-processing Functions</h4>
<div>
<div class="section">
<p>If desired, you can provide user-defined and post-processing functions on the Create Format page. A user-defined choice is available in the Add list, and a post-processing function field is available at the bottom of the page.</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><span>User-defined functions</span></p>
<p>To provide a user-defined function, select <span class="bold">User Defined Function</span> from the Add list, then click <span class="bold">Go</span> to access the input fields.</p>
<p>A user-defined function passes in the original value as input, and returns a mask value. The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs. Combinable, a user-defined function is a PL/SQL function that can be invoked in a <code class="codeph">SELECT</code> statement. Its signature is returned as:</p>
<pre dir="ltr">Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">rowid</code> is the min (rowid) of the rows that contain the value <code class="codeph">original_value</code> 3rd argument.</p>
</li>
<li>
<p><code class="codeph">column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code class="codeph">original_value</code> is the value being masked.</p>
</li>
</ul>
<p>That is, it accepts the original value as an input string, and returns the mask value.</p>
<p>Both input and output values are varchar2. For instance, a user-defined function to mask a number could receive 100 as input, the string representation of the number 100, and return 99, the string representation of the number 99. Values are cast appropriately when inserting to the table. If the value is not castable, masking fails.</p>
</li>
<li>
<p><a id="d5221e858" class="indexterm-anchor"></a><a id="d5221e862" class="indexterm-anchor"></a><span>Post-processing functions</span></p>
<p>To provide a post-processing function, enter it in the <span class="bold">Post Processing Function</span> field.</p>
<p>A post-processing function has the same signature as a user-defined function, but passes in the mask value the masking engine generates, and returns the mask value that should be used for masking, as shown in the following example:</p>
<pre dir="ltr">Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">rowid</code> is the min (rowid) of the rows that contain the value <code class="codeph">mask_value</code>.</p>
</li>
<li>
<p><code class="codeph">column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code class="codeph">mask_value</code> is the value being masked.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-117797C7-77BE-49C0-B536-49D20A85A9B5"></a>
<h4 id="DMKSB-GUID-117797C7-77BE-49C0-B536-49D20A85A9B5" class="sect4">Using Masking Format Templates</h4>
<div>
<p><a id="d5221e930" class="indexterm-anchor"></a>After you have created at least one format, you can use the format definition as a template in the Create Format page, where you can implement most of the format using a different name and changing the entries as needed, rather than needing to create a new format from scratch.</p>
<p>To create a new format similar to an existing format, select a format on the Format Library page and click <span class="bold">Create Like</span>. The masking format you select can either be one you have previously defined yourself, or one from the list of out-of-box masking formats. You can use these generic masking format definitions for different applications.</p>
<p>For instructional details about the various Oracle-supplied predefined masking format definitions and how to modify them to suit your needs, see <span class="q">&#34;<a href="data_masking.htm#GUID-B836A063-AF64-49D5-87B9-E9AE516697E9">Using Oracle-supplied Predefined Masking Formats</a>&#34;</span>.</p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B836A063-AF64-49D5-87B9-E9AE516697E9"></a>
<h3 id="DMKSB-GUID-B836A063-AF64-49D5-87B9-E9AE516697E9" class="sect3">Using Oracle-supplied Predefined Masking Formats</h3>
<div>
<p><a id="d5221e983" class="indexterm-anchor"></a><a id="d5221e987" class="indexterm-anchor"></a>Enterprise Manager provides several out-of-box predefined formats. All predefined formats and built-in formats are random. The following sections discuss the various Oracle-supplied format definitions and how to modify them to suit your needs:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="data_masking.htm#GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C">Patterns of Format Definitions</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-FDC44167-B874-4DFF-A245-1485F352F040">Category Definitions</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-B836A063-AF64-49D5-87B9-E9AE516697E9__GUID-C728C113-5924-4924-8DAF-533120D7A68A">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="data_masking.htm#GUID-49ABFF59-1776-4798-A866-CA73D5103045">Installing the DM_FMTLIB Package</a>&#34;</span> for information on installing the DM_FMTLIB package so that you can use the predefined masking formats</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C"></a>
<h4 id="DMKSB-GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C" class="sect4">Patterns of Format Definitions</h4>
<div>
<p><a id="d5221e1046" class="indexterm-anchor"></a>All of the format definitions adhere to these typical patterns:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generate a random number or random digits.</p>
</li>
<li>
<p>Perform post-processing on the above-generated value to ensure that the final result is a valid, realistic value.</p>
</li>
</ul>
<p>For example, a valid credit card number must pass Luhn&#39;s check. That is, the last digit of any credit card number is a checksum digit, which is always computed. Also, the first few digits indicate the card type (MasterCard, Amex, Visa, and so forth). Consequently, the format definition of a credit card would be as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generate random and unique 10-digit numbers.</p>
</li>
<li>
<p>Using a post-processing function, transform the values above to a proper credit card number by adding well known card type prefixes and computing the last digit.</p>
</li>
</ul>
<p>This format is capable of generating 10 billion unique credit card numbers.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-FDC44167-B874-4DFF-A245-1485F352F040"></a>
<h4 id="DMKSB-GUID-FDC44167-B874-4DFF-A245-1485F352F040" class="sect4">Category Definitions</h4>
<div>
<p>The following sections discuss different categories of these definitions:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="data_masking.htm#GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D">Credit Card Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78">United States Social Security Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C">ISBN Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-AB8A5AA9-7498-4882-8207-19B3109621CB">UPC Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD">Canadian Social Insurance Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-A57ACA2A-68D6-4386-9270-67D06C867D17">North American Phone Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F">UK National Insurance Numbers</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E">Auto Mask</a></p>
</li>
</ul>
<p>By default, these mask formats are also available in different format styles, such as a hyphen ( - ) format. If needed, you can modify the format style.</p>
</div>
<div class="props_rev_3"><a id="GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D"></a>
<h5 id="DMKSB-GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D" class="sect5">Credit Card Numbers</h5>
<div>
<p><a id="d5221e1186" class="indexterm-anchor"></a>Out of the box, the format library provides many different formats for credit cards. The credit card numbers generated by these formats pass the standard credit card validation tests by the applications, thereby making them appear like valid credit card numbers.</p>
<p>Some of the credit card formats you can use include:</p>
<ul style="list-style-type: disc;">
<li>
<p>MasterCard numbers</p>
</li>
<li>
<p>Visa card numbers</p>
</li>
<li>
<p>American Express card numbers</p>
</li>
<li>
<p>Discover Card numbers</p>
</li>
<li>
<p>Any credit card number (credit card numbers belong to all types of cards)</p>
</li>
</ul>
<p>You may want to use different styles for storing credit card numbers, such as:</p>
<ul style="list-style-type: disc;">
<li>
<p>Pure numbers</p>
</li>
<li>
<p>&#39;Space&#39; for every four digits</p>
</li>
<li>
<p>&#39;Hyphen&#39; ( - ) for every four digits, and so forth</p>
</li>
</ul>
<p>To implement the masked values in a certain format style, you can set the <code class="codeph">DM_CC_FORMAT</code> variable of the <code class="codeph">DM_FMTLIB</code> package. To install the package, see <span class="q">&#34;<a href="data_masking.htm#GUID-49ABFF59-1776-4798-A866-CA73D5103045">Installing the DM_FMTLIB Package</a>&#34;</span> .</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78"></a>
<h5 id="DMKSB-GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78" class="sect5">United States Social Security Numbers</h5>
<div>
<p><a id="d5221e1270" class="indexterm-anchor"></a>Out of the box, you can generate valid U.S. Social Security (SSN) numbers. These SSNs pass the normal application tests of a valid SSN.</p>
<p>You can affect the format style by setting the <code class="codeph">DM_SSN_FORMAT</code> variable of the <code class="codeph">DM_FMTLIB</code> package. For example, if you set this variable to &lsquo;-&#39;, the typical social security number would appear as &lsquo;123-45-6789&#39;.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C"></a>
<h5 id="DMKSB-GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C" class="sect5">ISBN Numbers</h5>
<div>
<p><a id="d5221e1320" class="indexterm-anchor"></a>Using the format library, you can generate either 10-digit or 13-digit ISBN numbers. These numbers adhere to standard ISBN number validation tests. All of these ISBN numbers are random in nature. Similar to other format definitions, you can affect the &#34;style&#34; of the ISBN format by setting values to <code class="codeph">DM_ISBN_FORMAT</code>.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-AB8A5AA9-7498-4882-8207-19B3109621CB"></a>
<h5 id="DMKSB-GUID-AB8A5AA9-7498-4882-8207-19B3109621CB" class="sect5">UPC Numbers</h5>
<div>
<p><a id="d5221e1364" class="indexterm-anchor"></a>Using the format library, you can generate valid UPC numbers. They adhere to standard tests for valid UPC numbers. You can affect the formatting style by setting the <code class="codeph">DM_UPC_FORMAT</code> value of the <code class="codeph">DM_FMTLIB</code> package.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD"></a>
<h5 id="DMKSB-GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD" class="sect5">Canadian Social Insurance Numbers</h5>
<div>
<p><a id="d5221e1411" class="indexterm-anchor"></a>Using the format library, you can generate valid Canadian Social Insurance Numbers (SINs). These numbers adhere to standard tests of Canadian SINs. You can affect the formatting style by setting the <code class="codeph">DM_CN_SIN_FORMAT</code> value of the <code class="codeph">DM_FMTLIB</code> package.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A57ACA2A-68D6-4386-9270-67D06C867D17"></a>
<h5 id="DMKSB-GUID-A57ACA2A-68D6-4386-9270-67D06C867D17" class="sect5">North American Phone Numbers</h5>
<div>
<p><a id="d5221e1459" class="indexterm-anchor"></a>Out of the box, the format library provides various possible U.S. and Canadian phone numbers. These are valid, realistic looking numbers that can pass standard phone number validation tests employed by applications. You can generate the following types of numbers:</p>
<ul style="list-style-type: disc;">
<li>
<p>Any North American phone numbers</p>
</li>
<li>
<p>Any Canadian phone number</p>
</li>
<li>
<p>Any U.S.A. phone number</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F"></a>
<h5 id="DMKSB-GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F" class="sect5">UK National Insurance Numbers</h5>
<div>
<p><a id="d5221e1510" class="indexterm-anchor"></a>Using the format library, you can generate valid unique random UK National Insurance Numbers (NINs). These numbers adhere to standard tests of UK NINs. A typical national insurance number would appear as &#39;GR 12 56 34 RS&#39;.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E"></a>
<h5 id="DMKSB-GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E" class="sect5">Auto Mask</h5>
<div>
<p><a id="d5221e1551" class="indexterm-anchor"></a>This format scrambles characters and numbers into masked characters and numbers and while retaining the format and length of the data, including special characters; for example, &#39;ABCD_343-ddg&#39; masked as &#39;FHDT_657-tte&#39;.</p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-49ABFF59-1776-4798-A866-CA73D5103045"></a>
<h4 id="DMKSB-GUID-49ABFF59-1776-4798-A866-CA73D5103045" class="sect4">Installing the DM_FMTLIB Package</h4>
<div>
<div class="section">
<p><a id="d5221e1594" class="indexterm-anchor"></a>The predefined masking formats use functions defined in the <code class="codeph">DM_FMTLIB</code> package. This package is automatically installed in the <code class="codeph">DBSNMP</code> schema of your Enterprise Manager repository database. To use the predefined masking formats on a target database (other than the repository database), you must manually install the <code class="codeph">DM_FMTLIB</code> package on that database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To install the DM_FMTLIB package:</p>
<ol>
<li>
<p>Locate the following scripts in your Enterprise Manager installation:</p>
<pre dir="ltr">$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgdef.sql
$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgbody.sql
</pre>
<p>Where PLUGIN_HOME can be any of the locations returned by the following SQL SELECT statement, executed as SYSMAN:</p>
<pre dir="ltr">select PLUGIN_HOME from gc_current_deployed_plugin where plugin_id=&#39;oracle.sysman.db&#39; and destination_type=&#39;OMS&#39;; 
</pre></li>
<li>
<p>Copy these scripts to a directory in your target database installation and execute them using SQL*Plus, connected as a user that can create packages in the DBSNMP schema.</p>
<p>You can now use the predefined masking formats in your masking definitions.</p>
</li>
<li>
<p>Select and import any predefined masking format into a masking definition by clicking the <span class="bold">Import Format</span> button on the Define Column Mask page.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575"></a>
<h3 id="DMKSB-GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575" class="sect3">Providing a Masking Format to Define a Column</h3>
<div>
<p>When you create a masking definition (<span class="q">&#34;<a href="data_masking.htm#GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10">Masking with an Application Data Model and Workloads</a>&#34;</span>), you will be either importing a format or selecting one from the available types in the Define Column Mask page. <a id="d5221e1674" class="indexterm-anchor"></a><a id="d5221e1678" class="indexterm-anchor"></a>Format entry options are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Array List</span></p>
<p>The data type of each value in the list must be compatible with that of the masked column. Uniqueness must be guaranteed if needed. For example, for a unique key column that already has 10 distinct values, the array list should also contain at least 10 distinct values.</p>
</li>
<li>
<p><span class="bold">Delete</span></p>
<p>Deletes the specified rows as identified by the condition clauses. If a column includes a delete format for one of its conditions, a foreign key constraint or a dependent column cannot refer to the table.</p>
</li>
<li>
<p><span class="bold">Encrypt</span></p>
<p>Encrypts column data by specifying a regular expression. The column values in all the rows must match the regular expression. This format can be used to mask data consistently across databases. That is, for a given value it always generates the same masked value.</p>
<p>For example, the regular expression [(][1-9][0-9]{2}[)][_][0-9]{3}[-][0-9]{4} generates U.S. phone numbers such as (123)_456-7890.</p>
<p>This format supports a subset of the regular expression language. It supports encrypting strings of fixed widths. However, it does not support * or + syntax of regular expressions.</p>
<p>If a value does not match the format specified, the encrypted value may no longer produce one-to-one mappings. All non-confirming values are mapped to a single encrypted value, thereby producing a many-to-one mapping.</p>
</li>
<li>
<p><span class="bold">Fixed Number</span></p>
<p>The type of column applicable to this entry is a <code class="codeph">NUMBER</code> column or a <code class="codeph">STRING</code> column. For example, if you mask a column that has a social security number, one of the entries can be <span>Fixed Number 900</span>. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Fixed String</span></p>
<p>The type of column applicable to this entry is a <code class="codeph">STRING</code> column. For example, if you mask a column that has a License Plate Number, one of the entries can be Fixed String CA. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Null Value</span></p>
<p>Masks the column using a value of <code class="codeph">NULL</code>. The column must be nullable.</p>
</li>
<li>
<p><span class="bold">Post-Processing Function</span></p>
<p>This is a special function that you can apply to the mask value that the masking engine generates. This function takes the mask value as input and returns the actual mask value to be used for masking.</p>
<p>The post-processing function is called after the mask value is generated. You can use it, for instance, to add commas or dollar signs to a value. For example, if a mask value is a number such as 12000, the post processing function can modify this to $12,000. Another use is for adding checksums or special encodings for the mask value that is produced.</p>
<p>In the following statement:</p>
<pre dir="ltr">Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">rowid</code> is the min (rowid) of the rows that contains the value <code class="codeph">mask_value</code> 3rd argument.</p>
</li>
<li>
<p><code class="codeph">column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code class="codeph">mask_value</code> is the value being masked.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Preserve Original Data</span></p>
<p>Retains the original values for rows that match the specified condition clause. This is used in cases where some rows that match a condition do not need to be masked.</p>
</li>
<li>
<p><span class="bold">Random Dates</span></p>
<p>The uniqueness of the Date column is not maintained after masking. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Decimal Numbers</span></p>
<p>If used as part of a mixed random string, these have limited usage for generating unique values. This masking format generates unique values within the specified range. For example, a starting value of 5.5 and ending value of 9.99 generates a decimal number ranging from 5.5 to 9.99, both inclusive. This masking format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Digits</span></p>
<p>This format generates unique values within the specified range. For example, for a random digit with a length of [5,5], an integer between [0, 99999] is randomly generated, left padded with &#39;0&#39;s to satisfy the length and uniqueness requirement. This is a complementary type of random number, which will not be padded. When using random digits, the random digit pads to the appropriate length in a string. It does not pad when used for a number column. This format is combinable.</p>
<p>Data masking ensures that the generated values are unique, but if you do not specify enough digits, you could run out of unique values in that range.</p>
</li>
<li>
<p><span class="bold">Random Numbers</span></p>
<p>If used as part of a mixed random string, these have limited usage for generating unique values. This format generates unique values within the specified range. For example, a starting value of 100 and ending value of 200 generates an integer number ranging from 100 to 200, both inclusive. Note that Oracle Enterprise Manager release 10.2.0.4.0 does not support float numbers. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Strings</span></p>
<p>This format generates unique values within the specified range. For example, a starting length of 2 and ending length of 6 generates a random string of 2 - 6 characters in length. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Regular Expression</span></p>
<p>This format enables you to use regular expressions to search for sensitive data in LOBs (BLOB, CLOB, NCLOB) and replace the data with a fixed string, a fixed number, null, or SQL Expression. Use rules to search for multiple strings within a LOB.</p>
<p>Examples:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use the regular expression <code class="codeph">[0-9]{3}[.][0-9]{3}[.][0-9]{4}</code> to match strings of the format <span class="italic">nnn.nnn.nnnn</span> and replace with a masked value, for example, ***.***.****</p>
</li>
<li>
<p>Use the regular expression <code class="codeph">&lt;SALARY&gt;[0-9]{2,6}&lt;/SALARY&gt;</code> to zero out salary information by replacing with <code class="codeph">&lt;SALARY&gt;0&lt;/SALARY&gt;</code></p>
</li>
<li>
<p>Use the regular expression <code class="codeph">[A-Z]+@[A-Z]+\.[A-Z]{2,4}</code> to mask e-mail addresses by replacing with john.doe@acme.com</p>
</li>
</ul>
<p>You can also use this format with data type VARCHAR2 to mask part of a string.</p>
</li>
<li>
<p><span class="bold">Shuffle</span></p>
<p>This format randomly shuffles the original column data. It maintains data distribution except when a column is conditionally masked and its values are not unique.</p>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A">Using the Shuffle Format</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Substitute</span></p>
<p>This format uses a hash-based substitution for the original value and always yields the same mask value for any given input value. Specify the substitution masking table and column. This format has the following properties:</p>
<ul style="list-style-type: disc;">
<li>
<p>The masked data is not reversible. That is, this format is not vulnerable to external security breaches because the original value is replaced, so it is not possible to retrieve the original value from the mask value.</p>
</li>
<li>
<p>Masking multiple times with a hash substitute across different databases yields the same mask value. This characteristic is valid across multiple databases or multiple runs assuming that the same substitution values are used in the two runs. That is, the actual rows and values in the substitution table do not change. For example, suppose the two values Joe and Tom were masked to Henry and Peter. When you repeat the same mask on another database using the same substitution table, if there were Bob and Tom, they might be replaced with Louise and Peter. Notice that even though the two runs have different data, Tom is always replaced with Peter.</p>
</li>
<li>
<p>This format does not generate uniqueness.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">SQL Expression</span></p>
<p>This masking format enables you to enter a SQL Expression for masking a column. Data masking uses this expression to generate masked values to replace the original values. You cannot combine a column using this masking format type with other masking format types, such as Random Numbers or Random Strings.</p>
<p>The SQL Expression can consist of one or more values, operators, and SQL functions that evaluates to a value. It can also contain substitution columns (columns from the same table as the masked column). You should specify substitution columns within percent signs (%). Use SQL Expressions with <code class="codeph">dbms_lob</code> and other user-defined functions for LOB (BLOB, CLOB, NCLOB) masking.</p>
<p>Examples:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">dbms_random.string(&#39;u&#39;, 8) || &#39;@company.com&#39;</code></p>
<p>Generates random e-mail addresses.</p>
</li>
<li>
<p><code class="codeph">%first_name% || &#39;.&#39; || %last_name% || &#39;@company.com&#39;</code></p>
<p>Generates e-mail addresses using <code class="codeph">first_name</code> and <code class="codeph">last_name</code> column values. In this example, <code class="codeph">first_name</code> and <code class="codeph">last_name</code> are the substitution columns.</p>
</li>
<li>
<p><span class="bold">CLOB Masking</span></p>
<p><code class="codeph">dbms_lob.empty_clob()</code></p>
<p>Empties the CLOB.</p>
<p><code class="codeph">custom_mask_clob(%CLOB_COL%)</code></p>
<p>Applies the custom mask function to the clob column <code class="codeph">CLOB_COL</code>.</p>
</li>
<li>
<p><span class="bold">Conditional Mask</span></p>
<p><code class="codeph">(case when %PARTY_TYPE%=&#39;PERSON&#39; then %PERSON_FIRST_NAME%|| &#39; &#39; ||%PERSON_LAST_NAME% else (select dbms_random.string(&#39;U&#39;, 10) from dual) end)</code></p>
<p>Columns within %% are present in the same table. The expression masks <code class="codeph">PERSON_FULL_NAME</code> with the first and last name; otherwise, the mask is a random string.</p>
</li>
<li>
<p><span class="bold">Substitution Mask</span></p>
<p><code class="codeph">select MASK_ZIPCODE from data_mask.DATA_MASK_ADDR where ADDR_SEQ = ora_hash( %ZIPCODE% , 1000, 1234)</code></p>
<p>Select 1000 rows in the substitution table <code class="codeph">data_mask.DATA_MASK_ADDR</code>. Mask <code class="codeph">%ZIPCODE%</code> with the <code class="codeph">MASK_ZIPCODE</code> column in the substitution table. The row selected is dependent on <code class="codeph">ora_hash</code> and is deterministic in this case. Selection is random if <code class="codeph">dbms_random</code> procedures are used.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Substring</span></p>
<p>Substring is similar to the database <code class="codeph">substr</code> function. The start position can be either a positive or a negative integer. For example, if the original string is <code class="codeph">abcd</code>, a substring with a start position of 2 and length of 3 generates a masked string of bcd. A substring with start position of -2 and length of 3 generates a masked string of cd. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Table Column</span></p>
<p>A table column enables you to select values from the chosen column as the replacement value or part thereof. The data type and uniqueness must be compatible. Otherwise, a failure occurs when the job runs. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Truncate</span></p>
<p>Truncates all rows in a table. If one of the columns in a table is marked as truncated, the entire table is truncated, so no other mask formats can be specified for any of the other columns. If a table is being truncated, it cannot be referred to by a foreign key constraint or a dependent column.</p>
</li>
<li>
<p><span class="bold">User Defined Function</span></p>
<p>The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs.</p>
<p>In the following statement:</p>
<pre dir="ltr">Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">rowid</code> is the min (rowid) of the rows that contain the value <code class="codeph">original_value</code> 3rd argument.</p>
</li>
<li>
<p><code class="codeph">column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code class="codeph">original_value</code> is the value being masked.</p>
</li>
</ul>
</li>
</ul>
<div class="infobox-note" id="GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575__GUID-65DCC14B-6811-4AB0-9E58-05AEDF7B0A4F">
<p class="notep1">Note:</p>
<p>The Number, Date, and LOB columns do not support multiple formats.</p>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC"></a>
<h3 id="DMKSB-GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC" class="sect3">Deterministic Masking Using the Substitute Format</h3>
<div>
<p><a id="d5221e2059" class="indexterm-anchor"></a><a id="d5221e2061" class="indexterm-anchor"></a><a id="d5221e2063" class="indexterm-anchor"></a><a id="d5221e2067" class="indexterm-anchor"></a>You may occasionally need to consistently mask multiple, distinct databases. For instance, if you run HR, payroll, and benefits that have an employee ID concept on three separate databases, the concept may be consistent for all of these databases, in that an employee&#39;s ID can be selected to retrieve the employee&#39;s HR, payroll, or benefits information. Based on this premise, if you were to mask the employee&#39;s ID because it actually contains his/her social security number, you would have to mask this consistently across all three databases.</p>
<p>Deterministic masking provides a solution for this problem. You can use the Substitute format to mask employee ID column(s) in all three databases. The Substitute format uses a table of values from which to substitute the original value with a mask value. As long as this table of values does not change, the mask is deterministic or consistent across the three databases.</p>
<div class="infoboxnotealso" id="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC__GUID-E7C615FC-1D3D-4313-817D-1741C82F4C2B">
<p class="notep1">See Also:</p>
<p>The online help for Define Column Mask page for more information on the Substitute format <a id="d5221e2077" class="indexterm-anchor"></a></p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10"></a>
<h2 id="DMKSB-GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10" class="sect2">Masking with an Application Data Model and Workloads</h2>
<div>
<div class="section">
<p>Before creating a masking definition, note the following prerequisites and advisory information:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a id="d5221e2139" class="indexterm-anchor"></a><a id="d5221e2143" class="indexterm-anchor"></a>Ensure that you have the following minimum privileges for data masking:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Target Privileges (applicable to all targets):</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Connect to any viewable target</p>
</li>
<li>
<p>Execute Command Anywhere</p>
</li>
<li>
<p>View Any Target</p>
</li>
</ul>
<p><span class="bold">Resource Privileges:</span></p>
<ul style="list-style-type: disc;">
<li>
<p>Job System</p>
</li>
<li>
<p>Named Credential</p>
</li>
<li>
<p>Oracle Data Masking and Subsetting resource privilege</p>
</li>
</ul>
<div class="infobox-note" id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10__GUID-3DCF40D0-0381-4022-BD61-6CD8BEB4BD31">
<p class="notep1">Note:</p>
<p>The <code class="codeph">EM_ALL_OPERATOR</code> privilege for Enterprise Manager Cloud Control users includes all of the above privileges.</p>
</div>
</li>
<li>
<p><code class="codeph">SELECT_CATALOG_ROLE</code> for database users</p>
</li>
<li>
<p><code class="codeph">SELECT ANY DICTIONARY</code> privilege for database users</p>
</li>
<li>
<p><code class="codeph">EXECUTE</code> privileges for the DBMS_CRYPTO package</p>
</li>
</ul>
</li>
<li>
<p>Ensure the format you select does not violate check constraints and does not break any applications that use the data.</p>
</li>
<li>
<p>For triggers and PL/SQL packages, data masking recompiles the object.</p>
</li>
<li>
<p>Exercise caution when masking partitioned tables, especially if you are masking the partition key. In this circumstance, the row may move to another partition.</p>
</li>
<li>
<p>Data Masking does not support clustered tables, masking information in object tables, XML tables, and virtual columns. Relational tables are supported for masking.</p>
</li>
<li>
<p>If objects are layered on top of a table such as views, materialized views, and PL/SQL packages, they are recompiled to be valid.</p>
</li>
</ul>
<p>If you plan to mask a test system intended for evaluating performance, the following practices are recommended:</p>
<ul style="list-style-type: disc;">
<li>
<p>Try to preserve the production statistics and SQL profiles after masking by adding a pre-masking script to export the SQL profiles and statistics to a temporary table, then restoring after masking completes.</p>
</li>
<li>
<p><a id="d5221e2221" class="indexterm-anchor"></a>Run a SQL Performance Analyzer evaluation to understand the masking impact on performance. Any performance changes other than what appears in the evaluation report are usually related to application-specific changes on the masked database.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">To create a masking definition:</p>
<ol>
<li>
<p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Definitions</span>.</p>
<p>The Data Masking Definitions page appears, where you can create and schedule new masking definitions and manage existing masking definitions.</p>
</li>
<li>
<p>Click <span class="bold">Create</span> to go to the Create Masking Definition page.</p>
<p>A masking definition includes information regarding table columns and the format for each column. You can choose which columns to mask, leaving the remaining columns intact.</p>
</li>
<li>
<p>Provide a required <span class="bold">Name</span>, <span class="bold">Application Data Model</span>, and <span class="bold">Reference Database</span>.</p>
<p>When you click the search icon and select an Application Data Model (ADM) name from the list, the system automatically populates the Reference Database field.</p>
<ul style="list-style-type: disc;">
<li>
<p>Optional: Check Ensure Workload Masking Compatibility if you want to mask Capture files and SQL Tuning Sets.</p>
<p>When you enable this check box, the masking definition is evaluated to determine if the SQL Expression format or conditional masking is being used. If either is in use when you click OK, the option becomes unchecked and an error message appears asking you to remove these items before selecting this option.</p>
<div class="infobox-note" id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10__GUID-805E8DE5-AC29-4F5F-B684-1C1139429B2A">
<p class="notep1">Note:</p>
<p>Before proceeding to the next step, one or more sensitive columns must already be defined in the Application Data Model. See <span class="q">&#34;<a href="data_modeling.htm#GUID-E03C9287-4392-4950-AAB3-A08654297509">Creating and Managing Custom Sensitive Column Types</a>&#34;</span> for more information.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Add</span> to go to the Add Columns page, where you can choose which sensitive columns in the ADM you want to mask. See <span class="q">&#34;<a href="data_masking.htm#GUID-27F32BB6-BE8C-4534-BCDC-CFD5B5CC2946">Adding Columns for Masking</a>&#34;</span> for information on adding columns.</p>
<p>The results appear in the Columns table. Primary key and foreign key columns appear below the sensitive columns.</p>
</li>
<li>
<p>Use filtering criteria to refine sensitive column results. For example, perhaps you want to isolate all columns that have order in the name (column name=order%). You first may have to expose the filter section (<span class="bold">Show Filters</span>).</p>
</li>
<li>
<p>Use the disable feature to exclude certain columns from masking consideration. All columns are enabled by default. You can disable selected or all columns. You can also search for a subset of columns (column name=order%) to disable. The Status column on the right changes to reflect a column&#39;s disabled state. Note that a column&#39;s disabled state persists on export of a data masking definition.</p>
</li>
<li>
<p>Optional. Click the edit icon in the Format column to review and edit the masking format.</p>
</li>
<li>
<p>Expand <span class="bold">Show Advanced Options</span> and decide whether the selected default data masking options are satisfactory.</p>
<p>For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-C1A669FC-5AF2-4A87-846B-3DC7E31EF386">Selecting Data Masking Advanced Options</a>&#34;</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to save your definition and return to the Data Masking Definitions page.</p>
<p>At this point, super administrators can see each other&#39;s masking definitions.</p>
</li>
<li>
<p>Select the definition and click <span class="bold">Generate Script</span>. The schedule job dialog opens. You may have to log in to the database first. For information on script generation, see <span class="q">&#34;<a href="data_masking.htm#GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD">Scheduling a Script Generation Job</a>&#34;</span>.</p>
<p>Complete the schedule job dialog by providing the required information, then click <span class="bold">Submit</span>.</p>
</li>
<li>
<p>A message appears denoting that the job was submitted successfully and you return to the Data Masking Definitions page, where the status is &#34;Generating Script.&#34; Click <span class="bold">View Job Details</span> to open the job summary page.</p>
<p>When the job completes, click <span class="bold">Log Report</span> to check whether sufficient disk space is available for the operation, and to determine the impact on other destination objects, such as users, after masking. If any tables included in the masking definition have columns of data type <code class="codeph">LONG</code>, a warning message may appear. For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9">Using Data Masking with LONG Columns</a>&#34;</span>.</p>
</li>
<li>
<p>When the status on the Data Masking Definitions page is &#34;Script Generated,&#34; select the script and choose from the following actions:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Clone Database</span>&ndash;to clone and mask the database using the Clone Database wizard (this requires a <a id="d5221e2369" class="indexterm-anchor"></a>Database Lifecycle Management Pack license). For more information, see <span class="q">&#34;<a href="data_masking.htm#GUID-EA648FED-030D-480E-A206-ACABEFA1F840">Cloning the Production Database</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Save Script</span>&ndash;to save the entire PL/SQL script to your desktop.</p>
</li>
<li>
<p><span class="bold">Save Mask Bundle</span>&ndash;to download a zip file containing the SQL files generated as part of the At source masking script generation option. You can then extract and execute the script to create a masked dump of the database.</p>
</li>
<li>
<p><span class="bold">View Script</span>&ndash;to view the PL/SQL script, which you can edit and save. You can also view errors and warnings, if any, in the impact report.</p>
</li>
</ul>
<p>Click <span class="bold">Go</span> to execute the selected action.</p>
</li>
<li>
<p>If you are already working with a test database and want to directly mask the data in this database, click <span class="bold">Schedule Job</span>. For information on masking a database, see <span class="q">&#34;<a href="data_masking.htm#GUID-1B9D8A63-ADBC-4554-A53A-C34A6CE4DC64">Scheduling a Data Masking Job</a>&#34;</span>.</p>
<ul style="list-style-type: disc;">
<li>
<p>Provide the requisite information and desired options. You can specify the database at execution time to any database. The system assumes that the database you select is a clone of the source database. By default, the source database from the ADM is selected.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
<p>The Data Masking Definitions page appears. The job has been submitted to Enterprise Manager and the masking process appears. The Status column on this page indicates the current stage of the process.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p>Note that you can also perform data masking at the source as part of a data subsetting definition. See <span class="q">&#34;<a href="data_subsetting.htm#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a>&#34;</span> for more information.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Editing a Data Masking Definition</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Use the following procedure to edit or otherwise work with a masking definition:</p>
<ol>
<li>
<p>From the Data Masking Definitions page, click the radio button next to the definition you want to edit, then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>Add columns or edit format entries as you would when creating a new definition, which is explained starting in Step 3 above.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> on the Edit Masking Definitions page when you have finished editing.</p>
</li>
<li>
<p>Perform these other actions with an existing masking definition by choosing the respective menu item from the <span class="bold">Actions</span> menu:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Create Like</span>&ndash;to display the masking definition in the Create Masking Definition page where you can customize the definition.</p>
</li>
<li>
<p><span class="bold">Grant Designer</span>&ndash;to grant Designer privileges on the masking definition to selected roles or administrators, which means the grantees can view and edit the definition. Privileges granted can also be revoked.</p>
</li>
<li>
<p><span class="bold">Grant Operator</span>&ndash;to grant Operator privileges on the masking definition to selected roles or administrators, which means the grantees can view and copy but not edit the definition. Privileges granted can also be revoked.</p>
</li>
<li>
<p><span class="bold">Export</span>&ndash;to export the definition as an XML file for use in other repositories.</p>
</li>
</ul>
<p>Click <span class="bold">Go</span> to execute the selected action.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
<div class="props_rev_3"><a id="GUID-27F32BB6-BE8C-4534-BCDC-CFD5B5CC2946"></a>
<h3 id="DMKSB-GUID-27F32BB6-BE8C-4534-BCDC-CFD5B5CC2946" class="sect3">Adding Columns for Masking</h3>
<div>
<div class="section">
<p>Use this page to add one or more columns for masking and automatically add foreign key columns. Select the database columns you want to mask from the corresponding schema. After you select the columns, you specify the format used to mask the data within.</p>
<div class="infobox-note" id="GUID-27F32BB6-BE8C-4534-BCDC-CFD5B5CC2946__GUID-B12544D8-8A64-484C-BC48-185F95F8AD70">
<p class="notep1">Note:</p>
<p>You need to add at least one column in the masking definition. Otherwise, you cannot generate a script that creates an impact report that provides information about the objects and resources examined and lists details of any warnings or errors detected.</p>
</div>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Enter search criteria, then click <span class="bold">Search</span>.</span>
<div>
<p>The sensitive columns you defined in the ADM appear in the table below.</p>
</div>
</li>
<li class="stepexpand"><span>Either select one or more columns for later formatting on the Create Masking Definition page, or formatting now if the data types of the columns you have selected are identical.</span></li>
<li class="stepexpand"><span><span class="italic">Optional</span>: if you want to <a id="d5221e2539" class="indexterm-anchor"></a>mask selected columns as a group, enable Mask selected columns as a group. The columns that you want to mask as a group must all be from the same table.</span>
<div>
<p>Enable this check box if you want to mask more than one column together, rather than separately. When you select two or more columns and then later define the format on the Define Group Mask page, the columns appear together, and any choices you make for format type or masking table apply collectively to all of the columns.</p>
<p>After you define the group and return to this page, the Column Group column in the table shows an identical number for each entry row in the table for all members of the group. For example, if you have defined your first group containing four columns, each of the four entries in this page will show a number 1 in the Column Group column. If you define another group, the entries in the page will show the number 2, and so forth. This helps you to distinguish which columns belong to which column groups.</p>
</div>
</li>
<li class="stepexpand"><span>Either click <span class="bold">Add</span> to add the column to the masking definition, return to the Create Masking Definition page and define the format of the column later, or click <span class="bold">Define Format and Add</span> to define the format for the column now.</span>
<div>
<p>The Define Format and Add feature can save you significant time. When you select multiple columns to add that have the same data type, you do not need to define the format for each column as you would when you click Add. For instance, if you search for Social Security numbers (SSN) and the search yields 100 SSN columns, you could select them all, then click <span class="bold">Define Format and Add</span> to import the SSN format for all of them.</p>
</div>
</li>
<li class="stepexpand"><span>Do one of the following:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p>If you clicked <span class="bold">Add</span> in the previous step:</p>
<p>You will eventually need to define the format of the column in the Create Masking Definition page before you can continue. When you are ready to do so, click the icon in the page Format column for the column you want to format. Depending on whether you decided to mask selected columns as a group on the Add Columns page, either the Define Column mask or Define Group mask appears. Read further in this step for instructions for both cases.</p>
</li>
<li>
<p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and did not check <span class="bold">Mask selected columns as a group</span>:</p>
<p>The Define Column Mask page appears, where you can define the format for the column before adding the column to the Create Masking Definition page, as explained below:</p>
<ul style="list-style-type: disc;">
<li>
<p>Provide a format entry for the required Default condition by either selecting a format entry from the list and clicking <span class="bold">Add</span>, or clicking <span class="bold">Import Format</span>, selecting a predefined format on the Import Format page, then clicking <span class="bold">Import</span>.</p>
<p>The Import Format page displays the formats that are marked with the same sensitive type as the masked column.</p>
</li>
<li>
<p>Add another condition by clicking <span class="bold">Add Condition</span> to add a new condition row, then provide one or more format entries as described in the previous step.</p>
</li>
<li>
<p>When you have finished formatting the column, click <span class="bold">OK</span> to return to the Create Masking Definition page.</p>
</li>
</ul>
</li>
<li>
<p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and checked <span class="bold">Mask selected columns as a group</span>:</p>
<p>The Define Group Mask page appears, where you can add format entries for group columns that appear in the Create Masking Definition page, as explained below:</p>
<ul style="list-style-type: disc;">
<li>
<p>Select one of the available format types. For complete information on the format types, see the online help for the Defining the Group Masking Format topic.</p>
</li>
<li>
<p>Optionally add a column to the group.</p>
</li>
<li>
<p>When you have finished formatting the group, click <span class="bold">OK</span> to return to the Create Masking Definition page.</p>
<p>The results appear in the Columns table. The sensitive columns you selected earlier now appear on this page. Primary key and foreign key columns appear below the sensitive columns.</p>
</li>
</ul>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-C1A669FC-5AF2-4A87-846B-3DC7E31EF386"></a>
<h3 id="DMKSB-GUID-C1A669FC-5AF2-4A87-846B-3DC7E31EF386" class="sect3">Selecting Data Masking Advanced Options</h3>
<div>
<p>The following options on the Masking Definitions page are all checked by default, so you need to uncheck the options that you do not want to enable:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="data_masking.htm#GUID-3DE64E99-650C-4B7C-A784-97D236B69004">Data Masking Options</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B">Random Number Generation</a></p>
</li>
<li>
<p><a href="data_masking.htm#GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61">Pre- and Post-mask Scripts</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-3DE64E99-650C-4B7C-A784-97D236B69004"></a>
<h4 id="DMKSB-GUID-3DE64E99-650C-4B7C-A784-97D236B69004" class="sect4">Data Masking Options</h4>
<div>
<p><a id="d5221e2730" class="indexterm-anchor"></a>The data masking options include:</p>
<ul style="list-style-type: disc;">
<li>
<p><span>Disable redo log generation during masking</span></p>
<p>Masking disables redo logging and flashback logging to purge any original unmasked data from logs. However, in certain circumstances when you only want to test masking, roll back changes, and retry with more mask columns, it is easier to uncheck this box and use a flashback database to retrieve the old unmasked data after it has been masked. You can use Enterprise Manager to flashback a database.</p>
<div class="infobox-note" id="GUID-3DE64E99-650C-4B7C-A784-97D236B69004__GUID-F97A576D-1BA8-49F2-99AE-9FFFDF2A4B60">
<p class="notep1">Note:</p>
<p>Disabling this option compromises security. You must ensure this option is enabled in the final mask performed on the copy of the production database.</p>
</div>
</li>
<li>
<p><span>Refresh statistics after masking</span></p>
<p>If you have already enabled statistics collection and would like to use special options when collecting statistics, such as histograms or different sampling percentages, it is beneficial to turn off this option to disable default statistics collection and run your own statistics collection jobs.</p>
</li>
<li>
<p><span>Drop temporary tables created during masking</span></p>
<p>Masking creates temporary tables that map the original sensitive data values to mask values. In some cases, you may want to preserve this information to track how masking changed your data. Note that doing so compromises security. These tables must be dropped before the database is available for unprivileged users.</p>
</li>
<li>
<p>Decrypt encrypted columns</p>
<p>This option decrypts columns that were previously masked using Encrypt format. To decrypt a previously encrypted column, the seed value must be the same as the value used to encrypt.</p>
<p>Decrypt only recovers the original value if the original format used for the encryption matches the original value. If the originally encrypted value did not conform to the specified regular expression, when decrypted, the encrypted value cannot reproduce the original value.</p>
</li>
<li>
<p><span>Use parallel execution when possible</span></p>
<p>Oracle Database can make parallel various SQL operations that can significantly improve their performance. Data Masking uses this feature when you select this option. You can enable Oracle Database to automatically determine the degree of parallelism, or you can specify a value. For more information about using parallel execution and the degree of parallelism, see the <a class="olink DWHSG" target="_blank" href="../DWHSG/toc.htm"><span class="italic">Oracle Database Data Warehousing Guide</span></a>.</p>
</li>
<li>
<p>Recompile invalid dependent objects after masking</p>
<p>The masking process re-creates the table to be masked and as a consequence, all existing dependent objects (packages, procedures, functions, MViews, Views, Triggers) become invalid. You can specify that the masking process recompile these invalid objects after creating the table, by selecting the check box. Otherwise, invalid objects are not recompiled using <code class="codeph">utl_comp</code> procedures at the end of masking.</p>
<p>If you choose this option, indicate whether to use serial or parallel execution. You can enable Oracle Database to automatically determine the degree, or you can specify a value. For more information about using parallel execution and the degree of parallelism, see the <span class="italic">Oracle Database Data Warehousing Guide</span>.</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B"></a>
<h4 id="DMKSB-GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B" class="sect4">Random Number Generation</h4>
<div>
<p><a id="d5221e2824" class="indexterm-anchor"></a>The random number generation options include:</p>
<ul style="list-style-type: disc;">
<li>
<p><span>Favor Speed</span></p>
<p>The <code class="codeph">DBMS_RANDOM</code> package is used for random number generation.</p>
</li>
<li>
<p><span>Favor Security</span></p>
<p>The <code class="codeph">DBMS_CRYPTO</code> package is used for random number generation. Additionally, if you use the Substitute format, a seed value is required when you schedule the masking job or database clone job.</p>
</li>
</ul>
</div>
</div>
<div class="props_rev_3"><a id="GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61"></a>
<h4 id="DMKSB-GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61" class="sect4">Pre- and Post-mask Scripts</h4>
<div>
<p><a id="d5221e2885" class="indexterm-anchor"></a>When masking a test system to evaluate performance, it is beneficial to preserve the object statistics after masking. You can accomplish this by adding a pre-masking script to export the statistics to a temporary table, then restoring them with a post-masking script after masking concludes.</p>
<p>Use the Pre Mask Script text box to specify any user-specified SQL script that must run before masking starts.</p>
<p>Use the Post Mask Script text box to specify any user-specified SQL script that must run after masking completes. Since masking modifies data, you can also perform tasks, such as rebalancing books or calling roll-up or aggregation modules, to ensure that related or aggregate information is consistent.</p>
<p>The following examples show pre- and post-masking scripts for preserving statistics.</p>
<p>This example shows a pre-masking script for preserving statistics.</p>
<pre dir="ltr">variable sts_task  VARCHAR2(64);

/*Step :1 Create the staging table for statistics*/

exec dbms_stats.create_stat_table(ownname=&gt;&#39;SCOTT&#39;,stattab=&gt;&#39;STATS&#39;);
 
/* Step 2: Export the table statistics into the staging table. Cascade results 
in all index and column statistics associated with the specified table being 
exported as well. */
 
exec
dbms_stats.export_table_stats(ownname=&gt;&#39;SCOTT&#39;,tabname=&gt;&#39;EMP&#39;,
partname=&gt;NULL,stattab=&gt;&#39;STATS&#39;,statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;&#39;SCOTT&#39;);
exec
dbms_stats.export_table_stats(ownname=&gt;&#39;SCOTT&#39;,tabname=&gt;&#39;DEPT&#39;,
partname=&gt;NULL,stattab=&gt;&#39;STATS&#39;,statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;&#39;SCOTT&#39;);

/* Step 3: Create analysis task */
3. exec :sts_task := DBMS_SQLPA.create_analysis_task(sqlset_name=&gt;
&#39;scott_test_sts&#39;,task_name=&gt;&#39;SPA_TASK&#39;, sqlset_owner=&gt;&#39;SCOTT&#39;);
 
/*Step 4: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt; &#39;SPA_TASK&#39;, 
execution_type=&gt; &#39;explain plan&#39;, execution_name  =&gt; &#39;pre-mask_SPA_TASK&#39;); 
</pre>
<p>This example shows a post-masking script for preserving statistics.</p>
<pre dir="ltr">*Step 1: Import the statistics from the staging table to the dictionary tables*/
 
exec
dbms_stats.import_table_stats(ownname=&gt;&#39;SCOTT&#39;,tabname=&gt;&#39;EMP&#39;,
partname=&gt;NULL,stattab=&gt;&#39;STATS&#39;,statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;&#39;SCOTT&#39;);
exec
dbms_stats.import_table_stats(ownname=&gt;&#39;SCOTT&#39;,tabname=&gt;&#39;DEPT&#39;,
partname=&gt;NULL,stattab=&gt;&#39;STATS&#39;,statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;&#39;SCOTT&#39;);
 
/* Step 2: Drop the staging table */
 
exec dbms_stats.drop_stat_table(ownname=&gt;&#39;SCOTT&#39;,stattab=&gt;&#39;STATS&#39;);

/*Step 3: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name=&gt;&#39;SPA_TASK&#39;, 
execution_type=&gt;&#39;explain plan&#39;, execution_name=&gt;&#39;post-mask_SPA_TASK&#39;);
 
/*Step 4: Execute the comparison task */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt;&#39;SPA_TASK&#39;, 
execution_type=&gt;&#39;compare&#39;, execution_name=&gt;&#39;compare-mask_SPA_TASK&#39;); 
</pre>
<div class="infoboxnotealso" id="GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61__GUID-D74FF6F3-8DBC-43FC-9209-361EEC33E6E0">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="data_masking.htm#GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8">Masking a Test System to Evaluate Performance</a>&#34;</span> for a procedure that explains how to specify the location of these scripts when scheduling a data masking job</p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD"></a>
<h3 id="DMKSB-GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD" class="sect3">Scheduling a Script Generation Job</h3>
<div>
<div class="section">
<p>To schedule a script generation job:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Select the masking definition to generate a script for, then click <span class="bold">Generate Script</span>.</span></li>
<li class="stepexpand"><span>Change the default job name to something meaningful, if desired, and provide an optional job description.</span></li>
<li class="stepexpand"><span>Select a reference database from the drop-down list.</span></li>
<li class="stepexpand" id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__SELECTASCRIPTGENERATIONOPTIONMASKIN-BF9AAECA"><span>Select a script generation option:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Mask In-Database</span>&ndash;to replace sensitive data in-place with masked data on a specified database (usually copied from production). Use this option only in non-production environments. This differs from the <span class="bold">Actions</span> menu option <span class="bold">Clone Database</span>, which clones the database and then masks the data.</p>
</li>
<li>
<p><span class="bold">Mask In-Export</span>&ndash;to export masked data from the specified source database (usually production) using Oracle Data Pump. This option is safe to run in a production environment as it does not modify customer data. Note, however, that this option creates temporary tables that get dropped when the masking operation completes.</p>
</li>
</ul>
<p>Note that you can choose both options; that is, a script to mask the database directly and a script to create a masked dump.</p>
</div>
</li>
<li class="stepexpand" id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__CHOOSEONEOFTHEFOLLOWINGOPTIONSTOCRE-BD780517"><span>Choose one of the following options to create temporary objects:</span>
<ul>
<li>Create objects in default tablespace</li>
<li>Create objects in custom tablespace
<ul style="list-style-type: disc;">
<li>
<p>Temporary objects</p>
</li>
<li>
<p>Temporary objects and copy of the table being masked</p>
</li>
</ul>
<div class="infobox-note" id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__GUID-9A2FEDC9-92CC-4986-8640-5D3D2A40D1A5">
<p class="notep1">Note:</p>
<p>The sub-options are available only if you select Mask In-Database in <a href="data_masking.htm#GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__SELECTASCRIPTGENERATIONOPTIONMASKIN-BF9AAECA">Step 4</a>.</p>
</div>
</li>
</ul>
</li>
<li class="stepexpand"><span>If you chose custom tablespace in <a href="data_masking.htm#GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__CHOOSEONEOFTHEFOLLOWINGOPTIONSTOCRE-BD780517">Step 5</a>, select a custom tablespace where the objects must be created.</span></li>
<li class="stepexpand"><span>Specify credentials to log in to the reference database.</span></li>
<li class="stepexpand"><span>Specify to start the job immediately or at a later specified date and time, then click <span class="bold">Submit.</span></span>
<div>
<p>A message confirms that the job has been scheduled. Refresh the page to see the job results.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-1B9D8A63-ADBC-4554-A53A-C34A6CE4DC64"></a>
<h3 id="DMKSB-GUID-1B9D8A63-ADBC-4554-A53A-C34A6CE4DC64" class="sect3">Scheduling a Data Masking Job</h3>
<div>
<div class="section">
<p>To set up the data masking job and schedule its execution:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Select the masking definition for which a script has been generated, then click <span class="bold">Schedule Job</span>.</span></li>
<li class="stepexpand"><span>Change the default job name if desired and enter an optional job description.</span></li>
<li class="stepexpand"><span>Select a database from the drop-down menu and indicate your preference:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">In-Place Masking</span>&ndash;to replace sensitive data in-place with masked data on a specified database (usually copied from production). Use this option only in nonproduction environments. This differs from the <span class="bold">Actions</span> menu option <span class="bold">Clone Database</span>, which clones the database and then masks the data.</p>
</li>
<li>
<p><span class="bold">At-Source Masking</span>&ndash;to export masked data from the specified source database (usually production) using Oracle Data Pump. This option is safe to run in a production environment as it does not modify customer data. Note, however, that this option creates temporary tables that get dropped when the masking operation completes.</p>
</li>
</ul>
<p>Your selections affect the check box text that appears below the radio buttons as well as other regions on the page.</p>
</div>
</li>
<li class="stepexpand"><span>Proceed according to your selections in Step 3:</span>
<div>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Data Mask Options</span>&ndash;Provide the requisite information as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>After script generation completes, the data masking script is stored in the Enterprise Manager repository. By default, the data masking job retrieves the script from the repository and copies it to the <code class="codeph">$ORACLE_HOME/dbs</code> directory on the database host, using a generated file name. The Script File Location and Name fields enable you to override the default location and generated file name.</p>
</li>
<li>
<p>Workloads&ndash;Select options to mask SQL tuning sets and capture files, as appropriate. Browse to the file location where you want to capture the files.</p>
</li>
<li>
<p>Detect SQL Plan Changes Due to Masking&ndash;Run the SQL Performance Analyzer to assess the impact of masking. Provide a task name and browse to the corresponding SQL tuning set.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Data Export Options</span>&ndash;Provide the requisite information as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p>Specify a directory where to save the mask dump. The drop-down list consists of directory objects that you can access. Alternatively, you can select a custom directory path. Click the check box if you want to speed the process by using an external directory. Recommended default: <code class="codeph">DATA_FILE_DIR</code>.</p>
</li>
<li>
<p>Specify appropriate values if you want to override the defaults: enter a name for the export file; specify a maximum file size in megabytes; specify the maximum number of threads of active execution operating on behalf of the export job. This enables you to consider trade-offs between resource consumption and elapsed time.</p>
</li>
<li>
<p>Select whether to enable dump file compression and encryption. Enter and confirm an encryption password, if appropriate. Log file generation is selected by default.</p>
</li>
</ul>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>Specify credentials to log in to the database host.</span></li>
<li class="stepexpand"><span>Specify credentials to log in to the reference database.</span></li>
<li class="stepexpand"><span>Specify to start the job immediately or at a later specified date and time, then click <span class="bold">Submit.</span></span>
<div>
<p>A message confirms that the job has been scheduled. Refresh the page to see the job results.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-7C24B5D8-2105-4C18-AA39-B86D80007296"></a>
<h3 id="DMKSB-GUID-7C24B5D8-2105-4C18-AA39-B86D80007296" class="sect3">Estimating Space Requirements for Masking Operations</h3>
<div>
<p>Here are some guidelines for estimating space requirements for masking operations. These estimates are based on a projected largest table size of 500GB. In making masking space estimates, assume a &#34;worst-case scenario.&#34;</p>
<ul style="list-style-type: disc;">
<li>
<p>For in-place masking:</p>
<ul style="list-style-type: disc;">
<li>
<p>2 * 500GB for the mapping table (the mapping table stores both the original and the masked columns. Worse case is every column is to be masked).</p>
</li>
<li>
<p>2 * 500GB to accommodate both the original and the masked tables (both exist in the database at some point during the masking process).</p>
</li>
<li>
<p>2 * 500GB for temporary tablespace (needed for hash joins, sorts, and so forth).</p>
</li>
</ul>
<p>Total space required for the worst case: 3TB.</p>
</li>
<li>
<p>For at-source masking:</p>
<ul style="list-style-type: disc;">
<li>
<p>2 * 500GB for the mapping table (as for in-place masking).</p>
</li>
<li>
<p>2 * 500GB for temporary tablespace (as for in-place masking).</p>
</li>
<li>
<p>Sufficient file system space to accommodate the dump file.</p>
</li>
</ul>
<p>Total space required for the worst case: 2TB plus the necessary file system space.</p>
</li>
</ul>
<p>In either case, Oracle recommends that you set the temp and undo tablespaces to auto extend.</p>
<p>You can specify a tablespace for mapping tables during script generation. If you do not specify a tablespace, the tables are created in the tablespace of the executing user. Note that space estimations are provided during script generation, with resource warnings as appropriate. There are some situations, for example when using the shuffle format, that do not require a mapping table. In these cases, updates to the original table happen in-line.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43"></a>
<h3 id="DMKSB-GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43" class="sect3">Adding Dependent Columns</h3>
<div>
<p><a id="d5221e3261" class="indexterm-anchor"></a>Dependent columns are defined by adding them to the Application Data Model. The following prerequisites apply for the column to be defined as dependent:</p>
<ul style="list-style-type: disc;">
<li>
<p>A valid dependent column should not already be included for masking.</p>
</li>
<li>
<p>The column should not be a foreign key column or referenced by a foreign key column.</p>
</li>
<li>
<p>The column data should conform to the data in the parent column.</p>
</li>
</ul>
<p>If the column does not meet these criteria, an &#34;Invalid Dependent Columns&#34; message appears when you attempt to add the dependent column.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-96E5A2A5-BB53-41A6-9A5F-738CD548FABB"></a>
<h3 id="DMKSB-GUID-96E5A2A5-BB53-41A6-9A5F-738CD548FABB" class="sect3">Masking Dependent Columns for Packaged Applications</h3>
<div>
<div class="section">
<p>The following procedure explains how to mask data across columns for packaged applications in which the relationships are not defined in the data dictionary.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To mask dependent columns for packaged applications:</p>
<ol>
<li>
<p>Go to Data Discovery and Modeling and create a new Application Data Model (ADM) using metadata collection for your packaged application suite.</p>
<p>When metadata collection is complete, edit the newly created ADM.</p>
</li>
<li>
<p><a id="d5221e3334" class="indexterm-anchor"></a><a id="d5221e3338" class="indexterm-anchor"></a><a id="d5221e3342" class="indexterm-anchor"></a><a id="d5221e3346" class="indexterm-anchor"></a><a id="d5221e3348" class="indexterm-anchor"></a>Manually add a referential relationship:</p>
<ol>
<li>
<p>From the Referential Relationships tab, open the <span class="bold">Actions</span> menu, then select <span class="bold">Add Referential Relationship</span>.</p>
<p>The Add Referential Relationship pop-up window appears.</p>
</li>
<li>
<p>Select the requisite Parent Key and Dependent Key information.</p>
</li>
<li>
<p>In the Columns Name list, select a dependent key column to associate with a parent key column.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to add the referential relationship to the ADM.</p>
<p>The new dependent column now appears in the referential relationships list.</p>
</li>
</ol>
</li>
<li>
<p><a id="d5221e3381" class="indexterm-anchor"></a><a id="d5221e3385" class="indexterm-anchor"></a>Perform sensitive column discovery.</p>
<p>When sensitive column discovery is complete, review the columns found by the discovery job and mark them sensitive or not sensitive as needed.</p>
<p>When marked as sensitive, any discovery sensitive column also marks its parent and the other child columns of the parent as sensitive. Consequently, it is advisable to first create the ADM with all relationships. ADM by default, or after running drivers, may not contain denormalized relationships. You need to manually add these.</p>
<p>For more information about sensitive column discovery, see step <a href="data_modeling.htm#GUID-0DD53476-B469-41E0-8153-5E091D4A41A2">Performing Sensitive Data Discovery</a>.</p>
</li>
<li>
<p>Go to Data Masking and create a new masking definition.</p>
</li>
<li>
<p>Select the newly created ADM and click <span class="bold">Add</span>, then <span class="bold">Search</span> to view this ADM&#39;s sensitive columns.</p>
</li>
<li>
<p>Select columns based on your search results, then import formats for the selected columns.</p>
<p>Enterprise Manager displays formats that conform to the privacy attributes.</p>
</li>
<li>
<p>Select the format and generate the script.</p>
</li>
<li>
<p>Execute the masking script.</p>
<p>Enterprise Manager executes the generated script on the target database and masks all of your specified columns.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-430F4A82-323D-4579-AD19-9306B33E0E3F"></a>
<h3 id="DMKSB-GUID-430F4A82-323D-4579-AD19-9306B33E0E3F" class="sect3">Importing a Data Masking Template</h3>
<div>
<div class="section">
<p>You can import and re-use a previously exported data masking definition saved as an XML file to the current Enterprise Manager repository. You also can import an Oracle-supplied data masking definition from the Software Library.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Importing a Previously Exported Masking Definition</p>
</div>
<!-- class="section" -->
<div class="section">
<p><a id="d5221e3469" class="indexterm-anchor"></a><a id="d5221e3473" class="indexterm-anchor"></a>Note the following advisory information:</p>
<ul style="list-style-type: disc;">
<li>
<p>The XML file format must be compliant with the masking definition XML format.</p>
</li>
<li>
<p>Verify that the name of the masking definition to be imported does not already exist in the repository, and the source database name identifies a valid Enterprise Manager target.</p>
</li>
<li>
<p>Verify that the value in the XML file to be imported refers to a valid database target.</p>
</li>
</ul>
<ol>
<li>
<p>From the Data Masking Definitions page, click <span class="bold">Import</span>.</p>
<p>The Import Masking Definition page appears.</p>
</li>
<li>
<p>Specify a name for the masking definition and select the ADM to associate with the template. The Reference Database is automatically provided.</p>
</li>
<li>
<p>Browse for the XML file, or specify the name of the XML file, then click <span class="bold">Continue</span>.</p>
<p>The Data Masking Definitions Page reappears and displays the imported definition in the table list for subsequent viewing and masking.</p>
</li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Importing a Data Masking Template from the Software Library</p>
</div>
<!-- class="section" -->
<div class="section">
<p>The Self Update feature ensures that the latest Oracle-supplied data masking templates are available in the Software Library. You can also check for updates. Go to the Self Update page and check for Test Data Management updates. If present, download and apply them so that they are available in the Software Library.</p>
<ol>
<li>
<p>On the Data Masking Definitions page, click <span class="bold">Import from Software Library</span>.</p>
<p>The Import Masking Definition page appears.</p>
</li>
<li>
<p>Select a masking template in the Software Library list.</p>
</li>
<li>
<p>Specify a name for the masking definition and select the ADM to associate with the template. The Reference Database is automatically provided.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
<p>The Data Masking Definitions Page reappears and displays the imported definition in the table list for subsequent viewing and masking.</p>
</li>
</ol>
<p>You can also export a data masking definition from the Software Library.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>On the Data Masking Definitions page, click <span class="bold">Export from Software Library</span>.</span></li>
<li class="stepexpand"><span>Select a masking template in the Software Library list.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Export</span>.</span>
<div>
<p>Save the template file for import into a different repository.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840"></a>
<h3 id="DMKSB-GUID-EA648FED-030D-480E-A206-ACABEFA1F840" class="sect3">Cloning the Production Database</h3>
<div>
<div class="section">
<p>When you clone and mask the database, a copy of the masking script is saved in the Enterprise Manager repository and then retrieved and executed after the clone process completes. Therefore, it is important to regenerate the script after any schema changes or modifications to the production database.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To clone and optionally mask the masking definition&#39;s target database:</p>
<ol>
<li>
<p>From the Data Masking Definitions page, select the masking definition you want to clone, select <span class="bold">Clone Database</span> from the Actions list, then click <span class="bold">Go</span>.</p>
<p>The Clone Database: Source Type page appears.</p>
<p>The Clone Database wizard appears, where you can create a test system to run the mask.</p>
</li>
<li>
<p>Specify the type of source database backup to be used for the cloning operation, then click <span class="bold">Continue</span>.</p>
</li>
<li>
<p>Proceed through the wizard steps as you ordinarily would to clone a database. For assistance, refer to the online help for each step.</p>
</li>
<li id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840__CHDBEDJI">
<p>In the Database Configuration step of the wizard, add a masking definition, then select the Run SQL Performance Analyzer option as well as other options as desired or necessary.</p>
</li>
<li>
<p>Schedule and then run the clone job.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8"></a>
<h2 id="DMKSB-GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8" class="sect2">Masking a Test System to Evaluate Performance</h2>
<div>
<p><a id="d5221e3672" class="indexterm-anchor"></a>After you have created a data masking definition, you may want to use it to analyze the performance impact from masking on a test system. The procedures in the following sections explain the process for this task for masking only, or cloning and masking.</p>
</div>
<div class="props_rev_3"><a id="GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97"></a>
<h3 id="DMKSB-GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97" class="sect3">Using Only Masking for Evaluation</h3>
<div>
<div class="section">
<p class="subhead3">To use only masking to evaluate performance:</p>
<ol>
<li>
<p>From the Data Masking Definitions page, select the masking definition to be analyzed, then click <span class="bold">Schedule Job</span>.</p>
<p>The Schedule Data Masking Job page appears.</p>
</li>
<li id="GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97__CHDIAFHI">
<p>At the top of the page, provide the requisite information.</p>
<p>The script file location pertains to the masking script, which also contains the pre- and post-masking scripts you created in <span class="q">&#34;<a href="data_masking.htm#GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61">Pre- and Post-mask Scripts</a>&#34;</span>.</p>
</li>
<li>
<p>In the Encryption Seed section, provide a text string that you want to use for encryption.</p>
<p><a id="d5221e3738" class="indexterm-anchor"></a>This section only appears for masking definitions that use the Substitute or Encrypt formats. The seed is an encryption key used by the encryption/hash-based substitution APIs, and makes masking more deterministic instead of being random.</p>
</li>
<li>
<p>In the Workloads section:</p>
<ol>
<li>
<p>Select the <span class="bold">Mask SQL Tuning Sets</span> option, if desired.</p>
<p>If you use a SQL Tuning Set that has sensitive data to evaluate performance, it is beneficial to mask it for security, consistency of data with the database, and to generate correct evaluation results.</p>
</li>
<li>
<p>Select the <span class="bold">Capture Files</span> option, if desired, then select a capture directory.</p>
<p>When you select this option, the contents of the directory is masked. The capture file masking is executed consistently with the database.</p>
</li>
</ol>
</li>
<li>
<p>In the Detect SQL Plan Changes Due to Masking section, leave the Run SQL Performance Analyzer option unchecked.</p>
<p>You do not need to enable this option because the pre- and post-masking scripts you created, referenced in step <a href="data_masking.htm#GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97__CHDIAFHI">2</a>, already execute the analyzer.</p>
</li>
<li>
<p>Provide credentials and scheduling information, then click <span class="bold">Submit</span>.</p>
<p>The Data Masking Definitions page reappears, and a message appears stating that the Data Masking job has been submitted successfully.</p>
<p>During masking of any database, the AWR bind variable data is purged to protect sensitive bind variables from leaking to a test system.</p>
</li>
<li>
<p>When the job completes successfully, click the link in the SQL Performance Analyzer Task column to view the executed analysis tasks and Trial Comparison Report, which shows any changes in plans, timing, and so forth.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-C019AE61-A64D-40E8-95B9-30332E888E0B"></a>
<h3 id="DMKSB-GUID-C019AE61-A64D-40E8-95B9-30332E888E0B" class="sect3">Using Cloning and Masking for Evaluation</h3>
<div>
<div class="section">
<p><a id="d5221e3821" class="indexterm-anchor"></a>Using both cloning and masking to evaluate performance is very similar to the procedure described in the previous section, except that you specify the options from the Clone Database wizard, rather than from the Schedule Data Masking Job page.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To use both cloning and masking to evaluate performance:</p>
<ol>
<li>
<p>Follow the steps described in <span class="q">&#34;<a href="data_masking.htm#GUID-EA648FED-030D-480E-A206-ACABEFA1F840">Cloning the Production Database</a>&#34;</span>.</p>
</li>
<li>
<p>At step <a href="data_masking.htm#GUID-EA648FED-030D-480E-A206-ACABEFA1F840__CHDBEDJI">4</a>, the format of the Database Configuration step appears different from the Schedule Data Masking Job page discussed in <span class="q">&#34;&#34;</span>, but select options as you would for the Schedule Data Masking Job page.</p>
</li>
<li>
<p>Continue with the wizard steps to complete and submit the cloning and masking job.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-30A07656-8093-43D8-845B-7E5BE244A1BE"></a>
<h2 id="DMKSB-GUID-30A07656-8093-43D8-845B-7E5BE244A1BE" class="sect2">Upgrade Considerations</h2>
<div>
<div class="section">
<p>Upgrading data masking definitions from 10 or 11 Grid Control to 12<span class="italic">c</span> Cloud Control assumes that you have completed the following tasks:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>Upgraded Enterprise Manager to 12<span class="italic">c</span></p>
</li>
<li>
<p>Downloaded the latest database plug-in using Self Update and deployed the plug-in to OMS and Management Agent</p>
</li>
</ul>
<p>Completing these tasks automatically upgrades the masking definitions and creates for each a shell Application Data Model (ADM) that becomes populated with the sensitive columns and their dependent column information from the legacy mask definition. The ADM, and hence data masking, then remains in an unverified state, because it is missing the dictionary relationships.</p>
<p>Proceed as follows to complete the masking definition upgrade:</p>
<ol>
<li>
<p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then select <span class="bold">Data Discovery and Modeling</span>.</p>
</li>
<li>
<p>For each shell ADM (verification status is Needs Upgrade), do the following:</p>
<ol>
<li>
<p>Select the ADM in the table.</p>
</li>
<li>
<p>From the Actions menu, select <span class="bold">Upgrade and Verify</span>.</p>
</li>
<li>
<p>Schedule and submit the job.</p>
<p>When the job completes, verification status should be Valid.</p>
</li>
</ol>
</li>
<li>
<p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then select <span class="bold">Data Masking Definitions</span>.</p>
</li>
<li>
<p>For each upgraded masking definition, do the following:</p>
<ol>
<li>
<p>Open the masking definition for editing.</p>
</li>
<li>
<p>In <span class="bold">Advanced Options</span>, select the &#34;Recompile invalid dependent objects after masking&#34; option, with Parallel and Default settings.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to save your changes.</p>
</li>
</ol>
</li>
<li>
<p>Next, schedule a script generation job for each upgraded masking definition.</p>
</li>
</ol>
<p>You can now resume masking with the upgraded data masking definitions.</p>
<div class="infoboxnotealso" id="GUID-30A07656-8093-43D8-845B-7E5BE244A1BE__GUID-19F08234-0446-4D25-A03F-CEA8F6344E80">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="data_masking.htm#GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43">Adding Dependent Columns</a>&#34;</span> for information on dependent columns</p>
</div>
<p><a id="d5221e3980" class="indexterm-anchor"></a><a id="d5221e3984" class="indexterm-anchor"></a>Consider these other points regarding upgrades:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can combine multiple upgraded ADMs by exporting an ADM and performing an Import Content into another ADM.</p>
</li>
<li>
<p>An upgraded ADM uses the same semantics as for upgrading a legacy mask definition (discussed above), in that you would need to perform a validation.</p>
</li>
<li>
<p>An 11.1 Grid Control E-Business Suite (EBS) masking definition based on an EBS masking template shipped from Oracle is treated as a custom application after the upgrade. You can always use the approach discussed in the first bulleted item above to move into a newly created EBS ADM with all of the metadata in place. However, this is not required.</p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<div class="props_rev_3"><a id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A"></a>
<h2 id="DMKSB-GUID-85FE9C7E-5A94-4163-B89D-53C93058272A" class="sect2">Using the Shuffle Format</h2>
<div>
<p><a id="d5221e4036" class="indexterm-anchor"></a>A shuffle format is available that does not preserve data distribution when the column values are not unique and also when it is conditionally masked. For example, consider the Original Table (<a href="data_masking.htm#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFHCHJF" title="Original table - data distribution integrity non-preservation">Table 4-1</a>) that shows two columns: EmpName and Salary. The Salary column has three distinct values: 10, 90, and 20.</p>
<div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFHCHJF">
<p class="titleintable">Table 4-1 Original Table (Non-preservation)</p>
<table class="cellalignment588" title="Original Table (Non-preservation)" summary="Original table - data distribution integrity non-preservation">
<thead>
<tr class="cellalignment577">
<th class="cellalignment589" id="d5221e4056">EmpName</th>
<th class="cellalignment590" id="d5221e4059">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4064" headers="d5221e4056">
<p>A</p>
</td>
<td class="cellalignment592" headers="d5221e4064 d5221e4059">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4071" headers="d5221e4056">
<p>B</p>
</td>
<td class="cellalignment592" headers="d5221e4071 d5221e4059">
<p>90</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4078" headers="d5221e4056">
<p>C</p>
</td>
<td class="cellalignment592" headers="d5221e4078 d5221e4059">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4085" headers="d5221e4056">
<p>D</p>
</td>
<td class="cellalignment592" headers="d5221e4085 d5221e4059">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4092" headers="d5221e4056">
<p>E</p>
</td>
<td class="cellalignment592" headers="d5221e4092 d5221e4059">
<p>90</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4099" headers="d5221e4056">
<p>F</p>
</td>
<td class="cellalignment592" headers="d5221e4099 d5221e4059">
<p>20</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>If you mask the Salary column with this format, each of the original values is replaced with one of the values from this set. Assume that the shuffle format replaces 10 with 20, 90 with 10, and 20 with 90 (<a href="data_masking.htm#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFIAGGE" title="Mapping table - data distribution integrity non-preservation">Table 4-2</a>).</p>
<div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFIAGGE">
<p class="titleintable">Table 4-2 Mapping Table (Non-preservation)</p>
<table class="cellalignment588" title="Mapping Table (Non-preservation)" summary="Mapping table - data distribution integrity non-preservation">
<thead>
<tr class="cellalignment577">
<th class="cellalignment589" id="d5221e4122">EmpName</th>
<th class="cellalignment590" id="d5221e4125">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4130" headers="d5221e4122">
<p>10</p>
</td>
<td class="cellalignment592" headers="d5221e4130 d5221e4125">
<p>20</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4137" headers="d5221e4122">
<p>90</p>
</td>
<td class="cellalignment592" headers="d5221e4137 d5221e4125">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4144" headers="d5221e4122">
<p>20</p>
</td>
<td class="cellalignment592" headers="d5221e4144 d5221e4125">
<p>90</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The result is a shuffled Salary column as shown in the Masked Table (<a href="data_masking.htm#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFEEIJG" title="Masked table - data distribution integrity non-preservation">Table 4-3</a>), but the data distribution is changed. While the value 10 occurs three times in the Salary column of the Original Table, it occurs only twice in the Masked Table.</p>
<div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__DAFEEIJG">
<p class="titleintable">Table 4-3 Masked Table (Non-preservation)</p>
<table class="cellalignment588" title="Masked Table (Non-preservation)" summary="Masked table - data distribution integrity non-preservation">
<thead>
<tr class="cellalignment577">
<th class="cellalignment589" id="d5221e4167">EmpName</th>
<th class="cellalignment590" id="d5221e4170">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4175" headers="d5221e4167">
<p>A</p>
</td>
<td class="cellalignment592" headers="d5221e4175 d5221e4170">
<p>20</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4182" headers="d5221e4167">
<p>B</p>
</td>
<td class="cellalignment592" headers="d5221e4182 d5221e4170">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4189" headers="d5221e4167">
<p>C</p>
</td>
<td class="cellalignment592" headers="d5221e4189 d5221e4170">
<p>20</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4196" headers="d5221e4167">
<p>D</p>
</td>
<td class="cellalignment592" headers="d5221e4196 d5221e4170">
<p>20</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4203" headers="d5221e4167">
<p>E</p>
</td>
<td class="cellalignment592" headers="d5221e4203 d5221e4170">
<p>10</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment591" id="d5221e4210" headers="d5221e4167">
<p>F</p>
</td>
<td class="cellalignment592" headers="d5221e4210 d5221e4170">
<p>90</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>If the salary values had been unique, the format would have maintained data distribution.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96"></a>
<h2 id="DMKSB-GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96" class="sect2">Using Group Shuffle</h2>
<div>
<p>Group shuffle enables you to perform a shuffle within discrete units, or groups, where there is a relationship among the members of the group. Consider the case of shuffling the salaries of employees. <a href="data_masking.htm#GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ" title="Shows employees within groups and their present and shuffled salaries">Table 4-4</a>illustrates the group shuffle mechanism, where employees are categorized as managers (M) or workers (W), and salaries are shuffled within job category.</p>
<div class="tblformal" id="GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ">
<p class="titleintable">Table 4-4 Group Shuffle Using Job Category</p>
<table class="cellalignment588" title="Group Shuffle Using Job Category " summary="Shows employees within groups and their present and shuffled salaries">
<thead>
<tr class="cellalignment577">
<th class="cellalignment593" id="d5221e4272">Employee</th>
<th class="cellalignment594" id="d5221e4275">Job Category</th>
<th class="cellalignment595" id="d5221e4278">Salary</th>
<th class="cellalignment596" id="d5221e4281">Shuffled Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4286" headers="d5221e4272">
<p>Alice</p>
</td>
<td class="cellalignment598" headers="d5221e4286 d5221e4275">
<p>M</p>
</td>
<td class="cellalignment599" headers="d5221e4286 d5221e4278">
<p>90</p>
</td>
<td class="cellalignment600" headers="d5221e4286 d5221e4281">
<p>88</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4299" headers="d5221e4272">
<p>Bill</p>
</td>
<td class="cellalignment598" headers="d5221e4299 d5221e4275">
<p>M</p>
</td>
<td class="cellalignment599" headers="d5221e4299 d5221e4278">
<p>88</p>
</td>
<td class="cellalignment600" headers="d5221e4299 d5221e4281">
<p>90</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4312" headers="d5221e4272">
<p>Carol</p>
</td>
<td class="cellalignment598" headers="d5221e4312 d5221e4275">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4312 d5221e4278">
<p>72</p>
</td>
<td class="cellalignment600" headers="d5221e4312 d5221e4281">
<p>70</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4325" headers="d5221e4272">
<p>Denise</p>
</td>
<td class="cellalignment598" headers="d5221e4325 d5221e4275">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4325 d5221e4278">
<p>57</p>
</td>
<td class="cellalignment600" headers="d5221e4325 d5221e4281">
<p>45</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4338" headers="d5221e4272">
<p>Eddie</p>
</td>
<td class="cellalignment598" headers="d5221e4338 d5221e4275">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4338 d5221e4278">
<p>70</p>
</td>
<td class="cellalignment600" headers="d5221e4338 d5221e4281">
<p>57</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4351" headers="d5221e4272">
<p>Frank</p>
</td>
<td class="cellalignment598" headers="d5221e4351 d5221e4275">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4351 d5221e4278">
<p>45</p>
</td>
<td class="cellalignment600" headers="d5221e4351 d5221e4281">
<p>72</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<div class="props_rev_3"><a id="GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082"></a>
<h2 id="DMKSB-GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082" class="sect2">Using Conditional Masking</h2>
<div>
<p>To demonstrate how conditional masking can handle duplicate values, add to <a href="data_masking.htm#GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ" title="Shows employees within groups and their present and shuffled salaries">Table 4-4</a> another job category, assistant (A), where the employee in this category, George, earns the same as Frank. Assume the following conditions:</p>
<ul style="list-style-type: disc;">
<li>
<p>If job category is M, replace salary with a random number between 1 and 10.</p>
</li>
<li>
<p>If job category is W, set salary to a fixed number (01).</p>
</li>
<li>
<p>Default is to preserve the existing value.</p>
</li>
</ul>
<p>Applying these conditions results in the masked values shown in <a href="data_masking.htm#GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082__CEGDGJAA" title="Shows employees within groups and their present and shuffled salaries">Table 4-5</a>:</p>
<div class="tblformal" id="GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082__CEGDGJAA">
<p class="titleintable">Table 4-5 Using Job Category for Group Shuffle</p>
<table class="cellalignment588" title="Using Job Category for Group Shuffle " summary="Shows employees within groups and their present and shuffled salaries">
<thead>
<tr class="cellalignment577">
<th class="cellalignment593" id="d5221e4434">Employee</th>
<th class="cellalignment594" id="d5221e4437">Job Category</th>
<th class="cellalignment595" id="d5221e4440">Salary</th>
<th class="cellalignment596" id="d5221e4443">Conditional Result</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4448" headers="d5221e4434">
<p>Alice</p>
</td>
<td class="cellalignment598" headers="d5221e4448 d5221e4437">
<p>M</p>
</td>
<td class="cellalignment599" headers="d5221e4448 d5221e4440">
<p>90</p>
</td>
<td class="cellalignment600" headers="d5221e4448 d5221e4443">
<p>5</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4461" headers="d5221e4434">
<p>Bill</p>
</td>
<td class="cellalignment598" headers="d5221e4461 d5221e4437">
<p>M</p>
</td>
<td class="cellalignment599" headers="d5221e4461 d5221e4440">
<p>88</p>
</td>
<td class="cellalignment600" headers="d5221e4461 d5221e4443">
<p>7</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4474" headers="d5221e4434">
<p>Carol</p>
</td>
<td class="cellalignment598" headers="d5221e4474 d5221e4437">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4474 d5221e4440">
<p>72</p>
</td>
<td class="cellalignment600" headers="d5221e4474 d5221e4443">
<p>01</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4487" headers="d5221e4434">
<p>Denise</p>
</td>
<td class="cellalignment598" headers="d5221e4487 d5221e4437">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4487 d5221e4440">
<p>57</p>
</td>
<td class="cellalignment600" headers="d5221e4487 d5221e4443">
<p>01</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4500" headers="d5221e4434">
<p>Eddie</p>
</td>
<td class="cellalignment598" headers="d5221e4500 d5221e4437">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4500 d5221e4440">
<p>70</p>
</td>
<td class="cellalignment600" headers="d5221e4500 d5221e4443">
<p>01</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4513" headers="d5221e4434">
<p>Frank</p>
</td>
<td class="cellalignment598" headers="d5221e4513 d5221e4437">
<p>W</p>
</td>
<td class="cellalignment599" headers="d5221e4513 d5221e4440">
<p>45</p>
</td>
<td class="cellalignment600" headers="d5221e4513 d5221e4443">
<p>01</p>
</td>
</tr>
<tr class="cellalignment577">
<td class="cellalignment597" id="d5221e4526" headers="d5221e4434">
<p>George</p>
</td>
<td class="cellalignment598" headers="d5221e4526 d5221e4437">
<p>A</p>
</td>
<td class="cellalignment599" headers="d5221e4526 d5221e4440">
<p>45</p>
</td>
<td class="cellalignment600" headers="d5221e4526 d5221e4443">
<p>45</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Conditional masking works when there are duplicate values provided there are no dependent columns or foreign keys. If either of these is present, a &#34;bleeding condition&#34; results in the first of two duplicate values becoming the value of the second. So, in the example, George&#39;s salary is not preserved, but becomes 01.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9"></a>
<h2 id="DMKSB-GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9" class="sect2">Using Data Masking with LONG Columns</h2>
<div>
<p><a id="d5221e4577" class="indexterm-anchor"></a>When data masking script generation completes, an impact report appears. If the masking definition has tables with columns of data type LONG, the following warning message is displayed in the impact report:</p>
<pre dir="ltr">The table &lt;table_name&gt; has a LONG column. Data Masking uses &#34;in-place&#34; UPDATE 
to mask tables with LONG columns. This will generate undo information and the
original data will be available in the undo tablespaces during the undo 
retention period. You should purge undo information after masking the data. 
Any orphan rows in this table will not be masked.
</pre></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment576">
<tr>
<td class="cellalignment583">
<table class="cellalignment581">
<tr>
<td class="cellalignment580"><a href="data_modeling.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment580"><a href="data_subsetting.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2014, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment585">
<table class="cellalignment579">
<tr>
<td class="cellalignment580"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment580"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment580"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment580"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment580"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment580"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>