<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88115"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Starting%20a%20Workload%20Capture"></a><title>Starting a Workload Capture</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-24T11:32:44Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Testing Guide"/>
<meta name="dcterms.identifier" content="E55028-05"/>
<meta name="dcterms.isVersionOf" content="RATUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-4F96F1D0-475F-49ED-A3FD-C29C773EECBE.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-B6EE18AF-453C-4B67-975A-67D2F8773086.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55028-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C85885FA-715D-48AB-80F1-9C546988E667"></a> <span id="PAGE" style="display:none;">107/309</span> <!-- End Header -->
<a id="RATUG124"></a>
<h1 id="RATUG-GUID-C85885FA-715D-48AB-80F1-9C546988E667" class="sect1"><span class="enumeration_section">10.13.2</span> Starting a Workload Capture</h1>
<div>
<div class="section">
<p>Before starting a <a id="d22443e77" class="indexterm-anchor"></a>workload capture, you must first complete the prerequisites for capturing a database workload, as described in <span class="q">&#34;<a href="GUID-372BA03D-7A24-4300-A0AE-30E0D9D9C724.htm">Prerequisites for Capturing a Database Workload</a>&#34;</span>. You should also review the workload capture options, as described in <span class="q">&#34;<a href="GUID-79F20163-CE64-4C9C-9F71-C41A95460C05.htm">Workload Capture Options</a>&#34;</span>.</p>
<p>It is important to have a well-defined starting point for the workload so that the replay system can be restored to that point before initiating a replay of the captured workload. To have a well-defined starting point for the workload capture, it is preferable not to have any active user sessions when starting a workload capture. If active sessions perform ongoing transactions, those transactions will not be replayed properly in subsequent database replays, since only that part of the transaction whose calls were executed after the workload capture is started will be replayed. To avoid this problem, consider restarting the database in restricted mode using <code>STARTUP RESTRICT</code> before starting the workload capture. Once the workload capture begins, the database will automatically switch to unrestricted mode and normal operations can continue while the workload is being captured. For more information about restarting the database before capturing a workload, see <span class="q">&#34;<a href="GUID-77DFEBE7-4FF9-4CB4-97B2-8501ECB8E7E4.htm">Restarting the Database</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">To start a workload capture:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use the <a id="d22443e111" class="indexterm-anchor"></a><code>START_CAPTURE</code> procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_WORKLOAD_CAPTURE.START_CAPTURE (name =&gt; &#39;dec10_peak&#39;, 
                           dir =&gt; &#39;dec10&#39;,
                           duration =&gt; 600,
                           capture_sts =&gt; TRUE,
                           sts_cap_interval =&gt; 300);
END;
/
</pre>
<p>In this example, a workload named <code>dec10_peak</code> will be captured for 600 seconds and stored in the file system defined by the database directory object named <code>dec10</code>. A SQL tuning set will also be captured in parallel with the workload capture.</p>
<p>The <code>START_CAPTURE</code> procedure in this example uses the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code>name</code> required parameter specifies the name of the workload that will be captured.</p>
</li>
<li>
<p>The <code>dir</code> required parameter specifies a directory object pointing to the directory where the captured workload will be stored.</p>
</li>
<li>
<p>The <code>duration</code> parameter specifies the number of seconds before the workload capture will end. If a value is not specified, the workload capture will continue until the <code>FINISH_CAPTURE</code> procedure is called.</p>
</li>
<li>
<p>The <code>capture_sts</code> parameter specifies whether to capture a SQL tuning set in parallel with the workload capture. If this parameter is set to <code>TRUE</code>, you can capture a SQL tuning set during workload capture, then capture another SQL tuning set during workload replay, and use SQL Performance Analyzer to compare the SQL tuning sets without having to re-execute the SQL statements. This enables you to obtain a SQL Performance Analyzer report and compare the SQL performance&mdash;before and after the change&mdash;while running Database Replay. You can also export the resulting SQL tuning set with its AWR data using the <code>EXPORT_AWR</code> procedure, as described in <span class="q">&#34;<a href="GUID-9607209D-210B-4371-80F7-5536509F4FFB.htm">Exporting AWR Data for Workload Capture</a>&#34;</span>.</p>
<p>This feature is not supported for Oracle RAC. Workload capture filters that are defined using <code>DBMS_WORKLOAD_CAPTURE</code> do not apply to the SQL tuning set capture. The default value for this parameter is <code>FALSE</code>.</p>
</li>
<li>
<p>The <code>sts_cap_interval</code> parameter specifies the duration of the SQL tuning set capture from the cursor cache in seconds. The default value is 300. Setting the value of this parameter below the default value may cause additional overhead with some workloads and is not recommended.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2747">
<tr>
<td class="cellalignment2754">
<table class="cellalignment2752">
<tr>
<td class="cellalignment2751"><a href="GUID-4F96F1D0-475F-49ED-A3FD-C29C773EECBE.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2751"><a href="GUID-B6EE18AF-453C-4B67-975A-67D2F8773086.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2756">
<table class="cellalignment2750">
<tr>
<td class="cellalignment2751"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2751"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2751"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2751"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2751"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2751"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>