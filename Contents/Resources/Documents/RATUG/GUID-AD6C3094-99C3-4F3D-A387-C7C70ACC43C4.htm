<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88081"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Upgrading%20from%20Oracle%20Database%2010g%20Release%202%20and%20Newer%20Releases"></a><title>Upgrading from Oracle Database 10g Release 2 and Newer Releases</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-24T11:32:44Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Testing Guide"/>
<meta name="dcterms.identifier" content="E55028-05"/>
<meta name="dcterms.isVersionOf" content="RATUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-C0CE4A85-70A6-40F7-A6EB-83612EBA8916.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-8C91E358-5D93-4B6C-861F-50D506B621AE.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55028-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-AD6C3094-99C3-4F3D-A387-C7C70ACC43C4"></a> <span id="PAGE" style="display:none;">74/309</span> <!-- End Header -->
<a id="RATUG221"></a>
<h1 id="RATUG-GUID-AD6C3094-99C3-4F3D-A387-C7C70ACC43C4" class="sect1"><span class="enumeration_section">8.2</span> Upgrading from Oracle Database 10<span class="italic">g</span> Release 2 and Newer Releases</h1>
<div>
<div class="section">
<p>You can use SQL Performance Analyzer to test the impact on SQL response time of a database upgrade from Oracle Database 10<span class="italic">g</span> Release 2 or a newer release to any later release by capturing a SQL tuning set on the production system, then executing it twice remotely over a database link on a test system&mdash;first to create a pre-change SQL trial, then again to create a post-change SQL trial.</p>
<p>Before the database upgrade can be tested, ensure that the following conditions are met:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a id="d16865e89" class="indexterm-anchor"></a>The <a id="d16865e92" class="indexterm-anchor"></a>production system which you are upgrading from is running Oracle Database 10<span class="italic">g</span> Release 2 or a newer release.</p>
</li>
<li>
<p>Initially, the <a id="d16865e103" class="indexterm-anchor"></a>test system should also be running the same release of Oracle Database.</p>
</li>
<li>
<p>The test system must contain an exact copy of the production data found on the production system.</p>
</li>
<li>
<p>The hardware configuration must be as similar to the production system as possible.</p>
</li>
</ul>
<p>You will also need to set up a separate SQL Performance Analyzer <a id="d16865e116" class="indexterm-anchor"></a>system running Oracle Database 11<span class="italic">g</span> Release 2. You will be using this system to run SQL Performance Analyzer. Neither your production data or schema need to be available on this system, since the SQL tuning set will be built using statistics stored in the SQL trace files from the production system. SQL Performance Analyzer tasks will be executed remotely on the test system to generate the execution plan and statistics for the SQL trial over a database link that you specify. The database link must be a public database link that connects to a user with the <code>EXECUTE</code> privilege for the <code>DBMS_SQLPA</code> package and the <code>ADVISOR</code> privilege on the test system. You should also drop any existing <code>PLAN_TABLE</code> from the user&#39;s schema on the test system.</p>
<p>Once the upgrade environment is configured as described, perform the steps as described in the following procedure to use SQL Performance Analyzer in a database upgrade from Oracle Database 10<span class="italic">g</span> Release 2 or a newer release to any later release.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>On the production system, capture the SQL workload that you intend to analyze and store it in a SQL tuning set, as described in <span class="q">&#34;<a href="GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4.htm">Capturing the SQL Workload</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Set up the test system so that it matches the production environment as closely as possible, as described in <span class="q">&#34;<a href="GUID-15E99CE8-282C-4A7E-BD3B-B7C2B93DE0C1.htm">Setting Up the Test System</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Transport the SQL tuning set to the SQL Performance Analyzer system.</span>
<div>
<p>For information about transporting SQL tuning sets using:</p>
<ul style="list-style-type: disc;">
<li>
<p>Oracle Enterprise Manager, see <a class="olink TDPPT159" target="_blank" href="../TDPPT/tdppt_sqltune.htm#TDPPT159"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a></p>
</li>
<li>
<p>APIs, see <a class="olink TGSQL516" target="_blank" href="../TGSQL/tgsql_sts.htm#TGSQL516"><span class="italic">Oracle Database SQL Tuning Guide</span></a></p>
</li>
</ul>
</div>
</li>
<li class="stepexpand"><span>On the SQL Performance Analyzer system, create a <a id="d16865e183" class="indexterm-anchor"></a>SQL Performance Analyzer task using the SQL tuning set as its input source.</span>
<div>
<p>Remotely test execute the SQL statements in the SQL tuning set on the test system over a database link to build a pre-upgrade <a id="d16865e193" class="indexterm-anchor"></a>SQL trial that will be used as a baseline for comparison, as described in <span class="q">&#34;<a href="GUID-8C91E358-5D93-4B6C-861F-50D506B621AE.htm">Testing Database Upgrades from Oracle Database 10g Release 2 and Newer Releases</a>&#34;</span>.</p>
</div>
</li>
<li class="stepexpand"><span>Upgrade the test system.</span></li>
<li class="stepexpand"><span>Remotely test execute the SQL statements a second time on the upgraded test system over a database link to build a post-upgrade <a id="d16865e211" class="indexterm-anchor"></a>SQL trial, as described in <span class="q">&#34;<a href="GUID-8C91E358-5D93-4B6C-861F-50D506B621AE.htm">Testing Database Upgrades from Oracle Database 10g Release 2 and Newer Releases</a>&#34;</span>.</span></li>
<li class="stepexpand"><span>Compare <a id="d16865e226" class="indexterm-anchor"></a>SQL performance and fix <a id="d16865e231" class="indexterm-anchor"></a>regressed SQL.</span>
<div>
<p>SQL Performance Analyzer compares the performance of SQL statements read from the SQL tuning set during the pre-upgrade SQL trial to those captured from the remote test execution during the post-upgrade SQL trial. A report is produced to identify any changes in execution plans or performance of the SQL statements.</p>
<p>If the report reveals any regressed SQL statements, you can make further changes to fix the regressed SQL, as described in <span class="q">&#34;<a href="GUID-DAF2B96B-20A0-408D-BDD7-364AC1113614.htm">Tuning Regressed SQL Statements After Testing a Database Upgrade</a>&#34;</span>.</p>
<p>Repeat the process of executing the SQL tuning set and comparing its performance to a previous execution to test any changes made until you are satisfied with the outcome of the analysis.</p>
</div>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2747">
<tr>
<td class="cellalignment2754">
<table class="cellalignment2752">
<tr>
<td class="cellalignment2751"><a href="GUID-C0CE4A85-70A6-40F7-A6EB-83612EBA8916.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2751"><a href="GUID-8C91E358-5D93-4B6C-861F-50D506B621AE.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2756">
<table class="cellalignment2750">
<tr>
<td class="cellalignment2751"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2751"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2751"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2751"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2751"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2751"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>