<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-87981"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Upgrading%20from%20Oracle9i%20Database%20and%20Oracle%20Database%2010g%20Release%201"></a><title>Upgrading from Oracle9i Database and Oracle Database 10g Release 1</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-24T11:32:44Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Testing Guide"/>
<meta name="dcterms.identifier" content="E55028-05"/>
<meta name="dcterms.isVersionOf" content="RATUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-41A30909-3D5B-4A53-A757-B3497498D36B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-216BB723-4FC6-4AD6-A641-79BE9AD9F819.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55028-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-54F449B7-987E-496E-AD15-97F0B6A70C66"></a> <span id="PAGE" style="display:none;">67/309</span> <!-- End Header -->
<a id="RATUG249"></a><a id="RATUG211"></a>
<h1 id="RATUG-GUID-54F449B7-987E-496E-AD15-97F0B6A70C66" class="sect1"><span class="enumeration_section">8.1</span> Upgrading from Oracle9<span class="italic">i</span> Database and Oracle Database 10<span class="italic">g</span> Release 1</h1>
<div>
<p>As illustrated in <a href="GUID-54F449B7-987E-496E-AD15-97F0B6A70C66.htm#GUID-54F449B7-987E-496E-AD15-97F0B6A70C66__CIAHCDCE">Figure 8-1</a>, SQL Performance Analyzer supports testing database upgrades of Oracle9<span class="italic">i</span> Database and Oracle Database 10<span class="italic">g</span> Release 1 to Oracle Database 10g Release 2 and newer releases by:</p>
<ul style="list-style-type: disc;">
<li>
<p>Building a SQL tuning set from SQL trace files captured on the production system</p>
</li>
<li>
<p>Executing the SQL tuning set on the upgraded database remotely over a database link</p>
</li>
<li>
<p>Comparing the results to those captured on the production system</p>
</li>
</ul>
<p>Because SQL Performance Analyzer only accepts a set of SQL statements stored in a SQL tuning set as its <a id="d14874e103" class="indexterm-anchor"></a>input source, and SQL tuning sets are not supported for Oracle9<span class="italic">i</span> Database, a SQL tuning set must be constructed so that it can be used as an input source for SQL Performance Analyzer if you are upgrading from Oracle9<span class="italic">i</span> Database.</p>
<div class="figure" id="GUID-54F449B7-987E-496E-AD15-97F0B6A70C66__CIAHCDCE">
<p class="titleinfigure">Figure 8-1 SQL Performance Analyzer Workflow for Database Upgrade from Oracle9i to Oracle Database 10g Release 2</p>
<img width="582" height="366" src="img/GUID-47E4A5C3-1624-426A-9FE0-B8AD2E214A92-default.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows"/><br/>
<a href="img_text/GUID-47E4A5C3-1624-426A-9FE0-B8AD2E214A92-print.htm">Description of &#34;Figure 8-1 SQL Performance Analyzer Workflow for Database Upgrade from Oracle9i to Oracle Database 10g Release 2&#34;</a></div>
<!-- class="figure" -->
<p>Before the database upgrade can be tested, ensure that the following conditions are met:</p>
<ul style="list-style-type: disc;">
<li>
<p><a id="d14874e124" class="indexterm-anchor"></a>The <a id="d14874e127" class="indexterm-anchor"></a>production system which you are upgrading from is running Oracle9<span class="italic">i</span> or Oracle Database 10<span class="italic">g</span> Release 1.</p>
</li>
<li>
<p>The <a id="d14874e141" class="indexterm-anchor"></a>test system which you are upgrading to is running Oracle Database 10<span class="italic">g</span> Release 2 or a newer release.</p>
<p>The database version can be release 10.2.0.2 or higher. If you are upgrading to Oracle Database 10<span class="italic">g</span> release 10.2.0.2, 10.2.0.3, or 10.2.0.4, you will also need to install a one-off patch before proceeding.</p>
</li>
<li>
<p>The test system must resemble the production system as closely as possible because the performance on both systems will be compared to each other.</p>
</li>
<li>
<p>The hardware configurations on both systems must also be as similar as possible.</p>
</li>
</ul>
<p>You will also need to set up a separate SQL Performance Analyzer <a id="d14874e162" class="indexterm-anchor"></a>system running Oracle Database 11<span class="italic">g</span> Release 2. You will be using this system to build a SQL tuning set and to run SQL Performance Analyzer. Neither your production data or schema need to be available on this system, since the SQL tuning set will be built using statistics stored in the SQL trace files from the production system. SQL Performance Analyzer tasks will be executed remotely on the test system to generate the execution plan and statistics for the SQL trial over a database link that you specify. The database link must be a public database link that connects to a user with the <code>EXECUTE</code> privilege for the <code>DBMS_SQLPA</code> package and the <code>ADVISOR</code> privilege on the test system. You should also drop any existing <code>PLAN_TABLE</code> from the user&#39;s schema on the test system.</p>
<p>Once the upgrade environment is configured as described, perform the steps as described in the following procedure to use SQL Performance Analyzer in a database upgrade from Oracle9<span class="italic">i</span> or Oracle Database 10<span class="italic">g</span> Release 1 to a newer release.</p>
<ol>
<li>
<p>Enable the <a id="d14874e195" class="indexterm-anchor"></a>SQL Trace facility on the production system, as described in <span class="q">&#34;<a href="GUID-216BB723-4FC6-4AD6-A641-79BE9AD9F819.htm">Enabling SQL Trace on the Production System</a>&#34;</span>.</p>
<p>To minimize the performance impact on the production system and still be able to fully capture a representative set of SQL statements, consider enabling SQL Trace for only a subset of the sessions, for as long as required, to capture all important SQL statements at least once.</p>
</li>
<li>
<p>On the production system, create a <a id="d14874e210" class="indexterm-anchor"></a>mapping table, as described in <span class="q">&#34;<a href="GUID-EB1B032E-CFF2-4057-B9BE-02AF45383316.htm">Creating a Mapping Table</a>&#34;</span>.</p>
<p>This mapping table will be used to convert the user and object identifier numbers in the SQL trace files to their string equivalents.</p>
</li>
<li>
<p>Move the <a id="d14874e225" class="indexterm-anchor"></a>SQL trace files and the <a id="d14874e230" class="indexterm-anchor"></a>mapping table from the production system to the SQL Performance Analyzer system, as described in <span class="q">&#34;<a href="GUID-EB1B032E-CFF2-4057-B9BE-02AF45383316.htm">Creating a Mapping Table</a>&#34;</span>.</p>
</li>
<li>
<p>On the SQL Performance Analyzer system, construct a <a id="d14874e243" class="indexterm-anchor"></a>SQL tuning set using the SQL trace files, as described in <span class="q">&#34;<a href="GUID-E6298851-9BF4-4B96-8F93-D5483278F8DA.htm">Building a SQL Tuning Set</a>&#34;</span>.</p>
<p>The SQL tuning set will contain the SQL statements captured in the SQL trace files, along with their relevant execution context and statistics.</p>
</li>
<li>
<p>On the SQL Performance Analyzer system, use SQL Performance Analyzer to create a <a id="d14874e258" class="indexterm-anchor"></a>SQL Performance Analyzer task and convert the contents in the <a id="d14874e265" class="indexterm-anchor"></a>SQL tuning set into a pre-upgrade <a id="d14874e270" class="indexterm-anchor"></a>SQL trial that will be used as a baseline for comparison, then remotely test execute the SQL statements on the test system over a database link to build a post-upgrade <a id="d14874e277" class="indexterm-anchor"></a>SQL trial, as described in <span class="q">&#34;<a href="GUID-5B437942-8CF6-4F6C-864B-996BB61B4C26.htm">Testing Database Upgrades from Oracle9i Database and Oracle Database 10g Release 1</a>&#34;</span>.</p>
</li>
<li>
<p>Compare <a id="d14874e292" class="indexterm-anchor"></a>SQL performance and fix <a id="d14874e297" class="indexterm-anchor"></a>regressed SQL.</p>
<p>SQL Performance Analyzer compares the performance of SQL statements read from the SQL tuning set during the pre-upgrade SQL trial to those captured from the remote test execution during the post-upgrade SQL trial. A report is produced to identify any changes in execution plans or performance of the SQL statements.</p>
<p>If the report reveals any regressed SQL statements, you can make further changes to fix the regressed SQL, as described in <span class="q">&#34;<a href="GUID-DAF2B96B-20A0-408D-BDD7-364AC1113614.htm">Tuning Regressed SQL Statements After Testing a Database Upgrade</a>&#34;</span>.</p>
<p>Repeat the process of executing the SQL tuning set and comparing its performance to a previous execution to test any changes made until you are satisfied with the outcome of the analysis.</p>
</li>
</ol>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2747">
<tr>
<td class="cellalignment2754">
<table class="cellalignment2752">
<tr>
<td class="cellalignment2751"><a href="GUID-41A30909-3D5B-4A53-A757-B3497498D36B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2751"><a href="GUID-216BB723-4FC6-4AD6-A641-79BE9AD9F819.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2756">
<table class="cellalignment2750">
<tr>
<td class="cellalignment2751"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2751"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2751"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2751"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2751"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2751"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>