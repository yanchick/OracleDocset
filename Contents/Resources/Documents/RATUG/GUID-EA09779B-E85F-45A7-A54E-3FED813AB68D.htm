<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88147"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Setting%20Workload%20Replay%20Options"></a><title>Setting Workload Replay Options</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-24T11:32:44Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Testing Guide"/>
<meta name="dcterms.identifier" content="E55028-05"/>
<meta name="dcterms.isVersionOf" content="RATUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55028-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D"></a> <span id="PAGE" style="display:none;">146/309</span> <!-- End Header -->
<a id="RATUG154"></a>
<h1 id="RATUG-GUID-EA09779B-E85F-45A7-A54E-3FED813AB68D" class="sect1"><span class="enumeration_section">12.6.4</span> Setting Workload Replay Options</h1>
<div>
<div class="section">
<p>After the replay data is initialized, and connections and users are remapped, you need to prepare the database for <a id="d28213e77" class="indexterm-anchor"></a>workload replay. For information about workload replay preparation, see <span class="q">&#34;<a href="GUID-EA0C0608-0B0C-4D2B-B6A4-2B8FFC548F8F.htm">Steps for Replaying a Database Workload</a>&#34;</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">To prepare workload replay on the replay system:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use the <a id="d28213e95" class="indexterm-anchor"></a><code>PREPARE_REPLAY</code> procedure:</p>
<pre dir="ltr">BEGIN
  DBMS_WORKLOAD_REPLAY.PREPARE_REPLAY (synchronization =&gt; &#39;OBJECT_ID&#39;,
                           capture_sts =&gt; TRUE,
                           sts_cap_interval =&gt; 300);
END;
/
</pre>
<p>In this example, the <code>PREPARE_REPLAY</code> procedure prepares a replay that has been previously initialized. A SQL tuning set will also be captured in parallel with the workload replay.</p>
<p>The <code>PREPARE_REPLAY</code> procedure uses the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p>The <code>synchronization</code> required parameter determines if synchronization will be used during workload replay.</p>
<p>If this parameter is set to <code>OBJECT_ID</code> (the default value), all replay actions will be executed only after all relevant <code>COMMIT</code> actions have completed. Relevant <code>COMMIT</code> actions must meet the following criteria:</p>
<ul style="list-style-type: disc;">
<li>
<p>Issued before the given action in the workload capture</p>
</li>
<li>
<p>Modified at least one of the database objects for which the given action is referencing, either implicitly or explicitly</p>
</li>
</ul>
<p>Setting this parameter to <code>OBJECT_ID</code> allows for more concurrency during workload replays for <code>COMMIT</code> actions that do not reference the same database objects during workload capture.</p>
<p>If this parameter is set to <code>SCN</code>, the <code>COMMIT</code> order in the captured workload will be preserved during replay and all replay actions will be executed only after all dependent <code>COMMIT</code> actions have completed.</p>
<p>You can disable this option by setting the parameter to <code>OFF</code>, but the replay will likely yield significant replay divergence. However, this may be desirable if the workload consists primarily of independent transactions, and divergence during unsynchronized replay is acceptable.</p>
</li>
<li>
<p>The <code>connect_time_scale</code> parameter scales the elapsed time from when the workload capture started to when the session connects with the specified value and is interpreted as a % value. Use this parameter to increase or decrease the number of concurrent users during replay. The default value is 100.</p>
</li>
<li>
<p>The <code>think_time_scale</code> parameter scales the elapsed time between two successive user calls from the same session and is interpreted as a % value. Setting this parameter to 0 will send user calls to the database as fast as possible during replay. The default value is 100.</p>
</li>
<li>
<p>The <code>think_time_auto_correct</code> parameter corrects the think time (based on the <code>think_time_scale</code> parameter) between calls when user calls take longer to complete during replay than during capture. This parameter can be set to either <code>TRUE</code> or <code>FALSE</code>. Setting this parameter to <code>TRUE</code> reduces the think time if the workload replay is taking longer than the workload capture. The default value is <code>TRUE</code>.</p>
</li>
<li>
<p>The <code>scale_up_multiplier</code> parameter defines the number of times the workload is scaled up during replay. Each captured session will be replayed concurrently for as many times as specified by this parameter. However, only one session in each set of identical replay sessions will execute both queries and updates. The rest of the sessions will only execute queries.</p>
</li>
<li>
<p>The <code>capture_sts</code> parameter specifies whether to capture a SQL tuning set in parallel with the workload replay. If this parameter is set to <code>TRUE</code>, you can capture a SQL tuning set during workload replay and use SQL Performance Analyzer to compare it to another SQL tuning set without having to re-execute the SQL statements. This enables you to obtain a SQL Performance Analyzer report and compare the SQL performance&mdash;before and after the change&mdash;while running Database Replay. You can also export the resulting SQL tuning set with its AWR data using the <code>EXPORT_AWR</code> procedure, as described in <span class="q">&#34;<a href="GUID-03B5F50F-40C2-4183-8E07-2B64319356FA.htm">Exporting AWR Data for Workload Replay</a>&#34;</span>.</p>
<p>This feature is not supported for Oracle RAC. Workload replay filters that are defined using <code>DBMS_WORKLOAD_REPLAY</code> do not apply to the SQL tuning set capture. The default value for this parameter is <code>FALSE</code>.</p>
</li>
<li>
<p>The <code>sts_cap_interval</code> parameter specifies the duration of the SQL tuning set capture from the cursor cache in seconds. The default value is 300. Setting the value of this parameter below the default value may cause additional overhead with some workloads and is not recommended.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p>For more information about setting these parameters, see <span class="q">&#34;<a href="GUID-289F573A-9C83-4A29-A1D4-323705E8293D.htm">Specifying Replay Options</a>&#34;</span>.</p>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2747">
<tr>
<td class="cellalignment2754">
<table class="cellalignment2752">
<tr>
<td class="cellalignment2751"><a href="GUID-C9CBE72D-5948-4D4F-962B-96108B87507E.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2751"><a href="GUID-434C455E-3BA3-4BF6-8DE8-4E5FACBABDAF.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2756">
<table class="cellalignment2750">
<tr>
<td class="cellalignment2751"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2751"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2751"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2751"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2751"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2751"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>