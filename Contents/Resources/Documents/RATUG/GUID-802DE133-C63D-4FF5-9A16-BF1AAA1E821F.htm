<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-88025"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Providing%20a%20Masking%20Format%20to%20Define%20a%20Column"></a><title>Providing a Masking Format to Define a Column</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-01-24T11:32:44Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database Testing Guide"/>
<meta name="dcterms.identifier" content="E55028-05"/>
<meta name="dcterms.isVersionOf" content="RATUG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-49ABFF59-1776-4798-A866-CA73D5103045.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E55028-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-802DE133-C63D-4FF5-9A16-BF1AAA1E821F"></a> <span id="PAGE" style="display:none;">286/309</span> <!-- End Header -->
<a id="RATUG4028"></a>
<h1 id="RATUG-GUID-802DE133-C63D-4FF5-9A16-BF1AAA1E821F" class="sect1"><span class="enumeration_section">19.5.3</span> Providing a Masking Format to Define a Column</h1>
<div>
<p>When you create a masking definition (<span class="q">&#34;<a href="GUID-282BC176-1E16-4285-99DE-71C7909775F6.htm">Masking with an Application Data Model and Workloads</a>&#34;</span>), you will be either importing a format or selecting one from the available types in the Define Column Mask page. <a id="d50068e81" class="indexterm-anchor"></a><a id="d50068e85" class="indexterm-anchor"></a>Format entry options are as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Array List</span></p>
<p>The data type of each value in the list must be compatible with that of the masked column. Uniqueness must be guaranteed if needed. For example, for a unique key column that already has 10 distinct values, the array list should also contain at least 10 distinct values.</p>
</li>
<li>
<p><span class="bold">Delete</span></p>
<p>Deletes the specified rows as identified by the condition clauses. If a column includes a delete format for one of its conditions, a foreign key constraint or a dependent column cannot refer to the table.</p>
</li>
<li>
<p><span class="bold">Encrypt</span></p>
<p>Encrypts column data by specifying a regular expression. The column values in all the rows must match the regular expression. This format can be used to mask data consistently across databases. That is, for a given value it always generates the same masked value.</p>
<p>For example, the regular expression [(][1-9][0-9]{2}[)][_][0-9]{3}[-][0-9]{4} generates U.S. phone numbers such as (123) 456-7890.</p>
<p>This format supports a subset of the regular expression language. It supports encrypting strings of fixed widths. However, it does not support * or + syntax of regular expressions.</p>
<p>If a value does not match the format specified, the encrypted value may no longer produce one-to-one mappings. All non-confirming values are mapped to a single encrypted value, thereby producing a many-to-one mapping.</p>
</li>
<li>
<p><span class="bold">Fixed Number</span></p>
<p>The type of column applicable to this entry is a <code>NUMBER</code> column or a <code>STRING</code> column. For example, if you mask a column that has a social security number, one of the entries can be <span>Fixed Number 900</span>. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Fixed String</span></p>
<p>The type of column applicable to this entry is a <code>STRING</code> column. For example, if you mask a column that has a License Plate Number, one of the entries can be Fixed String CA. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Null Value</span></p>
<p>Masks the column using a value of <code>NULL</code>. The column must be nullable.</p>
</li>
<li>
<p><span class="bold">Post-Processing Function</span></p>
<p>This is a special function that you can apply to the mask value that the masking engine generates. This function takes the mask value as input and returns the actual mask value to be used for masking.</p>
<p>The post-processing function is called after the mask value is generated. You can use it, for instance, to add commas or dollar signs to a value. For example, if a mask value is a number such as 12000, the post processing function can modify this to $12,000. Another use is for adding checksums or special encodings for the mask value that is produced.</p>
<p>In the following statement:</p>
<pre dir="ltr">Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contains the value <code>mask_value</code> 3rd argument.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>mask_value</code> is the value being masked.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Preserve Original Data</span></p>
<p>Retains the original values for rows that match the specified condition clause. This is used in cases where some rows that match a condition do not need to be masked.</p>
</li>
<li>
<p><span class="bold">Random Dates</span></p>
<p>The uniqueness of the Date column is not maintained after masking. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Decimal Numbers</span></p>
<p>If used as part of a mixed random string, these have limited usage for generating unique values. This masking format generates unique values within the specified range. For example, a starting value of 5.5 and ending value of 9.99 generates a decimal number ranging from 5.5 to 9.99, both inclusive. This masking format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Digits</span></p>
<p>This format generates unique values within the specified range. For example, for a random digit with a length of [5,5], an integer between [0, 99999] is randomly generated, left padded with &#39;0&#39;s to satisfy the length and uniqueness requirement. This is a complementary type of random number, which will not be padded. When using random digits, the random digit pads to the appropriate length in a string. It does not pad when used for a number column. This format is combinable.</p>
<p>Data masking ensures that the generated values are unique, but if you do not specify enough digits, you could run out of unique values in that range.</p>
</li>
<li>
<p><span class="bold">Random Numbers</span></p>
<p>If used as part of a mixed random string, these have limited usage for generating unique values. This format generates unique values within the specified range. For example, a starting value of 100 and ending value of 200 generates an integer number ranging from 100 to 200, both inclusive. Note that Oracle Enterprise Manager release 10.2.0.4.0 does not support float numbers. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Random Strings</span></p>
<p>This format generates unique values within the specified range. For example, a starting length of 2 and ending length of 6 generates a random string of 2 - 6 characters in length. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Regular Expression</span></p>
<p>This format enables you to use regular expressions to search for sensitive data in LOBs (BLOB, CLOB, NCLOB) and replace the data with a fixed string, a fixed number, null, or SQL Expression. Use rules to search for multiple strings within a LOB.</p>
<p>Examples:</p>
<ul style="list-style-type: disc;">
<li>
<p>Use the regular expression <code>[0-9]{3}[.][0-9]{3}[.][0-9]{4}</code> to match strings of the format <span class="italic">nnn.nnn.nnnn</span> and replace with a masked value, for example, ***.***.****</p>
</li>
<li>
<p>Use the regular expression <code>&lt;SALARY&gt;[0-9]{2,6}&lt;/SALARY&gt;</code> to zero out salary information by replacing with <code>&lt;SALARY&gt;0&lt;/SALARY&gt;</code></p>
</li>
<li>
<p>Use the regular expression <code>[A-Z]+@[A-Z]+\.[A-Z]{2,4}</code> to mask e-mail addresses by replacing with john.doe@acme.com</p>
</li>
</ul>
<p>You can also use this format with data type VARCHAR2 to mask part of a string.</p>
</li>
<li>
<p><span class="bold">Shuffle</span></p>
<p>This format randomly shuffles the original column data. It maintains data distribution except when a column is conditionally masked and its values are not unique.</p>
<p>For more information, see <span class="q">&#34;<a href="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A.htm">Using the Shuffle Format</a>&#34;</span>.</p>
</li>
<li>
<p><span class="bold">Substitute</span></p>
<p>This format uses a hash-based substitution for the original value and always yields the same mask value for any given input value. Specify the substitution masking table and column. This format has the following properties:</p>
<ul style="list-style-type: disc;">
<li>
<p>The masked data is not reversible. That is, this format is not vulnerable to external security breaches because the original value is replaced, so it is not possible to retrieve the original value from the mask value.</p>
</li>
<li>
<p>Masking multiple times with a hash substitute across different databases yields the same mask value. This characteristic is valid across multiple databases or multiple runs assuming that the same substitution values are used in the two runs. That is, the actual rows and values in the substitution table do not change. For example, suppose the two values Joe and Tom were masked to Henry and Peter. When you repeat the same mask on another database using the same substitution table, if there were Bob and Tom, they might be replaced with Louise and Peter. Notice that even though the two runs have different data, Tom is always replaced with Peter.</p>
</li>
<li>
<p>This format does not generate uniqueness.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">SQL Expression</span></p>
<p>This masking format enables you to enter a SQL Expression for masking a column. Data masking uses this expression to generate masked values to replace the original values. You cannot combine a column using this masking format type with other masking format types, such as Random Numbers or Random Strings.</p>
<p>The SQL Expression can consist of one or more values, operators, and SQL functions that evaluates to a value. It can also contain substitution columns (columns from the same table as the masked column). You should specify substitution columns within percent signs (%). Use SQL Expressions with <code>dbms_lob</code> and other user-defined functions for LOB (BLOB, CLOB, NCLOB) masking.</p>
<p>Examples:</p>
<ul style="list-style-type: disc;">
<li>
<p><code>dbms_random.string(&#39;u&#39;, 8) || &#39;@company.com&#39;</code></p>
<p>Generates random e-mail addresses.</p>
</li>
<li>
<p><code>%first_name% || &#39;.&#39; || %last_name% || &#39;@company.com&#39;</code></p>
<p>Generates e-mail addresses using <code>first_name</code> and <code>last_name</code> column values. In this example, <code>first_name</code> and <code>last_name</code> are the substitution columns.</p>
</li>
<li>
<p><span class="bold">CLOB Masking</span></p>
<p><code>dbms_lob.empty_clob()</code></p>
<p>Empties the CLOB.</p>
<p><code>custom_mask_clob(%CLOB_COL%)</code></p>
<p>Applies the custom mask function to the clob column <code>CLOB_COL</code>.</p>
</li>
<li>
<p><span class="bold">Conditional Mask</span></p>
<p><code>(case when %PARTY_TYPE%=&#39;PERSON&#39; then %PERSON_FIRST_NAME%|| &#39; &#39; ||%PERSON_LAST_NAME% else (select dbms_random.string(&#39;U&#39;, 10) from dual) end)</code></p>
<p>Columns within %% are present in the same table. The expression masks <code>PERSON_FULL_NAME</code> with the first and last name; otherwise, the mask is a random string.</p>
</li>
<li>
<p><span class="bold">Substitution Mask</span></p>
<p><code>select MASK_ZIPCODE from data_mask.DATA_MASK_ADDR where ADDR_SEQ = ora_hash( %ZIPCODE% , 1000, 1234)</code></p>
<p>Select 1000 rows in the substitution table <code>data_mask.DATA_MASK_ADDR</code>. Mask <code>%ZIPCODE%</code> with the <code>MASK_ZIPCODE</code> column in the substitution table. The row selected is dependent on <code>ora_hash</code> and is deterministic in this case. Selection is random if <code>dbms_random</code> procedures are used.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Substitute</span></p>
<p>This format uses a hash-based substitution for the original value and always yields the same mask value for any given input value. Specify the substitution masking table and column. This format has the following properties:</p>
<ul style="list-style-type: disc;">
<li>
<p>The masked data is not reversible. That is, this format is not vulnerable to external security breaches, because the original value is replaced, so it is not possible to retrieve the original value from the mask value.</p>
</li>
<li>
<p>Masking multiple times with a hash substitute across different databases yields the same mask value. This characteristic is valid across multiple databases or multiple runs assuming that the same substitution values are used in the two runs. That is, the actual rows and values in the substitution table do not change. For example, suppose the two values Joe and Tom were masked to Henry and Peter. When you repeat the same mask on another database using the same substitution table, if there were Bob and Tom, they might be replaced with Louise and Peter. Notice that even though the two runs have different data, Tom is always replaced with Peter.</p>
</li>
<li>
<p>This format does not guarantee uniqueness.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Substring</span></p>
<p>Substring is similar to the database <code>substr</code> function. The start position can be either a positive or a negative integer. For example, if the original string is <code>abcd</code>, a substring with a start position of 2 and length of 3 generates a masked string of bcd. A substring with start position of -2 and length of 3 generates a masked string of cd. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Table Column</span></p>
<p>A table column enables you to select values from the chosen column as the replacement value or part thereof. The data type and uniqueness must be compatible. Otherwise, a failure occurs when the job runs. This format is combinable.</p>
</li>
<li>
<p><span class="bold">Truncate</span></p>
<p>Truncates all rows in a table. If one of the columns in a table is marked as truncated, the entire table is truncated, so no other mask formats can be specified for any of the other columns. If a table is being truncated, it cannot be referred to by a foreign key constraint or a dependent column.</p>
</li>
<li>
<p><span class="bold">User Defined Function</span></p>
<p>The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs.</p>
<p>In the following statement:</p>
<pre dir="ltr">Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) returns varchar2;
</pre>
<ul style="list-style-type: disc;">
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contain the value <code>original_value</code> 3rd argument.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>original_value</code> is the value being masked.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2747">
<tr>
<td class="cellalignment2754">
<table class="cellalignment2752">
<tr>
<td class="cellalignment2751"><a href="GUID-49ABFF59-1776-4798-A866-CA73D5103045.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2751"><a href="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2756">
<table class="cellalignment2750">
<tr>
<td class="cellalignment2751"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2751"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2751"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2751"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2751"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2751"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>