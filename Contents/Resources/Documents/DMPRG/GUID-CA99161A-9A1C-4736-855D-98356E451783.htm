<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-5738"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Cost-Sensitive%20Decision%20Making"></a><title>Cost-Sensitive Decision Making</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="dcterms.created" content="2017-05-15T23:58:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Data Mining User&#39;s Guide"/>
<meta name="dcterms.identifier" content="E53115-05"/>
<meta name="dcterms.isVersionOf" content="DMPRG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="GUID-AB32A94A-2D8C-4BBC-89B9-FD432F3A464B.htm" title="Previous" type="text/html"/>
<link rel="Next" href="GUID-08557F7B-217F-4C96-833B-D4AAA613D90B.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E53115-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CA99161A-9A1C-4736-855D-98356E451783"></a> <span id="PAGE" style="display:none;">97/141</span> <!-- End Header -->
<a id="DMPRG244"></a><a id="DMPRG842"></a><a id="DMPRG243"></a>
<h1 id="DMPRG-GUID-CA99161A-9A1C-4736-855D-98356E451783" class="sect1">Cost-Sensitive Decision Making</h1>
<div>
<p>Costs are <a id="d18700e20" class="indexterm-anchor"></a>user-specified numbers that bias classification. The algorithm uses positive numbers to penalize more expensive outcomes over less expensive outcomes. Higher numbers indicate higher costs. The algorithm uses negative numbers to favor more beneficial outcomes over less beneficial outcomes. Lower negative numbers indicate higher benefits.</p>
<p>All classification algorithms can use costs for scoring. You can specify the costs in a cost matrix table, or you can specify the costs inline when scoring. If you specify costs inline and the model also has an associated cost matrix, only the inline costs are used. The <code class="codeph">PREDICTION</code>, <code class="codeph">PREDICTION_SET</code>, and <code class="codeph">PREDICTION_COST</code> functions support costs.</p>
<p>Only the Decision Tree algorithm can use costs to bias the model build. If you want to create a Decision Tree model with costs, create a cost matrix table and provide its name in the <code class="codeph">CLAS_COST_TABLE_NAME</code> setting for the model. If you specify costs when building the model, the cost matrix used to create the model is used when scoring. If you want to use a different cost matrix table for scoring, first remove the existing cost matrix table then add the new one.</p>
<p>A sample <a id="d18700e41" class="indexterm-anchor"></a>cost matrix table is shown in the following table. The cost matrix specifies costs for a binary target. The matrix indicates that the algorithm must treat a misclassified 0 as twice as costly as a misclassified 1.</p>
<div class="tblformal" id="GUID-CA99161A-9A1C-4736-855D-98356E451783__BABECBFD">
<p class="titleintable">Table 6-1 Sample Cost Matrix</p>
<table class="cellalignment3333" title="Sample Cost Matrix" summary="Columns of a cost matrix table">
<thead>
<tr class="cellalignment3324">
<th class="cellalignment3359" id="d18700e55">ACTUAL_TARGET_VALUE</th>
<th class="cellalignment3394" id="d18700e58">PREDICTED_TARGET_VALUE</th>
<th class="cellalignment3373" id="d18700e61">COST</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3324">
<td class="cellalignment3363" id="d18700e66" headers="d18700e55">
<p>0</p>
</td>
<td class="cellalignment3395" headers="d18700e66 d18700e58">
<p>0</p>
</td>
<td class="cellalignment3376" headers="d18700e66 d18700e61">
<p>0</p>
</td>
</tr>
<tr class="cellalignment3324">
<td class="cellalignment3363" id="d18700e76" headers="d18700e55">
<p>0</p>
</td>
<td class="cellalignment3395" headers="d18700e76 d18700e58">
<p>1</p>
</td>
<td class="cellalignment3376" headers="d18700e76 d18700e61">
<p>2</p>
</td>
</tr>
<tr class="cellalignment3324">
<td class="cellalignment3363" id="d18700e86" headers="d18700e55">
<p>1</p>
</td>
<td class="cellalignment3395" headers="d18700e86 d18700e58">
<p>0</p>
</td>
<td class="cellalignment3376" headers="d18700e86 d18700e61">
<p>1</p>
</td>
</tr>
<tr class="cellalignment3324">
<td class="cellalignment3363" id="d18700e96" headers="d18700e55">
<p>1</p>
</td>
<td class="cellalignment3395" headers="d18700e96 d18700e58">
<p>1</p>
</td>
<td class="cellalignment3376" headers="d18700e96 d18700e61">
<p>0</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-CA99161A-9A1C-4736-855D-98356E451783__GUID-63B1871F-2EFD-458E-9756-832DD4762747">
<p class="notep1">See Also:</p>
<p><a href="GUID-022BC694-E8B9-4686-A6E5-583C06B04E57.htm#GUID-022BC694-E8B9-4686-A6E5-583C06B04E57__BABDBCBD">Example 1-1</a></p>
</div>
<div class="example" id="GUID-CA99161A-9A1C-4736-855D-98356E451783__GUID-A0ED8C05-A339-4A9D-90A0-8F65EA025C79">
<p class="titleinexample">Example 6-13 Sample Queries With Costs</p>
<p>The table <code class="codeph">nbmodel_costs</code> contains the cost matrix described in <a href="GUID-CA99161A-9A1C-4736-855D-98356E451783.htm#GUID-CA99161A-9A1C-4736-855D-98356E451783__BABECBFD" title="Columns of a cost matrix table">Table 6-1</a>.</p>
<pre dir="ltr">SELECT * from nbmodel_costs;

ACTUAL_TARGET_VALUE PREDICTED_TARGET_VALUE       COST
------------------- ---------------------- ----------
                  0                      0          0
                  0                      1          2
                  1                      0          1
                  1                      1          0
</pre>
<p>The following statement associates the cost matrix with a Naive Bayes model called <code class="codeph">nbmodel.</code></p>
<pre dir="ltr">BEGIN
  dbms_data_mining.add_cost_matrix(&#39;nbmodel&#39;, &#39;nbmodel_costs&#39;);
END;
/
</pre>
<p>The following query takes the cost matrix into account when scoring <code class="codeph">mining_data_apply_v</code>. The output is restricted to those rows where a prediction of 1 is less costly then a prediction of 0.</p>
<pre dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
        FROM mining_data_apply_v
        WHERE PREDICTION (nbmodel COST MODEL
       USING cust_marital_status, education, household_size) = 1
        GROUP BY cust_gender
        ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         25         38
M        208         43
</pre>
<p>You can specify costs inline when you invoke the scoring function. If you specify costs inline and the model also has an associated cost matrix, only the inline costs are used. The same query is shown below with different costs specified inline. Instead of the &#34;2&#34; shown in the cost matrix table (<a href="GUID-CA99161A-9A1C-4736-855D-98356E451783.htm#GUID-CA99161A-9A1C-4736-855D-98356E451783__BABECBFD" title="Columns of a cost matrix table">Table 6-1</a>), &#34;10&#34; is specified in the inline costs.</p>
<pre dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
        FROM mining_data_apply_v
        WHERE PREDICTION (nbmodel
                          COST (0,1) values ((0, 10),
                                             (1, 0))
                          USING cust_marital_status, education, household_size) = 1
        GROUP BY cust_gender
        ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         74         39
M        581         43
</pre>
<p>The same query based on probability instead of costs is shown below.</p>
<pre dir="ltr">SELECT cust_gender, COUNT(*) AS cnt, ROUND(AVG(age)) AS avg_age
        FROM mining_data_apply_v
        WHERE PREDICTION (nbmodel
           USING cust_marital_status, education, household_size) = 1
        GROUP BY cust_gender
        ORDER BY cust_gender;
 
C        CNT    AVG_AGE
- ---------- ----------
F         73         39
M        577         44
</pre></div>
<!-- class="example" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3323">
<tr>
<td class="cellalignment3330">
<table class="cellalignment3328">
<tr>
<td class="cellalignment3327"><a href="GUID-AB32A94A-2D8C-4BBC-89B9-FD432F3A464B.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3327"><a href="GUID-08557F7B-217F-4C96-833B-D4AAA613D90B.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3332">
<table class="cellalignment3326">
<tr>
<td class="cellalignment3327"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3327"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3327"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3327"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3327"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3327"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>