<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-47067"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Migrating%20from%20Oracle%20Database%2010g%20Release%202%20%2810.2%29%20DICOM%20Support"></a><title>Migrating from Oracle Database 10g Release 2 (10.2) DICOM Support</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="Presents reference and other information about using Oracle Database to store, manage, and retrieve DICOM content such as single-frame and multiframe images, waveforms, slices of 3-D volumes, video segments, and structured reports in an integrated fashion with other enterprise information. Oracle Multimedia DICOM extends Oracle Database reliability, availability, and data management to media objects in medical applications. Oracle Multimedia DICOM supports Digital Imaging and Communications in Medicine, the standard for medical images."/>
<meta name="dcterms.created" content="2014-07-31T9:38:57Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Multimedia DICOM Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17698-09"/>
<meta name="dcterms.isVersionOf" content="IMDCM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="dm_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="ap_dcm_demos.htm" title="Previous" type="text/html"/>
<link rel="Next" href="dm_glossary.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17698-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">30/32</span> <!-- End Header -->
<div id="IMDCM13000" class="appendix"><a id="CHDDHAJG"></a>
<h1 class="appendix"><span class="secnum">F</span> Migrating from Oracle Database 10<span class="italic">g</span> Release 2 (10.2) DICOM Support</h1>
<p>This appendix describes two options for migrating data and application code from the DICOM support (in ORDImage objects) that was introduced in Oracle Database 10<span class="italic">g</span> Release 2 (10.2) to the DICOM support that was introduced in Oracle Database 11<span class="italic">g</span> Release 1 (11.1). The following table summarizes the migration options:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" title="DICOM migration options" summary="List of migration options" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t2">Migration Option</th>
<th class="cellalignment2219" id="r1c2-t2">How It Works</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t2" headers="r1c1-t2">Option 1</td>
<td class="cellalignment2220" headers="r2c1-t2 r1c2-t2">Uses the data in the original ORDImage objects with the DICOM relational interface. This option has less impact on existing applications than Option 2. (See <a href="#CIAFFGGJ">Section F.2</a>.)</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t2" headers="r1c1-t2">Option 2</td>
<td class="cellalignment2220" headers="r3c1-t2 r1c2-t2">Uses a copy of the data with the ORDDicom object type interface. This option takes full advantage of the DICOM and SecureFiles LOBs features. (See <a href="#CIAIHAHF">Section F.3</a>.)</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>This appendix includes these sections:</p>
<ul>
<li>
<p><a href="#CIACDICE">Table Definition for Migration Examples</a></p>
</li>
<li>
<p><a href="#CIAFFGGJ">Option 1: Using the DICOM Relational Interface to Migrate Applications</a></p>
</li>
<li>
<p><a href="#CIAIHAHF">Option 2: Copying Data and Rewriting Applications for DICOM</a></p>
</li>
<li>
<p><a href="#CIAFAHIH">Choosing a Migration Option</a></p>
</li>
</ul>
<p class="subhead2"><a id="IMDCM13965"></a>DICOM Support in ORDImage Objects (Deprecated)</p>
<p>The DICOM support in ORDImage objects that was introduced in Oracle Database 10<span class="italic">g</span> Release 2 (10.2) is deprecated in Oracle Database 12<span class="italic">c</span> Release 1 (12.1), and may be desupported in a future release. Oracle recommends these actions:</p>
<ul>
<li>
<p>Write new medical imaging applications to use the DICOM support that was introduced in Oracle Database 11<span class="italic">g</span> Release 1 (11.1). This support is documented in this guide.</p>
</li>
<li>
<p>Migrate existing medical imaging applications from the DICOM support in ORDImage objects to the DICOM support that was introduced in Oracle Database 11<span class="italic">g</span> Release 1 (11.1). This appendix describes the migration process.</p>
</li>
</ul>
<p>See <a class="olink AIVUG80000" href="../AIVUG/ap_deprec.htm#AIVUG80000"><span class="italic">Oracle Multimedia Reference</span></a> for complete information about deprecated API components.</p>
<a id="CIACDICE"></a>
<div id="IMDCM13869" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">F.1</span> Table Definition for Migration Examples</h2>
<p>The examples in this appendix are based on the table <code>imageTable</code>. This table is defined as follows:</p>
<pre>imageTable( id           integer,
            image        ordsys.ordimage,
            thumb        ordsys.ordimage
</pre>
<p>where:</p>
<ul>
<li>
<p><code>image</code>: the name of the ORDImage column</p>
</li>
<li>
<p><code>thumb</code>: the name of the thumbnail image column</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIAFFGGJ"></a>
<div id="IMDCM13100" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">F.2</span> Option 1: Using the DICOM Relational Interface to Migrate Applications</h2>
<p>You can leave the data in the original ORDImage objects and use the DICOM relational<a id="sthref1097"></a> interface to access the DICOM functions. Using this migration option does not require copying of your existing DICOM content.</p>
<p>The disadvantages of using this migration option are:</p>
<ul>
<li>
<p>You are most likely not using the rearchitected and better performing SecureFiles LOBs.</p>
</li>
<li>
<p>You must rewrite the parts of your application that access Oracle Multimedia. (To take full advantage of the DICOM and SecureFiles LOBs features, use the migration option explained in <a href="#CIAIHAHF">Section F.3</a>.)</p>
</li>
</ul>
<p>To use this migration option:</p>
<ol>
<li>
<p>Leave your data in ORDImage columns.</p>
</li>
<li>
<p>Use the ORD_DICOM relational package to access DICOM features (see <a href="ch_rel_ref.htm#CHDGJBED">DICOM Relational Interface Reference</a>).</p>
</li>
</ol>
<p>The following code segment shows this migration process, using ORDImage objects to store DICOM content.</p>
<pre><span class="bold">execute ORD_DICOM.setDataModel;</span>
 
<span class="bold">alter table imageTable add (metadata sys.xmltype);</span>
 
declare
  img ordsys.ordimage;
  thb ordsys.ordimage;
  ctx raw(64) := null;
  <span class="bold">meta sys.xmltype;</span>
 
begin
 
  insert into imageTable (id, image, thumb)
         values (1, ordsys.ordimage(),
                          ordsys.ordimage())
          returning image, thumb into img, thb;
  img.importFrom(ctx, &#39;file&#39;,&#39;DICOMDIR&#39;,&#39;example.dcm&#39;);
 
  <span class="bold">ORD_DICOM.processCopy(img, &#39;fileFormat =jfif maxScale=100 100&#39;,</span>
                        <span class="bold">thb.source.localData);</span>
 
  <span class="bold">meta := ORD_DICOM.extractMetadata(img.getContent, &#39;ALL&#39;);</span>
 ...
</pre>
<p>In this example, the highlighted lines of code show the following operations:</p>
<ul>
<li>
<p><span class="bold">First line in bold:</span> Shows how to load the DICOM data model repository, which is used by the DICOM methods, procedures, and functions.</p>
</li>
<li>
<p><span class="bold">Second and third lines in bold:</span> Show how to modify the ORDImage table (<code>imageTable</code>) by adding a column to store DICOM metadata as an XML document.</p>
</li>
<li>
<p><span class="bold">Fourth and fifth lines in bold:</span> Show how to generate a JPEG thumbnail image from the original DICOM image, using the processCopy( ) procedure in the ORD_DICOM package (relational interface).</p>
</li>
<li>
<p><span class="bold">Last line in bold:</span> Shows how to extract all attributes of the embedded DICOM content, using the extractMetadata( ) function in the ORD_DICOM package (relational interface).</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CIAIHAHF"></a>
<div id="IMDCM13200" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">F.3</span> Option 2: Copying Data and Rewriting Applications for DICOM</h2>
<p>You can copy data into the ORDDicom object type and <a id="sthref1098"></a>rewrite your application to use ORDDicom methods. Using this migration option enables you to take full advantage of the features and performance of the ORDDicom object type and SecureFiles LOBs.</p>
<p>The disadvantages of using this migration option are:</p>
<ul>
<li>
<p>You must copy your existing DICOM content into an ORDDicom object type.</p>
</li>
<li>
<p>You must rewrite the parts of your application that access Oracle Multimedia.</p>
</li>
</ul>
<p>To use this migration option:</p>
<ol>
<li>
<p>Copy your data into ORDDicom objects.</p>
</li>
<li>
<p>Modify your application to use the ORDDicom methods.</p>
</li>
</ol>
<p class="subhead2"><a id="IMDCM13966"></a>Step 1: Copying Your Data into ORDDicom Objects</p>
<p>This example uses sample code to show how you can copy your data into ORDDicom objects.</p>
<pre>-- Add new dicomImage column to table
alter table imageTable add
  (dicomImage ORDSYS.ORDDICOM)
  pctfree 60
  lob (dicomimage.source.localdata) store as securefile 
      (nocache disable storage in row);
 
-- Copy DICOM images from image column to dicomImage column
update imageTable t set t.dicomImage = new orddicom(t.image);
 
-- After copying, drop the original image column if desired
alter table imagetable drop column image;
</pre>
<p>Assuming that you have an existing table (<code>imageTable</code>) with an ORDImage column (<code>image</code>), the preceding example performs these actions:</p>
<ul>
<li>
<p>Adds a DICOM image column (<code>dicomImage</code>) to store DICOM content as type ORDDicom.</p>
</li>
<li>
<p>Updates the table by copying the DICOM content from the <code>image</code> column into the new <code>dicomImage</code> column.</p>
</li>
<li>
<p>Removes the <code>image</code> column from the table.</p>
</li>
</ul>
<p class="subhead2"><a id="IMDCM13967"></a>Step 2: Modifying Your Application to Use ORDDicom Methods</p>
<p>This code segment uses an existing application that has been rewritten to use the ORDDicom object type.</p>
<pre>declare
  <span class="bold">dcm ordsys.orddicom;</span>
  thb ordsys.ordimage;
  ctx raw(64) := null;
 
begin
 
  insert into imageTable(id, dicomImage, thumb)
         values (1, <span class="bold">ordsys.orddicom(&#39;file&#39;, &#39;DICOMDIR&#39;,&#39;example.dcm&#39;),</span>
                       ordsys.ordimage())
         returning dicomImage, thumb into dcm, thb;
 
  <span class="bold">dcm.import(1);</span>
  <span class="bold">dcm.processCopy(&#39;fileFormat =jfif maxScale=100 100&#39;,</span>
                  <span class="bold">thb);</span>
  thb.setProperties();
  . . .
</pre>
<p>In this example, the highlighted lines of code show the following operations:</p>
<ul>
<li>
<p><span class="bold">First line in bold:</span> Shows how to use a variable declaration for the ORDDicom object (<code>dcm</code>).</p>
</li>
<li>
<p><span class="bold">Second line in bold:</span> Shows how to insert a row into a table with an ORDDicom object pointing to a DICOM file in the local file system.</p>
</li>
<li>
<p><span class="bold">Third line in bold:</span> Imports the DICOM image from the local file system into the SecureFiles LOB in the ORDDicom object. Because the parameter <code>(1)</code> is passed, the setProperties( ) method is automatically called to extract all attributes in the embedded DICOM content into attributes of the ORDDicom object.</p>
</li>
<li>
<p><span class="bold">Last two lines in bold:</span> Show how to generate a JPEG thumbnail image from a DICOM image. (This code is similar to the syntax for Oracle Database 10<span class="italic">g</span> Release 2.)</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<p><a class="olink AIVUG6000" href="../AIVUG/ch_imgref.htm#AIVUG6000"><span class="italic">Oracle Multimedia Reference</span></a> for more information about ORDImage methods</p>
</div>
</div>
<!-- class="sect1" -->
<a id="CIAFAHIH"></a>
<div id="IMDCM13300" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">F.4</span> Choosing a Migration Option</h2>
<p>Determining whether to migrate your application by using either the new DICOM relational interface or the new ORDDicom object type depends on your situation and the kinds of applications that exist in your environment. <a id="sthref1099"></a>For example, if you have extensive data and limited resources, the migration option of copying your existing DICOM content into an ORDDicom object type might prove too costly and inconvenient. Instead, you might choose to forego the new DICOM and SecureFiles LOBs benefits in favor of speedily migrating your application, with limited impact on the existing data. In contrast, if you have limited data in ORDImage objects, you might choose to rewrite your applications and copy your existing data into the ORDDicom object type to enable access to all the new DICOM and SecureFiles LOBs benefits.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2211">
<tr>
<td class="cellalignment2220">
<table class="cellalignment2216">
<tr>
<td class="cellalignment2215"><a href="ap_dcm_demos.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2215"><a href="dm_glossary.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2222">
<table class="cellalignment2214">
<tr>
<td class="cellalignment2215"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2215"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2215"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2215"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2215"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2215"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>