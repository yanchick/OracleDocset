<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-47079"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/DICOM%20Protocol%20Support"></a><title>DICOM Protocol Support</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023"/>
<meta name="description" content="Presents reference and other information about using Oracle Database to store, manage, and retrieve DICOM content such as single-frame and multiframe images, waveforms, slices of 3-D volumes, video segments, and structured reports in an integrated fashion with other enterprise information. Oracle Multimedia DICOM extends Oracle Database reliability, availability, and data management to media objects in medical applications. Oracle Multimedia DICOM supports Digital Imaging and Communications in Medicine, the standard for medical images."/>
<meta name="dcterms.created" content="2014-07-31T9:38:55Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Multimedia DICOM Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E17698-09"/>
<meta name="dcterms.isVersionOf" content="IMDCM"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Glossary" href="dm_glossary.htm" title="Glossary" type="text/html"/>
<link rel="Prev" href="ch_gen_over.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch_dtmod_ref.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E17698-09.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/32</span> <!-- End Header -->
<div id="IMDCM13885" class="chapter"><a id="CIHBFFBD"></a>
<h1 class="chapter"><span class="secnum">4</span> DICOM Protocol Support</h1>
<p>This chapter describes the Oracle Multimedia DICOM support for the DICOM protocol. The chapter includes these sections:</p>
<ul>
<li>
<p><a href="#CIHFBCDJ">Overview of DICOM Protocol Support for Oracle Database</a></p>
</li>
<li>
<p><a href="#CIHDJHID">Contents of the Oracle DICOM Protocol Adapter Suite</a></p>
</li>
<li>
<p><a href="#CIHIICAE">Deploying the Oracle DICOM Protocol Adapter Suite</a></p>
</li>
<li>
<p><a href="#CIHJDDDJ">Configuring the Oracle DICOM Protocol Adapter</a></p>
</li>
<li>
<p><a href="#CIHHBCAB">Configuring DICOM Protocol Support for Oracle Database</a></p>
</li>
<li>
<p><a href="#CIHBCIIA">Image Versioning with the DICOM Protocol Adapter</a></p>
</li>
<li>
<p><a href="#CIHHIEGF">Extracting Private Attributes from DICOM Data with the DICOM Protocol Adapter</a></p>
</li>
<li>
<p><a href="#CIHHCJAE">Improving DICOM Metadata Extraction for BLOB Storage</a></p>
</li>
</ul>
<p><a href="#CIHCBEAH">Table 4-1</a> points to information about the DICOM protocol located in other parts of this guide.</p>
<div id="IMDCM13962" class="tblruleformal">
<p class="titleintable"><a id="sthref107"></a><a id="CIHCBEAH"></a>Table 4-1 Roadmap for More DICOM Protocol Documentation in This Guide</p>
<table class="cellalignment2223" title="Roadmap for More DICOM Protocol Documentation in This Guide" summary="List of cross-refs for DICOM protocol" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t2">For:</th>
<th class="cellalignment2219" id="r1c2-t2">See:</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t2" headers="r1c1-t2">
<p>An overview of the DICOM protocol support for Oracle Database</p>
</td>
<td class="cellalignment2220" headers="r2c1-t2 r1c2-t2">
<p><a href="ch_intro.htm#CEGFIJJH">Section 1.2.2</a></p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t2" headers="r1c1-t2">
<p>Information about the characteristics of DICOM protocol documents</p>
</td>
<td class="cellalignment2220" headers="r3c1-t2 r1c2-t2">
<p><a href="ch_dtmod_docs.htm#BEIEBIBH">Section 11.1.3</a></p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t2" headers="r1c1-t2">
<p>How to information about creating a DICOM protocol document</p>
</td>
<td class="cellalignment2220" headers="r4c1-t2 r1c2-t2">
<p><a href="ch_dtmod_docs.htm#BEIFCJIB">Section 11.2.3</a></p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r5c1-t2" headers="r1c1-t2">
<p>How to information about inserting a DICOM protocol document into the DICOM data model repository</p>
</td>
<td class="cellalignment2220" headers="r5c1-t2 r1c2-t2">
<p><a href="ch_adm_over.htm#BGBCBHHD">Section 10.7</a></p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r6c1-t2" headers="r1c1-t2">
<p>An example of inserting a DICOM protocol document into the DICOM repository</p>
</td>
<td class="cellalignment2220" headers="r6c1-t2 r1c2-t2">
<p><a href="ch_adm_repos.htm#CIHIADJF">Section 12.5</a></p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r7c1-t2" headers="r1c1-t2">
<p>Information about the DICOM XML schema for DICOM protocol documents</p>
</td>
<td class="cellalignment2220" headers="r7c1-t2 r1c2-t2">
<p><a href="ap_schemas.htm#BCFGGDAG">Table B-1</a></p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<p>For information about the DICOM conformance statement for the Oracle DICOM protocol adapter suite, see <a class="olink mm_otn_index" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=mm_otn_index"><span class="italic">Oracle Multimedia</span></a> on the Oracle Technology Network Web site.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This chapter assumes that you are familiar with the process for deploying applications on WebLogic Server.
<p>See <a class="olink DEPGD" href="http://www.oracle.com/pls/topic/lookup?ctx=E50529-01&amp;id=DEPGD"><span class="italic">Oracle Fusion Middleware Deploying Applications to Oracle WebLogic Server</span></a> in the Oracle Fusion Middleware Online Documentation Library for complete documentation about application deployment on the WebLogic Application Server.</p>
</div>
<a id="CIHFBCDJ"></a>
<div id="IMDCM13886" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> Overview of DICOM Protocol Support for Oracle Database</h2>
<p>The DICOM standard<a id="sthref108"></a> specifies both an imaging file format and a networking protocol to be used in the medical imaging domain. Picture Archiving and Communication Systems<a id="sthref109"></a><a id="sthref110"></a> (PACS) are designed to store and transfer medical images in the DICOM format using the DICOM network protocol<a id="sthref111"></a>. Medical imaging devices, such as CT scanners and MR machines, communicate with one or more PACS to store images. Health care professionals then review images using DICOM viewer applications that query PACS to retrieve relevant patient information and images.</p>
<p>In previous versions, Oracle Multimedia DICOM supported only the imaging file format. Beginning with the current release, Oracle Multimedia DICOM adds support for the DICOM networking protocol. This support allows Oracle Database to retrieve and manage images originally stored in PACS. It also allows DICOM viewers to view images stored and managed by Oracle Database.</p>
<p>DICOM protocol support enables users to import DICOM images into Oracle Database from PACS, query DICOM images stored in Oracle Database through DICOM viewers, retrieve DICOM images from Oracle Database to PACS, extract metadata associated with images, and generate preview images associated with the original DICOM images. The DICOM images, metadata, and preview images can be stored and managed in Oracle Database.</p>
</div>
<!-- class="sect1" -->
<a id="CIHDJHID"></a>
<div id="IMDCM13892" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.2</span> Contents of the Oracle DICOM Protocol Adapter Suite</h2>
<p>The DICOM protocol adapter suite<a id="sthref112"></a> includes three Oracle WebLogic applications that are available as adapters to communicate with PACS, viewers, and other DICOM clients. The WebLogic applications interact with Oracle Database to perform operations based on the communications with the DICOM clients to store, query, and retrieve images from Oracle Database.</p>
<p>These applications run in the middle tier on the WebLogic Application Server. You can choose to deploy all or only selected components of the DICOM protocol adapter suite on WebLogic Server.</p>
<p><a href="#CIHEJHIF">Table 4-2</a> lists and briefly describes these application components:</p>
<div id="IMDCM13890" class="tblruleformal">
<p class="titleintable"><a id="sthref113"></a><a id="CIHEJHIF"></a>Table 4-2 Components in the DICOM Protocol Adapter Suite</p>
<table class="cellalignment2223" title="Components in the DICOM Protocol Adapter Suite" summary="List of WebLogic applications" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t4">Name</th>
<th class="cellalignment2219" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t4" headers="r1c1-t4">
<p>Oracle DICOM protocol adapter</p>
</td>
<td class="cellalignment2220" headers="r2c1-t4 r1c2-t4">
<p>The core application of the suite. Serves as a bridge between standard DICOM clients (such as PACS and DICOM viewers) and Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t4" headers="r1c1-t4">
<p>Oracle DICOM crawler</p>
</td>
<td class="cellalignment2220" headers="r3c1-t4 r1c2-t4">
<p>A scheduled service of the suite. Periodically queries a set of PACS using the DICOM protocol to import new DICOM images and DICOM metadata into Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t4" headers="r1c1-t4">
<p>Oracle DICOM WADO proxy</p>
</td>
<td class="cellalignment2220" headers="r4c1-t4 r1c2-t4">
<p>A service of the suite. Used to retrieve DICOM images from remote DICOM clients (such as PACS) by way of a WADO<a id="sthref114"></a><a id="sthref115"></a> (Web Access to DICOM Persistent Objects)-formatted URL.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" -->
<p>These subsections describe the components in this suite in more detail:</p>
<ul>
<li>
<p><a href="#CIHIJICF">The Oracle DICOM Protocol Adapter</a></p>
</li>
<li>
<p><a href="#CIHCBBFH">The Oracle DICOM Crawler</a></p>
</li>
<li>
<p><a href="#CIHJIFIJ">The Oracle DICOM WADO Proxy</a></p>
</li>
</ul>
<a id="CIHIJICF"></a>
<div id="IMDCM13893" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.1</span> The Oracle DICOM Protocol Adapter</h3>
<p>The <a href="dm_glossary.htm#CHDIJAII"><span class="xrefglossterm">DICOM protocol adapter</span></a><a id="sthref116"></a> is deployed as a ResourceAdapter in Oracle WebLogic Server. The adapter supports these DICOM protocol roles<a id="sthref117"></a><a id="sthref118"></a>:</p>
<ul>
<li>
<p>C-ECHO SCP</p>
</li>
<li>
<p>C-FIND SCP</p>
</li>
<li>
<p>C-MOVE SCP</p>
</li>
<li>
<p>C-STORE SCP</p>
</li>
<li>
<p>C-STORE SCU</p>
</li>
</ul>
<p><a href="#CIHGBEIJ">Figure 4-1</a> shows how the DICOM protocol adapter interacts with other DICOM clients, such as DICOM viewers and PACS, as well as with Oracle Database.</p>
<div id="IMDCM13921" class="figure">
<p class="titleinfigure"><a id="CIHGBEIJ"></a>Figure 4-1 DICOM Protocol Adapter Interacting with Other Components</p>
<img width="411" height="350" src="img/imdcm012.gif" alt="Description of Figure 4-1 follows"/><br/>
<a id="sthref119" href="img_text/imdcm012.htm">Description of &#34;Figure 4-1 DICOM Protocol Adapter Interacting with Other Components&#34;</a><br/>
<br/></div>
<!-- class="figure" -->
<p>Specifically, <a href="#CIHGBEIJ">Figure 4-1</a> shows how a PACS might push an image to the DICOM protocol adapter for insertion into Oracle Database. And, it shows how a DICOM viewer might attempt to query and retrieve DICOM images from Oracle Database by way of the DICOM protocol adapter.</p>
<p class="subhead2"><a id="IMDCM13922"></a>DICOM Network Protocol Message Handling</p>
<p>The DICOM protocol adapter supports a set of message handling operations<a id="sthref120"></a> of the DICOM network protocol (as specified in the DICOM standard). <a href="#CIHEDDEC">Table 4-3</a> describes the DICOM commands that DICOM clients can issue to the DICOM protocol adapter to query and retrieve DICOM image content stored in Oracle Database.</p>
<div id="IMDCM13894" class="tblruleformal">
<p class="titleintable"><a id="sthref121"></a><a id="CIHEDDEC"></a>Table 4-3 DICOM Protocol Adapter Message Handling Commands</p>
<table class="cellalignment2223" title="DICOM Protocol Adapter Message Handling Commands" summary="List of message handling commands" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t5">DICOM Command</th>
<th class="cellalignment2219" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t5" headers="r1c1-t5">
<p><code>C-ECHO</code></p>
</td>
<td class="cellalignment2220" headers="r2c1-t5 r1c2-t5">
<p>Determines connectivity between the DICOM protocol adapter and a DICOM client. When the adapter receives a <code>C-ECHO</code> request, it issues a <code>C-ECHO</code> response indicating that the message was received and that the connection is good.</p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t5" headers="r1c1-t5">
<p><code>C-MOVE</code></p>
</td>
<td class="cellalignment2220" headers="r3c1-t5 r1c2-t5">
<p>Queries the DICOM protocol adapter to retrieve from the database images that match the specified metadata attributes (wildcards are supported) defined in the <code>C-MOVE</code> request.</p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t5" headers="r1c1-t5">
<p><code>C-STORE</code></p>
</td>
<td class="cellalignment2220" headers="r4c1-t5 r1c2-t5">
<p>Transfers an image to the DICOM protocol adapter. When the adapter receives a <code>C-STORE</code> request, it takes the associated DICOM image and stores the image in Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r5c1-t5" headers="r1c1-t5">
<p><code>C-FIND</code></p>
</td>
<td class="cellalignment2220" headers="r5c1-t5 r1c2-t5">
<p>Queries the DICOM protocol adapter to retrieve image metadata that matches the specified query. Wildcards are supported in the queries.</p>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="tblruleformal" --></div>
<!-- class="sect2" -->
<a id="CIHCBBFH"></a>
<div id="IMDCM13895" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.2</span> The Oracle DICOM Crawler</h3>
<p>The <a href="dm_glossary.htm#CHDJDGDG"><span class="xrefglossterm">DICOM crawler</span></a><a id="sthref122"></a><a id="sthref123"></a> is a scheduled service of the DICOM protocol adapter suite that periodically queries a set of PACS using the DICOM protocol to import new DICOM images or DICOM metadata into Oracle Database. It is deployed as a ResourceAdapter application in Oracle WebLogic Server.</p>
<p>Users can configure the DICOM crawler to periodically issue DICOM <code>C-FIND</code> requests to a PACS to identify DICOM images of interest according to user-specified search criteria. When the DICOM crawler identifies such images, it issues a <code>C-MOVE</code> request to the PACS to transfer these images to the DICOM protocol adapter. Then, the adapter checks in the images or the image metadata to Oracle Database.</p>
<p><a href="#CIHCJDID">Figure 4-2</a> shows how messages are exchanged between the DICOM crawler, PACS, and the DICOM protocol adapter.</p>
<div id="IMDCM13923" class="figure">
<p class="titleinfigure"><a id="CIHCJDID"></a>Figure 4-2 DICOM Crawler Exchanging Messages with Other Components</p>
<img width="444" height="332" src="img/imdcm013.gif" alt="Description of Figure 4-2 follows"/><br/>
<a id="sthref124" href="img_text/imdcm013.htm">Description of &#34;Figure 4-2 DICOM Crawler Exchanging Messages with Other Components&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<a id="CIHJIFIJ"></a>
<div id="IMDCM13896" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.3</span> The Oracle DICOM WADO Proxy</h3>
<p>The <a href="dm_glossary.htm#CHDFFJJB"><span class="xrefglossterm">DICOM WADO proxy</span></a><a id="sthref125"></a><a id="sthref126"></a> is a service that retrieves DICOM images through a WADO-formatted URL when the image metadata is in Oracle Database and the images are in the PACS.</p>
<p>The WADO proxy is deployed as a JAX-RS Servlet application in Oracle WebLogic Server. The proxy listens for HTTP GET requests that correspond to the retrieval of a specific DICOM image from a specific PACS. Both the Application Entity (AE) title of the PACS and the unique SOP instance UID of the image are encoded as part of the WADO URL.</p>
<p>When the proxy receives a WADO request like this, it issues a <code>C-MOVE</code> request to the corresponding PACS to retrieve the image. After the proxy receives the <code>C-STORE</code> request from the PACS with the DICOM image data corresponding to the <code>C-MOVE</code> it issued, the proxy passes the DICOM image data to the HTTP client that issued the WADO request.</p>
<p><a href="#CIHIDDCF">Figure 4-3</a> shows how the set of messages required to process a WADO request from a WADO client is exchanged between the various components. It also shows how this type of WADO URL is generated at insertion time for a DICOM image originating from a PACS.</p>
<div id="IMDCM13924" class="figure">
<p class="titleinfigure"><a id="CIHIDDCF"></a>Figure 4-3 DICOM WADO Proxy Retrieving DICOM Images</p>
<img width="483" height="312" src="img/imdcm011.gif" alt="Description of Figure 4-3 follows"/><br/>
<a id="sthref127" href="img_text/imdcm011.htm">Description of &#34;Figure 4-3 DICOM WADO Proxy Retrieving DICOM Images&#34;</a><br/>
<br/></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHIICAE"></a>
<div id="IMDCM13887" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.3</span> Deploying the Oracle DICOM Protocol Adapter Suite</h2>
<p>This section describes how to install and deploy the DICOM protocol adapter suite. Before attempting these steps, ensure that Oracle WebLogic Server is installed and running.</p>
<p>You can find the files that are described in these steps in this directory:</p>
<p><code><span class="codeinlineitalic">&lt;ORACLE_HOME&gt;</span></code><code>/ord/jlib</code></p>
<p>The complete process includes these steps:</p>
<ol>
<li>
<p>Install and deploy the <code>OrdDicomLibrary.ear</code> archive file, which contains the Java classes and Java libraries required to run the Oracle DICOM protocol adapter suite (see <a href="#CIHGHDBC">Section 4.3.1</a>).</p>
</li>
<li>
<p>Configure the <code>OrdDicomLibrary.ear</code> archive file for a standard or advanced deployment to choose individual components for installation (see <a href="#CIHGHAFA">Section 4.3.2</a> or <a href="#CIHGCBGE">Section 4.3.3</a>).</p>
</li>
<li>
<p>Install and deploy the <code>OrdDicomAdapter.ear</code> archive file, which contains the files for each component in the Oracle DICOM protocol adapter suite.</p>
</li>
</ol>
<p>This section includes these subsections:</p>
<ul>
<li>
<p><a href="#CIHGHDBC">Deploying the Archive Files</a></p>
</li>
<li>
<p><a href="#CIHGHAFA">Performing a Standard Deployment</a></p>
</li>
<li>
<p><a href="#CIHGCBGE">Performing an Advanced Deployment</a></p>
</li>
<li>
<p><a href="#CIHIJADH">Modifying the Component Archive Files</a></p>
</li>
</ul>
<a id="CIHGHDBC"></a>
<div id="IMDCM13891" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.1</span> Deploying the Archive Files</h3>
<p>The Oracle DICOM protocol adapter<a id="sthref128"></a> is distributed as two WebLogic enterprise archive files, as follows:</p>
<ul>
<li>
<p><code>OrdDicomLibrary.ear</code></p>
<p>This archive contains all the Java classes and other Java libraries required to run the adapter.</p>
</li>
<li>
<p><code>OrdDicomAdapter.ear</code></p>
<p>This archive references the <code>OrdDicomLibrary.ear</code> archive file, and contains the XML descriptors and configuration files that are necessary to provide a bare-bones deployment configuration for the three components of the Oracle DICOM protocol adapter.</p>
</li>
</ul>
<p>To deploy the <code>OrdDicomLibrary.ear</code> archive to WebLogic Server, use the weblogic.Deployer tool by issuing a command similar to this one:</p>
<pre>java weblogic.Deployer -upload -name OrdDICOM -source OrdDicomLibrary.ear 
 -targets [target_name] -adminurl [weblogic_admin_url] -user [weblogic_user] 
 -deploy -library
</pre>
<p>To deploy the individual components of the Oracle DICOM protocol adapter suite, extract the contents of the <code>OrdDicomAdapter.ear</code> archive using the Java jar tool. Then modify the XML configuration files before deploying, as described in <a href="#CIHIEFDF">Section 4.4.1</a>, <a href="#CIHDAFAD">Section 4.4.2</a>, and <a href="#CIHFAEFJ">Section 4.4.3</a>.</p>
<p>If the archive is extracted to a directory named <code>oracle-dicom</code>, the file structure of the directory appears as follows:</p>
<pre>oracle-dicom/META-INF/MANIFEST.MF
oracle-dicom/META-INF/application.xml
oracle-dicom/META-INF/weblogic-application.xml
oracle-dicom/APP-INF/lib/dicom-net_adapter.jar
oracle-dicom/APP-INF/lib/dicom-net_adapter.rar
oracle-dicom/APP-INF/lib/dicom-net_crawler.jar
oracle-dicom/APP-INF/lib/dicom-net_crawler.rar
oracle-dicom/APP-INF/lib/dicom-net_wado.war
oracle-dicom/APP-INF/classes/ordim_adapter_config.xml
oracle-dicom/APP-INF/classes/ordim_crawler_config.xml
oracle-dicom/APP-INF/classes/ordim_wado_config.xml
</pre>
<p>The XML files in the <code>oracle-dicom/APP-INF/classes/</code> directory are the files used to configure the components of the Oracle DICOM protocol adapter suite.</p>
<p>The archive files in the <code>oracle-dicom/APP-INF/lib/</code> directory correspond to the modules comprising the Oracle DICOM protocol adapter.</p>
<p>The XML files in the <code>oracle-dicom/META-INF/</code> directory correspond to the WebLogic deployment descriptors describing all the modules and resources used in the application.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGHAFA"></a>
<div id="IMDCM13897" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.2</span> Performing a Standard Deployment</h3>
<div class="infobox-note">
<p class="notep1">Important:</p>
<p>Before attempting to deploy the Oracle DICOM protocol adapter, first you must deploy the <code>OrdDicomLibrary.ear</code> library to WebLogic Server and configure the DICOM Protocol support for Oracle Database.</p>
<p>See <a href="#CIHGHDBC">Section 4.3.1</a> and <a href="#CIHHBCAB">Section 4.5</a> for details.</p>
</div>
<p>To deploy a single instance of each component of the Oracle DICOM protocol adapter suite, edit the XML files in the <code>oracle-dicom/APP-INF/classes/</code> directory.</p>
<p>After modifying the configuration files, as described in <a href="#CIHIEFDF">Section 4.4.1</a>, issue a command similar to this one to deploy the application to WebLogic Server:</p>
<pre>java weblogic.Deployer -upload -name OracleDicomAdapterSuite -source 
&#39;oracle-dicom&#39; -targets [weblogic_server] -adminurl [weblogic_admin_url] 
-user [weblogic_user] -deploy
</pre>
<p>This example assumes that you extracted the <code>OrdDicomAdapter.ear</code> archive to a directory named <code>oracle-dicom</code>.</p>
<p>This command deploys the three components of the Oracle DICOM protocol adapter suite to WebLogic Server, and then starts them.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGCBGE"></a>
<div id="IMDCM13898" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.3</span> Performing an Advanced Deployment</h3>
<p>Although the components of the Oracle DICOM protocol adapter are bundled together in a single enterprise archive, you need not deploy all of them at the same time. For instance, you can deploy multiple instances of a particular component. Or, you can choose not to deploy a single instance of a particular component.</p>
<p>The <code>META-INF/application.xml</code> file describes the modules to be enabled at deployment time. <a href="#CIHEFGDC">Example 4-1</a> shows a sample of this XML file:</p>
<div id="IMDCM13931" class="example">
<p class="titleinexample"><a id="CIHEFGDC"></a>Example 4-1 Sample XML File for Advanced Deployment</p>
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;application xmlns=&#34;http://java.sun.com/xml/ns/javaee&#34;
             xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
             xsi:schemaLocation=&#34;http://java.sun.com/xml/ns/javaee
 http://java.sun.com/xml/ns/javaee/application_5.xsd&#34;
             version=&#34;5&#34;&gt;
    &lt;!-- Oracle DICOM Protocol Adapter --&gt;
    &lt;module&gt;
        &lt;connector&gt;/APP-INF/lib/dicom-net_adapter.rar&lt;/connector&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;ejb&gt;/APP-INF/lib/dicom-net_adapter.jar&lt;/ejb&gt;
    &lt;/module&gt;
    
    &lt;!-- Oracle DICOM Crawler --&gt;
    &lt;module&gt;
        &lt;connector&gt;/APP-INF/lib/dicom-net_crawler.rar&lt;/connector&gt;
    &lt;/module&gt;
    &lt;module&gt;
        &lt;ejb&gt;/APP-INF/lib/dicom-net_crawler.jar&lt;/ejb&gt;
    &lt;/module&gt;
    
    &lt;!-- Oracle DICOM WADO Proxy --&gt;
    &lt;module&gt;
        &lt;web&gt;
            &lt;web-uri&gt;/APP-INF/lib/dicom-net_wado.war&lt;/web-uri&gt;
            &lt;context-root&gt;dicom-net&lt;/context-root&gt;
        &lt;/web&gt;
    &lt;/module&gt;
&lt;/application&gt;
</pre></div>
<!-- class="example" -->
<p>In <a href="#CIHEFGDC">Example 4-1</a>, all three components of the Oracle DICOM protocol adapter suite are enabled. To disable any of these components, delete (or comment out) the module references that correspond to the component you want to remove.</p>
<p>Both the DICOM protocol adapter and the DICOM crawler components require at least two module definitions, as follows:</p>
<ul>
<li>
<p><code>*.rar</code></p>
<p>This archive is the ResourceAdapter archive for the component (one is required for each component)</p>
</li>
<li>
<p><code>*.jar</code></p>
<p>This archive is the MessageDrivenBean (MDB) archive for the component (at least one is required for each component).</p>
</li>
</ul>
<p>One module definition is required for each instance of the DICOM WADO proxy component (the <code>*.war</code> archive)</p>
<p>By default, an Oracle DICOM protocol adapter configuration file<a id="sthref129"></a><a id="sthref130"></a> is created for each MDB archive and for the WADO proxy archive, as shown in the following list:</p>
<ul>
<li>
<p><code>dicom-net_adapter.jar</code> and <code>ordim_adapter_config.xml</code></p>
</li>
<li>
<p><code>dicom-net_crawler.jar</code> and <code>ordim_crawler_config.xml</code></p>
</li>
<li>
<p><code>dicom-new_wado.war</code> and <code>ordim_wado_config.xml</code></p>
</li>
</ul>
<p>Follow these steps to deploy multiple instances of any of the three components of the Oracle DICOM protocol adapter suite:</p>
<ol>
<li>
<p>Create a copy of the appropriate MDB (<code>*.jar</code>) archive or WADO (<code>*.war</code>) archive.</p>
</li>
<li>
<p>Modify the copy of the archive as described in <a href="#CIHIJADH">Section 4.3.4</a>.</p>
</li>
<li>
<p>Place the modified archive with the original archive in the <code>APP-INF/lib/</code> directory.</p>
</li>
<li>
<p>Place the new XML configuration file, which you modified in Step 2, in the <code>APP-INF/classes/</code> directory.</p>
</li>
<li>
<p>Add a <code>&lt;module&gt;</code> entry in the <code>META-INF/application.xml</code> file for the new archive.</p>
</li>
<li>
<p>Deploy the components using the weblogic.Deployer tool (see <a href="#CIHGHAFA">Section 4.3.2</a>).</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHIJADH"></a>
<div id="IMDCM13899" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.4</span> Modifying the Component Archive Files</h3>
<p>This section describes how to make required modifications to each Oracle DICOM protocol adapter component, in these subsections:</p>
<ul>
<li>
<p><a href="#CIHDJFHE">Modifying the DICOM Adapter Archive File</a></p>
</li>
<li>
<p><a href="#CIHFCCEG">Modifying the DICOM Crawler Archive File</a></p>
</li>
<li>
<p><a href="#CIHDHGEH">Modifying the DICOM WADO Proxy Archive File</a></p>
</li>
</ul>
<a id="CIHDJFHE"></a>
<div id="IMDCM13900" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.4.1</span> Modifying the DICOM Adapter Archive File</h4>
<p>To modify the DICOM adapter <code>.jar</code> archive, you must rename the MDB and update the name of the XML configuration file. To make these changes, edit the <code>META-INF/ejb-jar.xml</code> file from the archive and change the parameter values as shown in bold italics in this code segment:</p>
<pre>&lt;message-driven&gt;
    &lt;display-name&gt;<span class="bolditalic">DICOM_ADAPTER</span>&lt;/display-name&gt;
    &lt;ejb-name&gt;<span class="bolditalic">DICOM_ ADAPTER</span>&lt;/ejb-name&gt;
    [...]
&lt;/message-driven&gt;
 
&lt;container-transaction&gt;
    &lt;method&gt;
        &lt;ejb-name&gt;<span class="bolditalic">DICOM_ ADAPTER</span>&lt;/ejb-name&gt;
        [...]
    &lt;/method&gt;
    [...]
&lt;/container-transaction&gt;
 
&lt;activation-config-property&gt;
  &lt;activation-config-property-name&gt;adapterConfig&lt;/activation-config-property-name&gt;
  &lt;activation-config-property-value&gt;<span class="bolditalic">ordim_adapter_config.xml</span>&lt;/activation-config-property-value&gt;
 &lt;/activation-config-property&gt;
</pre>
<p>In addition, edit the <code>META-INF/weblogic-ejb-jar.xml</code> file from the archive and change the parameter values shown in bold italics in this code segment:</p>
<pre>&lt;weblogic-enterprise-bean&gt;
    &lt;ejb-name&gt;<span class="bolditalic">DICOM_ ADAPTER</span>&lt;/ejb-name&gt;
    [...]
&lt;/ weblogic-enterprise-bean&gt;
</pre></div>
<!-- class="sect3" -->
<a id="CIHFCCEG"></a>
<div id="IMDCM13901" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.4.2</span> Modifying the DICOM Crawler Archive File</h4>
<p>To modify the <code>*.jar</code> archive to create a new instance of the Oracle DICOM crawler, you must rename the MDB and update the name of the XML configuration file. To make these changes, edit the <code>META-INF/ejb-jar.xml</code> file from the archive and change the parameter values as shown in bold italics in this code segment:</p>
<pre>&lt;message-driven&gt;
    &lt;display-name&gt;<span class="bolditalic">DICOM_CRAWLER</span>&lt;/display-name&gt;
    &lt;ejb-name&gt;<span class="bolditalic">DICOM_CRAWLER</span>&lt;/ejb-name&gt;
    [...]
&lt;/message-driven&gt;
 
&lt;container-transaction&gt;
    &lt;method&gt;
        &lt;ejb-name&gt;<span class="bolditalic">DICOM_CRAWLER</span>&lt;/ejb-name&gt;
        [...]
    &lt;/method&gt;
    [...]
&lt;/container-transaction&gt;
 
&lt;activation-config-property&gt;
  &lt;activation-config-property-name&gt;crawlerConfig&lt;/activation-config-property-name&gt;
  &lt;activation-config-property-value&gt;<span class="bolditalic">ordim_crawler_config.xml</span>&lt;/activation-config-property-value&gt;
 &lt;/activation-config-property&gt;
</pre>
<p>In addition, edit the <code>META-INF/weblogic-ejb-jar.xml</code> file from the archive and change the parameter values shown in bold italics in this code segment:</p>
<pre>&lt;weblogic-enterprise-bean&gt;
    &lt;ejb-name&gt;<span class="bolditalic">DICOM_CRAWLER</span>&lt;/ejb-name&gt;
    [...]
&lt;/ weblogic-enterprise-bean&gt;
</pre></div>
<!-- class="sect3" -->
<a id="CIHDHGEH"></a>
<div id="IMDCM13902" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.4.3</span> Modifying the DICOM WADO Proxy Archive File</h4>
<p>To modify WADO <code>.war</code> archive to create a new instance of the WADO proxy, you must rename the servlet and update the name of the XML configuration file. To make these changes, edit the <code>WEB-INF/web.xml</code> file from the archive and change the parameter values as shown in bold italics in this code segment:</p>
<pre>&lt;context-param&gt;
    &lt;param-name&gt;wadoConfig&lt;/param-name&gt;
    &lt;param-value&gt;<span class="bolditalic">ordim_wado_config.xml</span>&lt;/param-value&gt;
 &lt;/context-param&gt;
 
&lt;servlet&gt;  
    &lt;display-name&gt;<span class="bolditalic">JAX-RS Servlet</span>&lt;/display-name&gt;
    &lt;servlet-name&gt;<span class="bolditalic">jersey</span>&lt;/servlet-name&gt;
    [..]
&lt;/servlet&gt;
 
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;<span class="bolditalic">jersey</span>&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHJDDDJ"></a>
<div id="IMDCM13903" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.4</span> Configuring the Oracle DICOM Protocol Adapter</h2>
<p>This section describes how to configure the components in the Oracle DICOM protocol adapter suite, in these subsections:</p>
<ul>
<li>
<p><a href="#CIHIEFDF">Configuring the Oracle DICOM Protocol Adapter</a></p>
</li>
<li>
<p><a href="#CIHDAFAD">Configuring the Oracle DICOM Crawler</a></p>
</li>
<li>
<p><a href="#CIHFAEFJ">Configuring the Oracle DICOM WADO Proxy</a></p>
</li>
</ul>
<a id="CIHIEFDF"></a>
<div id="IMDCM13904" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.1</span> Configuring the Oracle DICOM Protocol Adapter</h3>
<p>The DICOM protocol adapter is configured by creating an XML file that adheres to the<a id="sthref131"></a><a id="sthref132"></a> schema <code>ordim_adapter_config.xsd</code>. This XSD file is shipped in the <code>OrdDicomLibrary.ear</code> archive at this location: <code>APP-INF/lib/dicom-net.jar</code>.</p>
<p><a href="#CIHBJGAI">Example 4-2</a> lists the schema <code>ordim_adapter_config.xsd</code>. The XML include statement highlighted in bold calls the common data type definition schema <code>ordim_common.xsd</code>, which is listed in <a href="#CIHGJAFE">Example 4-3</a>.</p>
<div id="IMDCM13925" class="example">
<p class="titleinexample"><a id="CIHBJGAI"></a>Example 4-2 ordim_adapter_config.xsd Schema</p>
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34; ?&gt;
&lt;xs:schema xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  <span class="bold">&lt;xs:include schemaLocation=&#34;ordim_common.xsd&#34;/&gt;</span>
  
  &lt;xs:complexType name=&#34;dicom_ucm_metadata_pairing_t&#34;&gt;
    &lt;xs:attribute name=&#34;tag&#34; type=&#34;dicom_tag_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;field&#34; type=&#34;ucm_field_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ucm_property_t&#34;&gt;
    &lt;xs:attribute name=&#34;name&#34; type=&#34;ucm_field_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;value&#34; type=&#34;ucm_field_value_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_ucm_metadata_map_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;entry&#34; type=&#34;dicom_ucm_metadata_pairing_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_tag_set_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;tag&#34; type=&#34;dicom_tag_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ucm_properties_map_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;property&#34; type=&#34;ucm_property_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ucm_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;connection&#34; type=&#34;ucm_connection_info_t&#34;/&gt;
      &lt;xs:element name=&#34;properties&#34; type=&#34;ucm_properties_map_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;hosts&#34; type=&#34;dicom_host_config_t&#34;/&gt;
      &lt;xs:element name=&#34;wado&#34; minOccurs=&#34;0&#34;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:attribute name=&#34;baseURL&#34; type=&#34;url_t&#34; use=&#34;required&#34;/&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name=&#34;selectedTags&#34; type=&#34;dicom_tag_set_t&#34;/&gt;
      &lt;xs:element name=&#34;tagMap&#34; type=&#34;dicom_ucm_metadata_map_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ordim_adapter_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;adapter&#34; type=&#34;dicom_local_host_t&#34;/&gt;
      &lt;xs:element name=&#34;UCM&#34; type=&#34;ucm_config_t&#34;/&gt;
      &lt;xs:element name=&#34;DICOM&#34; type=&#34;dicom_config_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:element name=&#34;ordim_ucm_adapter_config&#34; type=&#34;ordim_adapter_config_t&#34;/&gt;
 
&lt;/xs:schema&gt;
</pre></div>
<!-- class="example" -->
<p>The XML file that is created contains these configurable elements: <code>&lt;adapter&gt;</code>, <code>&lt;database&gt;</code>, and <code>&lt;DICOM&gt;</code>.</p>
<p class="subhead2"><a id="IMDCM13905"></a>About the &lt;adapter&gt; Element</p>
<p>The <code>&lt;adapter&gt;</code> element is used to identify the DICOM host information for the DICOM protocol adapter.</p>
<p>The following table describes the <code>&lt;adapter&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the adapter element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t7">Element</th>
<th class="cellalignment2219" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t7" headers="r1c1-t7"><code>&lt;title&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t7 r1c2-t7">Specifies the DICOM AE title for the host.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t7" headers="r1c1-t7"><code>&lt;bind&gt;</code></td>
<td class="cellalignment2220" headers="r3c1-t7 r1c2-t7">Specifies the port number the host is to listen on for incoming DICOM associations, and a Boolean value that specifies whether or not to use SSL/TLS for incoming connections.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t7" headers="r1c1-t7"><code>&lt;SSL&gt;</code></td>
<td class="cellalignment2220" headers="r4c1-t7 r1c2-t7">Specifies the location of the keystore to use for any SSL/TLS connections and (optionally) the password to unlock the given keystore. If the password is not supplied here, it is retrieved by way of the credential map for the default WebLogic Server security realm associated with the resource adapter for the Oracle DICOM protocol adapter.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;adapter&gt;</code> element:</p>
<pre>&lt;adapter&gt;
    &lt;title&gt;DATABASE&lt;/title&gt;
    &lt;bind port=&#34;11112&#34; useSSL=&#34;false&#34;/&gt;
    &lt;SSL keystore=&#34;keystore.jks&#34; password=&#34;pass&#34;/&gt;
&lt;/adapter&gt;
</pre>
<p class="subhead2"><a id="IMDCM13906"></a>About the &lt;database&gt; Element</p>
<p>The <code>&lt;database&gt;</code> element is used to identify how to connect to Oracle Database server and configure the DICOM image and metadata storage.</p>
<p>The following table describes the <code>&lt;database&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the database element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t8">Element</th>
<th class="cellalignment2219" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t8" headers="r1c1-t8"><code>&lt;connection&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t8 r1c2-t8">Specifies these connection details:
<ul>
<li>
<p><code>&lt;url&gt;</code>: The URL used to connect to Oracle Database.</p>
</li>
<li>
<p><code>&lt;schema&gt;</code>: The schema credentials (name and password) for the connection to Oracle Database. If the password is not supplied here, it is retrieved by way of the credential map for the default WebLogic Server security realm associated with the resource adapter for the Oracle DICOM protocol adapter.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t8" headers="r1c1-t8"><code>&lt;configuration&gt;</code></td>
<td class="cellalignment2220" headers="r3c1-t8 r1c2-t8">Specifies the name of the DICOM protocol document that defines the configuration to use for DICOM image and metadata storage when storing DICOM images by way of the Oracle DICOM protocol adapter.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;database&gt;</code> element:</p>
<pre>&lt;database&gt;
    &lt;connection&gt;
      &lt;url location=&#34; jdbc:oracle:oci8:@//hostname:1521/orcl&#34;/&gt;
      &lt;schema name=&#34;user&#34; password=&#34;pass&#34;/&gt;
    &lt;/connection&gt;
    &lt;configuration name=&#34;AdapterConfig1.xml&#34;/&gt;
&lt;/database&gt;
</pre>
<p class="subhead2"><a id="IMDCM13907"></a>About the &lt;DICOM&gt; Element</p>
<p>The <code>&lt;DICOM&gt;</code> element is used to specify the DICOM-specific configuration, such as AE title to IP address and port mapping.</p>
<p>The following table describes the <code>&lt;DICOM&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the DICOM element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t9">Element</th>
<th class="cellalignment2219" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t9" headers="r1c1-t9"><code>&lt;hosts&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t9 r1c2-t9">Specifies the set of DICOM clients to which the adapter is permitted to connect, as follows:
<ul>
<li>
<p><code>&lt;host&gt;</code>: The AE title, IP address, and port of a remote DICOM client to which the Oracle DICOM protocol adapter can connect. This element also specifies whether or not to use SSL/TLS when connecting to the given DICOM client.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;DICOM&gt;</code> element:</p>
<pre>&lt;DICOM&gt;
    &lt;hosts&gt;
      &lt;host title=&#34;TESTPACS&#34; address=&#34;testpacs.hostname&#34; port=&#34;11112&#34;/&gt;
      &lt;host title=&#34;WADO&#34; address=&#34;127.0.0.1&#34; port=&#34;12347&#34; useSSL=&#34;false&#34;/&gt;
    &lt;/hosts&gt;
&lt;/DICOM&gt;
</pre>
<p class="subhead2"><a id="IMDCM13932"></a>About the Common Data Type Definition Schema</p>
<p>The schema <code>ordim_adapter_config.xsd</code> calls another schema, <code>ordim_common.xsd</code>, with the following XML include statement, which is highlighted in bold in <a href="#CIHBJGAI">Example 4-2</a>:</p>
<pre>&lt;xs:include schemaLocation=&#34;ordim_common.xsd&#34;/&gt;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The schemas for the DICOM crawler and the DICOM WADO proxy also call the common schema <code>ordim_common.xsd</code>. For emphasis and consistency, this XML include statement is highlighted in <a href="#CIHGDCAH">Example 4-4</a> and <a href="#CIHIBGAC">Example 4-5</a> as well as in <a href="#CIHBJGAI">Example 4-2</a>.</div>
<p><a href="#CIHGJAFE">Example 4-3</a> lists the schema <code>ordim_common.xsd</code>. This schema contains the data type definitions for the components in the Oracle DICOM protocol adapter suite.</p>
<div id="IMDCM13933" class="example">
<p class="titleinexample"><a id="CIHGJAFE"></a>Example 4-3 ordim_common.xsd Schema</p>
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34; ?&gt;
&lt;xs:schema xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  &lt;xs:complexType name=&#34;empty_t&#34;/&gt;
  
  &lt;xs:simpleType name=&#34;boolean_t&#34;&gt;
    &lt;xs:restriction base=&#34;xs:boolean&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;string_t&#34;&gt;
    &lt;xs:restriction base=&#34;xs:string&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;nonempty_string_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;&gt;
      &lt;xs:minLength value=&#34;1&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;integer_t&#34;&gt;
    &lt;xs:restriction base=&#34;xs:integer&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ae_title_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;&gt;
      &lt;xs:pattern value=&#34;[ ]*(.*[^ ])[ ]*&#34;/&gt;
      &lt;xs:maxLength value=&#34;16&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;hostname_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;network_port_t&#34;&gt;
    &lt;xs:restriction base=&#34;integer_t&#34;&gt;
      &lt;xs:minInclusive value=&#34;1&#34;/&gt;
      &lt;xs:maxInclusive value=&#34;65535&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ssl_option_t&#34;&gt;
    &lt;xs:restriction base=&#34;boolean_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;dicom_tag_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;&gt;
      &lt;xs:pattern value=&#34;[0-9a-fA-F]*&#34;/&gt;
      &lt;xs:length value=&#34;8&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;url_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ucm_username_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ucm_password_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;database_username_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;database_password_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;database_repos_doc_name_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ucm_field_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;ucm_field_value_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;keystore_t&#34;&gt;
    &lt;xs:restriction base=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;keystore_password_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:complexType name=&#34;network_bind_address_t&#34;&gt;
    &lt;xs:attribute name=&#34;address&#34; type=&#34;hostname_t&#34;/&gt;
    &lt;xs:attribute name=&#34;port&#34; type=&#34;network_port_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;useSSL&#34; type=&#34;ssl_option_t&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;network_remote_address_t&#34;&gt;
    &lt;xs:attribute name=&#34;address&#34; type=&#34;hostname_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;port&#34; type=&#34;network_port_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_simple_host_t&#34;&gt;
    &lt;xs:attribute name=&#34;title&#34; type=&#34;ae_title_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ssl_config_t&#34;&gt;
    &lt;xs:attribute name=&#34;keystore&#34; type=&#34;keystore_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;password&#34; type=&#34;keystore_password_t&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_local_client_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;title&#34; type=&#34;ae_title_t&#34;/&gt;
      &lt;xs:element name=&#34;SSL&#34; type=&#34;ssl_config_t&#34; minOccurs=&#34;0&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_local_host_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;title&#34; type=&#34;ae_title_t&#34;/&gt;
      &lt;xs:element name=&#34;bind&#34; type=&#34;network_bind_address_t&#34;/&gt;
      &lt;xs:element name=&#34;SSL&#34; type=&#34;ssl_config_t&#34; minOccurs=&#34;0&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_remote_host_t&#34;&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base=&#34;network_remote_address_t&#34;&gt;
        &lt;xs:attribute name=&#34;title&#34; type=&#34;ae_title_t&#34; use=&#34;required&#34;/&gt;
        &lt;xs:attribute name=&#34;useSSL&#34; type=&#34;ssl_option_t&#34;/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ucm_login_info_t&#34;&gt;
    &lt;xs:attribute name=&#34;username&#34; type=&#34;ucm_username_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;password&#34; type=&#34;ucm_password_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;database_login_info_t&#34;&gt;
    &lt;xs:attribute name=&#34;name&#34; type=&#34;database_username_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;password&#34; type=&#34;database_password_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;url_location_t&#34;&gt;
    &lt;xs:attribute name=&#34;location&#34; type=&#34;url_t&#34; use=&#34;required&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ucm_connection_info_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;url&#34; type=&#34;url_location_t&#34;/&gt;
      &lt;xs:element name=&#34;login&#34; type=&#34;ucm_login_info_t&#34; minOccurs=&#34;0&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;database_connection_info_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;url&#34; type=&#34;url_location_t&#34;/&gt;
      &lt;xs:element name=&#34;schema&#34; type=&#34;database_login_info_t&#34; minOccurs=&#34;0&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_host_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;host&#34; type=&#34;dicom_remote_host_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHDAFAD"></a>
<div id="IMDCM13908" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.2</span> Configuring the Oracle DICOM Crawler</h3>
<p>The Oracle DICOM crawler is configured by creating an XML file that adheres to the <a id="sthref133"></a><a id="sthref134"></a>schema <code>ordim_crawler_config.xsd</code>. This XSD file is shipped in the <code>OrdDicomLibrary.ear</code> archive at this location: <code>APP-INF/lib/dicom-net.jar</code>.</p>
<p><a href="#CIHGDCAH">Example 4-4</a> lists the schema <code>ordim_crawler_config.xsd</code>. The XML include statement highlighted in bold calls the common data type definition schema <code>ordim_common.xsd</code>, which is listed in <a href="#CIHGJAFE">Example 4-3</a>.</p>
<div id="IMDCM13926" class="example">
<p class="titleinexample"><a id="CIHGDCAH"></a>Example 4-4 ordim_crawler_config.xsd Schema</p>
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34; ?&gt;
&lt;xs:schema xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  <span class="bold">&lt;xs:include schemaLocation=&#34;ordim_common.xsd&#34;/&gt;</span>
  
  &lt;xs:simpleType name=&#34;dicom_value_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;/&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:complexType name=&#34;dicom_tag_value_t&#34;&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base=&#34;dicom_value_t&#34;&gt;
        &lt;xs:attribute name=&#34;tag&#34; type=&#34;dicom_tag_t&#34; use=&#34;required&#34;/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_dataset_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;value&#34; type=&#34;dicom_tag_value_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;named_dicom_dataset_t&#34;&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base=&#34;dicom_dataset_t&#34;&gt;
        &lt;xs:attribute name=&#34;name&#34; type=&#34;nonempty_string_t&#34; use=&#34;required&#34;/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:simpleType name=&#34;dicom_search_root_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;&gt;
      &lt;xs:enumeration value=&#34;patient&#34;/&gt;
      &lt;xs:enumeration value=&#34;study&#34;/&gt;
      &lt;xs:enumeration value=&#34;no_root&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:simpleType name=&#34;time_unit_t&#34;&gt;
    &lt;xs:restriction base=&#34;string_t&#34;&gt;
      &lt;xs:enumeration value=&#34;ms&#34;/&gt;
      &lt;xs:enumeration value=&#34;s&#34;/&gt;
      &lt;xs:enumeration value=&#34;h&#34;/&gt;
      &lt;xs:enumeration value=&#34;m&#34;/&gt;
      &lt;xs:enumeration value=&#34;d&#34;/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;
  
  &lt;xs:complexType name=&#34;dicom_query_t&#34;&gt;
    &lt;xs:attribute name=&#34;searchRoot&#34; type=&#34;dicom_search_root_t&#34;/&gt;
    &lt;xs:attribute name=&#34;dataset&#34; type=&#34;nonempty_string_t&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_query_list_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;query&#34; type=&#34;dicom_query_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;crawler_period_t&#34;&gt;
    &lt;xs:attribute name=&#34;start&#34; type=&#34;nonempty_string_t&#34;/&gt;
    &lt;xs:attribute name=&#34;duration&#34; type=&#34;integer_t&#34; use=&#34;required&#34;/&gt;
    &lt;xs:attribute name=&#34;timeUnit&#34; type=&#34;time_unit_t&#34;/&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;crawler_job_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;target&#34; type=&#34;dicom_simple_host_t&#34;/&gt;
      &lt;xs:element name=&#34;dest&#34; type=&#34;dicom_simple_host_t&#34;/&gt;
      &lt;xs:element name=&#34;period&#34; type=&#34;crawler_period_t&#34;/&gt;
      &lt;xs:element name=&#34;search&#34; type=&#34;dicom_query_list_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;crawler_job_list_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;job&#34; type=&#34;crawler_job_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;dicom_dataset_set_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;dataset&#34; type=&#34;named_dicom_dataset_t&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:complexType name=&#34;ordim_crawler_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;crawler&#34; type=&#34;dicom_local_client_t&#34;/&gt;
      &lt;xs:element name=&#34;jobs&#34; type=&#34;crawler_job_list_t&#34;/&gt;
      &lt;xs:element name=&#34;hosts&#34; type=&#34;dicom_host_config_t&#34;/&gt;
      &lt;xs:element name=&#34;datasets&#34; type=&#34;dicom_dataset_set_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:element name=&#34;ordim_crawler_config&#34; type=&#34;ordim_crawler_config_t&#34;/&gt;
 
&lt;/xs:schema&gt;
</pre></div>
<!-- class="example" -->
<p>This schema contains these configurable elements: <code>&lt;crawler&gt;</code>, <code>&lt;jobs&gt;</code>, <code>&lt;hosts&gt;</code>, and <code>&lt;datasets&gt;</code>.</p>
<p class="subhead2"><a id="IMDCM13909"></a>About the &lt;crawler&gt; Element</p>
<p>The <code>&lt;crawler&gt;</code> element specifies the DICOM host configuration for the DICOM crawler.</p>
<p>The following table describes the <code>&lt;crawler&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the crawler element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t11">Element</th>
<th class="cellalignment2219" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t11" headers="r1c1-t11"><code>&lt;title&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t11 r1c2-t11">Specifies the DICOM AE title for the crawler.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;crawler&gt;</code> element:</p>
<pre>&lt;crawler&gt;
    &lt;title&gt;DB_CRAWLER&lt;/title&gt;
&lt;/crawler&gt;
</pre>
<p class="subhead2"><a id="IMDCM13910"></a>About the &lt;jobs&gt; Element</p>
<p>The <code>&lt;jobs&gt;</code> element represents a single crawler job.</p>
<p>The following table describes the <code>&lt;jobs&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the crawler element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t12">Element</th>
<th class="cellalignment2219" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t12" headers="r1c1-t12"><code>&lt;target&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t12 r1c2-t12">Specifies the AE title of the DICOM client to search.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t12" headers="r1c1-t12"><code>&lt;dest&gt;</code></td>
<td class="cellalignment2220" headers="r3c1-t12 r1c2-t12">Specifies the AE title of the DICOM host where DICOM images are to be sent.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t12" headers="r1c1-t12"><code>&lt;period&gt;</code></td>
<td class="cellalignment2220" headers="r4c1-t12 r1c2-t12">Specifies the delay between job runs, including time units.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r5c1-t12" headers="r1c1-t12"><code>&lt;search&gt;</code></td>
<td class="cellalignment2220" headers="r5c1-t12 r1c2-t12">Specifies the list of queries to perform, in order, during the job invocation. Queries are chained such that the output of one query serves as the base data set for the next query.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r6c1-t12" headers="r1c1-t12"><code>&lt;query&gt;</code></td>
<td class="cellalignment2220" headers="r6c1-t12 r1c2-t12">Represents a single query, specifying the name of the data set and the DICOM search root to use.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;jobs&gt;</code> element:</p>
<pre>&lt;jobs&gt;
    &lt;job&gt;
      &lt;target title=&#34; PACS &#34;/&gt;
      &lt;dest title=&#34;DATABASE&#34;/&gt;
      &lt;period duration=&#34;15&#34; timeUnit=&#34;s&#34;/&gt;
      &lt;search&gt;
        &lt;query searchRoot=&#34;study&#34; dataset=&#34;Q1&#34;/&gt;
        &lt;query searchRoot=&#34;study&#34; dataset=&#34;Q2&#34;/&gt;
        &lt;query searchRoot=&#34;study&#34; dataset=&#34;Q3&#34;/&gt;
      &lt;/search&gt;
    &lt;/job&gt;
&lt;/jobs&gt;
</pre>
<p class="subhead2"><a id="IMDCM13911"></a>About the &lt;hosts&gt; Element</p>
<p>The <code>&lt;hosts&gt;</code> element specifies the set of DICOM clients to which the crawler is permitted to connect.</p>
<p>The following table describes the <code>&lt;hosts&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the hosts element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t13">Element</th>
<th class="cellalignment2219" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t13" headers="r1c1-t13"><code>&lt;host&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t13 r1c2-t13">Specifies the title, IP address, and port of a remote DICOM client to which the Oracle DICOM crawler can connect.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;hosts&gt;</code> element:</p>
<pre>&lt;hosts&gt;
    &lt;host title=&#34;DATABASE&#34; address=&#34;localhost&#34; port=&#34;12345&#34;/&gt;
    &lt;host title=&#34;PACS &#34; address=&#34;pacs.hostname&#34; port=&#34;11112&#34;/&gt;
&lt;/hosts&gt;
</pre>
<p class="subhead2"><a id="IMDCM13912"></a>About the &lt;datasets&gt; Element</p>
<p>The <code>&lt;datasets&gt;</code> element specifies the set of DICOM data sets to use as part of the queries for the crawler jobs. Each data set is assigned a name that can be referenced in the query tag for a job.</p>
<p>The following table describes the <code>&lt;datasets&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the datasets element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t14">Element</th>
<th class="cellalignment2219" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t14" headers="r1c1-t14"><code>&lt;dataset&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t14 r1c2-t14">Specifies a single data set.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t14" headers="r1c1-t14"><code>&lt;value&gt;</code></td>
<td class="cellalignment2220" headers="r3c1-t14 r1c2-t14">Specifies a DICOM tag and its corresponding value, as a tag-value pair.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;datasets&gt;</code> element:</p>
<pre>&lt;datasets&gt;
    &lt;dataset name=&#34;Q1&#34;&gt;
      &lt;value tag=&#34;00080052&#34;&gt;STUDY&lt;/value&gt;
      &lt;value tag=&#34;0020000D&#34;&gt;*&lt;/value&gt;
    &lt;/dataset&gt;
    &lt;dataset name=&#34;Q2&#34;&gt;
      &lt;value tag=&#34;00080052&#34;&gt;SERIES&lt;/value&gt;
      &lt;value tag=&#34;0020000E&#34;&gt;*&lt;/value&gt;
    &lt;/dataset&gt;
    &lt;dataset name=&#34;Q3&#34;&gt;
      &lt;value tag=&#34;00080052&#34;&gt;IMAGE&lt;/value&gt;
      &lt;value tag=&#34;00080018&#34;&gt;*&lt;/value&gt;
    &lt;/dataset&gt;
&lt;/datasets&gt;
</pre></div>
<!-- class="sect2" -->
<a id="CIHFAEFJ"></a>
<div id="IMDCM13913" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.4.3</span> Configuring the Oracle DICOM WADO Proxy</h3>
<p>The Oracle DICOM WADO proxy is configured by creating an XML file that adheres to the <a id="sthref135"></a><a id="sthref136"></a>schema <code>ordim_wado_config.xsd</code>. This XSD file is shipped in the <code>OrdDicomLibrary.ear</code> archive at this location: <code>APP-INF/lib/dicom-net.jar</code>.</p>
<p><a href="#CIHIBGAC">Example 4-5</a> lists the schema <code>ordim_wado_config.xsd</code>. The XML include statement highlighted in bold calls the common data type definition schema <code>ordim_common.xsd</code>, which is listed in <a href="#CIHGJAFE">Example 4-3</a>.</p>
<div id="IMDCM13927" class="example">
<p class="titleinexample"><a id="CIHIBGAC"></a>Example 4-5 ordim_wado_config.xsd Schema</p>
<pre>&lt;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34; ?&gt;
&lt;xs:schema xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34;&gt;
  <span class="bold">&lt;xs:include schemaLocation=&#34;ordim_common.xsd&#34;/&gt;</span>
  
  &lt;xs:complexType name=&#34;ordim_wado_config_t&#34;&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&#34;wado&#34; type=&#34;dicom_local_host_t&#34;/&gt;
      &lt;xs:element name=&#34;hosts&#34; type=&#34;dicom_host_config_t&#34;/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;
  
  &lt;xs:element name=&#34;ordim_wado_config&#34; type=&#34;ordim_wado_config_t&#34;/&gt;
  
&lt;/xs:schema&gt;
</pre></div>
<!-- class="example" -->
<p>This schema contains these configurable elements: <code>&lt;wado&gt;</code> and <code>&lt;hosts&gt;</code>.</p>
<p class="subhead2"><a id="IMDCM13914"></a>About the &lt;wado&gt; Element</p>
<p>The <code>&lt;wado&gt;</code> element is used to identify the DICOM host information for the Oracle DICOM WADO proxy.</p>
<p>The following table describes the <code>&lt;wado&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the wado element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t15">Element</th>
<th class="cellalignment2219" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t15" headers="r1c1-t15"><code>&lt;wado&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t15 r1c2-t15">Identifies the DICOM host information for the proxy.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r3c1-t15" headers="r1c1-t15"><code>&lt;title&gt;</code></td>
<td class="cellalignment2220" headers="r3c1-t15 r1c2-t15">Specifies the DICOM AE title for the host.</td>
</tr>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r4c1-t15" headers="r1c1-t15"><code>&lt;bind&gt;</code></td>
<td class="cellalignment2220" headers="r4c1-t15 r1c2-t15">Specifies the port number the host listens on for incoming DICOM associations.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;wado&gt;</code> element:</p>
<pre>&lt;wado useSSL=&#34;false&#34;&gt;
    &lt;title&gt;WADO&lt;/title&gt;
    &lt;bind port=&#34;12347&#34;/&gt;
&lt;/wado&gt;
</pre>
<p class="subhead2"><a id="IMDCM13915"></a>About the &lt;hosts&gt; Element</p>
<p>The <code>&lt;hosts&gt;</code> element specifies the set of DICOM clients to which the proxy is permitted to connect.</p>
<p>The following table describes the <code>&lt;hosts&gt;</code> element in detail:</p>
<div class="inftblruleinformal">
<table class="cellalignment2223" summary="List of child elements for the hosts element" dir="ltr">
<thead>
<tr class="cellalignment2212">
<th class="cellalignment2219" id="r1c1-t16">Element</th>
<th class="cellalignment2219" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2212">
<td class="cellalignment2220" id="r2c1-t16" headers="r1c1-t16"><code>&lt;host&gt;</code></td>
<td class="cellalignment2220" headers="r2c1-t16 r1c2-t16">Specifies the AE title, IP address, and port of a remote DICOM client to which the Oracle DICOM proxy can connect.</td>
</tr>
</tbody>
</table>
<br/></div>
<!-- class="inftblruleinformal" -->
<p>The following code segment shows an example of the <code>&lt;hosts&gt;</code> element:</p>
<pre>&lt;hosts&gt;
    &lt;host title=&#34;DATABASE&#34; address=&#34;localhost&#34; port=&#34;12345&#34;/&gt;
    &lt;host title=&#34;PACS &#34; address=&#34;pacs.hostname&#34; port=&#34;11112&#34;/&gt;
&lt;/hosts&gt;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHHBCAB"></a>
<div id="IMDCM13916" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.5</span> Configuring DICOM Protocol Support for Oracle Database</h2>
<p>A new DICOM data model configuration document type, DICOM_PROTOCOL<a id="sthref137"></a><a id="sthref138"></a><a id="sthref139"></a>, is added for Oracle Multimedia DICOM protocol support. Administrators can use this new document type to manage the behavior of a DICOM protocol adapter instance that stores DICOM images and metadata in one or more tables in Oracle Database. A <a href="dm_glossary.htm#CHDJHDEA"><span class="xrefglossterm">DICOM protocol document</span></a> is a named container for user-configurable parameters that govern where DICOM images and metadata are stored, such as table and column names. Each instance of the Oracle DICOM protocol adapter that is configured to connect to Oracle Database must have an associated DICOM protocol document in order to store, search, query, and retrieve DICOM images and metadata to and from Oracle Database.</p>
<p>Any table used by the DICOM protocol adapter instance to store images or metadata must satisfy these requirements:</p>
<ul>
<li>
<p>The table must contain a SOP instance UID (<code>0008,0018</code>) column.</p>
</li>
<li>
<p>Table columns that are mapped to DICOM attributes with a value representation (VR) of <code>DA</code> must be of type <code>DATE</code>.</p>
</li>
<li>
<p>Table columns that are mapped to DICOM attributes with a VR other than <code>DA</code> must be of type <code>VARCHAR2</code>.</p>
</li>
</ul>
<p>Oracle recommends specifying the SOP instance UID column as the primary key for the table.</p>
<p>Administrators can manage DICOM protocol documents as part of the Oracle Multimedia DICOM data model using the ORD_DICOM_ADMIN data model repository interface. For example, to insert a new DICOM protocol document into the data model, invoke the procedure ORD_DICOM_ADMIN.insertDocument and specify <code>DICOM_PROTOCOL</code> as the value of the docType parameter.</p>
<p>See the DICOM protocol document schema (<code>ordcmdp.xsd</code>) for details about the available elements and attributes for the <code>&lt;storage&gt;</code> tag.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="ch_adm_ref.htm#CHDCJFFF">Chapter 13, &#34;ORD_DICOM_ADMIN Package Reference&#34;</a> for more details about the available Oracle Multimedia DICOM functions and procedures for managing the DICOM data model</p>
</li>
<li>
<p><a href="ch_adm_over.htm#CHDEGJBE">Section 10.7.5</a> for more information about how to insert DICOM protocol documents in the repository</p>
</li>
<li>
<p><a href="ch_dtmod_docs.htm#BEIFCJIB">Section 11.2.3</a> for more information about how to create DICOM protocol documents</p>
</li>
<li>
<p><a href="ch_adm_repos.htm#CIHIADJF">Section 12.5</a> for the steps required to insert DICOM protocol documents into the repository</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CIHBCIIA"></a>
<div id="IMDCM13968" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.6</span> Image Versioning with the DICOM Protocol Adapter</h2>
<p>The DICOM protocol adapter supports image versioning<a id="sthref140"></a>. Thus, if multiple images with the same SOP instance UID are sent to the DICOM protocol adapter, instead of discarding duplicate images, it retains multiple versions of the images.</p>
<p>Versioning is enabled by a user-specified version column for each table defined in the DICOM protocol document. Although the name of the version column can differ for each table, all tables in the configuration must specify a version column.</p>
<p>A strictly increasing sequence assigns a version number to each image when it is stored in Oracle Database. Thus, each image is uniquely identified by its corresponding SOP instance UID-Version Number pair. When retrieving an image, Oracle Database returns the image with the largest version number.</p>
<p>The following example shows a sample DICOM protocol document for a deployment that uses versioning.</p>
<pre>    &lt;?xml version=&#34;1.0&#34;?&gt;
    &lt;DICOM_PROTOCOL xmlns=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;
      xmlns:dt=&#34;http://xmlns.oracle.com/ord/dicom/datatype_1_0&#34;
      xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
      xsi:schemaLocation=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0
      http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;&gt;
      &lt;STORAGE table=&#39;test.dicom_orcl_meta&#39; id_col=&#34;sop_instance_uid&#34; ver_col=&#34;meta_ver&#34;&gt;
        &lt;ATTRIBUTE column=&#39;&#34;STUDY_INSTANCE_UID&#34;&#39; tag=&#34;0020000D&#34;/&gt;
        &lt;ATTRIBUTE column=&#39;&#34;SERIES_INSTANCE_UID&#34;&#39; tag=&#34;0020000E&#34;/&gt;
      &lt;/STORAGE&gt;
      &lt;STORAGE table=&#39;test.dicom_orcl_dcm&#39; id_col=&#34;sop_instance_uid&#34; ver_col=&#34;dicom_ver&#34;&gt;
        &lt;DICOM column=&#34;blob_data&#34; type=&#34;BLOB&#34; retain=&#34;true&#34;/&gt;
      &lt;/STORAGE&gt;
    &lt;/DICOM_PROTOCOL&gt;
</pre></div>
<!-- class="sect1" -->
<a id="CIHHIEGF"></a>
<div id="IMDCM13969" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.7</span> Extracting Private Attributes from DICOM Data with the DICOM Protocol Adapter</h2>
<p>The DICOM protocol adapter supports the extraction of private attribute<a id="sthref141"></a> tags based on a group number and a tag name. Using this feature does not require knowing the element number of the tag.</p>
<p>Follow these steps to use this feature:</p>
<ol>
<li>
<p>Create a private dictionary document that describes the private attribute.</p>
<p>The following example shows a sample private dictionary document that defines a private attribute (<code>0031</code>,<code><span class="codeinlineitalic">XX</span></code><code>00</code>), where <code><span class="codeinlineitalic">X</span></code> is a wildcard matching any hexadecimal digit:</p>
<pre>    &lt;?xml version=&#34;1.0&#34;?&gt;
    &lt;DICOM_PRIVATE_ATTRIBUTES
      xmlns=&#34;http://xmlns.oracle.com/ord/dicom/privateDictionary_1_0&#34;
      xmlns:dt=&#34;http://xmlns.oracle.com/ord/dicom/datatype_1_0&#34;
      xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
      xsi:schemaLocation=&#34;http://xmlns.oracle.com/ord/dicom/
          privateDictionary_1_0
      http://xmlns.oracle.com/ord/dicom/privateDictionary_1_0&#34;&gt;
      &lt;PRIVATE_ATTRIBUTE_DEFINITION&gt;
        &lt;TAG&gt;0031XX00&lt;/TAG&gt;
        &lt;NAME&gt;LINKED ATTRIBUTES 1.0&lt;/NAME&gt;
        &lt;DEFINER&gt;LINKED ATTRIBUTES 1.0&lt;/DEFINER&gt;
        &lt;VR&gt;UN&lt;/VR&gt;
        &lt;VM&gt;1&lt;/VM&gt;
      &lt;/PRIVATE_ATTRIBUTE_DEFINITION&gt;
    &lt;/DICOM_PRIVATE_ATTRIBUTES&gt;
</pre></li>
<li>
<p>Insert the private dictionary document into the DICOM data model repository of Oracle Database.</p>
</li>
<li>
<p>Configure the DICOM protocol adapter to use the private attribute.</p>
<p>This example shows a sample DICOM protocol document that configures the DICOM protocol adapter to use the defined private attribute. The values of the attributes <code>tag_name</code> and <code>definer</code> of the element <code>&lt;SPECIAL_TAG&gt;</code> in the DICOM protocol adapter configuration document must match the values of the tags <code>&lt;NAME&gt;</code> and <code>&lt;DEFINER&gt;</code>, respectively, in the <code>&lt;PRIVATE_ATTRIBUTE_DEFINITION&gt;</code> section of the private dictionary document.</p>
<pre>   ?xml version=&#34;1.0&#34;?&gt;
   &lt;DICOM_PROTOCOL xmlns=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;
     xmlns:dt=&#34;http://xmlns.oracle.com/ord/dicom/datatype_1_0&#34;
     xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
     xsi:schemaLocation=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0
     http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;&gt;
     &lt;STORAGE table=&#39;test.dicom_orcl_meta&#39; id_col=&#34;sop_instance_uid&#34;&gt;
       &lt;ATTRIBUTE column=&#39;&#34;STUDY_INSTANCE_UID&#34;&#39; tag=&#34;0020000D&#34;/&gt;
       &lt;ATTRIBUTE column=&#39;&#34;SERIES_INSTANCE_UID&#34;&#39; tag=&#34;0020000E&#34;/&gt;
       &lt;SPECIAL_TAG column=&#39;&#34;DICOM_00311000&#34;&#39; tag_name=&#34;LINKED ATTRIBUTES 1.0&#34; 
         definer=&#34;LINKED ATTRIBUTES 1.0&#34;/&gt;
     &lt;/STORAGE&gt;
     &lt;STORAGE table=&#39;test.dicom_orcl_dcm&#39; id_col=&#34;sop_instance_uid&#34;&gt;
       &lt;DICOM column=&#34;blob_data&#34; type=&#34;BLOB&#34;/&gt;
     &lt;/STORAGE&gt;
   &lt;/DICOM_PROTOCOL&gt;
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="ch_dtmod_docs.htm#CIHHFHGC">Section 11.2.6</a> for detailed information about creating private dictionary documents</p>
</li>
<li>
<p><a href="ch_adm_over.htm#BGBCBHHD">Section 10.7</a> for information about how to insert private dictionary documents into the repository</p>
</li>
<li>
<p><a href="ch_dtmod_docs.htm#BEIFCJIB">Section 11.2.3</a> for more information about DICOM protocol documents</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CIHHCJAE"></a>
<div id="IMDCM13970" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.8</span> Improving DICOM Metadata Extraction for BLOB Storage</h2>
<p>To improve the performance when extracting DICOM metadata from DICOM images stored in BLOBs<a id="sthref142"></a>, you can specify a mapping document to use during the metadata extraction. The mapping document specifies the attributes to be extracted. Using a mapping document in this way provides performance improvements that are similar to inserting a stored tag list document for use with ORDDicom storage.</p>
<p>The following example shows a sample DICOm protocol document for a deployment that specifies a mapping document:</p>
<pre>   &lt;?xml version=&#34;1.0&#34;?&gt;
   &lt;DICOM_PROTOCOL xmlns=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;
     xmlns:dt=&#34;http://xmlns.oracle.com/ord/dicom/datatype_1_0&#34;
     xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
     xsi:schemaLocation=&#34;http://xmlns.oracle.com/ord/dicom/protocol_1_0
     http://xmlns.oracle.com/ord/dicom/protocol_1_0&#34;&gt;
     &lt;ADMIN_DOC doc_type=&#39;MAPPING&#39; doc_name=&#34;ordcmmp.xml&#34; doc_option=&#34;STANDARD&#34;/&gt;
     &lt;STORAGE table=&#39;test.dicom_orcl_meta&#39; id_col=&#34;sop_instance_uid&#34;&gt;
       &lt;ATTRIBUTE column=&#39;&#34;STUDY_INSTANCE_UID&#34;&#39; tag=&#34;0020000D&#34;/&gt;
       &lt;ATTRIBUTE column=&#39;&#34;SERIES_INSTANCE_UID&#34;&#39; tag=&#34;0020000E&#34;/&gt;
     &lt;/STORAGE&gt;
     &lt;STORAGE table=&#39;test.dicom_orcl_dcm&#39; id_col=&#34;sop_instance_uid&#34;&gt;
       &lt;DICOM column=&#34;blob_data&#34; type=&#34;BLOB&#34;/&gt;
     &lt;/STORAGE&gt;
   &lt;/DICOM_PROTOCOL&gt;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="ch_dtmod_docs.htm#BGBGGFCJ">Section 11.2.4</a> for more information about mapping documents</p>
</li>
<li>
<p><a href="ch_dtmod_docs.htm#CIHDAAAG">Section 11.2.8</a> for more information about stored tag list documents</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2211">
<tr>
<td class="cellalignment2220">
<table class="cellalignment2216">
<tr>
<td class="cellalignment2215"><a href="ch_gen_over.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2215"><a href="ch_dtmod_ref.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2222">
<table class="cellalignment2214">
<tr>
<td class="cellalignment2215"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2215"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2215"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2215"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2215"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2215"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>