<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-3673"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CTX_REPORT%20Package"></a><title>CTX_REPORT Package</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="CTX_REPORT package, index reports, function versions of procedures, DESCRIBE_INDEX, DESCRIBE_INDEX procedure, index, describing, creating a report on, describing an index, creating an index report, report, describing index, XML report output format, CTX_REPORT output format, DESCRIBE_POLICY, DESCRIBE_POLICY procedure, policy, report describing, describing policy, CREATE_INDEX_SCRIPT, CREATE_INDEX_SCRIPT procedure, creating index script, duplicating with script, script, duplicating indexes with scripts, create index, CREATE_POLICY_SCRIPT, CREATE_POLICY_SCRIPT procedure, create script, duplicate with script, duplicating policy with script, create policy, INDEX_SIZE, INDEX_SIZE procedure, show size of objects, show size of index objects, index objects, index size, INDEX_STATS, INDEX_STATS procedure, show statistics, statistics, showing index, index statistics, QUERY_LOG_SUMMARY, QUERY_LOG_SUMMARY procedure, query, report of logged, logging queries, analysis, analyzing queries, of logged queries, TOKEN_INFO, TOKEN_INFO procedure, token report, generating, token information, TOKEN_TYPE, TOKEN_TYPE procedure, token, translating name into, translations, English name to numeric token"/>
<meta name="dcterms.created" content="2017-06-08T04:23:35Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Reference"/>
<meta name="dcterms.identifier" content="E41399-12"/>
<meta name="dcterms.isVersionOf" content="CCREF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="cqrypkg.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cthes.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41399-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-8750E658-F568-4B17-B78B-0F71848A1C63"></a> <span id="PAGE" style="display:none;">18/31</span> <!-- End Header -->
<a id="CCREF1100"></a>
<h1 id="CCREF-GUID-8750E658-F568-4B17-B78B-0F71848A1C63" class="sect1"><span class="enumeration_chapter">13</span> CTX_REPORT Package</h1>
<div>
<p>This chapter describes how to use the <code class="codeph">CTX_REPORT</code> package to create reports on indexing and querying. These reports can help you troubleshoot problems or fine-tune your applications.</p>
<p>This chapter contains the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="crptpkg.htm#GUID-F906F875-B2FC-4611-AECF-3CF71688C935">Description of Procedures in CTX_REPORT</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F">Using the Function Versions</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-21915193-473D-4FE8-B738-034813D325F6">DESCRIBE_INDEX</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D">DESCRIBE_POLICY</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97">CREATE_INDEX_SCRIPT</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-C515B497-D252-40C2-8140-336C0CCE9B8B">CREATE_POLICY_SCRIPT</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18">INDEX_SIZE</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1">INDEX_STATS</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-AFD54A2E-90C8-42F8-9607-AC517428056D">QUERY_LOG_SUMMARY</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3">TOKEN_INFO</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a></p>
</li>
<li>
<p><a href="crptpkg.htm#GUID-06C55318-69A1-499E-B5C8-D7FC163A832C">VALIDATE_INDEX</a></p>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-8750E658-F568-4B17-B78B-0F71848A1C63__GUID-06412EF9-6158-4959-92C5-9C4B632E5D8B">
<p class="notep1">See Also:</p>
<p><a class="olink CCAPP1000" target="_blank" href="../CCAPP/GUID-D03C25A2-D34E-4FE3-AAC1-987D103996F8.htm#CCAPP1000"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for an overview of the <code class="codeph">CTX_REPORT</code> package and how you can use the various procedures described in this chapter</p>
</div>
</div>
<a id="CCREF2139"></a>
<div class="props_rev_3"><a id="GUID-F906F875-B2FC-4611-AECF-3CF71688C935"></a>
<h2 id="CCREF-GUID-F906F875-B2FC-4611-AECF-3CF71688C935" class="sect2"><span class="enumeration_section">13.1</span> Description of Procedures in CTX_REPORT</h2>
<div>
<p>The <code class="codeph">CTX_REPORT</code> package contains the following procedures:</p>
<div class="tblformal" id="GUID-F906F875-B2FC-4611-AECF-3CF71688C935__GUID-2F9F4412-ED07-4BE6-938F-67D19EAC3C19">
<table class="cellalignment3028" summary="This table describes CTX_REPORT Procedures.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3029" id="d110226e198">Name</th>
<th class="cellalignment3030" id="d110226e202">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e207" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-21915193-473D-4FE8-B738-034813D325F6">DESCRIBE_INDEX</a></p>
</td>
<td class="cellalignment3032" headers="d110226e207 d110226e202">
<p>Creates a report describing the index.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e216" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D">DESCRIBE_POLICY</a></p>
</td>
<td class="cellalignment3032" headers="d110226e216 d110226e202">
<p>Creates a report describing a policy.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e225" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97">CREATE_INDEX_SCRIPT</a></p>
</td>
<td class="cellalignment3032" headers="d110226e225 d110226e202">
<p>Creates a SQL*Plus script to duplicate the named index.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e234" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-C515B497-D252-40C2-8140-336C0CCE9B8B">CREATE_POLICY_SCRIPT</a></p>
</td>
<td class="cellalignment3032" headers="d110226e234 d110226e202">
<p>Creates a SQL*Plus script to duplicate the named policy.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e243" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18">INDEX_SIZE</a></p>
</td>
<td class="cellalignment3032" headers="d110226e243 d110226e202">
<p>Creates a report to show the internal objects of an index, their tablespaces and used sizes.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e252" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1">INDEX_STATS</a></p>
</td>
<td class="cellalignment3032" headers="d110226e252 d110226e202">
<p>Creates a report to show the various statistics of an index.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e261" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-AFD54A2E-90C8-42F8-9607-AC517428056D">QUERY_LOG_SUMMARY</a></p>
</td>
<td class="cellalignment3032" headers="d110226e261 d110226e202">
<p>Creates a report showing query statistics</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e270" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3">TOKEN_INFO</a></p>
</td>
<td class="cellalignment3032" headers="d110226e270 d110226e202">
<p>Creates a report showing the information for a token, decoded.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e279" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a></p>
</td>
<td class="cellalignment3032" headers="d110226e279 d110226e202">
<p>Translates a name and returns a numeric token type.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3031" id="d110226e288" headers="d110226e198">
<p><a href="crptpkg.htm#GUID-06C55318-69A1-499E-B5C8-D7FC163A832C">VALIDATE_INDEX</a></p>
</td>
<td class="cellalignment3032" headers="d110226e288 d110226e202">
<p>Checks for index corruption and reports on problems found. Mainly used with Oracle Support.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="CCREF2140"></a>
<div class="props_rev_3"><a id="GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F"></a>
<h2 id="CCREF-GUID-3E1661F1-B3CC-4924-9183-99286F6B6D7F" class="sect2"><span class="enumeration_section">13.2</span> Using the Function Versions</h2>
<div>
<p>Some of the procedures in the <code class="codeph">CTX_REPORT</code> package have function versions. You can call these functions as follows:</p>
<pre dir="ltr">select ctx_report.describe_index(&#39;MYINDEX&#39;) from dual;
</pre>
<p>In SQL*Plus, to generate an output file to send to support, you can do:</p>
<pre dir="ltr">set long 64000
set pages 0
set heading off
set feedback off
spool outputfile
select ctx_report.describe_index(&#39;MYINDEX&#39;) from dual;
spool off
</pre></div>
</div>
<a id="CCREF2141"></a>
<div class="props_rev_3"><a id="GUID-21915193-473D-4FE8-B738-034813D325F6"></a>
<h2 id="CCREF-GUID-21915193-473D-4FE8-B738-034813D325F6" class="sect2"><span class="enumeration_section">13.3</span> DESCRIBE_INDEX</h2>
<div>
<div class="section">
<p>Creates a report describing the index. This includes the settings of the index metadata, the indexing objects used, the settings of the attributes of the objects, and index partition descriptions, if any.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.DESCRIBE_INDEX(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.DESCRIBE_INDEX(
  index_name     IN VARCHAR2,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return CLOB;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3634"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-1024632B-4DB9-4639-872B-37FC68C5E393"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index to describe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3635"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-A028DD31-3B38-4320-87C0-91419EFCAB8F"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.</p>
<p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3636"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-21915193-473D-4FE8-B738-034813D325F6__GUID-D339E01E-9A5F-400D-AA24-C5BD2C88C034"><!-- --></a>report_format</dt>
<dd>
<p>Specify whether the report should be generated as &#39;TEXT&#39; or as &#39;XML&#39;. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Notes</p>
<p><code class="codeph">CTX_REPORT.DESCRIBE_INDEX</code> outputs <code class="codeph">FILTER</code> <code class="codeph">BY</code> and <code class="codeph">ORDER</code> <code class="codeph">BY</code> column information if the index is created with <code class="codeph">FILTER</code> <code class="codeph">BY</code> and/or <code class="codeph">ORDER</code> <code class="codeph">BY</code> clauses.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Topics</p>
<p><span class="q">&#34;<a href="csql.htm#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>&#34;</span></p>
<p><span class="q">&#34;<a href="cddlpkg.htm#GUID-F8DD37A5-04BA-45A3-BF6F-6614922B5058">ADD_SDATA_COLUMN</a>&#34;</span></p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2142"></a>
<div class="props_rev_3"><a id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D"></a>
<h2 id="CCREF-GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D" class="sect2"><span class="enumeration_section">13.4</span> DESCRIBE_POLICY</h2>
<div>
<div class="section">
<p>Creates a report describing the policy. This includes the settings of the policy metadata, the indexing objects used, and the settings of the attributes of the objects.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.DESCRIBE_POLICY(
  policy_name    IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.DESCRIBE_POLICY(
  policy_name    IN VARCHAR2,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return CLOB;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3637"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-595C0711-589D-44A6-A9A0-FBF388DEE6BE"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.</p>
<p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before <code class="codeph">report</code> is generated, so any existing contents will be overwritten by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3638"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-58E7220D-8C29-40DD-A325-DFE618B2F2B8"><!-- --></a>report_format</dt>
<dd>
<p>Specify whether the report should be generated as &#39;TEXT&#39; or as &#39;XML&#39;. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3639"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AEBD1D07-8BCE-4475-923A-86B973C5904D__GUID-91363CAD-E7A4-4A1A-A60D-9C1B0641DB8A"><!-- --></a>policy_name</dt>
<dd>
<p>Specify the name of the policy to describe.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2143"></a>
<div class="props_rev_3"><a id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97"></a>
<h2 id="CCREF-GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97" class="sect2"><span class="enumeration_section">13.5</span> CREATE_INDEX_SCRIPT</h2>
<div>
<div class="section">
<p>Creates a SQL*Plus script which will create a text index that duplicates the named text index.</p>
<p>The created script will include creation of preferences identical to those used in the named text index. However, the names of the preferences will be different.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.CREATE_INDEX_SCRIPT(
  index_name      in varchar2,
  report          in out nocopy clob,
  prefname_prefix in varchar2 default null
);

function CTX_REPORT.CREATE_INDEX_SCRIPT(
  index_name      in varchar2,
  prefname_prefix in varchar2 default null
) return clob;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3640"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-E9417706-B737-414B-8B75-16E1905658E2"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3641"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-5159A058-85B8-4EB8-87AA-DE3D2839396E"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the script.</p>
<p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3642"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-6E08F8DB-0CB4-4596-B1AE-005BE5F16D97__GUID-297ADFBE-BF41-408A-ABE1-903AA2F0D240"><!-- --></a>prefname_prefix</dt>
<dd>
<p>Specify optional prefix to use for preference names.</p>
<p>If <code class="codeph">prefname_prefix</code> is omitted or NULL, index name will be used. The <code class="codeph">prefname_prefix</code> follows index length restrictions.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Notes</p>
<p><code class="codeph">CTX_REPORT.CREATE_INDEX_SCRIPT</code> will also generate necessary <code class="codeph">FILTER</code> <code class="codeph">BY</code> and <code class="codeph">ORDER</code> <code class="codeph">BY</code> clauses for <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> statements.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Topics</p>
<p><span class="q">&#34;<a href="csql.htm#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>&#34;</span></p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2144"></a>
<div class="props_rev_3"><a id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B"></a>
<h2 id="CCREF-GUID-C515B497-D252-40C2-8140-336C0CCE9B8B" class="sect2"><span class="enumeration_section">13.6</span> CREATE_POLICY_SCRIPT</h2>
<div>
<div class="section">
<p>Creates a SQL*Plus script which will create a text policy that duplicates the named text policy.</p>
<p>The created script will include creation of preferences identical to those used in the named text policy.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.CREATE_POLICY_SCRIPT(
  policy_name      in varchar2,
  report           in out nocopy clob,
  prefname_prefix  in varchar2 default null
);

function CTX_REPORT.CREATE_POLICY_SCRIPT(
  policy_name      in varchar2,
  prefname_prefix  in varchar2 default null
) return clob;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3643"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-9DD72716-BDF7-4AA1-9EC2-690BDC80F3E0"><!-- --></a>policy_name</dt>
<dd>
<p>Specify the name of the policy.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3644"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-19BBD491-52B1-41AB-BF43-FD67C33B8D6A"><!-- --></a>report</dt>
<dd>
<p>Specify the locator to which to write the script.</p>
<p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3645"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C515B497-D252-40C2-8140-336C0CCE9B8B__GUID-3BA97093-FC97-46CF-B139-100C01257E31"><!-- --></a>prefname_prefix</dt>
<dd>
<p>Specify the optional prefix to use for preference names. If <code class="codeph">prefname_prefix</code> is omitted or NULL, policy name will be used. <code class="codeph">prefname_prefix</code> follows policy length restrictions.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2145"></a>
<div class="props_rev_3"><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18"></a>
<h2 id="CCREF-GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18" class="sect2"><span class="enumeration_section">13.7</span> INDEX_SIZE</h2>
<div>
<div class="section">
<p>Creates a report showing the internal objects of the text index or text index partition, and their tablespaces, allocated, and used sizes.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter, or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.INDEX_SIZE(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  part_name      IN VARCHAR2 DEFAULT NULL,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.INDEX_SIZE(
  index_name     IN VARCHAR2,
  part_name      IN VARCHAR2 DEFAULT NULL,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT
) return clob;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3646"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-E6A15AC6-E3FE-4696-85FD-A638176ED645"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index to describe.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3647"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-42AAFB60-13B1-4AB7-B23F-8E71D77C2924"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.</p>
<p>If <code class="codeph">report</code> is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3648"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-0BBBB2EC-F27C-4ADF-9320-8F136F17B711"><!-- --></a>part_name</dt>
<dd>
<p>Specify the name of the index partition (optional). If <code class="codeph">part_name</code> is NULL, and the index is a local partitioned text index, then all objects of all partitions will be displayed. If <code class="codeph">part_name</code> is provided, then only the objects of a particular partition will be displayed.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3649"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-ED88249A-1CE7-4075-BCDE-8CDD7C933F18__GUID-96797A3C-405A-4CB5-AF03-2CDA76071821"><!-- --></a>report_format</dt>
<dd>
<p>Specify whether the report should be generated as &#39;TEXT&#39; or as &#39;XML&#39;. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_TEXT</code> or <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_XML</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Notes</p>
<p><code class="codeph">CTX_REPORT.INDEX_SIZE</code> will also output information on dr$<span class="italic">indexname</span>$S table.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Topics</p>
<p><span class="q">&#34;<a href="csql.htm#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a>&#34;</span></p>
<p><a href="cdatadic.htm#GUID-5F662035-B0F5-4F72-A2A8-A5B07070ABBF__BHCGFIJI" title="This table describes the BASIC_STORAGE attributes.">Table 2-39</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2146"></a>
<div class="props_rev_3"><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1"></a>
<h2 id="CCREF-GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1" class="sect2"><span class="enumeration_section">13.8</span> INDEX_STATS</h2>
<div>
<div class="section">
<p>Creates a report showing various calculated statistics about the text index.</p>
<p>This procedure fully scans the text index tables, so it may take a long time to run for large indexes.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure ctx_report.index_stats(
  index_name     IN VARCHAR2,
  report         IN OUT NOCOPY CLOB,
  part_name      IN VARCHAR2 DEFAULT NULL,
  frag_stats     IN BOOLEAN DEFAULT TRUE,
  list_size      IN NUMBER DEFAULT 100,
  report_format  IN VARCHAR2 DEFAULT FMT_TEXT,
  stat_type      IN VARCHAR2 DEFAULT NULL
);
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3650"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-14E02E18-21D7-43C7-AB64-A6B6703F22A9"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index to describe. This must be a <code class="codeph">CONTEXT</code> index.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3651"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-03B226B5-E027-4D9F-9D21-A67DF7E4898A"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.If report is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The report <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3652"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-E90592F9-4089-4CA8-A466-D803E42D7D25"><!-- --></a>part_name</dt>
<dd>
<p>Specify the name of the index partition. If the index is a local partitioned index, then <code class="codeph">part_name</code> must be provided. <code class="codeph">INDEX_STATS</code> will calculate the statistics for that index partition.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3653"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-CDB7FDBF-4D76-475A-A1B5-D1398CA40827"><!-- --></a>frag_stats</dt>
<dd>
<p>Specify TRUE to calculate fragmentation statistics. If <code class="codeph">frag_stats</code> is FALSE, the report will not show any statistics relating to size of index data. However, the operation should take less time and resources to calculate the token statistics.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3654"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-3651910A-C1A8-4B21-A281-625A9823BF0C"><!-- --></a>list_size</dt>
<dd>
<p>Specify the number of elements in each compiled list. <code class="codeph">list_size</code> has a maximum value of 1000.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3655"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-69B68697-A14A-4602-897E-10A7DE7338CF"><!-- --></a>report_format</dt>
<dd>
<p>Specify whether the report should be generated as &#39;TEXT&#39; or as &#39;XML&#39;. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_TEXT</code> or <code class="codeph">CTX_REPORT</code>.<code class="codeph">FMT_XML</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3656"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-DCC5F039-91F4-4DC1-94B1-C62D49DA4192"><!-- --></a>stat_type</dt>
<dd>
<p>Specify the estimated statistics to output. If this parameter is set, then <code class="codeph">frag_stats</code> is ignored. The possible values are:</p>
<div class="tblformal" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-28CBF8B4-D89B-4397-B04D-729CFF698ED2">
<table class="cellalignment3033" summary="This table describes types of statistics.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3043" id="d110226e1392">Statistics Type</th>
<th class="cellalignment3044" id="d110226e1395">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3045" id="d110226e1400" headers="d110226e1392">
<p>EST_FRAG_STATS</p>
</td>
<td class="cellalignment3046" headers="d110226e1400 d110226e1395">
<p>Get the estimated fragmentation stats for the index. When this type is given <code class="codeph">list_size</code> is ignored.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3045" id="d110226e1410" headers="d110226e1392">
<p>EST_FREQUENT_TOKENS</p>
</td>
<td class="cellalignment3046" headers="d110226e1410 d110226e1395">
<p>Get the estimated frequently queried tokens for the index. You can give a value of up to 100 for <code class="codeph">list_size</code>.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3045" id="d110226e1420" headers="d110226e1392">
<p>EST_TOKENS_TO_OPTIMIZE</p>
</td>
<td class="cellalignment3046" headers="d110226e1420 d110226e1395">
<p>Show best tokens to optimize, based on frequency of querying and fragmentation. You can give a value of up to 100 for <code class="codeph">list_size</code>.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3045" id="d110226e1430" headers="d110226e1392">
<p>EST_SLOWEST_QUERIES</p>
</td>
<td class="cellalignment3046" headers="d110226e1430 d110226e1395">
<p>Show slowest running queries for the index. You can give a value of up to 100 for <code class="codeph">list_size</code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<div class="infobox-note" id="GUID-C65CC1FF-4D6D-4C26-8DEE-6679B07FE7E1__GUID-7B578B2A-756B-42C2-A89F-F361E4AFF705">
<p class="notep1">Note:</p>
<p>The estimated statistics for <code class="codeph">stat_type</code> is only available if <code class="codeph">query_stats</code> is enabled. See CTX_OUTPUT.<a href="coutpkg.htm#GUID-D43D058C-F4FB-4C2A-965A-5872F134784F">ENABLE_QUERY_STATS</a> and CTX_OUTPUT.<a href="coutpkg.htm#GUID-B772A716-F22F-4614-9086-4E95CDE63F84">DISABLE_QUERY_STATS</a>.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<pre dir="ltr">create table output (result CLOB);
 
  declare
    x clob := null;
  begin
    ctx_report.index_stats(&#39;tdrbprx21&#39;,x);
    insert into output values (x);
    commit;
    dbms_lob.freetemporary(x);
  end;
  /
 
set long 32000
set head off
set pagesize 10000
select * from output; 
</pre>
<p>The following sample output is for <code class="codeph">INDEX_STATS</code> on a context index. This report has been truncated for clarity. It shows some of the token statistics and all of the fragmentation statistics.</p>
<p>The fragmentation statistics are at the end of the report. It tells you optimal row fragmentation, an estimated amount of garbage data in the index, and a list of the most fragmented tokens. Running <code class="codeph">CTX_DDL.OPTIMIZE_INDEX</code> cleans up the index.</p>
<pre dir="ltr">=================================================================
              STATISTICS FOR &#34;DR_TEST&#34;.&#34;TDRBPRX21&#34;
=================================================================

indexed documents:                                          53
allocated docids:                                           68
$I rows:                                                16,259

-----------------------------------------------------------------
                        TOKEN STATISTICS
-----------------------------------------------------------------

unique tokens:                                          13,445
average $I rows for each token:                           1.21
tokens with most $I rows:
  telecommunications industry (THEME)                        6
  science and technology (THEME)                             6
  EMAIL (FIELD SECTION &#34;SOURCE&#34;)                             6
  DEC (FIELD SECTION &#34;TIMESTAMP&#34;)                            6
  electronic mail (THEME)                                    6
  computer networking (THEME)                                6
  communications (THEME)                                     6
  95 (FIELD SECTION &#34;TIMESTAMP&#34;)                             6
  15 (FIELD SECTION &#34;TIMESTAMP&#34;)                             6
  HEADLINE (ZONE SECTION)                                    6

average size for each token:                                 8
tokens with largest size:
  T (NORMAL)                                               405
  SAID (NORMAL)                                            313
  HEADLINE (ZONE SECTION)                                  272
  NEW (NORMAL)                                             267
  I (NORMAL)                                               230
  MILLION (PREFIX)                                         222
  D (NORMAL)                                               219
  MILLION (NORMAL)                                         215
  U (NORMAL)                                               192
  DEC (FIELD SECTION &#34;TIMESTAMP&#34;)                          186

average frequency for each token:                         2.00
most frequent tokens:
  HEADLINE (ZONE SECTION)                                   68
  DEC (FIELD SECTION &#34;TIMESTAMP&#34;)                           62
  95 (FIELD SECTION &#34;TIMESTAMP&#34;)                            62
  15 (FIELD SECTION &#34;TIMESTAMP&#34;)                            62
  T (NORMAL)                                                61
  D (NORMAL)                                                59
  881115 (THEME)                                            58
  881115 (NORMAL)                                           58
  I (NORMAL)                                                55
  geography (THEME)                                         52

token statistics by type:
  token type:                                           NORMAL
    unique tokens:                                       6,344
    total rows:                                          7,631
    average rows:                                         1.20
    total size:                              67,445 (65.86 KB)
    average size:                                           11
    average frequency:                                    2.33
    most frequent tokens:
      T                                                     61
      D                                                     59
      881115                                                58
      I                                                     55
      SAID                                                  45
      C                                                     43
      NEW                                                   36
      MILLION                                               32
      FIRST                                                 28
      COMPANY                                               27

  token type:                                            THEME
    unique tokens:                                       4,563
    total rows:                                          5,523
    average rows:                                         1.21
    total size:                              21,930 (21.42 KB)
    average size:                                            5
    average frequency:                                    2.40
    most frequent tokens:
      881115                                                58
      political geography                                   52
      geography                                             52
      United States                                         51
      business and economics                                50
      abstract ideas and concepts                           48
      North America                                         48
      science and technology                                46
      NKS                                                   34
      nulls                                                 34
</pre>
<p>The fragmentation portion of this report is as follows:</p>
<pre dir="ltr">-----------------------------------------------------------------
                    FRAGMENTATION STATISTICS
-----------------------------------------------------------------

total size of $I data:                     116,772 (114.04 KB)

$I rows:                                                16,259
estimated $I rows if optimal:                           13,445
estimated row fragmentation:                              17 %

garbage docids:                                             15
estimated garbage size:                      21,379 (20.88 KB)

most fragmented tokens:
  telecommunications industry (THEME)                     83 %
  science and technology (THEME)                          83 %
  EMAIL (FIELD SECTION &#34;SOURCE&#34;)                          83 %
  DEC (FIELD SECTION &#34;TIMESTAMP&#34;)                         83 %
  electronic mail (THEME)                                 83 %
  computer networking (THEME)                             83 %
  communications (THEME)                                  83 %
  95 (FIELD SECTION &#34;TIMESTAMP&#34;)                          83 %
  HEADLINE (ZONE SECTION)                                 83 %
  15 (FIELD SECTION &#34;TIMESTAMP&#34;)                          83 %
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Notes</p>
<p>These metadata are available only when <code class="codeph">QUERY_STATS</code> is turned on for the index: estimated fragmentation stats, estimated frequently queried tokens, estimated most fragmented frequently queried token, and estimated slowest running queries for the specified index.</p>
<p><code class="codeph">CTX_REPORT.INDEX_STATS</code> will also output information on dr$<span class="italic">indexname</span>$S table, which is the section data, or <code class="codeph">SDATA</code>, table.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Related Topics</p>
<p>CTX_OUTPUT.<a href="coutpkg.htm#GUID-D43D058C-F4FB-4C2A-965A-5872F134784F">ENABLE_QUERY_STATS</a></p>
<p>CTX_OUTPUT.<a href="coutpkg.htm#GUID-B772A716-F22F-4614-9086-4E95CDE63F84">DISABLE_QUERY_STATS</a></p>
<p><a href="csql.htm#GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862">CREATE INDEX</a></p>
<p><a href="cdatadic.htm#GUID-5F662035-B0F5-4F72-A2A8-A5B07070ABBF__BHCGFIJI" title="This table describes the BASIC_STORAGE attributes.">Table 2-39</a></p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2147"></a>
<div class="props_rev_3"><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D"></a>
<h2 id="CCREF-GUID-AFD54A2E-90C8-42F8-9607-AC517428056D" class="sect2"><span class="enumeration_section">13.9</span> QUERY_LOG_SUMMARY</h2>
<div>
<div class="section">
<p>Obtain a report of logged queries.</p>
<p><code class="codeph">QUERY_LOG_SUMMARY</code> enables you to analyze queries you have logged. For example, suppose you have an application that searches a database of large animals, and your analysis of queries against it shows that users are continually searching for the word <span class="italic">mouse</span>; this analysis might induce you to rewrite your application so that a search for <span class="italic">mouse</span> redirects the user to a database for small animals instead of simply returning an unsuccessful search.</p>
<p>With query analysis, you can find out the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>Which queries were made</p>
</li>
<li>
<p>Which queries were successful</p>
</li>
<li>
<p>Which queries were unsuccessful</p>
</li>
<li>
<p>How many times each query was made</p>
</li>
</ul>
<p>You can combine these factors in various ways, such as determining the 50 most frequent unsuccessful queries made by your application.</p>
<p>Query logging is begun with <code class="codeph">CTX_OUTPUT.START_QUERY_LOG</code> and terminated with <code class="codeph">CTX_OUTPUT.END_QUERY_LOG</code>.</p>
<div class="infobox-note" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-9DE7550B-D09A-41CD-9FD9-4F14C06554C4">
<p class="notep1">Note:</p>
<p>You must connect as <code class="codeph">CTXSYS</code> to use <code class="codeph">CTX_REPORT.QUERY_LOG_SUMMARY</code>.</p>
</div>
<div class="infoboxnotealso" id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-5D61168B-73DA-46E6-A64A-CA7A424C989E">
<p class="notep1">See Also:</p>
<p><span class="q">&#34;<a href="coutpkg.htm#GUID-1ED0F3CD-C3B5-4E22-A412-75FA9EC5E988">START_QUERY_LOG</a>&#34;</span> and <span class="q">&#34;<a href="coutpkg.htm#GUID-E79169B1-6785-4001-988A-32804490E87B">END_QUERY_LOG</a>&#34;</span></p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.QUERY_LOG_SUMMARY(
   logfile       IN VARCHAR2,
   indexname     IN VARCHAR2 DEFAULT NULL,
   result_table  IN OUT NOCOPY QUERY_TABLE,
   row_num       IN NUMBER,
   most_freq     IN BOOLEAN DEFAULT TRUE,
   has_hit       IN BOOLEAN DEFAULT TRUE
);
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3657"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-179F0100-16E7-405C-9B7A-28310EB5E601"><!-- --></a>logfile</dt>
<dd>
<p>Specify the name of the logfile that contains the queries.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3658"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-727443D1-4803-4676-B866-63CE57218DD5"><!-- --></a>indexname</dt>
<dd>
<p>Specify the name of the context index for which you want the summary report. If you specify <code class="codeph">NULL</code>, the procedure provides a summary report for all context indexes.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3659"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-1CB61F76-AABA-44F8-B675-EC54DE7AC3CA"><!-- --></a>result_table</dt>
<dd>
<p>Specify the name of the in-memory table of type <code class="codeph">TABLE OF RECORD</code> where the results of the <code class="codeph">QUERY_LOG_SUMMARY</code> are to go. The default is the location specified by the system parameter <code class="codeph">LOG_DIRECTORY</code>.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3660"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-B015B088-588A-465B-8E28-F9FCC215BF2F"><!-- --></a>row_num</dt>
<dd>
<p>The number of rows of results from <code class="codeph">QUERY_LOG_SUMMARY</code> to be reported into the table named by <span class="italic">restab</span>. For example, if this is number is 10, <span class="italic">most_freq</span> is TRUE, and <span class="italic">has_hit</span> is TRUE, then the procedure returns the 10 most frequent queries that were successful (that is, returned hits).</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3661"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-927E6708-4B0A-474F-97A5-F56DB0A0A627"><!-- --></a>most_freq</dt>
<dd>
<p>Specify whether <code class="codeph">QUERY_LOG_SUMMARY</code> should return the most frequent or least frequent queries. The default is most frequent queries. If <span class="italic">most_freq</span> is set to <code class="codeph">FALSE</code>, the procedure returns the least successful queries.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3662"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-AFD54A2E-90C8-42F8-9607-AC517428056D__GUID-5D202FEF-B5A9-4601-B386-B3274A75874E"><!-- --></a>has_hit</dt>
<dd>
<p>Specify whether <code class="codeph">QUERY_LOG_SUMMARY</code> should return queries that are successful (that is, that generate hits) or unsuccessful queries. The default is to count successful queries; set <span class="variable">has_hit</span> to <code class="codeph">FALSE</code> to return unsuccessful queries.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>The following example shows how a query log can be used.</p>
<p>First connect as <code class="codeph">CTXSYS</code>. Then create and populate two tables, and then create an index for each:</p>
<pre dir="ltr">create table qlogtab1 (tk number primary key, text varchar2(2000));
insert into qlogtab1 values(1, &#39;The Roman name for France was Gaul.&#39;);
insert into qlogtab1 values(2, &#39;The Tour de France is held each summer.&#39;);
insert into qlogtab1 values(3, &#39;Jacques Anatole Thibault took the pen name Anatole France.&#39;);
create index idx_qlog1 on qlogtab1(text) indextype is ctxsys.context;
create table qlogtab2 (tk number primary key, text varchar2(2000));
insert into qlogtab2 values(1, &#39;The Great Wall of China is about 2400 kilometers long&#39;);
insert into qlogtab2 values(2, &#39;Soccer dates back at least to 217 C.E.&#39;);
insert into qlogtab2 values(3, &#39;The Corn Palace is a tourist attraction in South Dakota.&#39;);
create index idx_qlog2 on qlogtab2(text) indextype is ctxsys.context;
</pre>
<pre dir="ltr"></pre>
<p>Turn on query logging, creating a log called <code class="codeph">query_log</code>:</p>
<pre dir="ltr">exec ctx_output.start_query_log(&#39;query.log&#39;);
</pre>
<p>Now make some queries (some of which will be unsuccessful):</p>
<pre dir="ltr">select text from qlogtab1 where contains(text, &#39;France&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;cheese&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Text Wizard&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;Corn Palace&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;China&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Text Wizards&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;South Dakota&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Text Wizard&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;China&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Text Wizard&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;company&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Text Wizard&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;France&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;database&#39;,1)&gt;0;
select text from qlogtab2 where contains(text, &#39;high-tech&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;database&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;France&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Japan&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Egypt&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Argentina&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Argentina&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Argentina&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Japan&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Egypt&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Air Shuttle&#39;,1)&gt;0;
select text from qlogtab1 where contains(text, &#39;Argentina&#39;,1)&gt;0;
</pre>
<p>With the querying over, turn query logging off:</p>
<pre dir="ltr">exec ctx_output.end_query_log;
</pre>
<p>Use <code class="codeph">QUERY_LOG_SUMMARY</code> to get query reports. In the first instance, you ask to see the three most frequent queries that return successfully. First declare the results table (<code class="codeph">the_queries</code>).</p>
<pre dir="ltr">set serveroutput on;
declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary(&#39;query.log&#39;, null, the_queries, 
                   row_num=&gt;3, most_freq=&gt;TRUE, has_hit=&gt;TRUE);
   dbms_output.put_line(&#39;The 3 most frequent queries returning hits&#39;);
   dbms_output.put_line(&#39;number of times  query string&#39;);
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||&#39;                &#39;||the_queries(i).query);
   end loop;
end;
/
</pre>
<p>This returns the following:</p>
<pre dir="ltr">TThe 3 most frequent queries returning hits
number of times  query string
3                France
2                China
1                Corn Palace
</pre>
<p>Next, look for the three most frequent queries on <code class="codeph">idx_qlog1</code> that were successful.</p>
<pre dir="ltr">declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary(&#39;query.log&#39;, &#39;idx_qlog1&#39;, the_queries, 
                   row_num=&gt;3, most_freq=&gt;TRUE, has_hit=&gt;TRUE);
   dbms_output.put_line(&#39;The 3 most frequent queries returning hits for index idx_qlog1&#39;);
   dbms_output.put_line(&#39;number of times  query string&#39;);
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||&#39;                &#39;||the_queries(i).query);
   end loop;
end;
/
</pre>
<p>Because only the queries for <span class="italic">France</span> were successful, <code class="codeph">ctx_report.query_log_summary</code> returns the following:</p>
<pre dir="ltr">The 3 most frequent queries returning hits for index idx_qlog1
number of times  query string
3                France
</pre>
<p>Lastly, ask to see the three least frequent queries that returned no hits (that is, queries that were unsuccessful and called infrequently). In this case, you are interested in queries on both context indexes, so you set the indexname parameter to NULL.</p>
<pre dir="ltr">declare
   the_queries ctx_report.query_table;
begin
   ctx_report.query_log_summary(&#39;query.log&#39;, null, the_queries, row_num=&gt;3, 
                   most_freq=&gt;FALSE, has_hit=&gt;FALSE); 
   dbms_output.put_line(&#39;The 3 least frequent queries returning no hit&#39;);
   dbms_output.put_line(&#39;number of times  query string&#39;);
   for i in 1..the_queries.count loop
     dbms_output.put_line(the_queries(i).times||&#39;                &#39;||the_queries(i).query);
   end loop;
end;
/
</pre>
<p>This returns the following results:</p>
<pre dir="ltr">The 3 least frequent queries returning no hit                               
number of times  query string                                              
1                high-tech                                                 
1                company                                                   
1                cheese                                                    
</pre>
<p><span class="italic">Argentina</span> and <span class="italic">Japan</span> do not make this list, because they are queried more than once, while <span class="italic">Corn Palace</span> does not make this list because it is successfully queried.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2148"></a>
<div class="props_rev_3"><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3"></a>
<h2 id="CCREF-GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3" class="sect2"><span class="enumeration_section">13.10</span> TOKEN_INFO</h2>
<div>
<div class="section">
<p>Creates a report showing the information for a token, decoded. This procedure will fully scan the info for a token, so it may take a long time to run for really large tokens.</p>
<p>You can call this operation as a procedure with an <code class="codeph">IN</code> <code class="codeph">OUT</code> <code class="codeph">CLOB</code> parameter or as a function that returns the report as a <code class="codeph">CLOB</code>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax</p>
<pre dir="ltr">procedure CTX_REPORT.TOKEN_INFO(
  index_name      IN VARCHAR2,
  report          IN OUT NOCOPY CLOB,
  token           IN VARCHAR2,
  token_type      IN NUMBER,
  part_name       IN VARCHAR2 DEFAULT NULL,
  raw_info        IN BOOLEAN  DEFAULT FALSE,
  decoded_info    IN BOOLEAN  DEFAULT TRUE,
  report_format   IN VARCHAR2 DEFAULT FMT_TEXT
);

function CTX_REPORT.TOKEN_INFO(
  index_name      IN VARCHAR2,
  token           IN VARCHAR2,
  token_type      IN NUMBER,
  part_name       IN VARCHAR2 DEFAULT NULL,
  raw_info        IN VARCHAR2 DEFAULT &#39;N&#39;,
  decoded_info    IN VARCHAR2 DEFAULT &#39;Y&#39;,
  report_format   IN VARCHAR2 DEFAULT FMT_TEXT
) return clob;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3663"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-A656B8E8-F0D7-45DE-93C1-8055224CC1D9"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3664"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-FA8DC8F2-FE08-449E-A1DA-317F82BCD0F8"><!-- --></a>report</dt>
<dd>
<p>Specify the <code class="codeph">CLOB</code> locator to which to write the report.</p>
<p>If report is NULL, a session-duration temporary <code class="codeph">CLOB</code> will be created and returned. It is the caller&#39;s responsibility to free this temporary <code class="codeph">CLOB</code> as needed.</p>
<p>The <code class="codeph">report</code> <code class="codeph">CLOB</code> will be truncated before report is generated, so any existing contents will be overwritten by this call token may be case-sensitive, depending on the passed-in token type.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3665"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-AF8736AD-A4DB-4798-8DF1-F767C5C96C61"><!-- --></a>token</dt>
<dd>
<p>Specify the token text.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3666"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-C5B884AA-A449-4196-A357-6D3DCA80D349"><!-- --></a>token_type</dt>
<dd>
<p>Specify the token type. You can use a number returned by the <a href="crptpkg.htm#GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE">TOKEN_TYPE</a> function. <code class="codeph">THEME</code>, <code class="codeph">ZONE</code>, <code class="codeph">ATTR</code>, <code class="codeph">PATH</code>, and <code class="codeph">PATH</code> <code class="codeph">ATTR</code> tokens are case-sensitive.</p>
<p>Everything else gets passed through the lexer, so if the index&#39;s lexer is case-sensitive, the token input is case-sensitive.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3667"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-CE0DAF82-0AAE-443E-808C-1051D3CB741B"><!-- --></a>part_name</dt>
<dd>
<p>Specify the name of the index partition.</p>
<p>If the index is a local partitioned index, then part_name must be provided. <code class="codeph">TOKEN_INFO</code> will apply to just that index partition.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3668"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-3E050372-DAB8-4677-9C7C-E399337198B8"><!-- --></a>raw_info</dt>
<dd>
<p>Specify <code class="codeph">TRUE</code> to include a hex dump of the index data. If raw_info is <code class="codeph">TRUE</code>, the report will include a hex dump of the raw data in the <code class="codeph">token_info</code> column.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3669"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-AD5D3BBB-C109-489D-90C9-ECFC89CF4D1E"><!-- --></a>decoded_info</dt>
<dd>
<p>Specify decode and include docid and offset data. If <code class="codeph">decoded_info</code> is FALSE, <code class="codeph">CTX_REPORT</code> will not attempt to decode the token information. This is useful when you just want a dump of data.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3670"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-45B84CF6-F2AB-402D-9E7C-FCD6AB9A3BD3__GUID-E04BAE43-6BE2-46E4-AF06-9CEAE5FF59CB"><!-- --></a>report_format</dt>
<dd>
<p>Specify whether the report should be generated as &#39;TEXT&#39; or as &#39;XML&#39;. TEXT is the default. You can also specify the values <code class="codeph">CTX_REPORT.FMT_TEXT</code> or <code class="codeph">CTX_REPORT.FMT_XML</code>.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2149"></a>
<div class="props_rev_3"><a id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE"></a>
<h2 id="CCREF-GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE" class="sect2"><span class="enumeration_section">13.11</span> TOKEN_TYPE</h2>
<div>
<div class="section">
<p>This is a helper function which translates an English name into a numeric token type. This is suitable for use with <code class="codeph">token_info</code>, or any other <code class="codeph">CTX</code> API which takes in a <code class="codeph">token_type</code>.</p>
<pre dir="ltr">function token_type(
  index_name in varchar2,
  type_name  in varchar2
) return number;

TOKEN_TYPE_TEXT      constant number := 0;
TOKEN_TYPE_THEME     constant number := 1;
TOKEN_TYPE_ZONE_SEC  constant number := 2;
TOKEN_TYPE_ORIG         constant number := 3,
TOKEN_TYPE_ATTR_TEXT constant number := 4;
TOKEN_TYPE_ATTR_SEC  constant number := 5;
TOKEN_TYPE_PREFIX    constant number := 6;
TOKEN_TYPE_PATH_SEC  constant number := 7;
TOKEN_TYPE_PATH_ATTR constant number := 8;
TOKEN_TYPE_STEM      constant number := 9;
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3671"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-01EC18E6-F477-4A5E-A7FD-0F231955DA9F"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the index.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3672"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-1C105442-5745-410E-A5D4-9CFA74A271B1"><!-- --></a>type_name</dt>
<dd>
<p>Specify an English name for <code class="codeph">token_type</code>. The following strings are legal input. All input is case-insensitive.</p>
<div class="tblformal" id="GUID-9B2E2C74-D14F-4985-B638-C499565AC5EE__GUID-3DE973FE-48CB-4BE0-ADA9-90ABB58852B4">
<table class="cellalignment3033" summary="This table shows legal input strings.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3047" id="d110226e2130">Input</th>
<th class="cellalignment3048" id="d110226e2133">Meaning</th>
<th class="cellalignment3049" id="d110226e2136">Type Returned</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2141" headers="d110226e2130">
<p><code class="codeph">TEXT</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2141 d110226e2133">
<p>Normal text token.</p>
</td>
<td class="cellalignment3052" headers="d110226e2141 d110226e2136">
<p>0</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2152" headers="d110226e2130">
<p><code class="codeph">THEME</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2152 d110226e2133">
<p>Theme token.</p>
</td>
<td class="cellalignment3052" headers="d110226e2152 d110226e2136">
<p>1</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2163" headers="d110226e2130">
<p><code class="codeph">ZONE SEC</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2163 d110226e2133">
<p>Zone token.</p>
</td>
<td class="cellalignment3052" headers="d110226e2163 d110226e2136">
<p>2</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2174" headers="d110226e2130">
<p><code class="codeph">ORIGINAL</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2174 d110226e2133">
<p>Original form token</p>
</td>
<td class="cellalignment3052" headers="d110226e2174 d110226e2136">
<p>3</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2185" headers="d110226e2130">
<p><code class="codeph">ATTR TEXT</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2185 d110226e2133">
<p>Text that occurs in attribute.</p>
</td>
<td class="cellalignment3052" headers="d110226e2185 d110226e2136">
<p>4</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2196" headers="d110226e2130">
<p><code class="codeph">ATTR SEC</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2196 d110226e2133">
<p>Attribute section.</p>
</td>
<td class="cellalignment3052" headers="d110226e2196 d110226e2136">
<p>5</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2207" headers="d110226e2130">
<p><code class="codeph">PREFIX</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2207 d110226e2133">
<p>Prefix token.</p>
</td>
<td class="cellalignment3052" headers="d110226e2207 d110226e2136">
<p>6</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2218" headers="d110226e2130">
<p><code class="codeph">PATH SEC</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2218 d110226e2133">
<p>Path section.</p>
</td>
<td class="cellalignment3052" headers="d110226e2218 d110226e2136">
<p>7</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2229" headers="d110226e2130">
<p><code class="codeph">PATH ATTR</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2229 d110226e2133">
<p>Path attribute section.</p>
</td>
<td class="cellalignment3052" headers="d110226e2229 d110226e2136">
<p>8</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2240" headers="d110226e2130">
<p><code class="codeph">STEM</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2240 d110226e2133">
<p>Stem form token.</p>
</td>
<td class="cellalignment3052" headers="d110226e2240 d110226e2136">
<p>9</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2251" headers="d110226e2130">
<p><code class="codeph">FIELD &lt;name&gt; TEXT</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2251 d110226e2133">
<p>Text token in field section &lt;name&gt;</p>
</td>
<td class="cellalignment3052" headers="d110226e2251 d110226e2136">
<p>16-79</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2263" headers="d110226e2130">
<p><code class="codeph">FIELD &lt;name&gt; PREFIX</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2263 d110226e2133">
<p>Prefix token in field section &lt;name&gt;</p>
</td>
<td class="cellalignment3052" headers="d110226e2263 d110226e2136">
<p>616-916</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2274" headers="d110226e2130">
<p><code class="codeph">FIELD &lt;name&gt; STEM</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2274 d110226e2133">
<p>Stem token in field section &lt;name&gt;</p>
</td>
<td class="cellalignment3052" headers="d110226e2274 d110226e2136">
<p>916-979</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2285" headers="d110226e2130">
<p><code class="codeph">NDATA &lt;name&gt;</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2285 d110226e2133">
<p><code class="codeph">NDATA</code>-type token</p>
</td>
<td class="cellalignment3052" headers="d110226e2285 d110226e2136">
<p>200-299</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2298" headers="d110226e2130">
<p><code class="codeph">TOKEN_TYPE_ATTR_TXT_PFIX</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2298 d110226e2133">
<p>Attribute text prefix.</p>
</td>
<td class="cellalignment3052" headers="d110226e2298 d110226e2136">
<p>604</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3050" id="d110226e2309" headers="d110226e2130">
<p><code class="codeph">TOKEN_TYPE_ATTR_TXT_STEM</code></p>
</td>
<td class="cellalignment3051" headers="d110226e2309 d110226e2133">
<p>Attribute text stem.</p>
</td>
<td class="cellalignment3052" headers="d110226e2309 d110226e2136">
<p>904</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For <code class="codeph">FIELD</code> types, the index metadata needs to be read, so if you are going to be calling this a lot for such things, you might want to consider caching the values in local variables rather than calling token_type over and over again.</p>
<p>The constant types (0 - 9) also have constants in this package defined.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Notes</p>
<p>To get token types for <code class="codeph">MDATA</code> tokens, do not use <code class="codeph">CTX_REPORT.TOKEN_TYPE</code>; use the <a href="cqoper.htm#GUID-B995F693-A4AA-493D-A62D-6D79857BA50F">MDATA</a> operator instead. (See <span class="q">&#34;<a href="cqoper.htm#GUID-B995F693-A4AA-493D-A62D-6D79857BA50F">MDATA</a>&#34;</span>.) The syntax to use is &#39;<code class="codeph">MDATA</code> <span class="italic">secname</span>&#39;.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<pre dir="ltr">typenum := ctx_report.token_type(&#39;myindex&#39;, &#39;field author text&#39;);
</pre></div>
<!-- class="section" --></div>
</div>
<a id="CCREF24106"></a>
<div class="props_rev_3"><a id="GUID-06C55318-69A1-499E-B5C8-D7FC163A832C"></a>
<h2 id="CCREF-GUID-06C55318-69A1-499E-B5C8-D7FC163A832C" class="sect2"><span class="enumeration_section">13.12</span> VALIDATE_INDEX</h2>
<div>
<div class="section">
<p>Provides diagnostics if index corruption is believed to have occurred. <code class="codeph">CTX_REPORT.VALIDATE_INDEX</code> checks an index (or a partition for a locally partitioned index) and reports whether or not any corruption has been detected. <code class="codeph">VALIDATE_INDEX</code> only checks $I rows that have <code class="codeph">token_type</code> <code class="codeph">0</code> and does not check other rows that contain information about sections, such as the <code class="codeph">NDATA</code> section.</p>
<p>This procedure is primarily intended as a diagnostic tool to be used under the direction of Oracle Support.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3021">
<tr>
<td class="cellalignment3040">
<table class="cellalignment3026">
<tr>
<td class="cellalignment3025"><a href="cqrypkg.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3025"><a href="cthes.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3042">
<table class="cellalignment3024">
<tr>
<td class="cellalignment3025"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3025"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3025"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3025"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3025"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3025"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>