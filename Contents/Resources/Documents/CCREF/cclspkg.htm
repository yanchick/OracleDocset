<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-3122"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/CTX_CLS%20Package"></a><title>CTX_CLS Package</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="keywords" content="TRAIN procedure, CTX_CLS, TRAIN, rules, generating, classifying documents, document, classifying, CLUSTERING procedure, CLUSTERING, clustering"/>
<meta name="dcterms.created" content="2017-06-08T04:23:35Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Text Reference"/>
<meta name="dcterms.identifier" content="E41399-12"/>
<meta name="dcterms.isVersionOf" content="CCREF"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="canlpkg.htm" title="Previous" type="text/html"/>
<link rel="Next" href="cddlpkg.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E41399-12.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-44681511-E147-4380-87C2-08465E59DE28"></a> <span id="PAGE" style="display:none;">12/31</span> <!-- End Header -->
<a id="CCREF1500"></a>
<h1 id="CCREF-GUID-44681511-E147-4380-87C2-08465E59DE28" class="sect1"><span class="enumeration_chapter">7</span> CTX_CLS Package</h1>
<div>
<p>This chapter contains the following topics.</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="cclspkg.htm#GUID-97D05E53-0620-4BC4-B419-54B05A82F678">About CTX_CLS Package Procedures</a></p>
</li>
<li>
<p><a href="cclspkg.htm#GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F">TRAIN</a></p>
</li>
<li>
<p><a href="cclspkg.htm#GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3">CLUSTERING</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-97D05E53-0620-4BC4-B419-54B05A82F678"></a>
<h2 id="CCREF-GUID-97D05E53-0620-4BC4-B419-54B05A82F678" class="sect2"><span class="enumeration_section">7.1</span> About CTX_CLS Package Procedures</h2>
<div>
<p>The <code class="codeph">CTX_CLS</code> PL/SQL package provides procedures for generating rules that define document categories, and enables you to perform document classification.</p>
<p>The following procedures are in the <code class="codeph">CTX_CLS</code> PL/SQL package.</p>
<div class="tblformal" id="GUID-97D05E53-0620-4BC4-B419-54B05A82F678__GUID-8E191283-E871-4666-9EBC-05520659C47A">
<table class="cellalignment3028" summary="This table describes CTX_CLS Package Procedures.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3095" id="d74032e135">Name</th>
<th class="cellalignment3096" id="d74032e139">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e144" headers="d74032e135">
<p><a href="cclspkg.htm#GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F">TRAIN</a></p>
</td>
<td class="cellalignment3098" headers="d74032e144 d74032e139">
<p>Generates rules that define document categories. Output based on input training document set.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e153" headers="d74032e135">
<p><a href="cclspkg.htm#GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3">CLUSTERING</a></p>
</td>
<td class="cellalignment3098" headers="d74032e153 d74032e139">
<p>Generates clusters for a document collection.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infoboxnotealso" id="GUID-97D05E53-0620-4BC4-B419-54B05A82F678__GUID-97C254CC-ECAC-409D-8796-2A23C4B3CCE8">
<p class="notep1">See Also:</p>
<p><a class="olink CCAPP0600" target="_blank" href="../CCAPP/GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF.htm#CCAPP0600"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for more information on document classification</p>
</div>
</div>
</div>
<a id="CCREF2097"></a>
<div class="props_rev_3"><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F"></a>
<h2 id="CCREF-GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F" class="sect2"><span class="enumeration_section">7.2</span> TRAIN</h2>
<div>
<div class="section">
<p>Use this procedure to generate query rules that select document categories. You must supply a training set consisting of categorized documents. Documents can be in any format supported by Oracle Text and must belong to one or more categories. This procedure generates the queries that define the categories and then writes the results to a table.</p>
<p>You must also have a document table and a category table. The category table must contain at least two categories.</p>
<p>For example, your document and category tables can be defined as:</p>
<pre dir="ltr">create table trainingdoc(
</pre>
<pre dir="ltr">docid number primary key,
text varchar2(4000));
</pre>
<pre dir="ltr">create table category (
</pre>
<pre dir="ltr">docid trainingdoc(docid),
categoryid number);
</pre>
<p>You can use one of two syntaxes depending on the classification algorithm you need. The query compatible syntax uses the <code class="codeph">RULE_CLASSIFIER</code> preference and generates rules as query strings. The <span class="italic">Support Vector Machine syntax</span> uses the <code class="codeph">SVM_CLASSIFER</code> preference and generates rules in binary format. The <code class="codeph">SVM_CLASSIFIER</code> is good for high classification accuracy, but because its rules are generated in binary format, they cannot be examined like the query strings generated with the <code class="codeph">RULE_CLASSIFIER</code>. Note that only those document ids that appear in both the document table and the category table will impact <code class="codeph">RULE_CLASSIFIER</code> and <code class="codeph">SVM_CLASSIFIER</code> learning.</p>
<p>The <code class="codeph">CTX_CLS.TRAIN</code> procedure requires that your document table have an associated context index. For best results, the index should be synchronized before running this procedure. <code class="codeph">SVM_CLASSIFIER</code> syntax enables the use of an unpopulated context index, while query-compatible syntax requires that the context index be populated.</p>
<div class="infoboxnotealso" id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-3AB28254-FB23-4534-871F-24A6B3222C66">
<p class="notep1">See Also:</p>
<p><a class="olink CCAPP0600" target="_blank" href="../CCAPP/GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF.htm#CCAPP0600"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for more on document classification</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Query Compatible Syntax</p>
<p>The following syntax generates query-compatible rules and is used with the <a href="cdatadic.htm#GUID-AFF1EFBE-CC4F-4394-9353-35542C52D6B3">RULE_CLASSIFIER</a> preference. Use this syntax and preference when different categories are separated from others by several key words. An advantage of generating your rules as query strings is that you can easily examine the generated rules. This is different from generating SVM rules, which are in binary format.</p>
<pre dir="ltr">CTX_CLS.TRAIN(
</pre>
<pre dir="ltr">index_name    in varchar2,
docid         in varchar2,
cattab        in varchar2,
catdocid      in varchar2,
catid         in varchar2,
restab        in varchar2,
rescatid      in varchar2,
resquery      in varchar2,
resconfid     in varchar2,
preference    in varchar2 DEFAULT NULL
</pre>
<pre dir="ltr">);
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3094"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-7D8807D5-CFDA-4865-9CF4-19B76BDEA279"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the context index associated with your document training set.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3095"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-FC128559-C30F-4235-A514-B58D5B74281C"><!-- --></a>docid</dt>
<dd>
<p>Specify the name of the document ID column in the document table. The document IDs in this column must be unique, and this column must be of datatype <code class="codeph">NUMBER</code>. The values for this column must be stored in an unsigned 32-bit integer and must be in the range 0-4294967295.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3096"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-FAE513B4-EAFB-4F34-A542-FAC57E15949B"><!-- --></a>cattab</dt>
<dd>
<p>Specify the name of the category table. You must have the <code class="codeph">READ</code> or <code class="codeph">SELECT</code> privilege on this table. (See <a class="olink DBSEG992" target="_blank" href="../DBSEG/authorization.htm#DBSEG992"><span class="italic">Oracle Database Security Guide</span></a> for information about the <code class="codeph">READ</code> privilege.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3097"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-B627FB04-1196-48AC-AA00-DE6685813575"><!-- --></a>catdocid</dt>
<dd>
<p>Specify the name of the document ID column in the category table. The document IDs in this table must also exist in the document table. This column must be a <code class="codeph">NUMBER</code>. The values for this column must be stored in an unsigned 32-bit integer and must be in the range 0-4294967295.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3098"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-532EE42C-1523-4EAF-A6B3-1A3562F504DD"><!-- --></a>catid</dt>
<dd>
<p>Specify the name of the category ID column in the category table. This column must be a <code class="codeph">NUMBER</code>. The values for this column must be stored in an unsigned 32-bit integer and must be in the range 0-4294967295.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3099"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-B6ECE53E-2155-433E-BC27-ACBE9C529CCD"><!-- --></a>restab</dt>
<dd>
<p>Specify the name of the result table. You must have <code class="codeph">INSERT</code> privilege on this table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3100"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-7AB41FFD-FD02-4107-B28C-B1782A9077C4"><!-- --></a>rescatid</dt>
<dd>
<p>Specify the name of the category ID column in the result table. This column must be a <code class="codeph">NUMBER</code>. The values for this column must be stored in an unsigned 32-bit integer and must be in the range 0-4294967295.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3101"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-2B74E3D7-AEEC-407B-AD08-4AEFE8C840D2"><!-- --></a>resquery</dt>
<dd>
<p>Specify the name of the query column in the result table. This column must be <code class="codeph">VARACHAR2</code>, <code class="codeph">CHAR,</code> <code class="codeph">CLOB</code>, <code class="codeph">NVARCHAR2</code>, or <code class="codeph">NCHAR</code>.</p>
<p>The queries generated in this column connects terms with <code class="codeph">AND</code> or <code class="codeph">NOT</code> operators, such as:</p>
<pre dir="ltr">&#39;T1 &amp; T2 ~ T3&#39;
</pre>
<p>Terms can also be theme tokens and be connected with the <code class="codeph">ABOUT</code> operator, such as:</p>
<pre dir="ltr">&#39;about(T1) &amp; about(T2) ~ about(T3)&#39;
</pre>
<p>Generated rules also support <code class="codeph">WITHIN</code> queries on field sections.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3102"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-11B7DF17-13D3-4A22-B7E4-B41934A1E75F"><!-- --></a>resconfid</dt>
<dd>
<p>Specify the name of the confidence column in result table. This column contains the estimated probability from training data that a document is relevant if that document satisfies the query.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3103"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-B35DE8B8-C184-4BD9-9BA7-B2B3C3784773"><!-- --></a>preference</dt>
<dd>
<p>Specify the name of the preference. For classifier types and attributes, see <span class="q">&#34;<a href="cdatadic.htm#GUID-33498DE0-DC96-4D98-B2BC-26DC49147DC5">Classifier Types</a>&#34;</span> in <a href="cdatadic.htm#GUID-22680996-89CF-4666-89E6-BE8B9431DB02">Oracle Text Indexing Elements</a>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax for Support Vector Machine (SVM) Rules</p>
<p>The Support Vector Machine, or SVM, rules preference generates rules in binary format. Use this syntax when your application requires high classification accuracy.</p>
<p>The following syntax generates Support Vector Machine (SVM) rules with the <a href="cdatadic.htm#GUID-28CC450D-2DDF-4444-8BFD-A730B59A19DD">SVM_CLASSIFIER</a> preference.</p>
<pre dir="ltr">CTX_CLS.TRAIN(
    index_name in varchar2,    
    docid      in varchar2,         
    cattab     in varchar2, 
    catdocid   in varchar2, 
    catid      in varchar2,  
    restab     in varchar2,  
    preference in varchar2 );
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3104"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-4D08DFCB-1C15-4B1E-B52F-F14DD5789ACE"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the text index.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3105"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-96D15098-A98C-4D74-9D0B-E99F20A92F9E"><!-- --></a>docid</dt>
<dd>
<p>Specify the name of <code class="codeph">docid</code> column in document table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3106"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-E569D6E2-2F24-49EB-A676-9FBE79C53F35"><!-- --></a>cattab</dt>
<dd>
<p>Specify the name of category table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3107"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-C89B7503-9983-41BF-A44D-8F6DE1058DA2"><!-- --></a>catdocid</dt>
<dd>
<p>Specify the name of <code class="codeph">docid</code> column in category table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3108"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-660264E2-31F5-4ABF-900F-B75F66787EF6"><!-- --></a>catid</dt>
<dd>
<p>Specify the name of category ID column in category table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3109"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-8123FC7B-4CBB-47C4-841D-551D2820BD73"><!-- --></a>restab</dt>
<dd>
<p>Specify the name of result table.</p>
<p>The result table has the following format:</p>
<div class="tblformal" id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-8E9ED9C2-772C-4D25-9744-5DCC85A0F947">
<table class="cellalignment3033" summary="This table describes result table.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3099" id="d74032e509">Column Name</th>
<th class="cellalignment3099" id="d74032e512">Datatype</th>
<th class="cellalignment3100" id="d74032e515">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3101" id="d74032e520" headers="d74032e509">
<p><code class="codeph">CAT_ID</code></p>
</td>
<td class="cellalignment3101" headers="d74032e520 d74032e512">
<p><code class="codeph">NUMBER</code></p>
</td>
<td class="cellalignment3102" headers="d74032e520 d74032e515">
<p>The ID of the category.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3101" id="d74032e532" headers="d74032e509">
<p><code class="codeph">TYPE</code></p>
</td>
<td class="cellalignment3101" headers="d74032e532 d74032e512">
<p><code class="codeph">NUMBER(3) NOT NULL</code></p>
</td>
<td class="cellalignment3102" headers="d74032e532 d74032e515">
<p>0 for the actual rule or catid; 1 for other.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3101" id="d74032e544" headers="d74032e509">
<p><code class="codeph">RULE</code></p>
</td>
<td class="cellalignment3101" headers="d74032e544 d74032e512">
<p><code class="codeph">BLOB</code></p>
</td>
<td class="cellalignment3102" headers="d74032e544 d74032e515">
<p>The returned rule.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3110"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-FCD1B865-2904-4E00-8A0D-33DC3ACA397F__GUID-33379416-936B-4C56-AD2E-C2328BDD862B"><!-- --></a>preference</dt>
<dd>
<p>Specify the name of user preference. For classifier types and attributes, see <span class="q">&#34;<a href="cdatadic.htm#GUID-33498DE0-DC96-4D98-B2BC-26DC49147DC5">Classifier Types</a>&#34;</span> in <a href="cdatadic.htm#GUID-22680996-89CF-4666-89E6-BE8B9431DB02">Oracle Text Indexing Elements</a>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<p>The <code class="codeph">CTX_CLS.TRAIN</code> procedure is used in supervised classification. For an extended example, see <a class="olink CCAPP0600" target="_blank" href="../CCAPP/GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF.htm#CCAPP0600"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a>.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="CCREF2098"></a>
<div class="props_rev_3"><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3"></a>
<h2 id="CCREF-GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3" class="sect2"><span class="enumeration_section">7.3</span> CLUSTERING</h2>
<div>
<div class="section">
<p>Use this procedure to cluster a collection of documents. <a id="d74032e656" class="indexterm-anchor"></a>A <span class="italic">cluster</span> is a group of documents similar to each other in content.</p>
<p>A clustering result set is composed of <span class="italic">document assignments</span> and <span class="italic">cluster descriptions</span>:</p>
<ul style="list-style-type: disc;">
<li>
<p>A document assignment result set shows how relevant each document is to all generated leaf clusters.</p>
</li>
<li>
<p>A cluster description result set contains information about what topic a cluster is about. This result set identifies the cluster and contains cluster description text, a suggested cluster label, and a quality score for the cluster.</p>
</li>
</ul>
<p>Cluster output is hierarchical. Only leaf clusters are scored for relevance to documents. Producing more clusters requires more computing time. Indicate the upper limit for generated clusters with the <code class="codeph">CLUSTER_NUM</code> attribute of the <code class="codeph">KMEAN_CLUSTERING</code> cluster type (see <span class="q">&#34;<a href="cdatadic.htm#GUID-D1154175-31AA-45F0-9002-6349824650C5">Cluster Types</a>&#34;</span> in this chapter).</p>
<p>There are two versions of this procedure: one with a table result set, and one with an in-memory result set.</p>
<p>Clustering is also known as <span class="italic">unsupervised classification</span>.</p>
<div class="infoboxnotealso" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-75571A78-83C7-432C-928D-C41E27B6FF81">
<p class="notep1">See Also:</p>
<p>For more information about clustering and relevant preferences, see <a href="cdatadic.htm#GUID-D1154175-31AA-45F0-9002-6349824650C5">Cluster Types</a> in <a href="cdatadic.htm#GUID-22680996-89CF-4666-89E6-BE8B9431DB02">Oracle Text Indexing Elements</a>, as well as the <a class="olink CCAPP0600" target="_blank" href="../CCAPP/GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF.htm#CCAPP0600"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a></p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax: Table Result Set</p>
<pre dir="ltr">ctx_cls.clustering (
 index_name  IN VARCHAR2, 
 docid       IN VARCHAR2, 
 doctab_name IN VARCHAR2, 
 clstab_name IN VARCHAR2, 
 pref_name   IN VARCHAR2  DEFAULT NULL
);
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3111"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-34DE2EE0-C0F0-4C39-AF6E-912197B15A96"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of the context index on collection table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3112"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-4AA5DD4D-73B5-4932-A0E4-B2A78CA5CC87"><!-- --></a>docid</dt>
<dd>
<p>Specify the name of document ID column of the collection table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3113"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-1DBBADBB-5B8B-48F5-A5D9-9616D9634914"><!-- --></a>doctab_name</dt>
<dd>
<p>Specify the name of document assignment table. This procedure creates the table with the following structure:</p>
<pre dir="ltr">doc_assign(
   docid number,
   clusterid number,
   score number
);
</pre>
<div class="tblformal" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-2F5AE0FD-B3BA-4BB5-BD31-9EF84F1AAE07">
<table class="cellalignment3033" summary="This table describes document assignment table.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3103" id="d74032e747">Column</th>
<th class="cellalignment3104" id="d74032e750">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e755" headers="d74032e747">
<p><code class="codeph">DOCID</code></p>
</td>
<td class="cellalignment3106" headers="d74032e755 d74032e750">
<p>Document ID to identify document.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e763" headers="d74032e747">
<p><code class="codeph">CLUSTERID</code></p>
</td>
<td class="cellalignment3106" headers="d74032e763 d74032e750">
<p>ID of a leaf cluster associated with this document. If <code class="codeph">CLUSTERID</code> is -1, then the cluster contains &#34;miscellaneous&#34; documents; for example, documents that cannot be assigned to any other cluster category.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e774" headers="d74032e747">
<p><code class="codeph">SCORE</code></p>
</td>
<td class="cellalignment3106" headers="d74032e774 d74032e750">
<p>The associated score between the document and the cluster.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>If you require more columns, then create the table before you call this procedure.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3114"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-B555C060-9F03-49BB-A595-D3E15E525955"><!-- --></a>clstab_name</dt>
<dd>
<p>Specify the name of the cluster description table. This procedure creates the table with the following structure:</p>
<pre dir="ltr">cluster_desc(
  clusterid NUMBER,
  descript VARCHAR2(4000),
  label VARCHAR2(200),
  sze NUMBER,
  quality_score NUMBER,
  parent NUMBER
);
</pre>
<div class="tblformal" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-58D16DE1-5B36-4535-BC2B-8196A41494F4">
<table class="cellalignment3033" summary="This table describes cluster description table.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3095" id="d74032e799">Column</th>
<th class="cellalignment3096" id="d74032e802">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e807" headers="d74032e799">
<p><code class="codeph">CLUSTERID</code></p>
</td>
<td class="cellalignment3098" headers="d74032e807 d74032e802">
<p>Cluster ID to identify cluster. If <code class="codeph">CLUSTERID</code> is -1, then the cluster contains &#34;miscellaneous&#34; documents; for example, documents that cannot be assigned to any other cluster category.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e818" headers="d74032e799">
<p><code class="codeph">DESCRIPT</code></p>
</td>
<td class="cellalignment3098" headers="d74032e818 d74032e802">
<p>String to describe the cluster.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e826" headers="d74032e799">
<p><code class="codeph">LABEL</code></p>
</td>
<td class="cellalignment3098" headers="d74032e826 d74032e802">
<p>A suggested label for the cluster.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e834" headers="d74032e799">
<p><code class="codeph">SZE</code></p>
</td>
<td class="cellalignment3098" headers="d74032e834 d74032e802">
<p>This parameter currently has no value.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e842" headers="d74032e799">
<p><code class="codeph">QUALITY_SCORE</code></p>
</td>
<td class="cellalignment3098" headers="d74032e842 d74032e802">
<p>The quality score of the cluster. A higher number indicates greater coherence.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3097" id="d74032e850" headers="d74032e799">
<p><code class="codeph">PARENT</code></p>
</td>
<td class="cellalignment3098" headers="d74032e850 d74032e802">
<p>The parent cluster ID. Zero means no parent cluster.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>If you require more columns, then create the table before you call this procedure.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3115"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-9AB8CD92-1A01-4B87-808C-DB01989B2498"><!-- --></a>pref_name</dt>
<dd>
<p>Specify the name of the preference.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Syntax: In-Memory Result Set</p>
<p>Put the result set into in-memory structures for better performance. Two in-memory tables are defined in <code class="codeph">CTX_CLS</code> package for document assignment and cluster description respectively.</p>
<pre dir="ltr">CTX_CLS.CLUSTERING(
  index_name     IN VARCHAR2, 
  docid          IN VARCHAR2,
  dids           IN DOCID_TAB,
  doctab_name    IN OUT NOCOPY DOC_TAB,
  clstab_name    IN OUT NOCOPY CLUSTER_TAB,
  pref_name      IN VARCHAR2  DEFAULT NULL 
          );
</pre>
<dl>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3116"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-A726D17F-C164-451F-AD68-F459305C2036"><!-- --></a>index_name</dt>
<dd>
<p>Specify the name of context index on the collection table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3117"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-05408E09-EA47-4B5F-97EE-D0D3212ADC6D"><!-- --></a>docid</dt>
<dd>
<p>Specify the document ID column of the collection table.</p>
</dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3118"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-E71DA671-F986-4DA2-B917-6B020DFA13B5"><!-- --></a>dids</dt>
<dd>
<p>Specify the name of the in-memory <code class="codeph">docid_tab</code>.</p>
<pre dir="ltr">TYPE docid_tab IS TABLE OF number INDEX BY BINARY_INTEGER;
</pre></dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3119"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-49296F67-22C8-421F-A4EA-F684D29F1938"><!-- --></a>doctab_name</dt>
<dd>
<p>Specify name of the document assignment in-memory table. This table is defined as follows:</p>
<pre dir="ltr">TYPE doc_rec IS RECORD (
   docid NUMBER,
   clusterid NUMBER,
   score NUMBER
)
TYPE doc_tab IS TABLE OF doc_rec INDEX BY BINARY_INTEGER;
</pre>
<div class="tblformal" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-97114A06-FEC7-423E-9259-4D90243E5758">
<table class="cellalignment3033" summary="This table describes document assignment in-memory table.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3103" id="d74032e915">Column</th>
<th class="cellalignment3104" id="d74032e918">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e923" headers="d74032e915">
<p><code class="codeph">DOCID</code></p>
</td>
<td class="cellalignment3106" headers="d74032e923 d74032e918">
<p>Document ID to identify document.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e931" headers="d74032e915">
<p><code class="codeph">CLUSTERID</code></p>
</td>
<td class="cellalignment3106" headers="d74032e931 d74032e918">
<p>ID of a leaf cluster associated with this document. If <code class="codeph">CLUSTERID</code> is -1, then the cluster contains &#34;miscellaneous&#34; documents; for example, documents that cannot be assigned to any other cluster category.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3105" id="d74032e942" headers="d74032e915">
<p><code class="codeph">SCORE</code></p>
</td>
<td class="cellalignment3106" headers="d74032e942 d74032e918">
<p>The associated score between the document and the cluster.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3120"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-FD11D484-AA33-4E86-B7CD-42313F36EC2E"><!-- --></a>cls_tab</dt>
<dd>
<p>Specify the name of cluster description in-memory table.</p>
<pre dir="ltr">TYPE cluster_rec IS RECORD(
     clusterid NUMBER,
     descript VARCHAR2(4000),
     label VARCHAR2(200),
     sze NUMBER,
     quality_score NUMBER,
     parent NUMBER
);
TYPE cluster_tab IS TABLE OF cluster_rec INDEX BY BINARY_INTEGER;
</pre>
<div class="tblformal" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-FF9E3F5A-E53A-468B-BF29-BF43D341BE10">
<table class="cellalignment3033" summary="This table describes cluster description in-memory table.">
<thead>
<tr class="cellalignment3022">
<th class="cellalignment3107" id="d74032e965">Column</th>
<th class="cellalignment3108" id="d74032e968">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e973" headers="d74032e965">
<p><code class="codeph">CLUSTERID</code></p>
</td>
<td class="cellalignment3110" headers="d74032e973 d74032e968">
<p>Cluster ID to identify cluster. If <code class="codeph">CLUSTERID</code> is -1, then the cluster contains &#34;miscellaneous&#34; documents; for example, documents that cannot be assigned to any other cluster category.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e984" headers="d74032e965">
<p><code class="codeph">DESCRIPT</code></p>
</td>
<td class="cellalignment3110" headers="d74032e984 d74032e968">
<p>String to describe the cluster.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e992" headers="d74032e965">
<p><code class="codeph">LABEL</code></p>
</td>
<td class="cellalignment3110" headers="d74032e992 d74032e968">
<p>A suggested label for the cluster.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e1000" headers="d74032e965">
<p><code class="codeph">SZE</code></p>
</td>
<td class="cellalignment3110" headers="d74032e1000 d74032e968">
<p>This parameter currently has no value.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e1008" headers="d74032e965">
<p><code class="codeph">QUALITY_SCORE</code></p>
</td>
<td class="cellalignment3110" headers="d74032e1008 d74032e968">
<p>The quality score of the cluster. A higher number indicates greater coherence.</p>
</td>
</tr>
<tr class="cellalignment3022">
<td class="cellalignment3109" id="d74032e1016" headers="d74032e965">
<p><code class="codeph">PARENT</code></p>
</td>
<td class="cellalignment3110" headers="d74032e1016 d74032e968">
<p>The parent cluster ID. Zero means no parent cluster.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></dd>
<dt class="dlterm"><a class="dashingAutolink" name="autolink-3121"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/"></a><a id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-5F7D8AC0-B303-4793-9D6C-EE52CCF43CB0"><!-- --></a>pref_name</dt>
<dd>
<p>Specify the name of the preference. For cluster types and attributes, see <a href="cdatadic.htm#GUID-D1154175-31AA-45F0-9002-6349824650C5">Cluster Types</a> in <a href="cdatadic.htm#GUID-22680996-89CF-4666-89E6-BE8B9431DB02">Oracle Text Indexing Elements</a>.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Example</p>
<div class="infoboxnotealso" id="GUID-E3D9A1E3-CDC8-4532-ABD3-87C0FF87FBE3__GUID-EB5F5473-FF70-4CB9-977E-FA15B5407AB6">
<p class="notep1">See Also:</p>
<p>The <a class="olink CCAPP0600" target="_blank" href="../CCAPP/GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF.htm#CCAPP0600"><span class="italic">Oracle Text Application Developer&#39;s Guide</span></a> for an example of using clustering</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3021">
<tr>
<td class="cellalignment3040">
<table class="cellalignment3026">
<tr>
<td class="cellalignment3025"><a href="canlpkg.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3025"><a href="cddlpkg.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3042">
<table class="cellalignment3024">
<tr>
<td class="cellalignment3025"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3025"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3025"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3025"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3025"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3025"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>