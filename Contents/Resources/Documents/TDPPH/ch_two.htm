<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<a class="dashingAutolink" name="autolink-106355"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Getting%20Started"></a><title>Getting Started</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 743"/>
<meta name="dcterms.created" content="2014-02-04T21:52:14Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Database 2 Day + PHP Developer&#39;s Guide"/>
<meta name="dcterms.identifier" content="E18554-05"/>
<meta name="dcterms.isVersionOf" content="TDPPH"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2010, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="ch_one.htm" title="Previous" type="text/html"/>
<link rel="Next" href="ch_three_db_access_class.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E18554-05.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="c:\php-5.3.6\ext">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">5/18</span> <!-- End Header -->
<div id="TDPPH114" class="chapter"><a id="CHDHAECG"></a>
<h1 class="chapter"><span class="secnum">2</span> Getting Started</h1>
<p>This chapter explains how to <a id="sthref6"></a><a id="sthref7"></a>install and test Oracle Database and the PHP environment.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDICBDC">What You Need</a></p>
</li>
<li>
<p><a href="#CHDCFBDC">Installing Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDFGAED">Installing Apache HTTP Server</a></p>
</li>
<li>
<p><a href="#BABCIEJH">Testing the Apache Installation</a></p>
</li>
<li>
<p><a href="#CHDIADAI">Installing PHP</a></p>
</li>
<li>
<p><a href="#CHDFDEDD">Testing the PHP Installation</a></p>
</li>
<li>
<p><a href="#BABHBEBD">Installing the NetBeans 7.0 IDE</a></p>
</li>
</ul>
<a id="CHDICBDC"></a>
<div id="TDPPH115" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">What You Need</h2>
<p>To install your Oracle Database and PHP environment, you need:</p>
<ul>
<li>
<p>Oracle Database<a id="sthref8"></a><a id="sthref9"></a></p>
</li>
<li>
<p>Apache Web Server. On Linux this is commonly available in the package repository.</p>
</li>
<li>
<p>PHP 5.3. Several recent Linux distributions now include this version as a package.</p>
</li>
<li>
<p>A text editor for editing PHP files. A code editor such as NetBeans PHP edition with a debugger is ideal, but not required.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDCFBDC"></a>
<div id="TDPPH116" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Installing <a id="sthref10"></a><a id="sthref11"></a>Oracle D<a id="sthref12"></a><a id="sthref13"></a><a id="sthref14"></a>atabase</h2>
<p><a id="sthref15"></a><a id="sthref16"></a><a id="sthref17"></a>You should install Oracle Database on your computer. The sample data used in this tutorial is installed by default. It is the HR component of the Sample Schemas.</p>
<p>On Windows, install the 32-bit version of Oracle Database because there is no 64-bit version of PHP on Windows. Reboot after installing Oracle Database so that the PATH environment variable is correctly set.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGFJGI">Unlocking the HR User</a></p>
</li>
<li>
<p><a href="#BABHHEDD">Database Resident Connection Pooling</a></p>
</li>
<li>
<p><a href="#BABIBEGI">Starting the DRCP Pool</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink COMSC" href="../COMSC/toc.htm"><span class="italic">Oracle Database Sample Schemas</span></a> guide for information about the <code>HR</code> sample schema.</p>
</li>
<li>
<p>Oracle SQL Developer web page</p>
<p><code><a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html">http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html</a></code></p>
</li>
</ul>
</div>
<a id="CHDGFJGI"></a>
<div id="TDPPH117" class="sect2">
<h3 class="sect2">Unlocking the <a id="sthref18"></a><a id="sthref19"></a>HR User</h3>
<p>The PHP application <a id="sthref20"></a><a id="sthref21"></a>connects to the database as the HR user. You may need to unlock the <code>HR</code> account before it can be used. Use SQL*Plus or SQL Developer to unlock the <code>HR</code> user.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABBGBJJ">Unlocking the HR User Using a Command Line</a></p>
</li>
<li>
<p><a href="#BABEHIBG">Unlocking the HR User Using SQL Developer:</a></p>
</li>
</ul>
<a id="BABBGBJJ"></a>
<div id="TDPPH118" class="sect3">
<h4 class="sect3">Unlocking the HR User Using a Command Line</h4>
<p>Unlock the HR user using a command line as follows:</p>
<pre>SQL&gt; source /u01/app/oracle/product/12.1/bin/oracle_env.sh
SQL&gt; sqlplus system/<span class="italic">system_password</span>
SQL&gt; alter user hr identified by welcome account unlock;
</pre>
<p>where, <code><span class="codeinlineitalic">system_password</span></code> is the password you entered during database configuration.</p>
</div>
<!-- class="sect3" -->
<a id="BABEHIBG"></a>
<div id="TDPPH119" class="sect3">
<h4 class="sect3">Unlocking the HR User Using SQL Developer:</h4>
<p>Unlock the HR user using SQL Developer as follows:</p>
<ol>
<li>
<p>Open <span class="bold">SQL Developer</span> and open a connection to your Oracle database.</p>
</li>
<li>
<p>Login to your Oracle database as <span class="bold">system</span>.</p>
</li>
<li>
<p>Open SQL Worksheet or SQL*Plus and run the following SQL statement:</p>
<pre>alter user hr identified by welcome account unlock;
</pre>
<img width="813" height="508" src="img/chap2_unlock.gif" alt="image"/><br/>
<a id="sthref22" href="img_text/chap2_unlock.htm">Description of the illustration chap2_unlock.gif</a><br/>
<br/></li>
</ol>
<p>For further information about unlocking an Oracle database account, see Chapter 7, &#34;Managing Users and Security,&#34; in the <a class="olink ADMQS" href="../ADMQS/toc.htm"><span class="italic">Oracle Database Express Edition 2 Day DBA</span></a> guide.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Oracle database documentation</p>
<p><code><a href="http://www.oracle.com/technetwork/indexes/documentation/index.html">http://www.oracle.com/technetwork/indexes/documentation/index.html</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABHHEDD"></a>
<div id="TDPPH120" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref23"></a>Database Resident Connection Pooling</h3>
<p>The <a id="sthref24"></a>AnyCo sample application will use Database Resident Connection Pooling (DRCP) to show how a PHP application can scale to support many users.</p>
<p>PHP cannot be assumed to be thread safe and is typically run in a multi-process mode, for example with the Apache web server&#39;s pre-fork model or with FastCGI. Sharing Oracle connections between active and idle PHP processes is not possible in the mid-tier because there is no interprocess communication. DRCP works because the sharing is handled by the database host computer. This also allows connection resources created by multiple mid-tier hosts to be shared.</p>
<p>For best performance it is common for PHP OCI8 applications to use &#34;persistent&#34; database connections. When PHP has completed an application script and sent its output to the web user&#39;s browser, the script&#39;s underlying DB connection is not closed. The connection remains cached in the still-running, now idle PHP/Apache process. It can be reused by this PHP process in any subsequent PHP script connecting with the same database credentials. This has great performance benefits. However without DRCP, when there are large numbers of PHP processes the open database connections may use a large amount of database host memory. This is despite many connections being idle due to the user&#39;s &#34;think-time&#34; between making web page requests, or while the PHP script runs non-database operations.</p>
<p>DRCP allows PHP applications to efficiently use database host memory to support large numbers of web users. DRCP allows database resources to be used by only those web users currently doing database operations. Benchmarks have shown DRCP can support tens of thousands of web users on small, commodity Linux database hosts.</p>
<div id="TDPPH121" class="figure">
<p class="titleinfigure"><a id="sthref25"></a>Figure 2-1 Without DRCP, Idle Persistent Connections from PHP still Consume Database Resources.</p>
<img width="400" height="361" src="img/figure_2_1.png" alt="Without DRCP"/><br/></div>
<!-- class="figure" -->
<p>DRCP overcomes the database host memory pressure by maintaining a small pool of database server processes on the host. These can be shared by all the PHP database connections across all <a id="sthref26"></a><a id="sthref27"></a><a id="sthref28"></a>PHP proc<a id="sthref29"></a>esses and mid-tier servers when they are needed.</p>
<div id="TDPPH122" class="figure">
<p class="titleinfigure"><a id="sthref30"></a>Figure 2-2 DRCP Architecture</p>
<img width="684" height="495" src="img/chap2_drcp_pool.png" alt="DRCP Architecture"/><br/></div>
<!-- class="figure" -->
<p>If a PHP script connects to the database but there is no pooled server process available, then it will wait until one is free. This prevents the database from being overloaded and allows applications to continue running.</p>
<p>Once the DRCP pool is started, applications can choose at run time whether to use it or not. This is indicated in the PHP OCI8 connection string. Typically only short lived, similar kinds of tasks should use DRCP. Batch processes should not use the pool.</p>
<p>The DRCP pool can be used in two variants. The basic method is that only the processes are reused. The second method increases performance by also reusing the &#34;session&#34; memory associated with each process. In PHP, only &#34;persistent&#34; connections use the latter method. For web applications like PHP where each script is part of a single application, this session memory sharing is generally perfectly acceptable. However care must be taken that any retained session settings such as the date format do not occur unexpectedly and that they do not constitute an information security leak. DRCP allows the pool to be virtually sub-partitioned to reduce any issues like this.</p>
<p>PHP OCI8 applications use the <code>oci_pconnect(</code>) call to create a persistent database connection. Applications can also connect to Oracle using <code>o<a id="sthref31"></a><a id="sthref32"></a><a id="sthref33"></a>ci_connect()</code> or <code>oci_new_connect()</code>, which create non-persistent connections. The <code><a id="sthref34"></a><a id="sthref35"></a><a id="sthref36"></a>oci_new_connect()</code> function always returns a new, transactionally independent connection resource each time it is called. The <code><a id="sthref37"></a><a id="sthref38"></a><a id="sthref39"></a>oci_connect()</code> and <code>oci_pconnect()</code> functions will return their respective same PHP resource if a running script calls them multiple times with the same connection credentials. For each connection method, a rollback occurs after each script, if necessary.</p>
<p>There are also differences in behavior between the three functions depending on whether DRCP is being used.</p>
<p>Without DRCP, a persistent connection remains open even when the PHP script has completed. A subsequent script connecting with the same credentials can immediately reuse that connection. This is fast but the database host must have enough memory to maintain the connections from each PHP process even when the processes are idle. The <code>oci_connect()</code> and <code><a id="sthref40"></a><a id="sthref41"></a><a id="sthref42"></a>oci_new_connect()</code> functions do not retain the underlying connection to the database after the PHP script completes. This makes connection slower to establish but memory use on the database host is capped by the number of active web users.</p>
<p>When PHP connections uses DRCP, all three OCI8 connection functions benefit from using established DRCP server processes from the DRCP pool. When each script finishes (if not earlier), its database pooled server is returned to the DRCP pool for reuse. A lightweight connection to the DRCP broker is retained, which aids re-connection performance. An <code><a id="sthref43"></a><a id="sthref44"></a><a id="sthref45"></a>oci_pconnect()</code> function will reuse the process session memory, provide more efficiency and higher scalability. Each<a id="sthref46"></a><a id="sthref47"></a><a id="sthref48"></a> <code>oci_connect()</code> and <code>oci_new_connect()</code> call will recreate the Oracle session memory in the reused DRCP pooled process.</p>
<p>More information on DRCP and PHP is in the whitepaper:</p>
<p><code><a href="http://www.oracle.com/technetwork/topics/php/whatsnew/php-scalability-ha-twp-128842.pdf">http://www.oracle.com/technetwork/topics/php/whatsnew/php-scalability-ha-twp-128842.pdf</a></code></p>
</div>
<!-- class="sect2" -->
<a id="BABIBEGI"></a>
<div id="TDPPH123" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting the <a id="sthref49"></a>DRCP Pool</h3>
<p>The DRCP pool can be controlled in SQL*Plus with the pre-supplied PL/SQL <code>DBMS_CONNECTION_POOL</code> package.</p>
<p>To start the pool on Oracle Linux, open a terminal window and connect as the root user:</p>
<pre># su -
</pre>
<p>Now, <code>su</code> to the Oracle account:</p>
<pre># su - oracle
$ source /u01/app/oracle/product/12.1/bin/oracle_env.sh
</pre>
<p>Run SQL*Plus with the SYSDBA system privilege and invoke the <code>DBMS_CONNECTION_POOL.START_POOL()</code> procedure:</p>
<pre>$ sqlplus / as sysdba
SQL&gt; execute dbms_connection_pool.start_pool()
</pre>
<p>The pool will now run with its default parameters.</p>
<p>To stop the pool, run:</p>
<pre>SQL&gt; execute dbms_connection_pool.stop_pool()
</pre>
<p>If DRCP is running when the database is restarted, then the pool will automatically restart.</p>
<p>Pool parameters can be changed with <code>DBMS_CONNECTION_POOL.ALTER_PARAM()</code>, for example:</p>
<pre>SQL&gt; execute dbms_connection_pool.alter_param(null, &#39;MAXSIZE&#39;, &#39;10&#39;);
</pre>
<p>The pool should be restarted after changing parameters.</p>
<p>The current pool settings can be viewed by querying Oracle&#39;s data dictionary:</p>
<pre>select * from DBA_CPOOL_INFO;
</pre>
<p>The overall DRCP Pool statistics can be seen in</p>
<pre>select * from V$CPOOL_STATS;
</pre>
<p>By observing the statistics over time you can decide how to tune the pool parameters.</p>
<p>Each DRCP database connection can specify an arbitrary &#34;connection class&#34;. In PHP the connection class can be configured in PHP&#39;s <code>php.ini</code> initialization file or can be set at run time. See &#34;<a href="#BABJJBDB">Post PHP Installation Tasks on Windows and Linux</a>&#34;. The connection class helps partition the DRCP pool for different use cases.</p>
<p>The statistics for each connection class can be seen using:</p>
<pre># select * from V$CPOOL_CC_STATS;
</pre>
<p>Not setting a connection class results in reduced sharing of the DRCP pool resources. For general application, if <a id="sthref50"></a><code>V$CPOOL_CC_STATS</code> shows a large number of system generated connection class names, then check that your PHP configuration files on each mid tier server is correctly setting the connection class.</p>
<p>The DRCP pool is sharable across all enabled applications, including those written in PHP, Perl, and Python. Some tools like SQL*Plus are not DRCP enabled. If you use a DRCP connection with SQL*Plus you will see entries in <code>V$CPOOL_CC_STATS</code> with the class name <code>SHARED</code>. SQL*Plus will reuse the DRCP pool processes but will have to recreate each process&#39;s session memory.</p>
<p>When you have built the AnyCo application and run it, you can examine the monitoring views to see DRCP in action.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFGAED"></a>
<div id="TDPPH124" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Installing <a id="sthref51"></a><a id="sthref52"></a>Apache HTTP Server</h2>
<p>The Apache web server handles incoming user page requests and invokes PHP to generate the application&#39;s HTML markup.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABECGIC">Installing Apache on Windows XP</a></p>
</li>
<li>
<p><a href="#BABJEHEE">Installing Apache on Linux</a></p>
</li>
</ul>
<a id="BABECGIC"></a>
<div id="TDPPH125" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing Apache on W<a id="sthref53"></a><a id="sthref54"></a>indows XP</h3>
<p>PHP 5.3.6 is installed using the FastCGI model in Windows. Perform the following steps to obtain Apache HTTP Server for Windows:</p>
<ol>
<li>
<p>Enter the following URL in your Web browser:</p>
<pre><a href="http://httpd.apache.org/download.cgi">http://httpd.apache.org/download.cgi</a>
</pre></li>
<li>
<p>Click the <span class="bold">httpd-2.2.17-win32-x86-no_ssl.msi</span>.</p>
</li>
<li>
<p>Save the downloaded file in a temporary directory, such as <code>c:\tmp</code> and double click to install it.</p>
<p>The software will install to a directory like: <code>C:\Program Files\Apache Software Foundation\Apache2.2</code>.</p>
<p>The file name and extraction directory are based on the current version. Throughout this procedure, ensure you use the directory name for the version you are installing.</p>
</li>
<li>
<p>Download the Apache <code>mod_fcgid</code> FastCGI component from the following URL:</p>
<p><code><a href="http://httpd.apache.org/download.cgi#mod_fcgid">http://httpd.apache.org/download.cgi#mod_fcgid</a></code></p>
</li>
<li>
<p>Unzip it to the installed Apache 2.2 directory.</p>
</li>
<li>
<p>Edit <code>C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf</code> and add:</p>
<pre>LoadModule fcgid_module modules/mod_fcgid.so
</pre>
<p>In <code>httpd.conf</code> locate the &lt;Directory&gt; section for htdocs and add ExecCGI to the Options:</p>
<pre>&lt;Directory &#34;C:/Program Files/Apache Software Foundation/Apache2.2/htdocs&#34;&gt;
...
Options Indexes FollowSymLinks ExecCGI
...
&lt;/Directory&gt;
</pre></li>
</ol>
<p>You can use the <span class="bold">Start</span> menu option to start Apache. This opens a console window showing any error messages. Error messages may also be written to <code>C:\Program Files\Apache Software Foundation\Apache2.2\logs\error.log</code>.</p>
<p>You can also use the ApacheMonitor utility to start Apache. If you chose to install Apache as a service for all users, it will appear as an icon in your System Tray.</p>
<p>If you have errors, double check your <code>httpd.conf</code> file</p>
</div>
<!-- class="sect2" -->
<a id="BABJEHEE"></a>
<div id="TDPPH126" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing Apache on Linux</h3>
<p>This section describes how to <a id="sthref55"></a><a id="sthref56"></a>install Apache HTTP Server on Linux.</p>
<p>The file name and extraction directory are based on the current version. Throughout this procedure, ensure you use the directory name for the version you are installing.</p>
<p>Apache is typically already installed on Linux or directly available in package repositories.</p>
<p>This sect<a id="sthref57"></a>ion contains the following topics:</p>
<ul>
<li>
<p><a href="#BABFJDDB">Using the Default HTTPD Package on Oracle Linux</a></p>
</li>
<li>
<p><a href="#BABHCFAB">Manually Installing Apache on Linux</a></p>
</li>
<li>
<p><a href="#BABHAIAB">Setting the Oracle Environment for Apache on Linux</a></p>
</li>
<li>
<p><a href="#BABDEFJH">Setting up a User Directory for the Example Project on Linux</a></p>
</li>
</ul>
<a id="BABFJDDB"></a>
<div id="TDPPH127" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using the Default HTTPD Package on Oracle Linux</h4>
<ol>
<li>
<p>On Oracle Linux <a id="sthref58"></a>install the <code>httpd</code> package with:</p>
<pre># yum install httpd
</pre>
<p>or</p>
<pre># up2date httpd
</pre></li>
<li>
<p>If you will be compiling PHP manually (see later), also install the <code>httpd-devel</code> package:</p>
<pre># yum install httpd-devel
</pre>
<p>or</p>
<pre># up2date httpd-devel
</pre></li>
<li>
<p>Stop Apache as root by using:</p>
<pre># service httpd stop
</pre></li>
<li>
<p>To start Apache run:</p>
<pre># service httpd start
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABHCFAB"></a>
<div id="TDPPH128" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Manually Installing A<a id="sthref59"></a><a id="sthref60"></a>pache on Linux</h4>
<p>This section describes how to manually install Apache HTTP Server on Linux. The file name and extraction directory are based on the current version. Throughout this procedure, ensure you use the directory name for the version you are installing.</p>
<p>Perform the following steps to install the Apache HTTP Server:</p>
<ol>
<li>
<p>Download the <code>httpd</code> server from apache.org, for example, <code>httpd-2.2.17.tar.bz2</code>.</p>
</li>
<li>
<p>Go to the directory where you downloaded the <code>httpd-2.2.17.tar.bz2</code> file.</p>
</li>
<li>
<p>Log in as the root user and run these commands:</p>
<pre># tar -jxvf httpd-2.2.17.tar.bz2
# cd httpd-2.2.17
# export ORACLE_HOME=/usr/lib/oracle/app/oracle/product/11.2.0/server
# ./configure \
        --prefix=/usr/local/apache \
        --enable-module=so
# make
# make install
</pre>
<p>The option <code>--enable-module=so</code> allows PHP to be compiled as a Dynamic Shared Object (DSO). The <code>--prefix</code> option sets the Apache installation directory used by the command <code>make install</code></p>
</li>
</ol>
<p>If you do not want to install and run Apache as a privileged user, set <code>--prefix</code> to a directory such as <code>$HOME/apache</code>. Then, after installation completes, you will also need to edit <code>httpd.conf</code> and modify the <code>Listen</code> parameter to change the port that Apache listens on, because non-privileged users cannot use the default port <code>80</code>.</p>
<p>Apache can be started with the <code>apachectl</code> script:</p>
<pre># /usr/local/apache/bin/apachectl start
</pre>
<p>Stop Apache with:</p>
<pre># /usr/local/apache/bin/apachectl stop
</pre></div>
<!-- class="sect3" -->
<a id="BABHAIAB"></a>
<div id="TDPPH129" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting the Oracle Environment for <a id="sthref61"></a>Apache on Linux</h4>
<p>The Oracle environment must be set correctly before starting Apache so that PHP OCI8 works correctly. In general you should set the same variables that are set by the <code>$ORACLE_HOME/bin/oracle_env.sh</code> script. The necessary environment variables can be set in Apache&#39;s environment configuration file.</p>
<p>On Oracle Linux with the default <code>httpd</code> package, this is <code>/etc/sysconfig/httpd</code>. If you installed your own Apache using the instructions in the previous section it is <code>/usr/local/bin/envvars</code>. Edit the file and add these lines:</p>
<pre>export ORACLE_HOME=/u01/app/oracle/product/12.1
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
</pre>
<p>Stop and restart Apache so the environment variables are in effect.</p>
</div>
<!-- class="sect3" -->
<a id="BABDEFJH"></a>
<div id="TDPPH130" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting up a Us<a id="sthref62"></a>er Directory for the Example Project on Linux</h4>
<p>The PHP files that will be created later need to be stored in a directory accessible by Apache. One possible location is Apache&#39;s Document root directory <code>/var/www/html</code> (or <code>/usr/local/apache/htdocs</code>, if you installed Apache manually). However, you may find it easier to give Apache access to a subdirectory of your home directory.</p>
<ol>
<li>
<p>Login as your normal user and make a working directory:</p>
<pre>mkdir $HOME/public_html
</pre>
<p>You will also need to let the Apache processes access your files, for example with:</p>
<pre>chmod 755 $HOME $HOME/public_html
</pre></li>
<li>
<ol>
<li>
<p>For Oracle Linux, edit <code>/etc/httpd/conf/httpd.conf</code> and locate the <code>mod_userdir.c</code> section. Change it to:</p>
<pre>&lt;IfModule mod_userdir.c&gt;
  #
  # UserDir is disabled by default since it can confirm the presence
  # of a user name on the system (depending on home directory
  # permissions).
  #
  #UserDir disable
  #
  # To enable requests to /~user/ to serve the user&#39;s public_html
  # directory, remove the &#34;UserDir disable&#34; line above, and uncomment
  # the following line instead:
  #
  UserDir public_html
&lt;/IfModule&gt;
</pre></li>
<li>
<p>If you installed Apache manually, edit <code>/usr/local/apache/conf/httpd.conf</code> and locate the line:</p>
<pre>Include conf/extra/httpd-userdir.conf
</pre>
<p>Make sure it is uncommented by removing a leading pound sign (<code>#</code>), if one exists.</p>
</li>
</ol>
</li>
<li>
<p>Restart Apache</p>
<p>Now the Web browser can serve files from the <code>$HOME/public_html</code> directory of users. For example, if you login as &#39;<code>chris</code>&#39; then PHP files created in <code>$HOME/public_html</code> would be accessible by the <code>URL http://localhost/~chris/</code></p>
<p>If you decide to create the PHP project files in <code>public_html</code> you will need to change any URLs mentioned later in this manual. For example use <code>http://localhost/~user/</code> wherever the manual says to use <code>http://localhost/</code>.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCIEJH"></a>
<div id="TDPPH131" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Testing the Apache In<a id="sthref63"></a><a id="sthref64"></a>stallation</h2>
<p>To test the Apache HTTP Server installation:</p>
<ol>
<li>
<p>Start your <a id="sthref65"></a><a id="sthref66"></a><a id="sthref67"></a>Web browser on the computer on which you installed Apache.</p>
</li>
<li>
<p>Enter the following URL:</p>
<pre>http://localhost/
</pre>
<p>Your Web browser will display a page similar to the following:</p>
<img width="185" height="56" src="img/chap2_test_install_013.png" alt="it works"/><br/>
<a id="sthref68" href="img_text/chap2_test_install_013.htm">Description of the illustration chap2_test_install_013.png</a><br/>
<br/>
<p>If this page does not appear check your Apache configuration. Common problems are that Apache is not running, or that it is listening on a nondefault port. The port number is set by the <code>Listen</code> parameter in Apache&#39;s configuration file <code>/etc/httpd/conf/httpd.conf</code> (or <code>/usr/local/apache/conf/httpd.conf</code>, or <code>C:\Program Files\Apache Software Foundation\Apache2.2\conf\httpd.conf</code>).</p>
<p>If your site uses a nondefault port number you will need to change any URLs mentioned later in this manual. For example if Apache listens on port 8888, then use <code>http://localhost:8888/</code> wherever the manual says to use <code>http://localhost/</code>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDIADAI"></a>
<div id="TDPPH132" class="sect1">
<h2 class="sect1">Installing <a id="sthref69"></a><a id="sthref70"></a>PHP</h2>
<p>The application in this manual uses PHP 5.3 which has the OCI8 1.4 extension for Oracle database. New features in PHP 5.3 and OCI8 1.4 are used. PHP&#39;s GD extension is used in <a href="ch_eleven_image.htm#BABFADFD">Chapter 11, &#34;Using JSON and generating a JPEG image.&#34;</a></p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCJBGA">Installing PHP on Windows</a></p>
</li>
<li>
<p><a href="#BABGJIBD">Installing PHP on Linux</a></p>
</li>
<li>
<p><a href="#BABJJBDB">Post PHP Installation Tasks on Windows and Linux</a></p>
</li>
</ul>
<a id="BABCJBGA"></a>
<div id="TDPPH133" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing PHP on Win<a id="sthref71"></a><a id="sthref72"></a>dows</h3>
<p>This section describes how to <a id="sthref73"></a><a id="sthref74"></a>install PHP on Windows.</p>
<p>The file name and extraction directory are based on the current version. Throughout this procedure, ensure you use the directory name for the version you are installing.</p>
<p>You must be the administrator user to install PHP. To install PHP, perform the following steps:</p>
<ol>
<li>
<p>Download the PHP 5.3.6 zip file from the following Web site:</p>
<p><code><a href="http://windows.php.net/download/">http://windows.php.net/download/</a></code></p>
<p>Use the non-thread safe bundle because it will be installed in FastCGI mode.</p>
</li>
<li>
<p>In Windows Explorer, go to the directory where you downloaded the PHP 5.3.6 zip file.</p>
</li>
<li>
<p>Unzip the PHP package to a directory called <code>C:\php-5.3.6</code></p>
</li>
<li>
<p>Copy <code>php.ini-development</code> to <code>C:\php-5.3.6\php.ini</code></p>
</li>
<li>
<p>Edit <code>php.ini</code> to make the following changes:</p>
<ul>
<li>
<p>Add the line <code>extension_dir = &#34;C:\php-5.3.6\ext&#34;</code>.</p>
<p>This is the directory containing the PHP extensions.</p>
</li>
<li>
<p>Remove the semicolon from the beginning of the line</p>
<p><code>extension=php_oci8_11g.dll</code></p>
</li>
</ul>
</li>
<li>
<p>Edit <code>C:\Program Files\Apache Software Foundation\Apache2.2\conf\</code><code>httpd.conf</code> and add the following lines. Make sure you use forward slashes &#39;<code>/</code>&#39; and not back slashes &#39;<code>\</code>&#39;:</p>
<pre>FcgidInitialEnv PHPRC &#34;c:/php-5.3.6&#34;
AddHandler fcgid-script .php
FcgidWrapper &#34;c:/php-5.3.6/php-cgi.exe&#34; .php
</pre>
<p>Make sure <code>mod_fcgid.so</code> is loaded and the ExecCGI option set as described previously in the section <a href="#BABECGIC">Installing Apache on Windows XP</a>.</p>
</li>
<li>
<p>Restart the Apache Server so that you can test your PHP installation.</p>
<p>If you have errors, double check your <code>httpd.conf</code> and <code>php.ini</code> files. Make sure you rebooted the computer after installing Oracle Database so that the <code>PATH</code> environment variable includes the Oracle libraries.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABGJIBD"></a>
<div id="TDPPH134" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing P<a id="sthref75"></a><a id="sthref76"></a>HP on <a id="sthref77"></a>Linux</h3>
<p>If your Linux distribution has PHP 5.3 packages it is easiest to use them. Alternatively you can build PHP from source code.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABBECED">Installing PHP and OCI8 on Oracle Linux</a></p>
</li>
<li>
<p><a href="#BABHDEEI">Adding the OCI8 Extension to an Existing PHP Installation on Linux</a></p>
</li>
<li>
<p><a href="#BABIAIAD">Manually Building PHP and OCI8 Together on Linux</a></p>
</li>
</ul>
<a id="BABBECED"></a>
<div id="TDPPH135" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Installing <a id="sthref78"></a>PHP and OCI8 on Oracle Linux</h4>
<p>On Oracle Linux install PHP 5.3 with:</p>
<pre># yum install php53 php53-gd
</pre>
<p>or</p>
<pre># up2date php53 php53-gd
</pre>
<p>If you do not have an Oracle Unbreakable Linux Network (ULN) subscription, you will need to install OCI8 manually as covered in the next section <a href="#BABHDEEI">Adding the OCI8 Extension to an Existing PHP Installation on Linux</a>.</p>
<p>If you are a subscriber to ULN then you have access to an OCI8 RPM in the <span class="bold">Oracle Software for Enterprise Linux 5</span> channel. Add this channel and then run:</p>
<pre># yum install php53-oci8-11gR2
</pre>
<p>or</p>
<pre># up2date php53-oci8-11gR2
</pre>
<p>Installing the <code>php53-oci8-11gR2</code> package will also install Oracle Instant Client libraries.</p>
<p>Restart Apache. If there are errors, they will display on your screen. They may also be written to <code>/var/log/httpd/error_log</code>. If you have problems, double check your <code>httpd.conf</code> and <code>php.ini</code> files.</p>
</div>
<!-- class="sect3" -->
<a id="BABHDEEI"></a>
<div id="TDPPH136" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Adding the OCI8 Extension to an Existing PHP <a id="sthref79"></a><a id="sthref80"></a>Installation on Linux</h4>
<p>If you have an existing PHP 5.3 installation without OCI8 you can add the latest PHP OCI8 extension by using PHP&#39;s PECL library, <code>http://pecl.php.net/oci8</code>. In general you can use this library to add OCI8 to PHP 4.3.9 onwards. Note the example code in this manual requires PHP 5.3.</p>
<p>You will need PHP development files such as the <code>phpize</code> command. On Oracle Linux this can be found in the <code>php53-devel</code> package.</p>
<p>To install <a id="sthref81"></a>OCI8 perform the following steps:</p>
<ol>
<li>
<p>Download and extract <code>http://pecl.php.net/get/oci8-1.4.5.tgz</code></p>
</li>
<li>
<p>Run the following commands:</p>
<pre># cd oci8-1.4.5
# phpize
# export ORACLE_HOME=/u01/app/oracle/product/12.1
# ./configure --with-oci8
# make install
</pre></li>
</ol>
<p>PHP OCI8 is built as a shared library. This makes it easy to upgrade without interfering with the rest of the PHP installation.</p>
<p>To get PHP to load the library, edit <code>/etc/php.ini</code> and add:</p>
<pre>extension=oci8.so
</pre></div>
<!-- class="sect3" -->
<a id="BABIAIAD"></a>
<div id="TDPPH137" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Manually Building PHP and OCI8 Together on Linux</h4>
<p>This section describes how to build PHP from source code on Linux. The file name and extraction directory are based on the current version. Throughout this procedure, ensure you use the directory name for the version you are installing.</p>
<p>The instructions here result in a PHP binary with the OCI8 extension statically built in. A variant you might want to consider is to build PHP without OCI8, and then add OCI8 from PECL, as described in the previous section.</p>
<p>Perform the following steps to install PHP:</p>
<ol>
<li>
<p>Download PHP 5.3.6 from:</p>
<p><code><a href="http://www.php.net/downloads.php">http://www.php.net/downloads.php</a></code></p>
</li>
<li>
<p>Login as the root user and run these commands:</p>
<pre># tar -jxvf php-5.3.6.tar.bz2
# cd php-5.3.6
# export ORACLE_HOME=/u01/app/oracle/product/12.1
# ./configure \
--with-oci8 \
--with-apxs2=/usr/local/apache/bin/apxs \
--with-config-file-path=/usr/local/apache/conf
</pre>
<p>If your Apache installation is not in <code>/usr/local/apache</code> then use the appropriate paths for your system. If you want to install PHP into a nonstandard location, such as under your home directory, add the <code>--prefix</code> option when running &#39;<code>configure</code>&#39;. For example, <code>--prefix=$HOME/php53</code>.</p>
</li>
<li>
<p>Build and install PHP:</p>
<pre># make
# make install
</pre></li>
<li>
<p>Copy PHP&#39;s supplied initialization development file:</p>
<pre># cp php.ini-development /usr/local/apache/conf/php.ini
</pre></li>
<li>
<p>Edit Apache&#39;s configuration file <code>/usr/local/apache/conf/httpd.conf</code></p>
<p>If a <code>LoadModule</code> line was not inserted by the PHP install, add it with:</p>
<pre>LoadModule php5_module modules/libphp5.so
</pre>
<p>Add the following lines to <code>httpd.conf</code>:</p>
<pre>#
# This next section will call PHP for .php files
#
AddType application/x-httpd-php .php
</pre></li>
<li>
<p>Restart the Apache Server:</p>
<pre>/usr/local/apache/bin/apachectl stop
/usr/local/apache/bin/apachectl start
</pre>
<p>If there are errors, they will display on your screen. They may also be written to <code>/usr/local/apache/logs/error_log</code>. If you have problems, double check your <code>httpd.conf</code> and <code>php.ini</code> files.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABJJBDB"></a>
<div id="TDPPH138" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Post PHP Installation Tasks on<a id="sthref82"></a> Windows and Linux</h3>
<p>Once PHP is installed, make sure the <code>php.ini</code> configuration file has the following settings.</p>
<ol>
<li>
<p>Setting the time zone is a new requirement of PHP 5.3.</p>
<pre>date.timezone = America/Los_Angeles
</pre></li>
<li>
<p>For testing it is helpful to set PHP&#39;s <code>display_errors</code> to show messages in the output text, instead of hiding them in Apache log files. In <code>php.ini</code> locate the <code>display_errors</code> setting and change it to <code>On</code> if necessary. If the directive does not exist, add the line:</p>
<pre>display_errors = On
</pre></li>
<li>
<p>The DRCP connection class should be configured in <code>php.ini</code>. The name is a user-chosen string to distinguish this application from any others that also use DRCP. If the class is not set, Oracle will not be able to share the DRCP pool effectively.</p>
<p>Add a class name entry, such as:</p>
<pre>oci8.connection_class = ACXE
</pre>
<p>Save the configuration file.</p>
<p>If you are on Linux, make sure you have also done the steps in the earlier section <a href="#BABHAIAB">Setting the Oracle Environment for Apache on Linux</a>.</p>
</li>
<li>
<p>Restart Apache.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFDEDD"></a>
<div id="TDPPH139" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Testing t<a id="sthref83"></a>he PHP Installation</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABICHFC">Checking PHP Configuration with phpinfo()</a></p>
</li>
<li>
<p><a href="#BABFIHHF">Testing PHP Connections to Oracle</a></p>
</li>
</ul>
<a id="BABICHFC"></a>
<div id="TDPPH140" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Checking PHP Configuration with phpinfo()</h3>
<p>First, review the Apache error file <code>error_log</code> (in /var/log/httpd, /usr/local/apache/logs or C:\Program Files\Apache Software Foundation\Apache2.2\logs) to confirm there are no startup errors from Apache or PHP.</p>
<p>Decide where you want to create the PHP project files. This directory should be Apache accessible. For example on Linux you could use the Apache document root (/var/www/html or /usr/local/apache/htdocs) or $HOME/public_html if you configured a user directory. On Windows use the Apache document root C:\Program Files\Apache Software Foundation\Apache2.2\htdocs</p>
<p>In an editor create a new PHP file <code>pi.php</code> containing:</p>
<pre>&lt;?php
    phpinfo();
?&gt;
</pre>
<p>Load this file in a browser:</p>
<p><code>http://localhost/pi.php</code></p>
<p>Check the following:</p>
<ul>
<li>
<p>If you use a non default port such as 8888 change the URL to include it, for example <code>http://localhost:8888/pi.php</code></p>
</li>
<li>
<p>If your file is in <code>$HOME/public_html</code> then change the URL to include your user name, for example <code>http://localhost/~chris/pi.php</code></p>
</li>
<li>
<p>Or use both, for example <code>http://localhost:8888/~chris/pi.php</code></p>
</li>
</ul>
<p>You should see a page like:</p>
<img width="985" height="726" src="img/chap2_php_config_phpinfo.png" alt="php"/><br/>
<p>If you see the text of the file echoed back it means you didn&#39;t configure Apache to send PHP files to PHP. Apache&#39;s <code>http.conf</code> file needs a line <code>AddType application/x-httpd-php .php</code> on Linux or <code>AddHandler fcgid-script .php</code> on Windows.</p>
<p>Correct <code>phpinfo()</code> output shows the php.ini location and if it was loaded. If it shows no <code>php.ini</code> loaded, then revisit earlier steps, copy a <code>sample php.ini</code> file to the correct location and follow the steps in the section <a href="#BABJJBDB">&#34;Post PHP Installation Tasks on Windows and Linux&#34;</a>.</p>
<p>Scroll down to the OCI8 section. You should see</p>
<img width="985" height="726" src="img/chap2_php_config_oci8.png" alt="php oci8"/><br/>
<p>If there is no OCI8 section, check that you installed OCI8. If you installed it as a shared library, check <code>php.ini</code> has <code>extension=oci8.so</code> or <code>extension=php_oci8_11g.dll</code> on Windows, and that the <code>phpinfo()</code> output shows <code>extension_dir</code> set to the directory where the OCI8 library was installed.</p>
</div>
<!-- class="sect2" -->
<a id="BABFIHHF"></a>
<div id="TDPPH141" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Testing PHP C<a id="sthref84"></a><a id="sthref85"></a>onnections to Oracle</h3>
<p>To check that the OCI8 extension works, create a new PHP file <code>testoci8.php</code> containing:</p>
<pre>&lt;?php
 
$c = oci_connect(&#39;hr&#39;, &#39;welcome&#39;, &#39;localhost&#39;);
if (!$c) {
    $m = oci_error();
    trigger_error(&#39;Could not connect to database: &#39;. $m[&#39;message&#39;], E_USER_ERROR);
}
$s = oci_parse($c, &#34;SELECT * FROM employees&#34;);
if (!$s) {
    $m = oci_error($c);
    trigger_error(&#39;Could not parse statement: &#39;. $m[&#39;message&#39;], E_USER_ERROR);
}
$r = oci_execute($s);
if (!$r) {
    $m = oci_error($s);
    trigger_error(&#39;Could not execute statement: &#39;. $m[&#39;message&#39;], E_USER_ERROR);
}
$r = oci_fetch_all($s, $res);
if (!$r) {
    $m = oci_error($s);
    trigger_error(&#39;Could not fetch rows: &#39;. $m[&#39;message&#39;], E_USER_ERROR);
}
echo &#34;&lt;table border=&#39;1&#39;&gt;\n&#34;;
foreach ($res as $row) {
    echo &#34;&lt;tr&gt;\n&#34;;
    foreach ($row as $item) {
        echo &#34;  &lt;td&gt;&#34;.($item!==null?htmlentities($item, 
                       ENT_QUOTES):&#34;&amp;nbsp;&#34;).&#34;&lt;/td&gt;\n&#34;;
    }
    echo &#34;&lt;/tr&gt;\n&#34;;
}
echo &#34;&lt;/table&gt;\n&#34;;
 
?&gt;
</pre>
<p>Everything between the <code>&lt;?php ?&gt;</code> tags will be processed by PHP and its output sent to the user&#39;s browser. Text outside of the tags will be sent to the user&#39;s browser verbatim. This includes leading and trailing white space. Files can have multiple sets of tags. Some applications use this to embed snippets of PHP inside HTML content. However a PHP-centric application will commonly use PHP echo or print statements to print any needed HTML tags.</p>
<p>How the OCI8 function calls work is described in the section <a href="ch_three_db_access_class.htm#CIHEFHFI">General Example of Running SQL in PHP OCI8</a> and throughout the remainder of this manual.</p>
<p>Load the following file in a browser:</p>
<p><code>http://localhost/testoci8.php</code></p>
<p>Depending how you installed Apache, you may need to use one of these alternatives:</p>
<ul>
<li>
<p><code>http://localhost:8888/testoci8.php</code></p>
</li>
<li>
<p><code>http://localhost/~chris/testoci8.php</code></p>
</li>
<li>
<p><code>http://localhost:8888/~chris/testoci8.php</code></p>
</li>
</ul>
<p>You should see:</p>
<img width="985" height="513" src="img/chap2_test_php_oracle.png" alt="chap2_Testing_PHP_Connections_to_Oracle.png"/><br/>
<p>If you get a blank screen, check <code>php.ini</code> has <code>display_errors = On</code>. Reload the page and see if there was an error.</p>
<p>If you get an error <code>ORA-28000: the account is locked</code>, then unlock the HR account using the steps given previously in section <a href="#CHDGFJGI">Unlocking the HR User</a>.</p>
<p>If you get a startup error on Linux like</p>
<p><code>Warning: oci_connect():OciEnvNlsCreate() failed</code> then check that <code>ORACLE_HOME</code> was set correctly before Apache was started.</p>
<p>If you get an error like <code>ORA-12541: TNS:no listener</code> review the Oracle Database installation log and find the port that Oracle Database listener was installed with. For example if you used <code>1522</code> then change the connect call in <code>testoci8.php</code> to:</p>
<pre>$c = oci_connect(&#39;hr&#39;, &#39;welcome&#39;, &#39;localhost:1522&#39;);
</pre>
<p>If you get an error <code>ORA-01017: invalid username/password</code>, then change the <code>oci_connect()</code> call to use the password you assigned to <code>HR</code> in the section <a href="#CHDGFJGI">Unlocking the HR User</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHBEBD"></a>
<div id="TDPPH142" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Installing the Net<a id="sthref86"></a><a id="sthref87"></a>Beans 7.0 IDE</h2>
<p>NetBeans is an extremely popular IDE for PHP web projects and has excellent coding features. Several programming and mark-up languages, including HTML, JavaScript, and CSS editing features are supported. The latest version of NetBeans understands PHP 5.3 language constructs. NetBeans has PHP framework support, integration with tools like PHPUnit for testing, and integration with PHPDocumentor for documentation generation. It can be configured with an optional PHP debugger extension, which is very useful for PHP development. NetBeans also offers a SQL editor that works with Oracle database.</p>
<p>Detailed installation instructions are at</p>
<p><code><a href="http://netbeans.org/community/releases/70/install.html">http://netbeans.org/community/releases/70/install.html</a></code></p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABGGEAF">Installing NetBeans IDE on Windows</a></p>
</li>
<li>
<p><a href="#BABEBECA">Installing NetBeans IDE on Linux</a></p>
</li>
<li>
<p><a href="#BABBAJFH">Configuring NetBeans on Linux and Windows</a></p>
</li>
<li>
<p><a href="#BABGEEBJ">Using NetBeans</a></p>
</li>
</ul>
<a id="BABGGEAF"></a>
<div id="TDPPH143" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing Net<a id="sthref88"></a><a id="sthref89"></a>Beans IDE on Windows</h3>
<p>To install NetBeans IDE on Windows, perform the following steps:</p>
<ol>
<li>
<p>Download NetBeans 7.0 with the Java SE Development Kit from the following location:</p>
<p><code><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html</a></code></p>
</li>
<li>
<p>In Windows Explorer, locate the downloaded file <code>jdk-6u25-nb-7_0-windows-ml.exe</code> and run it by double clicking it.</p>
</li>
<li>
<p>After installation, start NetBeans by navigating to <span class="bold">Start</span>, then <span class="bold">All Programs</span>, then <span class="bold">NetBeans</span>, and then <span class="bold">NetBeans IDE 7.0</span>.</p>
</li>
<li>
<p>From <span class="bold">Run Tools</span>, select <span class="bold">Plugins</span>.</p>
</li>
<li>
<p>Go to the <span class="bold">Available Plugins</span> tab and select all the options in the <span class="bold">PHP</span> category.</p>
</li>
<li>
<p>Click <span class="bold">Install</span> and agree to the license and location.</p>
</li>
<li>
<p>Restart the IDE when prompted.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABEBECA"></a>
<div id="TDPPH144" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Installing NetBeans ID<a id="sthref90"></a><a id="sthref91"></a>E on Linux</h3>
<p>To install NetBeans IDE on Linux, perform the following steps:</p>
<ol>
<li>
<p>Download the NetBeans 7.0 PHP bundle from the following Web site:</p>
<p><code><a href="http://netbeans.org/downloads/">http://netbeans.org/downloads/</a></code></p>
</li>
<li>
<p>On Linux open a terminal window and run the installer:</p>
<pre># sh netbeans-7.0-ml-php-linux.sh
</pre></li>
<li>
<p>If your JDK is not installed in a default location, specify the path when installing, for example:</p>
<pre># sh netbeans-6.9-ml-php-linux.sh --javahome $HOME/jdk1.6.0_24
</pre></li>
<li>
<p>Accept the license</p>
</li>
<li>
<p>Confirm the install directory.</p>
</li>
<li>
<p>Confirm the location of your JDK.</p>
</li>
</ol>
<p>NetBeans will install.</p>
<p>If you do not already have a JDK on your computer, download a bundle of NetBeans 7.0 that includes the JDK from</p>
<p><code><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html</a></code></p>
<p>This bundle does not have PHP enabled. To enable PHP, go to <span class="bold">Tools</span> and run <span class="bold">Plugins</span>. Go to the <span class="bold">Available Plugins</span> tab and select all the options in the &#34;<span class="bold">PHP</span>&#34; category. Click <span class="bold">Install</span> and agree to the license and location. Restart the IDE when prompted.</p>
</div>
<!-- class="sect2" -->
<a id="BABBAJFH"></a>
<div id="TDPPH145" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring <a id="sthref92"></a>NetBeans on Linux and Windows</h3>
<p>Perform the following steps to configure NetBeans on Linux and Windows.</p>
<ol>
<li>
<p>Start NetBeans by using the desktop icon or menu entry. Navigate to <span class="bold">Tools</span> and then <span class="bold">Options</span>.</p>
</li>
<li>
<p>In the <span class="bold">General</span> options choose your preferred browser.</p>
</li>
<li>
<p>In the <span class="bold">PHP</span> options, go to the <span class="bold">General</span> tab.</p>
</li>
<li>
<p>Set the PHP 5 interpreter to your PHP command line executable, for example <code>/usr/bin/php</code>, <code>/usr/local/bin/php</code>, or <code>C:\php-5.3.6\php.exe</code>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABGEEBJ"></a>
<div id="TDPPH146" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using <a id="sthref93"></a>NetBeans</h3>
<p>Create a new <span class="bold">PHP Project</span> as follows:</p>
<ol>
<li>
<p>Navigating to <span class="bold">File</span>, then <span class="bold">New Project</span>, or clicking the <span class="bold">New Project</span> Icon, or using Ctrl + Shift + N.</p>
</li>
<li>
<p>Choose <span class="bold">PHP</span> and <span class="bold">PHP Application</span>.</p>
</li>
<li>
<p>Change the Project name to <code>ACXE</code>.</p>
</li>
<li>
<p>Choose your folder where the source files will be kept. For ease of install, use a directory that Apache can access such as <span class="bold">/home/chris/public_html/ACXE</span>.</p>
</li>
<li>
<p>Set the PHP Version to PHP 5.3</p>
</li>
<li>
<p>Set the project URL to map the directory where the sources are located. For example, <code>http://localhost:8888/~chris/ACXE/</code>, if you use a non default Apache port. Do not use a framework.</p>
</li>
<li>
<p>The project will be created and an index.php file will be set to the default NetBeans template.</p>
<img width="1091" height="711" src="img/chap2_netbeans_1.png" alt="netbeans"/><br/></li>
<li>
<p>Put some content in <code>index.php</code> to verify it can be run. Inside the <code>&lt;?php ?&gt;</code> tags, replace the comment line <code>// put your code here</code> with</p>
<pre>echo &#34;hi&#34;;
</pre></li>
<li>
<p>Run the file by selecting <span class="bold">Run Project</span> from <span class="bold">Run</span>, or press <span class="bold">F6</span>. A browser window will open with the newly added message:</p>
<img width="602" height="180" src="img/chap2_netbeans_2.png" alt="NetBeans"/><br/></li>
<li>
<p>If the URL is not correct and does not map to the file on disk, right click the project name in the Project navigator and select <span class="bold">Properties</span>. Select <span class="bold">Run Configuration</span> and change the Project URL.</p>
</li>
</ol>
<p>Throughout the rest of this manual you can add files to the ACXE project as needed by selecting the project name in the Project navigator and then going to <span class="bold">File</span> then <span class="bold">New File</span>, or using the <span class="bold">New File</span> icon, or Ctrl + N.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment4949">
<tr>
<td class="cellalignment4956">
<table class="cellalignment4954">
<tr>
<td class="cellalignment4953"><a href="ch_one.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment4953"><a href="ch_three_db_access_class.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2010, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment4958">
<table class="cellalignment4952">
<tr>
<td class="cellalignment4953"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment4953"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment4953"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment4953"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment4953"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment4953"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>