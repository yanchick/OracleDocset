<!DOCTYPE html><html lang="en-US"><head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="UTF-8"/>
<a class="dashingAutolink" name="autolink-86536"></a><a class="dashAnchor" name="//apple_ref/cpp/Package/Performing%20DBA%20Functions%20Under%C2%A0Oracle%C2%A0Label%C2%A0Security"></a><title>Performing DBA Functions Under&nbsp;Oracle&nbsp;Label&nbsp;Security</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"/>
<meta name="description" content="Oracle Label Security supports the standard Oracle Database utilities, but certain restrictions apply, which may require extra steps to get the expected results."/>
<meta name="keywords" content="LBACSYS, export, import, HIDE option, not exported, Import utility, importing policies, Data Pump export, row labels, Data Pump import, impdp, with Oracle Label Security, policy_DBA role, required for Data Pump import operations, importing labeled data, DBA_SA_GROUPS view, DBA_SA_COMPARTMENTS view, DBA_SA_LEVELS view, Export utility, PL/SQL, recreating labels for import, DBA_SA_LABELS view, labeling functions, importing unlabeled data, LABEL_DEFAULT option, importing hidden column, SQL*Loader, INTO TABLE clause, performance, Oracle Label Security, ANALYZE command, LBACSYS schema, data dictionary tables, B-tree indexes, indexes, policy label column, indexing, predicates, label tag performance strategy, label tags, strategy, label tag strategy, partitioning, creating additional databases, databases, creating additional, creating databases, AS SYSDBA clause"/>
<meta name="dcterms.created" content="2017-03-14T13:38:49Z"/>
<meta name="robots" content="all"/>
<meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"/>
<meta name="dcterms.identifier" content="E48437-08"/>
<meta name="dcterms.isVersionOf" content="OLSAG"/>
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2015, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved."/>
<link rel="Start" href="../index.htm" title="Home" type="text/html"/>
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html"/>

<script type="application/javascript" src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript" src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html"/>
<link rel="Index" href="index.htm" title="Index" type="text/html"/>
<link rel="Prev" href="multiple.htm" title="Previous" type="text/html"/>
<link rel="Next" href="releas.htm" title="Next" type="text/html"/>
<link rel="alternate" href="E48437-08.pdf" title="PDF version" type="application/pdf"/>
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/header.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/footer.css"/>
<link rel="stylesheet" type="text/css" href="../dcommon/css/fonts.css"/>
<link rel="stylesheet" href="../dcommon/css/foundation.css"/>
<link rel="stylesheet" href="../dcommon/css/codemirror.css"/>
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css"/>
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css"/>
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="/s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet" href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen"/>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-C56D67AE-BE02-47C4-915F-8D56E0CE972D"></a> <span id="PAGE" style="display:none;">19/29</span> <!-- End Header -->
<a id="OLSAG3416"></a>
<h1 id="OLSAG-GUID-C56D67AE-BE02-47C4-915F-8D56E0CE972D" class="sect1"><span class="enumeration_chapter">12</span> Performing DBA Functions Under&nbsp;Oracle&nbsp;Label&nbsp;Security</h1>
<div>
<p>Oracle Label Security supports the standard Oracle Database utilities, but certain restrictions apply, which may require extra steps to get the expected results.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-A55AFF2A-8023-4BA3-89ED-936F4683E526" title="Oracle Data Pump enables high-speed movement of data and metadata from one database to another.">Oracle Data Pump Export Use with Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-DD40309D-876E-4CA6-B500-CCB6F6120BBC" title="Oracle Data Pump enables high-speed movement of data and metadata from one database to another.">Data Pump Import Use with Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-15D0874D-25CF-473C-99A2-E81B8AA2B027" title="SQL*Loader moves data from external files into tables in Oracle Database.">SQL*Loader Use with Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-455A7577-4A87-4BC9-84B4-B4B2CE134A84" title="You can achieve optimal performance with Oracle Label Security.">Performance Tips for Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-0670C065-7168-4A89-88A0-73B6ACD12469" title="You can create and configure additional databases after you install Oracle Label Security.">Creation of Additional Databases After Installation</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-29CC4255-87FA-49A7-9B2C-B0C53E13A36C" title="You should be aware of how to manage Oracle Label Security upgrades and downgrades.">Oracle Label Security Upgrades and Downgrades</a></p>
</li>
</ul>
</div>
<a id="OLSAG3417"></a>
<div class="props_rev_3"><a id="GUID-A55AFF2A-8023-4BA3-89ED-936F4683E526"></a>
<h2 id="OLSAG-GUID-A55AFF2A-8023-4BA3-89ED-936F4683E526" class="sect2">Oracle Data Pump Export Use with Oracle Label Security</h2>
<div>
<p>Oracle Data Pump enables high-speed movement of data and metadata from one database to another.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-DDCBC9AF-0590-410A-8DD2-313BFF461FCF" title="Starting with Oracle Database 12c, Oracle Label Security metadata in the LBACSYS schema can be included when doing a full database export and import operation.">Full Database Export</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-C34DA23C-39FD-4132-ABE2-228F929477D2" title="The Data Pump export utility functions in the standard way under Oracle Label Security.">Schema and Table-Level Export</a></p>
</li>
</ul>
</div>
<a id="OLSAG3673"></a>
<div class="props_rev_3"><a id="GUID-DDCBC9AF-0590-410A-8DD2-313BFF461FCF"></a>
<h3 id="OLSAG-GUID-DDCBC9AF-0590-410A-8DD2-313BFF461FCF" class="sect3">Full Database Export</h3>
<div>
<p>Starting with Oracle Database 12<span class="italic">c</span>, Oracle Label Security metadata in the <code class="codeph">LBACSYS</code> schema can be included when doing a full database export and import operation.</p>
<p>The source database can be Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3), or higher, but the target database must be Oracle Database 12<span class="italic">c</span> or higher.</p>
<p>Before starting the Data Pump import on the target database, you must enable Oracle Label Security.</p>
</div>
</div>
<a id="OLSAG3674"></a>
<div class="props_rev_3"><a id="GUID-C34DA23C-39FD-4132-ABE2-228F929477D2"></a>
<h3 id="OLSAG-GUID-C34DA23C-39FD-4132-ABE2-228F929477D2" class="sect3">Schema and Table-Level Export</h3>
<div>
<p>The Data Pump export utility functions in the standard way under Oracle Label Security.</p>
<p>There are, however, a few differences resulting from the enforcement of Oracle Label Security policies.</p>
<div class="infobox-note" id="GUID-C34DA23C-39FD-4132-ABE2-228F929477D2__GUID-4C5D94C0-EFA1-4CF7-9EF5-4D34559D886F">
<p class="notep1">Note:</p>
<p>You must have the <code class="codeph">EXEMPT ACCESS POLICY</code> privilege in order to export all rows in the table, or else no rows are exported.</p>
</div>
<ul style="list-style-type: disc;">
<li>
<p>For any tables protected by an Oracle Label Security policy, only rows with labels authorized for read access are exported. Unauthorized rows are not included in the export file. Consequently, to export all the data in protected tables, you must have a privilege (such as <code class="codeph">FULL</code> or <code class="codeph">READ</code>) that gives you complete access.</p>
</li>
<li>
<p>SQL statements to reapply policies are exported along with tables and schemas that are exported. These statements are carried out during import to reapply policies with the same enforcement options as in the original database.</p>
</li>
<li>
<p>The <code class="codeph">HIDE</code> property is not exported. When protected tables are exported, the label columns in those tables are also exported (as numeric values). However, if a label column is hidden, then it is exported as a normal, unhidden column.</p>
</li>
<li>
<p>The user must have <code class="codeph">EXEMPT ACCESS POLICY</code> in order to export all rows in the table, or else no rows are exported.</p>
</li>
</ul>
</div>
</div>
</div>
<a id="OLSAG3419"></a>
<div class="props_rev_3"><a id="GUID-DD40309D-876E-4CA6-B500-CCB6F6120BBC"></a>
<h2 id="OLSAG-GUID-DD40309D-876E-4CA6-B500-CCB6F6120BBC" class="sect2">Data Pump Import Use with Oracle Label Security</h2>
<div>
<p>Oracle Data Pump enables high-speed movement of data and metadata from one database to another.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-08481322-AAFA-41BD-BE6B-AD142F65D6BA" title="Oracle Label Security metadata in the LBACSYS schema can be included when you perform a full database export and import operation.">Full Database Import for the LBACSYS Schema Metadata</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-647B919D-C858-49E8-A58F-3D9C7EE67A33" title="You can use the Oracle Data Pump Import utility functions under Oracle Label Security.">Schema and Table Level Import</a></p>
</li>
</ul>
</div>
<a id="OLSAG3675"></a>
<div class="props_rev_3"><a id="GUID-08481322-AAFA-41BD-BE6B-AD142F65D6BA"></a>
<h3 id="OLSAG-GUID-08481322-AAFA-41BD-BE6B-AD142F65D6BA" class="sect3">Full Database Import for the LBACSYS Schema Metadata</h3>
<div>
<p>Oracle Label Security metadata in the <code class="codeph">LBACSYS</code> schema can be included when you perform a full database export and import operation.</p>
<p>The source database can be Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3), or higher, but the target database must be Oracle Database 12<span class="italic">c</span> release 1 (12.1) or higher.</p>
<p>Oracle Data Pump import utility, <code class="codeph">impdp</code>, automatically imports Label Security metadata including policies, labels, user authorizations, schema and table policy enforcements. You must register and enable Oracle Label Security for the target database before beginning the import operation.</p>
<div class="infoboxnotealso" id="GUID-08481322-AAFA-41BD-BE6B-AD142F65D6BA__GUID-C613911A-D7E4-4F92-B732-D115B06F583A">
<p class="notep1">See Also:</p>
<p><a href="getting_started.htm#GUID-4B228EB5-A092-4D0F-9EFB-C2109D3BD85D" title="You can query the DBA_OLS_STATUS data dictionary view to find if Oracle Label Security has already been registered and enabled.">Checking if Oracle Label Security Has Been Registered and Enabled</a></p>
</div>
</div>
</div>
<a id="OLSAG3676"></a>
<div class="props_rev_3"><a id="GUID-647B919D-C858-49E8-A58F-3D9C7EE67A33"></a>
<h3 id="OLSAG-GUID-647B919D-C858-49E8-A58F-3D9C7EE67A33" class="sect3">Schema and Table Level Import</h3>
<div>
<p>You can use the Oracle Data Pump Import utility functions under Oracle Label Security.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-4F9E1500-D6A7-438A-89CE-57195296CE25" title="You can use the impdp under Oracle Label Security.">Requirements for Import Under Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-61D9E1E0-DAC2-49BA-A1F4-4D19561DCACC" title="The label definitions at the time of import must include all the policy labels used in the export file.">Definition of Data Labels for Import</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-47BFBCCC-388F-4C75-AD80-B365BC6660E2" title="When data type for policy label columns is NUMBER, they can be imported into databases that do not have Oracle Label Security installed.">Imports of Labeled Data Without Installing Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-41FADFE2-B854-447B-A79D-086FA56B2431" title="You can import unlabeled data into an existing table protected by an Oracle Label Security policy.">Imports of Unlabeled Data</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-A1E370F3-98C1-4EC9-A07E-6F6DABED45BA" title="A hidden column is exported as a normal column, but the fact that it was hidden is lost.">Importing Tables with Hidden Columns</a></p>
<div class="infoboxnotealso" id="GUID-647B919D-C858-49E8-A58F-3D9C7EE67A33__GUID-503DB2C7-9D8A-4C74-843B-A0552D37375E">
<p class="notep1">See Also:</p>
<p><a class="olink SUTIL300" target="_blank" href="../SUTIL/GUID-D11E340E-14C6-43B8-AB09-6335F0C1F71B.htm#SUTIL300"><span class="italic">Oracle Database Utilities</span></a></p>
</div>
</li>
</ul>
</div>
<a id="OLSAG3420"></a>
<div class="props_rev_3"><a id="GUID-4F9E1500-D6A7-438A-89CE-57195296CE25"></a>
<h4 id="OLSAG-GUID-4F9E1500-D6A7-438A-89CE-57195296CE25" class="sect4">Requirements for Import Under Oracle Label Security</h4>
<div>
<p>You can use the <code class="codeph">impdp</code> under Oracle Label Security.</p>
<p>To use the <code class="codeph">impdp</code> under Oracle Label Security, you must prepare the import database and ensure that the import user has the proper authorizations.</p>
</div>
<a id="OLSAG3421"></a>
<div class="props_rev_3"><a id="GUID-A5A22681-91FC-4EDA-906F-C121009FE446"></a>
<h5 id="OLSAG-GUID-A5A22681-91FC-4EDA-906F-C121009FE446" class="sect5">Preparing the Import Database</h5>
<div>
<p>Before you can use the Import utility with Oracle Label Security, you must prepare the import database.</p>
<ol>
<li class="stepexpand"><span>Ensure that Oracle Label Security is enabled. See <a href="getting_started.htm#GUID-4B228EB5-A092-4D0F-9EFB-C2109D3BD85D" title="You can query the DBA_OLS_STATUS data dictionary view to find if Oracle Label Security has already been registered and enabled.">Checking if Oracle Label Security Has Been Registered and Enabled</a>.</span></li>
<li class="stepexpand"><span>Create any Oracle Label Security policies that protect the data to be imported.</span>
<div>
<p>Ensure that the policies use the same column names as in the export database.</p>
</div>
</li>
<li class="stepexpand"><span>Define in the import database all of the label components and individual labels used in tables being imported.</span>
<div>
<p>Ensure that the same tag values are assigned to the policy labels in each database. (Note that if you are importing into a database from which you exported, then the components are most likely already defined.)</p>
</div>
</li>
</ol>
</div>
</div>
<a id="OLSAG3422"></a>
<div class="props_rev_3"><a id="GUID-4C7B1F32-8CB2-4B0B-9BBB-4B4F3019FE50"></a>
<h5 id="OLSAG-GUID-4C7B1F32-8CB2-4B0B-9BBB-4B4F3019FE50" class="sect5">Verification of Import User Authorizations</h5>
<div>
<p>You must be authorized to run the import operation for labels required to insert data and labels in the export file.</p>
<p>Errors will be raised upon import if you do not meet the following requirements.</p>
<ul style="list-style-type: disc;">
<li>
<p>To import tables or schemas with Label Security policies on them, you must have execute privilege on the <code class="codeph">SA_POLICY_ADMIN</code> package.</p>
<p>To ensure that all rows can be imported, you must have the <span class="italic"><code class="codeph">policy</code></span><code class="codeph">_DBA</code> role for all policies with data being imported. After each schema or table is imported, any policies from the export database are reapplied to the imported objects.</p>
</li>
<li>
<p>You must also have the ability to write all rows that have been exported as follows:</p>
<p><span class="bold">Requirement 2:</span></p>
<ul style="list-style-type: disc;">
<li>
<p>You can granted the <code class="codeph">FULL</code> privilege or given sufficient authorization to write all labels contained in the import file.</p>
</li>
<li>
<p>A user-defined labeling function can be applied to the table.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso" id="GUID-4C7B1F32-8CB2-4B0B-9BBB-4B4F3019FE50__GUID-75BF8C7F-2E13-4B94-92A4-EA5E45BE16C8">
<p class="notep1">See Also:</p>
<p><a href="intro.htm#GUID-97B4941D-079A-48D1-BF98-04DDB128F990" title="Oracle Label Security administrators have a set of package- and role-based privileges.">Duties of Oracle Label Security Administrators</a> for information about the <span class="italic"><code class="codeph">policy_</code></span><code class="codeph">DBA</code> role</p>
</div>
</div>
</div>
</div>
<a id="OLSAG3423"></a>
<div class="props_rev_3"><a id="GUID-61D9E1E0-DAC2-49BA-A1F4-4D19561DCACC"></a>
<h4 id="OLSAG-GUID-61D9E1E0-DAC2-49BA-A1F4-4D19561DCACC" class="sect4">Definition of Data Labels for Import</h4>
<div>
<p>The label definitions at the time of import must include all the policy labels used in the export file.</p>
<p>The <code class="codeph">DBA_SA_LABELS</code> data dictionary view lists data labels. You can use the views <code class="codeph">DBA_SA_LEVELS</code>, <code class="codeph">DBA_SA_COMPARTMENTS</code>, <code class="codeph">DBA_SA_GROUPS</code>, and in the export database to design SQL scripts that re-create the label components and labels for each policy in the import database. The following example shows how to generate a PL/SQL block that re-creates the individual labels for the <code class="codeph">HR</code> policy:</p>
<pre dir="ltr">set serveroutput on
BEGIN
   dbms_output.put_line(&#39;BEGIN&#39;);
   FOR l IN (SELECT label_tag, label 
                FROM dba_sa_labels
                WHERE policy_name=&#39;HR&#39;
                ORDER BY label_tag) LOOP
       dbms_output.put_line
           (&#39;  SA_LABEL_ADMIN.CREATE_LABEL(&#39;&#39;HR&#39;&#39;, &#39; ||
            l.label_tag || &#39;, &#39;&#39;&#39; || l.label || &#39;&#39;&#39;);&#39;);
   END LOOP;
   dbms_output.put_line (&#39;END;&#39;);
   dbms_output.put_line (&#39;/&#39;);
END;
/
</pre>
<p>If the individual labels do not exist in the import database with the same numeric values and the same character string representations as in the export database, then the label values in the imported tables will be meaningless. The numeric label value in the table may refer to a different character string representation, or it may be a label value that has not been defined at all in the import database.</p>
<p>If a user attempts to access rows containing invalid numeric labels, then the operation will fail.</p>
</div>
</div>
<a id="OLSAG3424"></a>
<div class="props_rev_3"><a id="GUID-47BFBCCC-388F-4C75-AD80-B365BC6660E2"></a>
<h4 id="OLSAG-GUID-47BFBCCC-388F-4C75-AD80-B365BC6660E2" class="sect4">Imports of Labeled Data Without Installing Oracle Label Security</h4>
<div>
<p>When data type for policy label columns is <code class="codeph">NUMBER</code>, they can be imported into databases that do not have Oracle Label Security installed.</p>
<p>In this case, the values in the policy label column are imported as numbers. Without the corresponding Oracle Label Security label definitions, the numbers will not reference any specific label.</p>
<p>Note that errors will be raised during the import if Oracle Label Security is not installed, because the SQL statements to reapply the policy to the imported tables and schemas will fail.</p>
</div>
</div>
<a id="OLSAG3425"></a>
<div class="props_rev_3"><a id="GUID-41FADFE2-B854-447B-A79D-086FA56B2431"></a>
<h4 id="OLSAG-GUID-41FADFE2-B854-447B-A79D-086FA56B2431" class="sect4">Imports of Unlabeled Data</h4>
<div>
<p>You can import unlabeled data into an existing table protected by an Oracle Label Security policy.</p>
<p>Either the <code class="codeph">LABEL_DEFAULT</code> option or a labeling function must be specified for each table being imported, so that the labels for the rows can be automatically initialized as they are inserted into the table.</p>
</div>
</div>
<a id="OLSAG3426"></a>
<div class="props_rev_3"><a id="GUID-A1E370F3-98C1-4EC9-A07E-6F6DABED45BA"></a>
<h4 id="OLSAG-GUID-A1E370F3-98C1-4EC9-A07E-6F6DABED45BA" class="sect4">Importing Tables with Hidden Columns</h4>
<div>
<p>A hidden column is exported as a normal column, but the fact that it was hidden is lost.</p>
<div class="section">
<p>If you want to preserve the hidden property of the label column, then you must first create the table in the import database.</p>
</div>
<!-- class="section" -->
<ol>
<li><span>Before you perform the import, create the table and apply the policy with the <code class="codeph">HIDE</code> option. This adds the policy label column to the table as a hidden column.</span></li>
<li><span>Remove the policy from the table, so that the enforcement options specified in the export file can be reapplied to the table during the import operation.</span></li>
<li><span>Perform the import with <code class="codeph">IGNORE=Y</code>. Setting the <code class="codeph">IGNORE</code> parameter to <code class="codeph">Y</code> ignores errors during import.</span></li>
<li><span>Manually apply the policy to the table with the <code class="codeph">HIDE</code> option.</span></li>
</ol>
</div>
</div>
</div>
</div>
<a id="OLSAG3427"></a>
<div class="props_rev_3"><a id="GUID-15D0874D-25CF-473C-99A2-E81B8AA2B027"></a>
<h2 id="OLSAG-GUID-15D0874D-25CF-473C-99A2-E81B8AA2B027" class="sect2">SQL*Loader Use with Oracle Label Security</h2>
<div>
<p>SQL*Loader moves data from external files into tables in Oracle Database.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-562C8E09-CD6C-4BFC-A1EF-71A0EFF19316" title="You can use SQL*Loader with the conventional path to load data into a database protected by Oracle Label Security.">Requirements for Using SQL*Loader Under Oracle Label Security</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-970FF282-CE32-457E-8BD4-58C6B168D034" title="If the policy column for a table is hidden, then you must use the HIDDEN keyword to convey this information to SQL*Loader.">Oracle Label Security Input to SQL*Loader</a></p>
<div class="infoboxnotealso" id="GUID-15D0874D-25CF-473C-99A2-E81B8AA2B027__GUID-6C9E4710-7FCA-433A-BEC6-5B8BED5FC455">
<p class="notep1">See Also:</p>
<p><a class="olink SUTIL3311" target="_blank" href="../SUTIL/GUID-8D037494-07FA-4226-B507-E1B2ED10C144.htm#SUTIL3311"><span class="italic">Oracle Database Utilities</span></a> for information about SQL*Loader, including log files, discard files, and bad files</p>
</div>
</li>
</ul>
</div>
<a id="OLSAG3428"></a>
<div class="props_rev_3"><a id="GUID-562C8E09-CD6C-4BFC-A1EF-71A0EFF19316"></a>
<h3 id="OLSAG-GUID-562C8E09-CD6C-4BFC-A1EF-71A0EFF19316" class="sect3">Requirements for Using SQL*Loader Under Oracle Label Security</h3>
<div>
<p>You can use SQL*Loader with the conventional path to load data into a database protected by Oracle Label Security.</p>
<p>Because SQL*Loader performs <code class="codeph">INSERT</code> operations, all of the standard requirements apply when using SQL*Loader on tables protected by Oracle Label Security policies.</p>
</div>
</div>
<a id="OLSAG3430"></a><a id="OLSAG3429"></a>
<div class="props_rev_3"><a id="GUID-970FF282-CE32-457E-8BD4-58C6B168D034"></a>
<h3 id="OLSAG-GUID-970FF282-CE32-457E-8BD4-58C6B168D034" class="sect3">Oracle Label Security Input to SQL*Loader</h3>
<div>
<p>If the policy column for a table is hidden, then you must use the <code class="codeph">HIDDEN</code> keyword to convey this information to SQL*Loader.</p>
<p>To specify row labels in the input file, you must include the policy label column in the <code class="codeph">INTO</code> <code class="codeph">TABLE</code> clause in the control file.</p>
<p>To load policy labels along with the data for each row, you can specify the <code class="codeph">CHAR_TO_LABEL</code> function or the <code class="codeph">TO_DATA_LABEL</code> function in the SQL*Loader control file.</p>
<div class="infobox-note" id="GUID-970FF282-CE32-457E-8BD4-58C6B168D034__GUID-E6B7A1DA-DFDF-4D61-A599-BEEF510795E5">
<p class="notep1">Note:</p>
<p>When Oracle Label Security is installed to work with Oracle Internet Directory, dynamic label generation is not allowed, because labels are managed centrally in Oracle Internet Directory, using <code class="codeph">olsadmintool</code> commands. Refer to <a href="appxb.htm#GUID-CEBDC422-8872-46C1-8A3B-F1161539DD22" title="Oracle Label Security provides command-line tools for using Oracle Internet Directory.">Command-line Tools for Label Security Using Oracle Internet Directory</a>.</p>
<p>When Oracle Label Security is directory-enabled, then the function <code class="codeph">TO_DATA_LABEL</code> is not available and generates an error message if used.</p>
</div>
<p><a href="utilities.htm#GUID-970FF282-CE32-457E-8BD4-58C6B168D034__CJAEIDCD" title="This table shows several variable choices for the form of data submitted to SQL*Loader and explains the results for each.">Table 12-1</a> shows the variations that you can use when you load Oracle Label Security data with SQL*Loader.</p>
<div class="tblformalwide" id="GUID-970FF282-CE32-457E-8BD4-58C6B168D034__CJAEIDCD">
<p class="titleintable">Table 12-1 Input Choices for Oracle Label Security Input to SQL*Loader</p>
<table class="cellalignment3816" title="Input Choices for Oracle Label Security Input to SQL*Loader" summary="This table shows several variable choices for the form of data submitted to SQL*Loader and explains the results for each.">
<thead>
<tr class="cellalignment3810">
<th class="cellalignment3817" id="d45583e1279">Form of Data</th>
<th class="cellalignment3818" id="d45583e1282">Explanation of Results</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3810">
<td class="cellalignment3819" id="d45583e1287" headers="d45583e1279">
<p><code class="codeph">col1 hidden integer external</code></p>
</td>
<td class="cellalignment3820" headers="d45583e1287 d45583e1282">
<p>Hidden column loaded with tag value of data directly from data file</p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3819" id="d45583e1295" headers="d45583e1279">
<p><code class="codeph">col2 hidden char(5) &#34;func(:col2)&#34;</code></p>
</td>
<td class="cellalignment3820" headers="d45583e1295 d45583e1282">
<p>Hidden column loaded with character value of data from data <code class="codeph">file.func()</code> used to translate between the character label and its tag value. Note: <code class="codeph">func()</code> might be <code class="codeph">char_to_label()</code>.</p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3819" id="d45583e1312" headers="d45583e1279">
<p><code class="codeph">col3 hidden &#34;func(:col3)&#34;</code></p>
</td>
<td class="cellalignment3820" headers="d45583e1312 d45583e1282">
<p>Same as in <code class="codeph">col2</code>, field type defaults to <span class="bold">char</span></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3819" id="d45583e1325" headers="d45583e1279">
<p><code class="codeph">col4 hidden expression &#34;func(:col4)&#34;</code></p>
</td>
<td class="cellalignment3820" headers="d45583e1325 d45583e1282">
<p>Hidden column not mapped to input <code class="codeph">data.func()</code> will be called to provide the label value. This could be a user function.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>For example, the following is a valid <code class="codeph">INTO</code> <code class="codeph">TABLE</code> clause in a control file that is loading data into the <code class="codeph">DEPT</code> table:</p>
<pre dir="ltr">INTO TABLE dept
(hr_label HIDDEN POSITION (1:22) CHAR &#34;CHAR_TO_LABEL(&#39;HR&#39;,:hr_label)&#34;,
deptno    POSITION (23:26) INTEGER EXTERNAL,
dname     POSITION (27:40) CHAR,
loc       POSITION(41,54)  CHAR)
</pre>
<p>The following could be an entry in the data file specified by this control file:</p>
<pre dir="ltr">HS:FN                  231 ACCOUNTING  REDWOOD SHORES 
</pre></div>
</div>
</div>
<a id="OLSAG3431"></a>
<div class="props_rev_3"><a id="GUID-455A7577-4A87-4BC9-84B4-B4B2CE134A84"></a>
<h2 id="OLSAG-GUID-455A7577-4A87-4BC9-84B4-B4B2CE134A84" class="sect2">Performance Tips for Oracle Label Security</h2>
<div>
<p>You can achieve optimal performance with Oracle Label Security.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-30EC3194-89E7-4141-ADC5-50D4AED7E3BC" title="You can run the ANALYZE statement on the Oracle Label Security data dictionary tables in the LBACSYS schema.">Use of ANALYZE to Improve Oracle Label Security Performance</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-D674659F-D2A3-4714-9B86-03F3EF1C1E49" title="Creating the appropriate type of index on the policy label column improves the performance of user-raised queries on protected tables.">Creation of Indexes on the Policy Label Column</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB" title="For optimal performance, you can plan a strategy for assigning values to label tags.">Label Tag Strategy Plan to Enhance Performance</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-EA5143CF-C4A3-48E8-B7E8-6B379C7756ED" title="Using a numeric ordering strategy with the numeric label tags applied to the labels can a basis for Oracle Database data partitioning.">Partitioned Data Based on Numeric Label Tags</a></p>
</li>
</ul>
</div>
<a id="OLSAG3432"></a>
<div class="props_rev_3"><a id="GUID-30EC3194-89E7-4141-ADC5-50D4AED7E3BC"></a>
<h3 id="OLSAG-GUID-30EC3194-89E7-4141-ADC5-50D4AED7E3BC" class="sect3">Use of ANALYZE to Improve Oracle Label Security Performance</h3>
<div>
<p>You can run the <code class="codeph">ANALYZE</code> statement on the Oracle Label Security data dictionary tables in the <code class="codeph">LBACSYS</code> schema.</p>
<p>This enables the cost-based optimizer to improve execution plans on queries, which improves Oracle Label Security performance.</p>
<p>See <a class="olink SQLRF01105" target="_blank" href="../SQLRF/statements_4005.htm#SQLRF01105"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the <code class="codeph">ANALYZE</code> syntax.</p>
<p>Running <code class="codeph">ANALYZE</code> on application tables improves the application SQL performance.</p>
</div>
</div>
<a id="OLSAG3433"></a>
<div class="props_rev_3"><a id="GUID-D674659F-D2A3-4714-9B86-03F3EF1C1E49"></a>
<h3 id="OLSAG-GUID-D674659F-D2A3-4714-9B86-03F3EF1C1E49" class="sect3">Creation of Indexes on the Policy Label Column</h3>
<div>
<p>Creating the appropriate type of index on the policy label column improves the performance of user-raised queries on protected tables.</p>
<p>If you have applied an Oracle Label Security policy on a database table in a particular schema, then you should compare the number of different labels to the amount of data. Based on this information, you can decide which type of index to create on the policy label column.</p>
<ul style="list-style-type: disc;">
<li>
<p>If the cardinality of data in the policy label column (that is, the number of labels compared to the number of rows) is low, then consider creating a bitmapped index.</p>
</li>
<li>
<p>If the cardinality of data in the policy label column is high, then consider creating a B-tree index.</p>
</li>
</ul>
<p>Consider the following case, in which the <code class="codeph">EMP</code> table is protected by an Oracle Label Security policy with the <code class="codeph">READ_CONTROL</code> enforcement option set, and <code class="codeph">HR_LABEL</code> is the name of the policy label column. A user raises the following query:</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP;
</pre>
<p>In this situation, Oracle Label Security adds a predicate based on the label column. For example:</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP
  WHERE hr_label=100;
</pre>
<p>In this way, Oracle Label Security uses the security label to restrict the rows that are processed, based on the user&#39;s authorizations. To improve performance of this query, you could create an index on the <code class="codeph">HR_LABEL</code> column.</p>
<p>Consider a more complex query (once again, with <code class="codeph">READ_CONTROL</code> applied to the EMP table):</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP
  WHERE deptno=10
</pre>
<p>Again, Oracle Label Security adds a predicate based on the label column:</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP
  WHERE deptno=10
  AND hr_label=100;
</pre>
<p>In this case, you might want to create a composite index based on the <code class="codeph">DEPTNO</code> and <code class="codeph">HR_LABEL</code> columns, to improve application performance.</p>
</div>
</div>
<a id="OLSAG3435"></a><a id="OLSAG3436"></a><a id="OLSAG3434"></a>
<div class="props_rev_3"><a id="GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB"></a>
<h3 id="OLSAG-GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB" class="sect3">Label Tag Strategy Plan to Enhance Performance</h3>
<div>
<p>For optimal performance, you can plan a strategy for assigning values to label tags.</p>
<p>In general, it is best to assign higher numeric values to labels with higher sensitivity levels.</p>
<p>This is because, typically, many more users can see data at comparatively low levels and fewer users at higher levels can see many levels of data.</p>
<p>In addition, with <code class="codeph">READ_CONTROL</code> set, Oracle Label Security generates a predicate that uses a <code class="codeph">BETWEEN</code> clause to restrict the rows to be processed by the query. As illustrated in the following example, if the higher-sensitivity labels do not have a higher label tag than the lower-sensitivity labels, then the query will potentially examine a larger set of rows. This will affect performance.</p>
<p><a href="utilities.htm#GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB__CJAEBGIE" title="This table shows an example of correct values for label tags, explained in the subsequent discussion in text.">Table 12-2</a> shows a set of label tags assigned as follows:</p>
<div class="tblformal" id="GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB__CJAEBGIE">
<p class="titleintable">Table 12-2 Label Tag Performance Example: Correct Values</p>
<table class="cellalignment3821" title="Label Tag Performance Example: Correct Values" summary="This table shows an example of correct values for label tags, explained in the subsequent discussion in text.">
<thead>
<tr class="cellalignment3810">
<th class="cellalignment3822" id="d45583e1713">Label</th>
<th class="cellalignment3823" id="d45583e1716">Label Tag</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1721" headers="d45583e1713">
<p><code class="codeph">TS:A</code>,<code class="codeph">B</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1721 d45583e1716">
<p><code class="codeph">100</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1733" headers="d45583e1713">
<p><code class="codeph">S:A</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1733 d45583e1716">
<p><code class="codeph">50</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1742" headers="d45583e1713">
<p><code class="codeph">S</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1742 d45583e1716">
<p><code class="codeph">20</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1751" headers="d45583e1713">
<p><code class="codeph">U:A</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1751 d45583e1716">
<p><code class="codeph">10</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>Here, a user whose maximum authorization is S:A can potentially access data at labels <code class="codeph">S:A</code>, <code class="codeph">S</code>, and <code class="codeph">U:A</code>. Consider what happens when this user raises the following query:</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP
</pre>
<p>Oracle Label Security adds a predicate that includes a <code class="codeph">BETWEEN</code> clause (based on the maximum and minimum authorizations) to restrict the set of rows this user can see:</p>
<pre dir="ltr">SELECT COUNT (*) FROM SCOTT.EMP
  WHERE hr_label BETWEEN 10 AND 50;
</pre>
<p>Performance improves, because the query examines only a subset of data based on the user&#39;s authorizations. It does not fruitlessly process rows that the user is not authorized to access.</p>
<p><a href="utilities.htm#GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB__CJACCBAD" title="This table shows incorrect values for label tags, as explained in the subsequent text.">Table 12-3</a> shows how unnecessary work is performed if the tag values were assigned as follows:</p>
<div class="tblformal" id="GUID-5AF3CEC2-A8BD-48C9-908C-64015C1C58AB__CJACCBAD">
<p class="titleintable">Table 12-3 Label Tag Performance Example: Incorrect Values</p>
<table class="cellalignment3821" title="Label Tag Performance Example: Incorrect Values" summary="This table shows incorrect values for label tags, as explained in the subsequent text.">
<thead>
<tr class="cellalignment3810">
<th class="cellalignment3822" id="d45583e1798">Label</th>
<th class="cellalignment3823" id="d45583e1801">Label Tag</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1806" headers="d45583e1798">
<p><code class="codeph">TS:A</code>,<code class="codeph">B</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1806 d45583e1801">
<p><code class="codeph">50</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1818" headers="d45583e1798">
<p><code class="codeph">S:A</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1818 d45583e1801">
<p><code class="codeph">100</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1827" headers="d45583e1798">
<p><code class="codeph">S</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1827 d45583e1801">
<p><code class="codeph">20</code></p>
</td>
</tr>
<tr class="cellalignment3810">
<td class="cellalignment3824" id="d45583e1836" headers="d45583e1798">
<p><code class="codeph">U:A</code></p>
</td>
<td class="cellalignment3825" headers="d45583e1836 d45583e1801">
<p><code class="codeph">10</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>In this case, the user with <code class="codeph">S:A</code> authorization can see only some of the labels between 100 and 10. Although the user cannot see <code class="codeph">TS:A</code>,<code class="codeph">B</code> labels (that is, rows with a label tag of 50). A query would nonetheless pick up and process these rows, even though the user ultimately will not have access to them.</p>
</div>
</div>
<a id="OLSAG3437"></a>
<div class="props_rev_3"><a id="GUID-EA5143CF-C4A3-48E8-B7E8-6B379C7756ED"></a>
<h3 id="OLSAG-GUID-EA5143CF-C4A3-48E8-B7E8-6B379C7756ED" class="sect3">Partitioned Data Based on Numeric Label Tags</h3>
<div>
<p>Using a numeric ordering strategy with the numeric label tags applied to the labels can a basis for Oracle Database data partitioning.</p>
<p>Depending on the application, partitioning data based on label values may or may not be useful. Consider, for example, a business-hosting CRM application to which many companies subscribe. In the same <code class="codeph">EMP</code> table, there might be rows (and labels) for Subscriber 1 and Subscriber 2. That is, information for both companies can be stored in the same table, as long as it is labeled differently. In this case, employees of Subscriber 1 will never need to access data for Subscriber 2, so it might make sense to partition based on label. You could put rows for Subscriber 1 in one partition, and rows for Subscriber2 in a different partition. When a query is raised, it will access only one or the other partition, depending on the label. Performance improves because partitions that are not relevant are not examined by the query.</p>
<p>The following example shows this is done. It places labels in the 2000 series on one partition, labels in the 3000 series on another partition, and labels in the 4000 series on a third partition.</p>
<pre dir="ltr">CREATE TABLE EMPLOYEE(
    EMPNO NUMBER(10) CONSTRAINT PK_EMPLOYEE PRIMARY KEY,
    ENAME VARCHAR2(10),
    JOB VARCHAR2(9),
    MGR NUMBER(4),
    HIREDATE DATE,
    SAL NUMBER(7,2),
    COMM NUMBER(7,2),
    DEPTNO NUMBER(4),
    HR_LABEL NUMBER(10))
    TABLESPACE PERF_DATA
    STORAGE (initial 2M
    NEXT 1M
    MINEXTENTS 1
    MAXEXTENTS unlimited)
    PARTITION BY RANGE (hr_label)
    (partition sx1 VALUES LESS THAN (2000) NOLOGGING,
     partition sx2 VALUES LESS THAN (3000),
     partition sx3 VALUES LESS THAN (4000)
 );
</pre></div>
</div>
</div>
<a id="OLSAG3438"></a>
<div class="props_rev_3"><a id="GUID-0670C065-7168-4A89-88A0-73B6ACD12469"></a>
<h2 id="OLSAG-GUID-0670C065-7168-4A89-88A0-73B6ACD12469" class="sect2">Creation of Additional Databases After Installation</h2>
<div>
<p>You can create and configure additional databases after you install Oracle Label Security.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-3FA2BF1D-AD12-41E4-87A9-4615CC7AF9FC" title="When you install Oracle Database Enterprise Edition and Oracle Label Security, an initial Oracle database is created.">About the Creation of Additional Databases After Installation</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-3053C786-0957-4653-A875-EA3F4364F8DF" title="You can configure Oracle Label Security if the database was installed with the label security schema is in the seed database.">Creating Additional Databases When the Label Security Schema Is in the Seed</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-972685EF-1868-470E-9A68-45E69CC35054" title="You can configure Oracle Label Security after a custom database installation.">Creating Additional Databases with the Custom Installation Option</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-3FA2BF1D-AD12-41E4-87A9-4615CC7AF9FC"></a>
<h3 id="OLSAG-GUID-3FA2BF1D-AD12-41E4-87A9-4615CC7AF9FC" class="sect3">About the Creation of Additional Databases After Installation</h3>
<div>
<p>When you install Oracle Database Enterprise Edition and Oracle Label Security, an initial Oracle database is created.</p>
<p>If you want to create additional databases, then you should do this using the Database Configuration Assistant. Alternatively, you can create additional databases by following the steps listed in <a class="olink ADMIN002" target="_blank" href="../ADMIN/create.htm#ADMIN002"><span><cite>Oracle Database Administrator&rsquo;s Guide</cite></span></a>.</p>
<p>Each time you create a new database, you must install the Oracle Label Security data dictionary tables, views, and packages into it, and create the <code class="codeph">LBACSYS</code> account.</p>
<p>For the first database, this is done automatically when you install Oracle Label Security, regardless of whether or not you choose the custom install. If you do not choose the custom install, then you are installing the database with the label security schema in the seed.</p>
<p>To create additional databases, there are different processes for configuring label security, depending on whether the first database was installed with the custom install or with the label security schema in the seed.</p>
<p>If you initially chose custom install, but did not install label security, you can install and configure label security using either process described in this section.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-3053C786-0957-4653-A875-EA3F4364F8DF"></a>
<h3 id="OLSAG-GUID-3053C786-0957-4653-A875-EA3F4364F8DF" class="sect3">Creating Additional Databases When the Label Security Schema Is in the Seed</h3>
<div>
<p>You can configure Oracle Label Security if the database was installed with the label security schema is in the seed database.</p>
<ol>
<li><span>Select the Oracle Label Security option in DBCA.</span></li>
<li><span>Select the check box to configure Oracle Label Security.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-972685EF-1868-470E-9A68-45E69CC35054"></a>
<h3 id="OLSAG-GUID-972685EF-1868-470E-9A68-45E69CC35054" class="sect3">Creating Additional Databases with the Custom Installation Option</h3>
<div>
<p>You can configure Oracle Label Security after a custom database installation.</p>
<ol>
<li class="stepexpand"><span>Connect to the Oracle Database instance as user <code class="codeph">SYS</code>, using the <code class="codeph">AS SYSDBA</code> syntax.</span></li>
<li class="stepexpand"><span>Run the script <code class="codeph">$ORACLE_HOME/rdbms/admin/catols.sql</code>.</span>
<div>
<p>This script installs the label-based framework, data dictionary, data types, and packages. After the script is run, the <code class="codeph">LBACSYS</code> account exists, with the password <code class="codeph">LBACSYS</code>. All the Oracle Label Security packages exist under this account.</p>
</div>
</li>
<li class="stepexpand"><span>Change the default password of the <code class="codeph">LBACSYS</code> user.</span></li>
</ol>
</div>
</div>
</div>
<a id="OLSAG3686"></a>
<div class="props_rev_3"><a id="GUID-29CC4255-87FA-49A7-9B2C-B0C53E13A36C"></a>
<h2 id="OLSAG-GUID-29CC4255-87FA-49A7-9B2C-B0C53E13A36C" class="sect2">Oracle Label Security Upgrades and Downgrades</h2>
<div>
<p>You should be aware of how to manage Oracle Label Security upgrades and downgrades.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-F0BFFD66-F41B-4A1F-8582-1B96448619E4" title="Oracle provides preprocess scripts that perform upgrade and downgrade operations.">About Oracle Label Security Upgrades and Downgrades</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-8B36BAE8-B159-418B-8E83-4FF27B60F50C" title="Oracle provides a preprocess script that you must run before you perform an upgrade.">Oracle Label Security Upgrades</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-721C4F6D-B45D-4E45-A256-767A973888AE" title="Oracle provides a preprocess script that you must run before you downgrade.">Oracle Label Security Downgrades</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-F0BFFD66-F41B-4A1F-8582-1B96448619E4"></a>
<h3 id="OLSAG-GUID-F0BFFD66-F41B-4A1F-8582-1B96448619E4" class="sect3">About Oracle Label Security Upgrades and Downgrades</h3>
<div>
<p>Oracle provides preprocess scripts that perform upgrade and downgrade operations.</p>
<p>As a safety measure, before you run either the upgrade or downgrade preprocess script, Oracle recommends that you back up your audit records. To do this, you can archive the audit trail as described in <a class="olink DBSEG732" target="_blank" href="../DBSEG/audit_admin.htm#DBSEG732"><span><cite>Oracle Database Security Guide</cite></span></a>.</p>
<p>Before they run, the preprocess scripts check that there is enough space in the audit tablespace to copy all the audit records, and will exit without processing if there is not.</p>
<p>You may continue running your applications on the database while OLS preprocess scripts are running.</p>
<div class="infoboxnotealso" id="GUID-F0BFFD66-F41B-4A1F-8582-1B96448619E4__GUID-AA107D26-8596-4429-BF00-CBF100375D65">
<p class="notep1">See Also:</p>
<p><a class="olink UPGRD60015" target="_blank" href="../UPGRD/preup.htm#UPGRD60015"><span><cite>Oracle Database Upgrade Guide</cite></span></a> for requirements for upgrading databases that use Oracle Label Security and Oracle Database Vault</p>
</div>
</div>
</div>
<a id="OLSAG3687"></a>
<div class="props_rev_3"><a id="GUID-8B36BAE8-B159-418B-8E83-4FF27B60F50C"></a>
<h3 id="OLSAG-GUID-8B36BAE8-B159-418B-8E83-4FF27B60F50C" class="sect3">Oracle Label Security Upgrades</h3>
<div>
<p>Oracle provides a preprocess script that you must run before you perform an upgrade.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-BF9E5733-1DE2-4F43-9D57-8382A84935D6" title="You must upgrade Oracle Label Security for pre-Oracle Database 12c release 1 (12.1) databases.">About Oracle Label Security Upgrades</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-5B4EAB09-99C9-4644-8BB5-B8C739C219CC" title="You can run the Oracle Label Security preprocess script before upgrading.">Running the Oracle Label Security Preprocess Script Before Upgrading</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-BF9E5733-1DE2-4F43-9D57-8382A84935D6"></a>
<h4 id="OLSAG-GUID-BF9E5733-1DE2-4F43-9D57-8382A84935D6" class="sect4">About Oracle Label Security Upgrades</h4>
<div>
<p>You must upgrade Oracle Label Security for pre-Oracle Database 12<span class="italic">c</span> release 1 (12.1) databases.</p>
<div class="infobox-note" id="GUID-BF9E5733-1DE2-4F43-9D57-8382A84935D6__GUID-B7AD7E2D-F8A8-492B-89B8-648663337CBB">
<p class="notep1">Note:</p>
<p>Running the <code class="codeph">olspreupgrade.sql</code> script before upgrading is mandatory for upgrading databases earlier than Oracle Database 12<span class="italic">c</span> release (12.1) that use Oracle Label Security or Database Vault.</p>
<p>After you have upgraded to Oracle Database release 12<span class="italic">c</span> or later, you do not need to run the Oracle Label Security preprocessing script when you patch or upgrade the database.</p>
</div>
<p>Before performing the OLS upgrade process, you must run the Oracle Label Security preprocess upgrade script, <code class="codeph">olspreupgrade.sql</code>, to process the <code class="codeph">AUD$</code> table contents. The OLS upgrade moves the <code class="codeph">AUD$</code>table from the <code class="codeph">SYSTEM</code> schema to the <code class="codeph">SYS</code> schema. The <code class="codeph">olspreupgrade.sql</code> script is a preprocessing script required for this move. It creates a temporary table, <code class="codeph">PREUPG_AUD$</code>, in the <code class="codeph">SYS</code> schema and moves the <code class="codeph">SYSTEM.AUD$</code> records to <code class="codeph">SYS.PREUPG_AUD$</code>. The moved records can no longer be viewed through the <code class="codeph">DBA_AUDIT_TRAIL</code> view, but can be viewed by directly accessing the <code class="codeph">SYS.PREUPG_AUD$</code> table, until the upgrade completes. Once the upgrade completes, the <code class="codeph">SYS.PREUPG_AUD$</code> table is permanently deleted and all audit records, can be viewed through the <code class="codeph">DBA_AUDIT_TRAIL</code> view.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-5B4EAB09-99C9-4644-8BB5-B8C739C219CC"></a>
<h4 id="OLSAG-GUID-5B4EAB09-99C9-4644-8BB5-B8C739C219CC" class="sect4">Running the Oracle Label Security Preprocess Script Before Upgrading</h4>
<div>
<p>You can run the Oracle Label Security preprocess script before upgrading.</p>
<ol>
<li class="stepexpand"><span>Copy the <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">/rdbms/admin/olspreupgrade.sql</code> script from the newly installed Oracle home to the Oracle home of the database to be upgraded.</span></li>
<li class="stepexpand"><span>Connect to the database to be upgraded. At the system prompt, enter:</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSDBA
Enter password <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Run the Oracle Label Security preprocess script:</span>
<div>
<pre dir="ltr">@$ORACLE_HOME/rdbms/admin/olspreupgrade.sql
</pre></div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-5B4EAB09-99C9-4644-8BB5-B8C739C219CC__GUID-13D2CC0F-FD80-4DCE-ABD1-5192A1DC9890">
<p class="notep1">Note:</p>
<p>The upgrade status for the Oracle Label Security component will be marked <code class="codeph">INVALID</code> if the Oracle Label Security preprocess script reports an error. If this happens, you must correct the errors and then rerun the upgrade process. See <a class="olink UPGRD12412" target="_blank" href="../UPGRD/upgrade.htm#UPGRD12412"><span><cite>Oracle Database Upgrade Guide</cite></span></a> for more information about rerunning the upgrade process for Oracle Database.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="OLSAG3688"></a>
<div class="props_rev_3"><a id="GUID-721C4F6D-B45D-4E45-A256-767A973888AE"></a>
<h3 id="OLSAG-GUID-721C4F6D-B45D-4E45-A256-767A973888AE" class="sect3">Oracle Label Security Downgrades</h3>
<div>
<p>Oracle provides a preprocess script that you must run before you downgrade.</p>
<p>Topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="utilities.htm#GUID-36A612EC-E711-408E-AFBB-06BA812E301B" title="You can downgrade from an Oracle Database 12c release 1 (12.1) or later database that uses Oracle Label Security or Oracle Database Vault.">About Oracle Label Security Downgrades</a></p>
</li>
<li>
<p><a href="utilities.htm#GUID-932AB688-83A8-44BA-8D8B-9000EFDFA3C6" title="You must connect as SYS wth the SYSDBA administrative privilege before running the Oracle Label Security preprocess script for a downgrade.">Running the Oracle Label Security Preprocess Script Before Downgrading</a></p>
</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-36A612EC-E711-408E-AFBB-06BA812E301B"></a>
<h4 id="OLSAG-GUID-36A612EC-E711-408E-AFBB-06BA812E301B" class="sect4">About Oracle Label Security Downgrades</h4>
<div>
<p>You can downgrade from an Oracle Database 12<span class="italic">c</span> release 1 (12.1) or later database that uses Oracle Label Security or Oracle Database Vault.</p>
<p>To do this, you must run the OLS preprocessing script, <code class="codeph">olspredowngrade.sql</code> to process the <code class="codeph">AUD$</code> table contents. The OLS downgrade script moves the <code class="codeph">AUD$</code> table from the <code class="codeph">SYS</code> schema to the <code class="codeph">SYSTEM</code> schema. The <code class="codeph">olspredowngrade.sql</code> script is a processing script required in preparation for this move. It creates a temporary table, <code class="codeph">PREDWG_AUD$</code>, in the <code class="codeph">SYSTEM</code> schema and moves the <code class="codeph">SYS.AUD$</code> records to <code class="codeph">SYSTEM.PREDWG_AUD$</code>. The moved records can no longer be viewed through the <code class="codeph">DBA_AUDIT_TRAIL</code> view, but you can view them by directly accessing the <code class="codeph">SYSTEM.PREDWG_AUD$</code> table until the downgrade completes. Once the downgrade completes, the <code class="codeph">SYSTEM.PREDWG_AUD$</code> table is permanently deleted. At this point, all audit records are available for viewing in the <code class="codeph">DBA_AUDIT_TRAIL</code> data dictionary view.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-932AB688-83A8-44BA-8D8B-9000EFDFA3C6"></a>
<h4 id="OLSAG-GUID-932AB688-83A8-44BA-8D8B-9000EFDFA3C6" class="sect4">Running the Oracle Label Security Preprocess Script Before Downgrading</h4>
<div>
<p>You must connect as <code class="codeph">SYS</code> wth the <code class="codeph">SYSDBA</code> administrative privilege before running the Oracle Label Security preprocess script for a downgrade.</p>
<ol>
<li class="stepexpand"><span>Connect to the database to be downgraded. At the system prompt, enter:</span>
<div>
<pre dir="ltr">CONNECT SYS AS SYSDBA
Enter password <span class="italic">password</span>
</pre></div>
</li>
<li class="stepexpand"><span>Run the OLS preprocess downgrade script:</span>
<div>
<pre dir="ltr">@$ORACLE_HOME/rdbms/admin/olspredowngrade.sql
</pre></div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3809">
<tr>
<td class="cellalignment3826">
<table class="cellalignment3814">
<tr>
<td class="cellalignment3813"><a href="multiple.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3813"><a href="releas.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2015, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3828">
<table class="cellalignment3812">
<tr>
<td class="cellalignment3813"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3813"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3813"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3813"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3813"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3813"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>


</body></html>